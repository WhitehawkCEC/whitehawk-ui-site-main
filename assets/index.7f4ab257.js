import{F as x}from"./FormButton.2c7aa68c.js";import{L as k,bs as w,c7 as d,c4 as R,d as c,dn as A,aF as D,aK as F,dp as $,n as K}from"./index.aafe3051.js";import{A as E}from"./AccountCreateInputInDepthBlackKiteCmmcV2Input.e8806a7c.js";import{u as L}from"./useCompanyScorecardTemplates.dab767df.js";import{u as M}from"./useUsers.2d05794c.js";import{e as n}from"./attributeValue.ea53a720.js";import{s as T}from"./index.70f144e5.js";import{t as V}from"./index.cb9e6c77.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./arrow-path.24b87f73.js";import"./TransitionExpand.87c34784.js";import"./BundleSolutionInput.034e45f0.js";import"./GradeLetterDisplay.9b018fc0.js";import"./BlackKiteProgressBar.9d894a4f.js";import"./index.ebbce841.js";import"./ToolTip.d72f2526.js";import"./ratingScoreDescription.3b48b1ea.js";import"./CollapsibleSection.8734f3e0.js";import"./_baseIteratee.8d5ecb17.js";import"./_Uint8Array.20ed1722.js";import"./keys.3908ec27.js";import"./_baseIsEqual.2778ae07.js";import"./_arrayMap.dcea68f3.js";import"./lodash.5cd26cbd.js";import"./ObjectDisplay.dd3e9a35.js";import"./DynamicForm.f3fe2fcc.js";import"./useProducts.76c15f45.js";import"./useScorecardTemplates.3e93667b.js";import"./useBlackKiteEntities.7a531f10.js";const i={};i.setup=(a,r)=>{const t=d("id"),s=d("subscriptionId"),p=M.list(),m=R.read(t),v=L.get(t),_=c(()=>{if(m.data.value){const{id:o,name:e}=m.data.value;return{id:o,name:e}}}),y=c(()=>{var o;return(o=p.data.value)==null?void 0:o.map(e=>({id:{value:n(e,"sub")},name:n(e,"name")||"",title:n(e,"custom:title")||"",email:n(e,"email"),phone:n(e,"phone_number")||""})).find(e=>e.email==="consultingservices@whitehawk.com")}),l=new Date,h=l.getUTCFullYear(),I=`Q${Math.ceil((l.getMonth()+1)/4)}`,u=T(c(()=>{var o;return{template:{value:((o=v.data.value)==null?void 0:o.split("/")[1])||""},data:{buyer:{company:_.value},analyst:y.value,status:{state:A.State.IN_PROGRESS,year:h,quarter:V(I)}}}})),S=c(()=>Boolean(p.data.value&&m.data.value)),b=D(),C=F(),B=$.create(t,s);async function g(){if(u.value){const o={scorecardInput:{oneofKind:"bk",bk:u.value}},{response:e}=await B.mutateAsync(o);e.scorecardId&&(b.success("Successfully created scorecard."),C.push(`/admin/companies/${t.value}/subscriptions/integrations/2/${s.value}/scorecards/in-depth/${e.scorecardId.value}`))}}return{accountId:t,scorecard:u,ready:S,createScorecard:g}};i.components=Object.assign({LoadingSpinner:k,BackButton:w,AccountCreateInputInDepthBlackKiteCmmcV2Input:E,FormButton:x},i.components);var j=function(){var a=this,r=a.$createElement,t=a._self._c||r;return a.ready?t("section",{staticClass:"space-y-6"},[t("div",{staticClass:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-4"},[t("BackButton"),t("BaseTypography",{attrs:{variant:"h5",component:"h2"}},[a._v(" Create Scorecard ")])],1),t("BaseSimpleCard",[t("form",{staticClass:"divide-y",on:{submit:function(s){return s.preventDefault(),a.createScorecard.apply(null,arguments)}}},[t("AccountCreateInputInDepthBlackKiteCmmcV2Input",{attrs:{"account-id":a.accountId},model:{value:a.scorecard,callback:function(s){a.scorecard=s},expression:"scorecard"}}),t("FormButton",{attrs:{action:"create"}})],1)])],1):t("LoadingSpinner")},q=[];const f={};var N=K(i,j,q,!1,O,null,null,null);function O(a){for(let r in f)this[r]=f[r]}const It=function(){return N.exports}();export{It as default};
