import{ao as k,c0 as S,c6 as w,c9 as I,c as i,ca as B,c8 as R,aI as C,n as D}from"./index.bb9ee775.js";import{S as A,P as L,a as O}from"./SubscriptionProductsTable.1a1dcfcb.js";import"./DateRangeDisplay.627e63b1.js";import"./IsoDateTimeDisplay.b24bb002.js";import"./AppVDateRangePicker.910505ce.js";import"./index.6f266296.js";import"./index.8ad2977a.js";import"./index.f70c2b67.js";import"./index.b40fdbca.js";import"./index.87e44ac4.js";import"./AppTanStackTable.811c444b.js";import"./createOnChangeFn.060220a6.js";import"./chevron-up.736f4142.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.c012c34c.js";import"./createSimpleTable.0212e622.js";const a={};a.setup=(s,r)=>{const t=S("id"),e=S("subscriptionId"),o=w.read(t,e),v=I.list(t,e),m=i(()=>v.data.value||[]),f=B(),h=i(()=>f.pinnedProductIds),c=i(()=>{var u;return((u=o.data.value)==null?void 0:u.features)||R.SubscriptionFeatures.create()}),p=C(),x=i(()=>{var _,b;const u=new Map;for(const d of m.value){const n=((b=(_=d.product)==null?void 0:_.id)==null?void 0:b.value)||"",g=[{id:"view",action(){c.value.hasGroups?p.push(`/admin/companies/${t.value}/subscriptions/${e.value}/products/${n}/groups`):p.push(`/admin/companies/${t.value}/subscriptions/${e.value}/products/${n}`)}},{id:"edit",action(){p.push(`/admin/companies/${t.value}/subscriptions/${e.value}/products/${n}/settings`)}},{id:"pinProduct",action(){f.setPinned(n)}}].filter(l=>{var y,P;return((P=(y=d.product)==null?void 0:y.id)==null?void 0:P.value)&&h.value.includes(d.product.id.value)||c.value.hasGroups||c.value.hasSuppliers?l.id!=="pinProduct":l});u.set(n,g)}return u});return{id:t,subscriptionId:e,subscriptionRead:o,productsList:v,products:m,actions:x}};a.components=Object.assign({SubscriptionOverviewDisplay:A,PinnedProductsDisplay:L,PlusSvg:k,SubscriptionProductsTable:O},a.components);var T=function(){var s=this,r=s.$createElement,t=s._self._c||r;return t("section",{staticClass:"space-y-6"},[t("BaseVueQuery",{attrs:{query:s.subscriptionRead},scopedSlots:s._u([{key:"success",fn:function(e){var o=e.data.status;return[o?t("SubscriptionOverviewDisplay",{attrs:{status:o}}):s._e()]}}])}),t("PinnedProductsDisplay",{attrs:{"company-id":s.id,"sub-id":s.subscriptionId,products:s.products}}),t("BaseTablePageLayout",{scopedSlots:s._u([{key:"title",fn:function(){return[s._v("Subscription Products")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"./new",append:""}},[t("PlusSvg",{staticClass:"w-5"}),t("span",[s._v("Product")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("BaseVueQuery",{attrs:{query:s.productsList},scopedSlots:s._u([{key:"success",fn:function(e){var o=e.data;return[t("SubscriptionProductsTable",{attrs:{value:o,"mapped-actions":s.actions}})]}}])})]},proxy:!0}])})],1)},j=[];const $={};var q=D(a,T,j,!1,F,null,null,null);function F(s){for(let r in $)this[r]=$[r]}const et=function(){return q.exports}();export{et as default};
