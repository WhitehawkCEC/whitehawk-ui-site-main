import{aU as y,aE as _,aQ as g,aR as v,c as o,aJ as h,aT as c,bs as S,n as k}from"./index.2dae3719.js";import{A as C,T}from"./AppTanStackTable.1c74dc38.js";import{B as I}from"./BitsightLevelBadge.29cf6d63.js";import{c as $}from"./createOnChangeFn.bc5b57a1.js";import{u as B}from"./createSimpleTable.956d2eff.js";import{f as F}from"./index.534e739c.js";const j={set(e){const s=y();return _(()=>g.post(`${v}/companies/${e.value}/bitsight/sync`).then(t=>t.data),{onSuccess(){s.invalidateQueries(["companies",e,"bitsight","sync"],{exact:!0})}})}},i={};i.props={id:{key:"id",required:!0,type:String},subId:{key:"subId",required:!1,type:String},companies:{key:"companies",required:!0,type:Array}};i.setup=(e,s)=>{const t=e,l=o(()=>t.id),u=o(()=>t.subId),d=o(()=>t.companies.map(a=>{const{data:r}=a,b=F(new Date(r.rating_date));return{id:r.guid,name:r.name,domain:r.primary_domain,score:r.rating,lastUpdated:b,industry:r.industry,network:r.network_size_v4}})),p=h(),n=$(),f=[n.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),n.accessor("domain",{header:()=>"Domain",enableColumnFilter:!1}),n.accessor("score",{header:()=>"Score",cell:a=>c(I,{props:{value:a.getValue()}}),enableColumnFilter:!1}),n.accessor("lastUpdated",{header:()=>"LastUpdated",cell:a=>c(S,{props:{value:a.getValue(),format:"date"}}),enableColumnFilter:!1}),n.accessor("industry",{header:()=>"Industry",enableColumnFilter:!1}),n.accessor("network",{header:()=>"Network Size",enableColumnFilter:!1}),n.display({id:"actions",header:"Actions",cell:({row:a})=>c(T,{props:{actions:[{id:"view",action(){u.value?p.push(`/admin/companies/${l.value}/subscriptions/${u.value}/integrations/1/companies/${a.original.id}/cyber-risk`):p.push(`/admin/companies/${l.value}/cyber-risk-rating/rating-service-1/companies/${a.original.id}`)}}]}})})];return{instance:B(d,f)}};i.components=Object.assign({AppTanStackTable:C},i.components);var w=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},A=[];const m={};var x=k(i,w,A,!1,D,null,null,null);function D(e){for(let s in m)this[s]=m[s]}const H=function(){return x.exports}();export{H as B,j as u};
