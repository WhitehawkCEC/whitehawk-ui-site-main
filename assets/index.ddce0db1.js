import{d as c,aS as d,br as $,aP as k,aQ as x,n as y,bs as F,an as I,c7 as _}from"./index.9293fb8e.js";import{A,T}from"./AppTanStackTable.2095cda7.js";import{S as C}from"./ScorecardStatusBadge.4af5891d.js";import{c as q}from"./createOnChangeFn.907df15b.js";import{F as z}from"./FileSaver.min.d0db0de9.js";import{u as P}from"./createSimpleTable.4b85ff87.js";import{u as j}from"./useBatchScorecards.ea0dac24.js";import{u as D}from"./useBatchScorecardsZip.3f4ab317.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.829c0957.js";import"./chevron-up.736f4142.js";const u={};u.props={id:{key:"id",required:!0,type:String},subId:{key:"subId",required:!0,type:String},batches:{key:"batches",required:!0,type:Array},zipFiles:{key:"zipFiles",required:!0,type:Array}};u.setup=(e,a)=>{const t=e,r=c(()=>t.id),o=c(()=>t.subId),p=c(()=>t.batches),m=c(()=>t.zipFiles),n=q(),h=[n.accessor("id",{header:()=>"Batch ID",enableColumnFilter:!1}),n.accessor(s=>s.status.state,{id:"state",header:()=>"State",cell:s=>d(C,{props:{value:s.getValue()}}),enableColumnFilter:!1}),n.accessor(s=>s.status.quarter,{id:"quarter",header:()=>"Quarter",enableColumnFilter:!1}),n.accessor(s=>s.status.year,{id:"year",header:()=>"Year",enableColumnFilter:!1}),n.accessor(s=>{var i;return(i=s.meta)==null?void 0:i.updatedAt},{id:"updatedAt",header:()=>"Updated At",cell:s=>d($,{props:{value:s.getValue(),format:"date"}}),enableColumnFilter:!1}),n.display({id:"actions",header:"Actions",cell:({row:s})=>d(T,{props:{actions:[{id:"view",to:`/admin/companies/${r.value}/subscriptions/${o.value}/integrations/1/scorecards/batch/${s.original.id}`},{id:"download",async action(){var f;const i=encodeURIComponent(s.original.id),S=((f=m.value.find(g=>g.id===s.original.id))==null?void 0:f.zipFileName)||"",B=await k(`${x}/companies/${r.value}/batch/file/zip/${i}`,{responseType:"blob"});z.exports.saveAs(B.data,`${S}.zip`)},isDisabled:c(()=>!m.value.find(i=>i.id===s.original.id))}]}})})];return{instance:P(p,h)}};u.components=Object.assign({AppTanStackTable:A},u.components);var R=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("AppTanStackTable",{attrs:{table:e.instance}})},V=[];const b={};var w=y(u,R,V,!1,E,null,null,null);function E(e){for(let a in b)this[a]=b[a]}const Q=function(){return w.exports}(),l={};l.setup=(e,a)=>{const t=_("id"),r=_("subscriptionId"),o=[j.list(t),D.list(t)];return{id:t,subscriptionId:r,queries:o}};l.components=Object.assign({BackButton:F,PlusSvg:I,BatchScorecardsTable:Q},l.components);var U=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("BaseTablePageLayout",{scopedSlots:e._u([{key:"backButton",fn:function(){return[t("BackButton",{attrs:{link:`/admin/companies/${e.id}/subscriptions/${e.subscriptionId}/integrations`}})]},proxy:!0},{key:"overline",fn:function(){return[e._v("Bitsight")]},proxy:!0},{key:"title",fn:function(){return[e._v("Batch Scorecards")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"./new",append:""}},[t("PlusSvg",{staticClass:"-ml-1 w-5"}),t("span",[e._v("Batch")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("BaseVueQueries",{attrs:{queries:e.queries},scopedSlots:e._u([{key:"success",fn:function(r){var o=r[0],p=r[1];return[t("BatchScorecardsTable",{attrs:{id:e.id,"sub-id":e.subscriptionId,batches:o,"zip-files":p}})]}}])})]},proxy:!0}])})},H=[];const v={};var M=y(l,U,H,!1,N,null,null,null);function N(e){for(let a in v)this[a]=v[a]}const ae=function(){return M.exports}();export{ae as default};
