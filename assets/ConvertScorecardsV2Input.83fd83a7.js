import{aT as _,aD as C,ah as F,aP as i,aQ as u,aB as T,d as R,aS as d,br as N,a_ as v,az as I,n as A,ax as Q}from"./index.aa6ebb08.js";import{A as B,R as D}from"./RowSelectionInput.bbeca17e.js";import{A as P,T as j}from"./AppTanStackTable.1ce6dff4.js";import{S as O}from"./ScorecardStatusBadge.6303fa9d.js";import{u as U,c as z,i as y,r as E,h as H,g as L,f as G,b as Y,e as J,d as K}from"./createOnChangeFn.57421421.js";const de={create(e){const t=_();return C(a=>i.post(`${u}/companies/${e.value}/scorecards-v2`,a).then(r=>r.data),{onSuccess(a){t.invalidateQueries(["companies",e,"scorecards-v2"],{exact:!0}),t.invalidateQueries(["companies",e,"scorecards-v2",a.id],{exact:!0})}})},read(e,t){return F(["companies",e,"scorecards-v2",t],()=>i.get(`${u}/companies/${e.value}/scorecards-v2/${t.value}`).then(a=>a.data))},update(e,t){const a=_();return C(r=>i.put(`${u}/companies/${e.value}/scorecards-v2/${t.value}`,r).then(g=>g.data),{onSuccess(){a.invalidateQueries(["companies",e,"scorecards-v2",t],{exact:!0})}})},delete(e,t){const a=_();return C(()=>i.delete(`${u}/companies/${e.value}scorecards-v2/${t.value}`).then(r=>r.data),{onSuccess(){a.invalidateQueries(["companies",e,"scorecards-v2",t],{exact:!0})}})},list(e){return F(["companies",e,"scorecards-v2"],()=>i.get(`${u}/companies/${e.value}/scorecards-v2`).then(t=>t.data))}},p={};p.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:Array},scorecards:{key:"scorecards",required:!0,type:Array}};p.setup=(e,t)=>{const a=e,r=t.emit,g=T(a,r),k=R(()=>a.scorecards.map(({id:s,data:l,meta:n})=>{const{supplier:f,status:c}=l;return{id:s,supplier:f.name,status:c.state,year:c.year,quarter:c.quarter,updatedAt:n.updatedAt}})),o=z(),V=[o.display({id:"select",header:({table:s})=>d(B,{props:{table:s}}),cell:({row:s})=>d(D,{props:{row:s}})}),o.accessor(s=>s.supplier,{id:"supplier",header:()=>"Supplier",cell:s=>s.getValue(),enableColumnFilter:!1}),o.accessor("status",{header:()=>"Status",cell:s=>d(O,{props:{value:s.getValue()}}),enableColumnFilter:!1}),o.accessor("quarter",{header:()=>"Quarter",cell:s=>s.getValue(),enableColumnFilter:!1}),o.accessor("year",{header:()=>"Year",cell:s=>s.getValue(),enableColumnFilter:!1}),o.accessor("updatedAt",{header:()=>"Last Updated",cell:s=>d(N,{props:{value:s.getValue(),format:"date"}}),enableColumnFilter:!1}),o.display({id:"actions",header:"Actions",cell:({row:s})=>d(j,{props:{actions:[{id:"edit",to:`/admin/companies/${encodeURIComponent(a.id)}/scorecards/in-depth/rating-service-2/${s.original.id}`}]}})})],h=v([]),x=v({pageIndex:0,pageSize:10}),S=v(""),b=v({}),$=U({get data(){return k.value},columns:V,state:{get sorting(){return h.value},get pagination(){return x.value},get globalFilter(){return S.value},get rowSelection(){return b.value}},onSortingChange:y(h),onPaginationChange:y(x),onGlobalFilterChange:y(S),globalFilterFn:(s,l,n,f)=>{const c=E(s.getValue(l),n,{threshold:H.CONTAINS});return f(c),c.passed},onRowSelectionChange:y(b),getCoreRowModel:L(),getSortedRowModel:G(),getFacetedUniqueValues:Y(),getPaginationRowModel:J(),getFilteredRowModel:K()}),M=R(()=>$.getSelectedRowModel().rows);return I(M,s=>{const l=[];s.forEach(n=>{n.original&&l.push({scorecardId:n.original.id,supplierName:n.original.supplier})}),g.value=l},{immediate:!0}),{instance:$}};p.components=Object.assign({AppTanStackTable:P},p.components);var W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("AppTanStackTable",{attrs:{table:e.instance}})},X=[];const w={};var Z=A(p,W,X,!1,ee,null,null,null);function ee(e){for(let t in w)this[t]=w[t]}const ae=function(){return Z.exports}(),m={};m.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:null},scorecards:{key:"scorecards",required:!0,type:Array}};m.setup=(e,t)=>{const a=e,r=t.emit;return{proxy:Q(a,r)}};m.components=Object.assign({ConvertScorecardsV2Table:ae},m.components);var te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"grid gap-6"},[a("ConvertScorecardsV2Table",{attrs:{id:e.id,scorecards:e.scorecards},model:{value:e.proxy.scorecards,callback:function(r){e.$set(e.proxy,"scorecards",r)},expression:"proxy.scorecards"}}),a("BaseSimpleCard",{staticClass:"divide-y"},[a("BaseLabel",{staticClass:"flex flex-col p-4 lg:grid lg:grid-cols-3 lg:items-center"},[a("span",{staticClass:"space-x-1"},[e._v(" File Name "),a("span",{staticClass:"text-red-500"},[e._v("*")])]),a("div",{staticClass:"flex flex-col lg:col-span-2"},[a("BaseInput",{attrs:{type:"text",required:"","aria-required":"true"},model:{value:e.proxy.fileName,callback:function(r){e.$set(e.proxy,"fileName",r)},expression:"proxy.fileName"}})],1)]),a("dl",{staticClass:"p-4"},[a("dt",{staticClass:"sr-only"},[e._v("File Name Display:")]),a("div",{staticClass:"rounded-md border bg-gray-100 p-2 shadow-inner"},[a("dd",{staticClass:"text-gray-500"},[e._v(e._s(e.proxy.fileName)+".zip")])])])],1)],1)},se=[];const q={};var re=A(m,te,se,!1,oe,null,null,null);function oe(e){for(let t in q)this[t]=q[t]}const pe=function(){return re.exports}();export{pe as C,de as u};
