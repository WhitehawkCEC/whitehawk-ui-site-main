import{B as w}from"./BackButton.81e45761.js";import{A as E}from"./AppTanStackTable.79c9a17d.js";import{S as R}from"./ScorecardStatusBadge.f0049564.js";import{c as k}from"./createOnChangeFn.512878db.js";import{c as p,aR as M,n as x,bg as F,aO as O,aP as j}from"./index.80bd34b1.js";import{u as q}from"./createSimpleTable.ede4d922.js";import{R as L}from"./arrow-path.24b87f73.js";import{S as z}from"./StatisticDisplayCard.faf7bad0.js";import"./chevron-left.0808b01b.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.d91fad45.js";import"./chevron-up.736f4142.js";const m={};m.props={scorecards:{key:"scorecards",required:!0,type:Array}};m.setup=(e,a)=>{const r=e,i=p(()=>{const t=new Map;for(const s of r.scorecards){const{buyer:o}=s.data,l=o.company.id,S=t.get(l);S?S.push(s):t.set(l,[s])}return t}),d=p(()=>{const t=[];for(const s of i.value.values()){const o=u(s),l=h(s).length,S=_(s,"COMPLETE").length,T=_(s,"IN_PROGRESS").length,{status:b,buyer:A}=o.data;t.push({buyer:A.company,suppliers:l,totalScorecards:s.length,completed:S,inProgress:T,latestSaved:b.quarter+"/"+b.year,latestStatus:b.state})}return t.sort((s,o)=>s.buyer.name.localeCompare(o.buyer.name))});function u(t){return t.reduce((s,o)=>y(s.data.status,o.data.status)>0?s:o)}function y(t,s){const o=t.year-s.year;return o!=0?o:t.quarter.localeCompare(s.quarter)}function h(t){return[...new Set(t.map(s=>s.data.supplier.id))]}function _(t,s){const o=[];return t.filter(l=>{l.data.status.state===s&&o.push(l)}),o}function n(t){return t.toLowerCase().replace(/_/g," ")}const c=k(),g=[c.accessor(t=>t.buyer.name,{id:"buyer",header:()=>"Buyer"}),c.accessor("suppliers",{header:()=>"Total Supplier(s)",enableColumnFilter:!1}),c.accessor("totalScorecards",{header:()=>"Total Scorecard(s)",enableColumnFilter:!1}),c.accessor("completed",{header:()=>"Completed Scorecard(s)",enableColumnFilter:!1}),c.accessor("inProgress",{header:()=>"In Progress Scorecard(s)",enableColumnFilter:!1}),c.accessor("latestSaved",{header:()=>"Latest Saved",enableColumnFilter:!1}),c.accessor("latestStatus",{header:()=>"Latest Status",cell:t=>M(R,{props:{value:n(t.getValue())}}),enableColumnFilter:!1})];return{instance:q(d,g)}};m.components=Object.assign({AppTanStackTable:E},m.components);var G=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("AppTanStackTable",{attrs:{table:e.instance}})},D=[];const $={};var H=x(m,G,D,!1,I,null,null,null);function I(e){for(let a in $)this[a]=$[a]}const N=function(){return H.exports}();var V=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("svg",e._g({attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},e.$listeners),[r("path",{attrs:{"fill-rule":"evenodd",d:"M15.988 3.012A2.25 2.25 0 0 1 18 5.25v6.5A2.25 2.25 0 0 1 15.75 14H13.5v-3.379a3 3 0 0 0-.879-2.121l-3.12-3.121a3 3 0 0 0-1.402-.791 2.252 2.252 0 0 1 1.913-1.576A2.25 2.25 0 0 1 12.25 1h1.5a2.25 2.25 0 0 1 2.238 2.012zM11.5 3.25a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 .75.75v.25h-3v-.25z","clip-rule":"evenodd"}}),r("path",{attrs:{d:"M3.5 6A1.5 1.5 0 0 0 2 7.5v9A1.5 1.5 0 0 0 3.5 18h7a1.5 1.5 0 0 0 1.5-1.5v-5.879a1.5 1.5 0 0 0-.44-1.06L8.44 6.439A1.5 1.5 0 0 0 7.378 6H3.5z"}})])};const U={render:V},f={};f.props={scorecards:{key:"scorecards",required:!0,type:Array}};f.setup=(e,a)=>{const r=e,i={title:"Total Buyers",component:F},d={title:"Completed Scorecards",component:U},u={title:"In-Progress Scorecards",component:L},y=p(()=>{const n=new Map;for(const c of r.scorecards){const{buyer:g}=c.data,C=g.company.id,t=n.get(C);t?t.push(c):n.set(C,[c])}return n}),h=p(()=>r.scorecards.filter(n=>n.data.status.state==="COMPLETE")),_=p(()=>r.scorecards.filter(n=>n.data.status.state==="IN_PROGRESS"));return{buyersSummary:i,completedScorecardSummary:d,inProgressScorecardSummary:u,scorecardsGrouped:y,completedScorecards:h,inProgressScorecards:_}};f.components=Object.assign({StatisticDisplayCard:z},f.components);var J=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("section",{staticClass:"grid grid-cols-1 gap-6 xl:grid-cols-3"},[r("StatisticDisplayCard",{attrs:{value:e.buyersSummary,number:e.scorecardsGrouped.size}}),r("StatisticDisplayCard",{attrs:{value:e.completedScorecardSummary,number:e.completedScorecards.length}}),r("StatisticDisplayCard",{attrs:{value:e.inProgressScorecardSummary,number:e.inProgressScorecards.length}})],1)},K=[];const B={};var Q=x(f,J,K,!1,W,null,null,null);function W(e){for(let a in B)this[a]=B[a]}const X=function(){return Q.exports}(),v={};v.setup=(e,a)=>({promises:Promise.all([O.get(`${j}/scorecards`)])});v.components=Object.assign({BackButton:w,ScorecardSummary:X,AdminCannedScorecardTable:N},v.components);var Y=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("section",{staticClass:"space-y-8"},[r("div",{staticClass:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:space-x-4 sm:space-y-0"},[r("BackButton",{attrs:{link:"/admin/reports"}}),r("div",{staticClass:"flex flex-col"},[r("BaseTypography",{attrs:{component:"h2",variant:"h5"}},[e._v("Scorecards")]),r("BaseTypography",{staticClass:"uppercase text-gray-600",attrs:{variant:"overline"}},[e._v(" Canned Report ")])],1)],1),e.promises?r("BasePromise",{attrs:{promise:e.promises},scopedSlots:e._u([{key:"success",fn:function(i){var d=i.result,u=d[0];return[r("div",{staticClass:"space-y-8"},[r("ScorecardSummary",{attrs:{scorecards:u.data}}),r("AdminCannedScorecardTable",{attrs:{scorecards:u.data}})],1)]}}],null,!1,444654694)}):e._e()],1)},Z=[];const P={};var ee=x(v,Y,Z,!1,re,null,null,null);function re(e){for(let a in P)this[a]=P[a]}const fe=function(){return ee.exports}();export{fe as default};
