import{R as U}from"./arrow-path.24b87f73.js";import{F as N}from"./FormButton.2cb793de.js";import{bs as H,L as G,ca as R,bH as z,d as l,b as j,aK as E,aF as K,n as W}from"./index.4dc5b018.js";import{_ as J,B as V}from"./_baseOrderBy.3544a886.js";import{G as X,S as Y}from"./ScorecardSnapshotInput.2f5b61e6.js";import{g as Z}from"./groupBy.1bd1cea0.js";import{a as ee,e as ae}from"./_Uint8Array.882cdf24.js";import{f as te,p as se,i as ne,c as re,q as oe,a as ie}from"./keys.33bcdf6f.js";import{a as P}from"./_baseIteratee.f036bb00.js";import{a as le}from"./_baseAssignValue.80a2f5f3.js";import{u as ce,a as ue}from"./useCompanyOverview.86be63a0.js";import{u as pe}from"./useNewestQuestionnaireResponses.519d6d05.js";import{u as me}from"./_baseEach.c12f3efb.js";import{u as ve}from"./useSnapshotScorecards.395275d9.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./chart.c54a61e9.js";import"./_arrayMap.dcea68f3.js";import"./BundleSolutionDisplay.8bc04dc4.js";import"./BasicModal.da7ae7dd.js";import"./useCompanyWishlistItems.d910c58a.js";import"./cloneDeep.0523e22c.js";import"./_copyArray.56331c81.js";import"./TabbedPanel.1f12905f.js";import"./GaugeChart.23b8b4aa.js";import"./_baseIsEqual.3c9c405a.js";var B=te,de=se,fe=ne,T=B?B.isConcatSpreadable:void 0;function ye(a){return fe(a)||de(a)||!!(T&&a&&a[T])}var _e=ye,ge=ee,he=_e;function k(a,t,e,r,n){var c=-1,u=a.length;for(e||(e=he),n||(n=[]);++c<u;){var i=a[c];t>0&&e(i)?t>1?k(i,t-1,e,r,n):ge(n,i):r||(n[n.length]=i)}return n}var xe=k;function Ce(a,t,e){switch(e.length){case 0:return a.call(t);case 1:return a.call(t,e[0]);case 2:return a.call(t,e[0],e[1]);case 3:return a.call(t,e[0],e[1],e[2])}return a.apply(t,e)}var be=Ce,Se=be,$=Math.max;function we(a,t,e){return t=$(t===void 0?a.length-1:t,0),function(){for(var r=arguments,n=-1,c=$(r.length-t,0),u=Array(c);++n<c;)u[n]=r[t+n];n=-1;for(var i=Array(t+1);++n<t;)i[n]=r[n];return i[t]=e(u),Se(a,this,i)}}var Re=we;function Be(a){return function(){return a}}var Te=Be,$e=Te,I=le,Ie=P,Ae=I?function(a,t){return I(a,"toString",{configurable:!0,enumerable:!1,value:$e(t),writable:!0})}:Ie,Oe=Ae,Pe=800,ke=16,Fe=Date.now;function De(a){var t=0,e=0;return function(){var r=Fe(),n=ke-(r-e);if(e=r,n>0){if(++t>=Pe)return arguments[0]}else t=0;return a.apply(void 0,arguments)}}var Le=De,Qe=Oe,qe=Le,Me=qe(Qe),Ue=Me,Ne=P,He=Re,Ge=Ue;function ze(a,t){return Ge(He(a,t,Ne),a+"")}var je=ze,Ee=ae,Ke=re,We=oe,Je=ie;function Ve(a,t,e){if(!Je(e))return!1;var r=typeof t;return(r=="number"?Ke(e)&&We(t,e.length):r=="string"&&t in e)?Ee(e[t],a):!1}var Xe=Ve,Ye=xe,Ze=J,ea=je,A=Xe,aa=ea(function(a,t){if(a==null)return[];var e=t.length;return e>1&&A(a,t[0],t[1])?t=[]:e>2&&A(t[0],t[1],t[2])&&(t=[t[0]]),Ze(a,Ye(t,1),[])}),ta=aa;const v={};v.setup=(a,t)=>{const e=R("id"),r=R("subscriptionId"),n=z.read(e),c=l(()=>{if(n.data.value){const{id:s,name:o}=n.data.value;return{id:s,name:o}}}),u=me.list(e),i=l(()=>{const s=u.data.value;if(s){const o=ta(s,"order");return Z(o,"category")}}),m=l(()=>{if(i.value)return["basic","foundational","organizational"].reduce((s,o)=>{var p;return s[o]=((p=i.value)==null?void 0:p[o])||[],s},{})}),y=l(()=>{if(i.value)return["critical","next","pending"].reduce((s,o)=>{var p;return s[o]=((p=i.value)==null?void 0:p[o])||[],s},{})});async function F(){await u.refetch.value()}const _=pe.get(e),g=l(()=>_.data.value);async function D(){await _.refetch.value()}const h=ce.get(e),x=l(()=>h.data.value),C=l(()=>{var s,o;return(o=(s=h.data.value)==null?void 0:s.scores)==null?void 0:o.cyberPath}),L=ue.get(e),b=l(()=>L.data.value),d=j(),f=l({get(){var s;return d.value?d.value:{type:"snapshot",company:c.value,questionnaireResponse:g.value,riskIndicator:{cyberScore:C.value,text:(s=x.value)==null?void 0:s.text},actionPlan:{data:y.value},maturityLevelAssessment:{data:m.value},bundles:b.value,cis:m.value?Object.values(m.value).flatMap(o=>o).map(o=>o.itemComplete):[]}},set(s){d.value=s}}),Q=l(()=>Boolean(i.value&&b.value&&x.value&&g.value&&f.value)),q=E(),S=K(),w=ve.create(e);async function M(){const s=await w.mutateAsync(f.value);s?(S.success("Created Successfully"),q.push(`/admin/companies/${encodeURIComponent(e.value)}/subscriptions/${encodeURIComponent(r.value)}/integrations/6/scorecards/snapshot/${encodeURIComponent(s.id)}`)):S.error("Something went wrong.")}return{id:e,todos:i,maturityLevelAssessmentData:m,actionPlanData:y,latestTodos:F,latestQuestionnaireResponse:D,cyberScore:C,scorecard:f,ready:Q,snapshotCreate:w,create:M}};v.components=Object.assign({BackButton:H,LoadingSpinner:G,GaugeChartDisplay:X,RefreshSvg:U,BarChart:V,ScorecardSnapshotInput:Y,FormButton:N},v.components);var sa=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("section",{staticClass:"flex flex-col space-y-10"},[e("div",{staticClass:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-4"},[e("BackButton"),e("div",{staticClass:"flex flex-col -space-y-1"},[e("BaseTypography",{staticClass:"uppercase text-gray-500",attrs:{variant:"overline"}},[a._v(" WhiteHawk ")]),e("BaseTypography",{attrs:{variant:"h5",component:"h2"}},[a._v(" Snapshot Scorecard ")])],1)],1),a.ready?e("div",[e("div",{staticClass:"flex flex-col space-y-10 2xl:grid 2xl:grid-cols-3 2xl:gap-10 2xl:space-y-0"},[a.cyberScore?e("fieldset",{staticClass:"space-y-2"},[e("legend",[e("BaseTypography",{staticClass:"text-prime-navy",attrs:{variant:"h6",component:"h3"}},[a._v(" Cyber Risk Indicator ")])],1),e("div",{staticClass:"flex-1 lg:flex"},[e("GaugeChartDisplay",{staticClass:"mx-0",attrs:{value:a.cyberScore},scopedSlots:a._u([{key:"button",fn:function(){return[e("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{type:"button"},on:{click:a.latestQuestionnaireResponse}},[e("RefreshSvg",{staticClass:"-ml-1 w-5"}),e("span",[a._v("Update")])],1)]},proxy:!0}],null,!1,1877849566)})],1)]):a._e(),a.todos?e("fieldset",{staticClass:"space-y-2 2xl:col-span-2"},[e("legend",[e("BaseTypography",{staticClass:"text-prime-navy",attrs:{variant:"h6",component:"h3"}},[a._v(" Cyber Maturity Roadmap ")])],1),e("BaseSimpleCard",{staticClass:"flex flex-col space-y-4 p-4 sm:py-5 sm:px-6"},[e("div",{staticClass:"space-y-6 lg:grid lg:grid-cols-2 lg:gap-6 lg:space-y-0"},[e("div",{staticClass:"h-72 w-60 xs:w-auto 2xl:max-h-[15rem]"},[a.maturityLevelAssessmentData?e("BarChart",{attrs:{value:a.maturityLevelAssessmentData,options:{maintainAspectRatio:!1,devicePixelRatio:1}}}):a._e()],1),e("div",{staticClass:"h-72 w-60 xs:w-auto 2xl:max-h-[15rem]"},[a.actionPlanData?e("BarChart",{attrs:{value:a.actionPlanData,options:{maintainAspectRatio:!1,devicePixelRatio:1}}}):a._e()],1)]),e("div",{staticClass:"md:inline-flex"},[e("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{type:"button"},on:{click:a.latestTodos}},[e("RefreshSvg",{staticClass:"-ml-1 w-5"}),e("span",[a._v("Update")])],1)],1)])],1):a._e()]),e("form",{staticClass:"flex flex-col space-y-10",on:{submit:function(r){return r.preventDefault(),a.create.apply(null,arguments)}}},[e("ScorecardSnapshotInput",{attrs:{id:a.id},model:{value:a.scorecard,callback:function(r){a.scorecard=r},expression:"scorecard"}}),e("FormButton",{attrs:{action:"create","is-valid-form":!a.snapshotCreate.isLoading.value}})],1)]):e("LoadingSpinner")],1)},na=[];const O={};var ra=W(v,sa,na,!1,oa,null,null,null);function oa(a){for(let t in O)this[t]=O[t]}const ka=function(){return ra.exports}();export{ka as default};
