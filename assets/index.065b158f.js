import{D as B}from"./document-plus.04e3d5d0.js";import{T as A}from"./trash.78f57a7a.js";import{aD as E,aP as D,aQ as $,b1 as O,an as R,ax as k,bT as I,r as v,bm as L,c as m,aF as q,n as f,c5 as M}from"./index.59b99c37.js";import{u as y,P as N}from"./ProductQuotesTable.f97a68cd.js";import"./AppTanStackTable.8d9d8fe0.js";import"./createOnChangeFn.92f6478f.js";import"./chevron-up.736f4142.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.d3b425de.js";import"./FileSaver.min.1218b76b.js";import"./createSimpleTable.f8378d43.js";const j={update(){return E(t=>D.put(`${$}/productQuote/${t.quoteId}/file`,t.file,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>s.data))}},l={};l.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:null}};l.setup=(t,s)=>{const e=t,a=s.emit,r=k(e,a),{id:u}=I(e),c=v(),_=L(),x=m(()=>{var o;return((o=_.user)==null?void 0:o.id)||""}),C=[{text:"New",value:"NEW"},{text:"In Progress",value:"IN_PROGRESS"},{text:"Complete",value:"COMPLETE"},{text:"Canceled",value:"CANCELED"}],g=[{text:"Marketplace",value:"MARKETPLACE"},{text:"In-Depth Scorecard",value:"SCORECARD_INDEPTH"},{text:"Snapshot Scorecard",value:"SCORECARD_SNAPSHOT"},{text:"Batch",value:"BATCH"},{text:"Portfolio",value:"PORTFOLIO"}];function S(o){const n=o.currentTarget;n.files&&n.files[0]&&(c.value=n.files[0])}const b=y.create();async function h(){const o=await b.mutateAsync({status:r.value.status,type:r.value.type,title:r.value.title.trim(),companyId:u.value,employeeId:x.value});o&&o.id&&await F(o.id)}const P=q(),Q=j.update();async function F(o){if(c.value){const n=new FormData;n.append("file",c.value,c.value.name);const w={quoteId:o,file:n};await Q.mutateAsync(w)&&P.success("Successfully added product quote.")}else throw new Error("Invalid request.")}function T(){r.value.title="",r.value.status="",r.value.type="",c.value=void 0}return{proxy:r,selectedFile:c,status:C,type:g,selectFile:S,addCompanyQuote:h,clearForm:T}};l.components=Object.assign({SimpleSelect:O,DocumentAddSvg:B,PlusSvg:R,TrashSvg:A},l.components);var U=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("form",{staticClass:"grid divide-y",attrs:{enctype:"multipart/form-data"},on:{submit:function(a){a.preventDefault()}}},[e("BaseLabel",{staticClass:"grid items-center p-4 lg:grid-cols-2"},[t._v(" Type "),e("SimpleSelect",{staticClass:"w-full",attrs:{options:t.type,required:""},model:{value:t.proxy.type,callback:function(a){t.$set(t.proxy,"type",a)},expression:"proxy.type"}})],1),e("BaseLabel",{staticClass:"grid items-center p-4 lg:grid-cols-2"},[t._v(" Status "),e("SimpleSelect",{staticClass:"w-full",attrs:{options:t.status,required:""},model:{value:t.proxy.status,callback:function(a){t.$set(t.proxy,"status",a)},expression:"proxy.status"}})],1),e("BaseLabel",{staticClass:"grid items-center p-4 lg:grid-cols-2"},[t._v(" Title "),e("BaseInput",{staticClass:"w-full",attrs:{type:"text"},model:{value:t.proxy.title,callback:function(a){t.$set(t.proxy,"title",a)},expression:"proxy.title"}})],1),e("BaseLabel",{staticClass:"group grid cursor-pointer items-center p-4 lg:grid-cols-2"},[t._v(" Select File "),e("div",{staticClass:"flex flex-col justify-center space-y-2 rounded-md border border-dashed border-gray-300 bg-white px-6 pt-5 pb-6"},[e("DocumentAddSvg",{staticClass:"mx-auto h-12 w-12 fill-current text-gray-300 group-hover:text-blue-500"}),e("div",{staticClass:"self-center text-center"},[e("input",{staticClass:"hidden",attrs:{type:"file",accept:".docx, .pdf, .csv, .zip"},on:{change:t.selectFile}}),t.selectedFile?e("span",[t._v(t._s(t.selectedFile.name))]):t._e(),e("p",{staticClass:"text-xs text-gray-500"},[t._v(" (PDF, DOCX, CSV or Zip up to 100MB) ")])])],1)]),e("div",{staticClass:"space-y-2 p-4 lg:space-y-0 lg:space-x-2"},[e("BaseButton",{staticClass:"space-x-2",attrs:{type:"button"},on:{click:t.addCompanyQuote}},[e("PlusSvg",{staticClass:"w-4 xl:w-5"}),e("span",[t._v("Add")])],1),e("BaseButton",{staticClass:"space-x-2",attrs:{type:"button",action:"secondary","display-type":"danger"},on:{click:t.clearForm}},[e("TrashSvg",{staticClass:"w-4 xl:w-5"}),e("span",[t._v("Clear")])],1)],1)],1)},H=[];const p={};var z=f(l,U,H,!1,G,null,null,null);function G(t){for(let s in p)this[s]=p[s]}const K=function(){return z.exports}(),i={};i.setup=(t,s)=>{const e=M("id"),a=y.list(e),r=m(()=>a.data.value||[]),u=v();return{id:e,productQuotes:r,productQuote:u}};i.components=Object.assign({ProductQuotesTable:N,ProductQuoteForm:K},i.components);var V=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"space-y-6"},[e("BaseTablePageLayout",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Product Quotes")]},proxy:!0},{key:"table",fn:function(){return[e("ProductQuotesTable",{attrs:{"purchase-history":t.productQuotes}})]},proxy:!0}])}),e("BaseSimpleCard",{staticClass:"divide-y"},[e("BaseTypography",{staticClass:"p-4",attrs:{component:"h2",variant:"subtitle3"}},[t._v(" Add Quote ")]),e("ProductQuoteForm",{attrs:{id:t.id},model:{value:t.productQuote,callback:function(a){t.productQuote=a},expression:"productQuote"}})],1)],1)},W=[];const d={};var X=f(i,V,W,!1,Z,null,null,null);function Z(t){for(let s in d)this[s]=d[s]}const ut=function(){return X.exports}();export{ut as default};
