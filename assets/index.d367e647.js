import{bP as $,n as p,aB as g,ah as C,aS as T,aD as k,aO as d,aP as y,L as B,bY as D,r as F,c as M,aI as O}from"./index.1be96d76.js";import{T as P}from"./ToolTip.48e41c2b.js";import{A as R}from"./AppTanStackTable.b4268540.js";import{c as W}from"./createOnChangeFn.67977a20.js";import{u as q}from"./createSimpleTable.5d942da3.js";import{D as w}from"./DynamicForm.073ddec0.js";import{S as A}from"./StatusInput.de667ecc.js";import"./exclamation-triangle.54812a62.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.acb23ae5.js";import"./chevron-up.736f4142.js";const i={};i.props={matches:{key:"matches",required:!0,type:Array}};i.setup=(e,s)=>{const t=e,{matches:a}=$(t),n=W(),o=[n.accessor(r=>r.cyberOne.id,{id:"id",header:()=>"ID",enableColumnFilter:!1}),n.accessor(r=>r.cyberOne.name,{id:"name",header:()=>"Name",enableColumnFilter:!1}),n.accessor(r=>r.cyberOne.domain,{id:"domain",header:()=>"Domain",enableColumnFilter:!1}),n.accessor(r=>r.supplyWisdom.name,{id:"supplyWisdomName",header:()=>"Supply Wisdom",enableColumnFilter:!1})];return{instance:q(a,o)}};i.components=Object.assign({AppTanStackTable:R},i.components);var L=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},j=[];const _={};var E=p(i,L,j,!1,I,null,null,null);function I(e){for(let s in _)this[s]=_[s]}const Q=function(){return E.exports}(),u={};u.props={value:{key:"value",required:!1,type:null},matches:{key:"matches",required:!0,type:Array}};u.setup=(e,s)=>{const t=e,a=s.emit;return{proxy:g(t,a),schema:[{name:"status",label:"Status",component:{is:A,attrs:{required:!0}}}]}};u.components=Object.assign({DynamicForm:w},u.components);var U=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("DynamicForm",{attrs:{schema:e.schema},model:{value:e.proxy,callback:function(a){e.proxy=a},expression:"proxy"}})},H=[];const f={};var N=p(u,U,H,!1,V,null,null,null);function V(e){for(let s in f)this[s]=f[s]}const Y=function(){return N.exports}(),v={get(e){return C(["companies",e,"cyber-one","matched-pairs","supply-wisdom"],()=>d.get(`${y}/companies/${e.value}/cyber-one/matched-pairs-supply-wisdom`).then(s=>s.data))},update(e){const s=T();return k(t=>d.post(`${y}/companies/${e.value}/cyber-one/matched-pairs-supply-wisdom/sync`,t).then(a=>a.data),{onSuccess(){s.invalidateQueries(["companies",e,"cyber-one","matched-pairs","supply-wisdom"],{exact:!0})}})}},l={};l.setup=(e,s)=>{const t=D("id"),a=v.get(t),n=F(),o=M({get(){if(n.value)return n.value;const c=new Date,S=c.getFullYear(),x=`Q${Math.ceil((c.getMonth()+1)/4)}`;return{id:t.value,matchedPair:a.data.value||[],status:{state:"COMPLETE",year:S,quarter:x}}},set(c){c&&(n.value=c)}}),m=O(),r=v.update(t);async function b(){o.value&&(await r.mutateAsync(o.value)).data&&m.push("../")}return{matches:a,sync:o,syncUpdate:r,upload:b}};l.components=Object.assign({SupplyWisdomMatchedPairsTable:Q,ToolTip:P,SupplyWisdomSyncInput:Y,LoadingSpinner:B},l.components);var z=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("main",{staticClass:"space-y-6"},[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"overline",fn:function(){return[e._v("VRM Dashboard")]},proxy:!0},{key:"title",fn:function(){return[e._v("Business Rating Sync")]},proxy:!0},{key:"table",fn:function(){return[t("SupplyWisdomMatchedPairsTable",{attrs:{matches:e.matches.data.value||[]}})]},proxy:!0}])}),t("BaseSimpleCard",{staticClass:"divide-y"},[t("div",{staticClass:"flex items-center space-y-1 space-x-1 p-4"},[t("BaseTypography",{attrs:{variant:"subtitle3",component:"h2"}},[e._v(" Sync Business Rating Assets ")]),t("ToolTip",[e._v(" This will sync the documents for the assets listed above to CyberOne. ")])],1),t("form",{staticClass:"divide-y",on:{submit:function(a){return a.preventDefault(),e.upload.apply(null,arguments)}}},[t("BaseVueQuery",{attrs:{query:e.matches},scopedSlots:e._u([{key:"success",fn:function(a){var n=a.data;return[t("SupplyWisdomSyncInput",{attrs:{matches:n},model:{value:e.sync,callback:function(o){e.sync=o},expression:"sync"}})]}}])}),t("div",{staticClass:"p-4"},[t("BaseButton",{attrs:{disabled:e.syncUpdate.isLoading.value}},[e.syncUpdate.isLoading.value?t("LoadingSpinner"):t("span",[e._v("Sync")])],1)],1)],1)])],1)},G=[];const h={};var J=p(l,z,G,!1,K,null,null,null);function K(e){for(let s in h)this[s]=h[s]}const pe=function(){return J.exports}();export{pe as default};
