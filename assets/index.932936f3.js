import{S as st}from"./SiteMainBanner.c7999286.js";import{an as z,d as _,n as g,af as nt,aQ as rt,aO as at,aR as ot,b as L,az as N,aF as Q,aK as X,aS as v,aH as ct,aG as it,ak as M}from"./index.78dd2457.js";import{F as lt,S as ut,c as G}from"./createOnChangeFn.17d6c734.js";import{u as R}from"./product-comparison.ca92e80a.js";import{u as K}from"./createSimpleTable.a91d14b2.js";import{u as q}from"./useCompanyWishlistItems.74a53345.js";import{u as pt}from"./useProducts.701a05b6.js";import"./chevron-up.736f4142.js";const x={};x.props={instance:{key:"instance",required:!0,type:null}};x.setup=(t,s)=>{const e=t;function o(d,p){const c=p.getToggleSortingHandler();c==null||c(d)}const a=_(()=>e.instance.getRowModel().rows.length<4);return{toggleSort:o,isVisible:a}};x.components=Object.assign({FlexRender:lt,SortDirectionDisplay:ut,PlusSvg:z},x.components);var dt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"min-w-screen overflow-x-auto"},[e("table",{staticClass:"table w-full divide-y bg-gray-50"},[e("thead",{staticClass:"bg-white"},t._l(t.instance.getHeaderGroups(),function(o){return e("tr",{key:o.id,staticClass:"divide-x"},t._l(o.headers,function(a){return e("th",{key:a.id,staticClass:"items-center justify-center bg-white py-2 font-display text-lg font-medium tracking-widest text-gray-500 xl:py-3",attrs:{colspan:a.colSpan,scope:"col"}},[e("button",{staticClass:"flex w-full items-center justify-center space-x-1",attrs:{type:"button"},on:{click:function(d){return t.toggleSort(d,a.column)}}},[e("FlexRender",{attrs:{render:a.column.columnDef.header,props:a.getContext()}}),a.column.getIsSorted()?e("SortDirectionDisplay",{attrs:{value:a.column.getIsSorted()}}):t._e()],1)])}),0)}),0),e("tbody",{staticClass:"divide-y"},[t.instance.getRowModel().rows.length>0?t._l(t.instance.getRowModel().rows,function(o){return e("tr",{key:o.id},t._l(o.getVisibleCells(),function(a){return e("td",{key:a.id},[e("div",[e("FlexRender",{attrs:{render:a.column.columnDef.cell,props:a.getContext()}})],1)])}),0)}):[e("tr",[e("td",{staticClass:"py-2 px-3 text-center",attrs:{scope:"row",colspan:"5"}},[e("BaseTypography",{staticClass:"w-full text-gray-500",attrs:{variant:"p2",component:"p"}},[t._v(" No data to display ")])],1)])]],2),t.isVisible?e("tfoot",[e("tr",[e("th",{staticClass:"bg-white px-4 py-3",attrs:{scope:"row",colspan:"5"}},[e("BaseButton",{staticClass:"space-x-1",attrs:{type:"button",action:"secondary",to:"/marketplace/products"}},[e("PlusSvg",{staticClass:"-ml-1 w-4 xl:w-5"}),e("span",[t._v("Product")])],1)],1)])]):t._e()])])},mt=[];const A={};var _t=g(x,dt,mt,!1,vt,null,null,null);function vt(t){for(let s in A)this[s]=A[s]}const J=function(){return _t.exports}(),F={};F.props={value:{key:"value",required:!0,type:String}};F.setup=(t,s)=>({});var ft=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"min-w-fit"},[e("div",{staticClass:"flex w-24 items-center justify-center px-4 xl:w-auto"},[e("ul",{staticClass:"text-left text-gray-600"},[e("li",[e("BaseTypography",{attrs:{variant:"p1"}},[t._v(" "+t._s(t.value)+" ")])],1)])])])},yt=[];const D={};var gt=g(F,ft,yt,!1,ht,null,null,null);function ht(t){for(let s in D)this[s]=D[s]}const S=function(){return gt.exports}(),B={};B.props={value:{key:"value",required:!0,type:Array}};B.setup=(t,s)=>({});var xt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"min-w-fit"},[e("div",{staticClass:"mx-auto flex w-48 items-center justify-center px-4 xl:w-auto"},[e("ul",{staticClass:"list-disc text-left text-gray-600"},t._l(t.value,function(o){return e("li",{key:o.id},[e("BaseTypography",{attrs:{variant:"p1"}},[t._v(" "+t._s(o.name)+" ")])],1)}),0)])])},Ct=[];const V={};var $t=g(B,xt,Ct,!1,bt,null,null,null);function bt(t){for(let s in V)this[s]=V[s]}const k=function(){return $t.exports}(),C={};C.props={product:{key:"product",required:!0,type:null}};C.setup=(t,s)=>{const e=t;return{productImageUrl:_(()=>`${rt}/products/${e.product.id}/image`)}};C.components=Object.assign({LazyImg:nt},C.components);var wt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.product?e("div",{staticClass:"mx-auto flex max-w-xs flex-col items-center justify-center space-y-2 py-4 text-center"},[e("LazyImg",{staticClass:"h-auto w-24 object-contain object-center",attrs:{src:t.productImageUrl,alt:t.product.name,options:{w:500},"options-placeholder":{w:48}}}),e("BaseLink",{attrs:{to:`/marketplace/products/${t.product.id}`,"display-type":"primary-prime"}},[e("BaseTypography",{attrs:{component:"h2",variant:"h5"}},[t._v(" "+t._s(t.product.name)+" ")])],1),e("BaseLink",{attrs:{to:`/marketplace/manufacturers/${t.product.manufacturer.id}`,"display-type":"primary-prime"}},[e("BaseTypography",{staticClass:"uppercase",attrs:{component:"h3",variant:"overline"}},[t._v(" "+t._s(t.product.manufacturer.name)+" ")])],1)],1):t._e()},St=[];const W={};var kt=g(C,wt,St,!1,Pt,null,null,null);function Pt(t){for(let s in W)this[s]=W[s]}const jt=function(){return kt.exports}(),$={};$.props={product:{key:"product",required:!0,type:null},add:{key:"add",required:!0,type:Function},remove:{key:"remove",required:!0,type:Function}};$.setup=(t,s)=>({});$.components=Object.assign({ProductComparisonItem:jt,PlusSvg:z,XSvg:at},$.components);var It=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"sticky left-0 -my-px -mr-px min-w-fit border-r bg-white"},[e("div",{staticClass:"flex items-start justify-between px-4 pt-3 pb-6"},[e("div",{staticClass:"flex flex-1 flex-col justify-center"},[e("ProductComparisonItem",{attrs:{product:t.product}}),e("div",{staticClass:"flex justify-center"},[e("BaseButton",{staticClass:"space-x-1",attrs:{type:"button"},on:{click:t.add}},[e("PlusSvg",{staticClass:"-ml-1 w-4 xl:w-5"}),e("span",[t._v("Wishlist")])],1)],1)],1),e("BaseIcon",{attrs:{type:"button",size:"small",color:"danger",action:"secondary"},on:{click:t.remove}},[e("XSvg",{staticClass:"h-4 w-auto"})],1)],1)])},Tt=[];const E={};var Rt=g($,It,Tt,!1,Ft,null,null,null);function Ft(t){for(let s in E)this[s]=E[s]}const Y=function(){return Rt.exports}(),b={};b.props={value:{key:"value",required:!0,type:Array}};b.setup=(t,s)=>{const e=t,o=_(()=>e.value),a=R(),d=ot(),p=L();N(()=>d.products,r=>{r&&(p.value=r)},{immediate:!0});const c=G(),m=Q(),l=X(),f=[c.accessor(r=>r.name,{id:"product",header:()=>"Product",cell:({row:r})=>v(Y,{props:{product:r.original,async add(){const u=r.original;if(!I(u.id)&&p.value){const i=T(u);p.value.push(i),await d.set(p.value),m.success("Product added to your wishlist.")}else m.error("This product is already on your wishlist.")},async remove(){const u=r.original.id;await a.remove(u),e.value.filter(n=>n.id!==u),o.value.length===0&&l.push("/marketplace/products")}}})}),c.accessor(r=>r.categories,{id:"categories",header:()=>"Categories",cell:r=>v(k,{props:{value:r.getValue()}}),enablePinning:!1}),c.accessor(r=>r.features,{id:"features",header:()=>"Features",cell:r=>v(k,{props:{value:r.getValue()}}),enablePinning:!1}),c.accessor(r=>r.type.name,{id:"type",header:()=>"Type",cell:r=>v(S,{props:{value:r.getValue()}}),enablePinning:!1}),c.accessor("price",{header:()=>"Price Range",cell:r=>v(S,{props:{value:r.getValue()}}),enablePinning:!1})],j=K(o,f);function I(r){var u;return(u=p.value)==null?void 0:u.some(n=>n.id===r)}function T(r){const{id:u,name:n,description:i,manufacturer:y,categories:h}=r;return{id:u,name:n,description:i,manufacturer:y,categories:h}}return{instance:j}};b.components=Object.assign({AppTanStackProductComparisonTable:J},b.components);var Bt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("AppTanStackProductComparisonTable",{attrs:{instance:t.instance}})},Mt=[];const H={};var qt=g(b,Bt,Mt,!1,At,null,null,null);function At(t){for(let s in H)this[s]=H[s]}const Dt=function(){return qt.exports}(),w={};w.props={value:{key:"value",required:!0,type:Array},companyId:{key:"companyId",required:!0,type:String}};w.setup=(t,s)=>{const e=t,o=_(()=>e.companyId),a=_(()=>e.value),d=R(),p=q.list(o),c=L();N(()=>p.data.value,n=>{n&&(c.value=n)},{immediate:!0});const m=G(),l=Q(),f=q.update(o),j=X(),I=[m.accessor(n=>n.name,{id:"product",header:()=>"Product",cell:({row:n})=>v(Y,{props:{product:n.original,async add(){const i=n.original;if(!r(i.id)&&c.value){const h=u(i);c.value.push(h),await f.mutateAsync(c.value),l.success("Product added to the company wishlist.")}else l.error("This product is already on your wishlist.")},async remove(){const i=n.original.id;await d.remove(i),e.value.filter(y=>y.id!==i),a.value.length===0&&j.push("/marketplace/products")}}})}),m.accessor(n=>n.categories,{id:"categories",header:()=>"Categories",cell:n=>v(k,{props:{value:n.getValue()}}),enablePinning:!1}),m.accessor(n=>n.features,{id:"features",header:()=>"Features",cell:n=>v(k,{props:{value:n.getValue()}}),enablePinning:!1}),m.accessor(n=>n.type.name,{id:"type",header:()=>"Type",cell:n=>v(S,{props:{value:n.getValue()}}),enablePinning:!1}),m.accessor("price",{header:()=>"Price Range",cell:n=>v(S,{props:{value:n.getValue()}}),enablePinning:!1})],T=K(a,I);function r(n){var i;return(i=c.value)==null?void 0:i.some(y=>y.id===n)}function u(n){const{id:i,name:y,description:h,manufacturer:tt,categories:et}=n;return{id:i,name:y,description:h,manufacturer:tt,categories:et}}return{instance:T}};w.components=Object.assign({AppTanStackProductComparisonTable:J},w.components);var Vt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("AppTanStackProductComparisonTable",{attrs:{instance:t.instance}})},Wt=[];const O={};var Et=g(w,Vt,Wt,!1,Ht,null,null,null);function Ht(t){for(let s in O)this[s]=O[s]}const Ot=function(){return Et.exports}(),P={};P.setup=(t,s)=>{const e=R(),o=_(()=>e.productIds.map(l=>{const f=_(()=>l);return pt.read(f)})),a=_(()=>{const l=[];return o.value.map(f=>{f.data.value&&l.push(f.data.value)}),l}),d=ct(),p=_(()=>d.loggedIn),c=it(),m=_(()=>{var l;return(l=c.company)==null?void 0:l.id});return{products:a,loggedIn:p,companyId:m}};P.components=Object.assign({SiteMainBanner:st,ProductComparisonTable:Ot,AnonProductComparisonTable:Dt},P.components);var Ut=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",[e("SiteMainBanner"),t.loggedIn&&t.companyId?[e("ProductComparisonTable",{attrs:{value:t.products,"company-id":t.companyId}})]:[e("AnonProductComparisonTable",{attrs:{value:t.products}})]],2)},zt=[];const U={};var Z=g(P,Ut,zt,!1,Lt,null,null,null);function Lt(t){for(let s in U)this[s]=U[s]}typeof M=="function"&&M(Z);const te=function(){return Z.exports}();export{te as default};
