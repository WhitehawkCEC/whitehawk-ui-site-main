import{F as B}from"./FormButton.e18fdd4b.js";import{E as K}from"./arrow-top-right-on-square.b063d2af.js";import{aq as S,br as A,d as i,am as b,aC as $,n as v,ax as L,ca as w,cr as x,c_ as T,c$ as D,d0 as M,aF as j}from"./index.0c75b8b0.js";import{A as R}from"./ApiKeyInput.78fe11c0.js";import{s as F}from"./index.1fafcf38.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./ApiKeyValidation.f0f78adc.js";import"./ApiKeyDescriptionDisplay.8e24e539.js";var O=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},e.$listeners),[t("path",{attrs:{"fill-rule":"evenodd",d:"m5.965 4.904 9.131 9.131a6.5 6.5 0 0 0-9.131-9.131zm8.07 10.192L4.904 5.965a6.5 6.5 0 0 0 9.131 9.131zM4.343 4.343a8 8 0 1 1 11.314 11.314A8 8 0 0 1 4.343 4.343z","clip-rule":"evenodd"}})])};const q={render:O},p={};p.props={accessToken:{key:"accessToken",required:!1,type:String}};p.setup=(e,a)=>{const t=e,n=i(()=>b.get(`${$}https://app.blackkitetech.com/api/v2/status`,{headers:{authorization:`Bearer ${t.accessToken}`}}));function c(r){return new Date(r).toISOString()}return{validityCheck:n,formatDate:c}};p.components=Object.assign({CheckSvg:S,DateIsoStringDisplay:A,NoSvg:q},p.components);var z=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.accessToken!==void 0?t("BasePromise",{attrs:{promise:e.validityCheck},scopedSlots:e._u([{key:"success",fn:function(n){var c=n.result.data.ExpirationDateOfClientCredential;return[t("span",{staticClass:"inline-flex items-center space-x-1"},[t("CheckSvg",{staticClass:"-ml-1 h-auto w-4 shrink-0 text-green-600"}),c?t("BaseTypography",{staticClass:"text-green-600",attrs:{variant:"p3"}},[e._v(" Expires At: "),t("DateIsoStringDisplay",{attrs:{value:e.formatDate(c),format:"date"}})],1):e._e()],1)]}},{key:"error",fn:function(){return[t("span",{staticClass:"inline-flex items-center space-x-1"},[t("NoSvg",{staticClass:"-ml-1 h-auto w-4 shrink-0 text-red-600"}),t("BaseTypography",{staticClass:"text-red-600",attrs:{variant:"p3"}},[e._v(" Invalid Credentials ")])],1)]},proxy:!0}],null,!1,1295110825)}):e._e()},P=[];const g={};var U=v(p,z,P,!1,N,null,null,null);function N(e){for(let a in g)this[a]=g[a]}const G=function(){return U.exports}(),u={};u.props={id:{key:"id",required:!0,type:String},secret:{key:"secret",required:!0,type:String}};u.setup=(e,a)=>{const t=e;return{accessToken:i(()=>b.post(`${$}https://app.blackkitetech.com/api/v2/oauth/token`,{grant_type:"client_credentials",client_id:t.id,client_secret:t.secret}))}};u.components=Object.assign({ApiKeyValidationV2:G},u.components);var W=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("BasePromise",{attrs:{promise:e.accessToken},scopedSlots:e._u([{key:"success",fn:function(n){var c=n.result.data.access_token;return[t("ApiKeyValidationV2",{attrs:{"access-token":c}})]}}])})},H=[];const C={};var J=v(u,W,H,!1,Q,null,null,null);function Q(e){for(let a in C)this[a]=C[a]}const X=function(){return J.exports}(),m={};m.props={value:{key:"value",required:!1,type:null},ecosystems:{key:"ecosystems",required:!0,type:Array},entities:{key:"entities",required:!0,type:Array}};m.setup=(e,a)=>{const t=e,n=a.emit,c=L(t,n),r=i({get(){var h;const s=(h=t.value)==null?void 0:h.apiKeyMaybe;if((s==null?void 0:s.oneofKind)==="apiKey")return s.apiKey},set(s){s?c.value.apiKeyMaybe={oneofKind:"apiKey",apiKey:s}:c.value.apiKeyMaybe={oneofKind:void 0}}}),o=i({get(){var s;return(s=t.value)==null?void 0:s.mappedEcosystemId},set(s){s&&(c.value.mappedEcosystemId=s)}}),y=i(()=>o.value?`https://app.blackkitetech.com/ecosystem/companies?ecoId=${encodeURIComponent(o.value)}`:"https://app.blackkitetech.com/ecosystem/companies#ecosystemListTab"),l=i({get(){var s;return(s=t.value)==null?void 0:s.mappedEntityId},set(s){s&&(c.value.mappedEntityId=s)}}),f=i(()=>o.value&&l.value?`https://app.blackkitetech.com/ecosystem/${encodeURIComponent(o.value)}/company/${encodeURIComponent(l.value)}/dashboard`:"https://app.blackkitetech.com/ecosystem/companies"),_=i({get(){var s;return(s=t.value)==null?void 0:s.clientId},set(s){s&&(c.value.clientId=s)}}),k=i({get(){var s;return(s=t.value)==null?void 0:s.secret},set(s){s&&(c.value.secret=s)}});return{apiKey:r,mappedEcosystemId:o,mappedEcosystemLink:y,mappedEntityId:l,mappedEntityLink:f,clientId:_,secret:k}};m.components=Object.assign({ApiKeyInput:R,ExternalLinkSvg:K,ApiAccessToken:X},m.components);var Y=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"space-y-8"},[t("BaseLabel",{staticClass:"space-y-1"},[t("span",[e._v("API Key:")]),t("ApiKeyInput",{model:{value:e.apiKey,callback:function(n){e.apiKey=n},expression:"apiKey"}})],1),t("BaseLabel",{staticClass:"flex flex-col space-y-1"},[t("span",[e._v("Mapped Ecosystem:")]),t("BaseExternalLink",{staticClass:"space-x-2",attrs:{"display-type":"primary",href:e.mappedEcosystemLink}},[t("ExternalLinkSvg",{staticClass:"h-auto w-5 shrink-0"}),t("span",[e._v("Check Mapped Ecosystem")])],1),t("BaseInput",{staticClass:"w-full",model:{value:e.mappedEcosystemId,callback:function(n){e.mappedEcosystemId=e._n(n)},expression:"mappedEcosystemId"}})],1),t("BaseLabel",{staticClass:"flex flex-col space-y-1"},[t("span",[e._v("Mapped Entity:")]),t("BaseExternalLink",{staticClass:"space-x-2",attrs:{"display-type":"primary",href:e.mappedEntityLink}},[t("ExternalLinkSvg",{staticClass:"h-auto w-5 shrink-0"}),t("span",[e._v("Check Mapped Entity")])],1),t("BaseInput",{staticClass:"w-full",model:{value:e.mappedEntityId,callback:function(n){e.mappedEntityId=e._n(n)},expression:"mappedEntityId"}})],1),t("BaseLabel",{staticClass:"space-y-1"},[t("div",{staticClass:"flex flex-col space-y-1 sm:flex-row sm:items-center sm:justify-between sm:space-y-0"},[t("span",[e._v("Client ID:")]),e.clientId&&e.secret?t("ApiAccessToken",{attrs:{id:e.clientId,secret:e.secret}}):e._e()],1),t("BaseInput",{staticClass:"w-full",model:{value:e.clientId,callback:function(n){e.clientId=n},expression:"clientId"}})],1),t("BaseLabel",{staticClass:"space-y-1"},[t("span",[e._v("Client Secret:")]),t("BaseInput",{staticClass:"w-full",model:{value:e.secret,callback:function(n){e.secret=n},expression:"secret"}})],1)],1)},Z=[];const I={};var V=v(m,Y,Z,!1,ee,null,null,null);function ee(e){for(let a in I)this[a]=I[a]}const te=function(){return V.exports}(),d={};d.setup=(e,a)=>{const t=w("id"),n=x.get(t),c=F(i(()=>n.data.value||T.create())),r=D.list(t),o=i(()=>r.data.value||[]),y=M.list(t),l=i(()=>y.data.value||[]),f=j(),_=x.set(t);async function k(){await _.mutateAsync(c.value),f.success("Successfully updated config.")}return{config:c,entities:o,ecosystems:l,submit:k}};d.components=Object.assign({BlackKiteConfigInput:te,FormButton:B},d.components);var se=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"block p-4",attrs:{variant:"subtitle3"}},[e._v(" Configure Black Kite ")]),t("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),e.submit.apply(null,arguments)}}},[t("div",{staticClass:"p-4"},[t("BlackKiteConfigInput",{attrs:{ecosystems:e.ecosystems,entities:e.entities},model:{value:e.config,callback:function(n){e.config=n},expression:"config"}})],1),t("FormButton",{attrs:{action:"save"}})],1)],1)},ae=[];const E={};var ne=v(d,se,ae,!1,ce,null,null,null);function ce(e){for(let a in E)this[a]=E[a]}const ye=function(){return ne.exports}();export{ye as default};
