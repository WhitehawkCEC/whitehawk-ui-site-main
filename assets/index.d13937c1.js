import{S as I,a as R}from"./SubscriptionProductsTable.33590cbb.js";import{bZ as S,c6 as T,d as l,c7 as A,c3 as j,c5 as w,aJ as B,n as F}from"./index.97180dc3.js";import"./DateRangeDisplay.01ee2014.js";import"./IsoDateTimeDisplay.726e9785.js";import"./AppTanStackTable.676427ea.js";import"./createOnChangeFn.c20047b6.js";import"./chevron-up.736f4142.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.816d6271.js";import"./createSimpleTable.1f6afcd3.js";const v={};v.setup=(t,a)=>{const s=S("id"),u=S("subscriptionId"),m=T.list(s,u),_=l(()=>m.data.value||[]),b=A(),P=l(()=>b.pinnedProductIds),h=l(()=>{const i=[];return _.value.filter(n=>{var p,o;return((o=(p=n.product)==null?void 0:p.id)==null?void 0:o.value)&&P.value.includes(n.product.id.value)?i.push(n):[]}),i||[]}),$=j.read(s,u),g=l(()=>{var i;return((i=$.data.value)==null?void 0:i.features)||w.SubscriptionFeatures.create()}),f=B(),x=l(()=>{var n,p;const i=new Map;for(const o of _.value){const C=((p=(n=o.product)==null?void 0:n.id)==null?void 0:p.value)||"",k=[{id:"view",action(){var e,r,c,d;g.value.hasGroups?f.push(`/client/companies/${s.value}/subscriptions/${u.value}/products/${(r=(e=o.product)==null?void 0:e.id)==null?void 0:r.value}/groups`):f.push(`/client/companies/${s.value}/subscriptions/${u.value}/products/${(d=(c=o.product)==null?void 0:c.id)==null?void 0:d.value}`)}},{id:"edit",action(){var e,r;f.push(`/client/companies/${s.value}/subscriptions/${u.value}/products/${(r=(e=o.product)==null?void 0:e.id)==null?void 0:r.value}/settings`)}},{id:"pinProduct",action(){var e,r,c,d;(r=(e=o.product)==null?void 0:e.id)!=null&&r.value&&b.setPinned((d=(c=o.product)==null?void 0:c.id)==null?void 0:d.value)}}].filter(e=>{var r,c;return((c=(r=o.product)==null?void 0:r.id)==null?void 0:c.value)&&P.value.includes(o.product.id.value)||g.value.hasGroups?e.id!=="pinProduct":e});i.set(C,k)}return i});return{id:s,subscriptionId:u,products:_,pinnedProducts:h,actions:x}};v.components=Object.assign({SubscriptionProductCard:I,SubscriptionProductsTable:R},v.components);var G=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("section",{staticClass:"space-y-6"},[t.pinnedProducts.length>0?s("div",{staticClass:"space-y-2"},[s("BaseTypography",{staticClass:"uppercase text-gray-600",attrs:{variant:"overline"}},[t._v(" Pinned Products ")]),s("ul",{staticClass:"grid grid-cols-1 gap-4 sm:gap-6 lg:grid-cols-2 2xl:grid-cols-3"},t._l(t.pinnedProducts,function(u,m){return s("li",{key:m},[s("SubscriptionProductCard",{attrs:{id:t.id,"subscription-id":t.subscriptionId,product:u}})],1)}),0)],1):t._e(),s("BaseTablePageLayout",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Subscription Products")]},proxy:!0},{key:"table",fn:function(){return[s("SubscriptionProductsTable",{attrs:{value:t.products,"mapped-actions":t.actions}})]},proxy:!0}])})],1)},M=[];const y={};var z=F(v,G,M,!1,E,null,null,null);function E(t){for(let a in y)this[a]=y[a]}const W=function(){return z.exports}();export{W as default};
