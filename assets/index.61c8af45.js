import{c as g,aR as y,n as h,am as T,c5 as b,aE as $,r as m,c6 as A}from"./index.963a91ee.js";import{B as C}from"./BasicConfirmModal.76ebd6ba.js";import{A as M,T as k}from"./AppTanStackTable.ff2f3092.js";import{I as P}from"./IsoDateTimeDisplay.22a8f57e.js";import{c as w}from"./createOnChangeFn.0bde0cff.js";import{u as q}from"./createSimpleTable.b89d3f13.js";import"./BasicModal.5c6cee06.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.54f8b67a.js";import"./chevron-up.736f4142.js";const d={};d.props={value:{key:"value",required:!0,type:Array}};d.setup=(e,s)=>{const t=e,r=s.emit,c=g(()=>t.value),n=w(),o=[n.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),n.accessor("bundleSource",{header:()=>"Bundle Source",enableColumnFilter:!1}),n.accessor(a=>{var l;return(l=a.meta)==null?void 0:l.updatedAt},{id:"updatedAt",header:()=>"Last Updated",cell:a=>y(P,{props:{value:a.getValue(),format:"date"}}),enableColumnFilter:!1}),n.display({id:"actions",header:"Actions",cell:({row:a})=>{var l;return y(k,{props:{actions:[{id:"edit",to:`/admin/bundles/sets/${(l=a.original.id)==null?void 0:l.value}`},{id:"delete",action(){a.original&&r("delete",a.original)}}]}})}})];return{instance:q(c,o)}};d.components=Object.assign({AppTanStackTable:M},d.components);var E=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},F=[];const S={};var I=h(d,E,F,!1,Q,null,null,null);function Q(e){for(let s in S)this[s]=S[s]}const V=function(){return I.exports}(),f={};f.setup=(e,s)=>{const t=b.list(),r=b.delete(),c=$(),n=m(),o=m(),_=m("Doing so will affect the following questionnaires:");function a(u){var i;o.value=u,n.value=(i=u.id)==null?void 0:i.value,p.value=!0}const l=g(()=>{var u,i;return(i=(u=A.get(n==null?void 0:n.value).data)==null?void 0:u.value)==null?void 0:i.questionnairePreference}),p=m(!1);async function x(){if(o.value)await r.mutateAsync(o.value),v(),c.success(`Bundle Set ${o.value.name} successfully deleted`);else throw new Error("Invalid request.")}function v(){p.value=!1}return{bundlesQuery:t,selected:o,message:_,setPayload:a,affectedItemsGet:l,isModalVisible:p,deleteBundleSet:x,closeModal:v}};f.components=Object.assign({PlusSvg:T,BundleSetsTable:V,BasicConfirmModal:C},f.components);var j=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Bundle Sets")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"/admin/bundles/sets/new"}},[t("PlusSvg",{staticClass:"w-5"}),t("span",[e._v("Bundle Set")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("BaseVueQuery",{attrs:{query:e.bundlesQuery},scopedSlots:e._u([{key:"success",fn:function(r){var c=r.data;return[t("BundleSetsTable",{attrs:{value:c},on:{delete:e.setPayload}})]}}])})]},proxy:!0}])}),e.isModalVisible&&e.selected?t("BasicConfirmModal",{attrs:{name:e.selected.name,message:e.message,type:"Preference Questionnaires","items-affected":e.affectedItemsGet},on:{delete:e.deleteBundleSet,close:e.closeModal}}):e._e()],1)},D=[];const B={};var L=h(f,j,D,!1,R,null,null,null);function R(e){for(let s in B)this[s]=B[s]}const Y=function(){return L.exports}();export{Y as default};
