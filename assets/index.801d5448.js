import{c as i,n as v,cy as P,bo as D,b as H,r as S,L as F,cD as W,c8 as b,c1 as z,b$ as G,cC as K}from"./index.29a58bc5.js";import{a as I}from"./index.ebbce841.js";import{T as V}from"./ToolTip.5ad67f30.js";import{T as J}from"./TransitionExpand.71e59398.js";const C={};C.props={score:{key:"score",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};C.setup=(e,s)=>{const t=e,n=i(()=>200-t.score/t.max*200),o=i(()=>`gradient-${Math.random()}`),p=i(()=>t.score>=740?"#10b981":t.score>=640?"#fde68a":"#ef4444");return{fill:n,gradientId:o,displayColor:p}};var U=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("svg",{attrs:{viewBox:"0 0 90 80",preserveAspectRatio:"none"}},[t("defs",[t("linearGradient",{attrs:{id:`${e.gradientId}`,x1:"15%",y1:"100%",x2:"80%",y2:"100%"}},[t("stop",{attrs:{offset:"0%","stop-color":`${e.displayColor}`}}),t("stop",{attrs:{offset:"100%","stop-color":`${e.displayColor}`}})],1)],1),t("path",{staticClass:"stroke-current text-gray-200 shadow-inner",attrs:{d:"M20,75 a40,40,0,1,1,50,0",fill:"none","stroke-linecap":"round","stroke-width":"3"}}),t("path",{staticClass:"filling transition duration-300",style:`--fill: ${e.fill}`,attrs:{d:"M20,75 a40,40,0,1,1,50,0",fill:"none",stroke:`url(#${e.gradientId})`,"stroke-dasharray":"200","stroke-dashoffset":"200","stroke-linecap":"round","stroke-width":"3"}})])},X=[];const T={};var Y=v(C,U,X,!1,Z,"62ebebb3",null,null);function Z(e){for(let s in T)this[s]=T[s]}const ee=function(){return Y.exports}(),y={};y.props={score:{key:"score",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};y.setup=(e,s)=>{const t=e,n=i(()=>t.score===0&&t.max===0),o=i(()=>isNaN(t.score/t.max)?I(0):I(t.score/t.max));return{shouldHide:n,percentage:o}};y.components=Object.assign({QuestionnaireProgressBar:ee},y.components);var te=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.shouldHide?t("div",{staticClass:"flex p-4"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" Long form input requires examination by a Cyber Analyst. ")])],1):t("div",{staticClass:"relative flex items-center justify-center p-4"},[t("div",{staticClass:"absolute flex items-center"},[t("BaseTypography",{staticClass:"text-blue-800",attrs:{variant:"h2"}},[e._v(" "+e._s(e.percentage)+" ")])],1),t("div",{staticClass:"relative w-44 sm:w-56 lg:w-44 xl:w-56"},[t("QuestionnaireProgressBar",{attrs:{score:e.score,max:e.max}})],1)])},se=[];const B={};var re=v(y,te,se,!1,ne,null,null,null);function ne(e){for(let s in B)this[s]=B[s]}const A=function(){return re.exports}(),f={};f.props={score:{key:"score",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};f.setup=(e,s)=>({});f.components=Object.assign({DotsSquare:P,QuestionnaireProgressBarText:A},f.components);var ae=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"relative mx-auto flex max-w-xs flex-col items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-blue-100 via-white to-white px-4 py-8 shadow-md sm:max-w-sm sm:rounded-3xl xl:max-w-none xl:p-12"},[t("div",{staticClass:"absolute top-full left-full -translate-y-1/3 -translate-x-1/3 rotate-45 transform xl:-translate-y-1/2"},[t("DotsSquare",{attrs:{color:"blue"}})],1),t("QuestionnaireProgressBarText",{attrs:{score:e.score,max:e.max}})],1)},ie=[];const E={};var oe=v(f,ae,ie,!1,ce,null,null,null);function ce(e){for(let s in E)this[s]=E[s]}const le=function(){return oe.exports}(),g={};g.props={value:{key:"value",required:!0,type:null}};g.setup=(e,s)=>({});g.components=Object.assign({WaveForm:D,QuestionnaireScoreDisplay:le},g.components);var ue=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"relative flex flex-col items-center justify-center lg:grid lg:grid-cols-12"},[t("div",{staticClass:"absolute top-36 w-full opacity-25 sm:top-40 lg:hidden"},[t("WaveForm")],1),t("div",{staticClass:"relative -mb-36 lg:col-span-4 lg:col-start-1 lg:row-start-1 lg:mb-0"},[t("div",{staticClass:"px-6 md:px-8 lg:px-4 lg:pl-0"},[t("QuestionnaireScoreDisplay",{attrs:{score:e.value.score,max:e.value.max}})],1)]),t("BaseSimpleCard",{staticClass:"pt-32 lg:col-span-10 lg:col-start-3 lg:row-start-1 lg:h-fit lg:p-0"},[t("div",{staticClass:"grid items-center gap-5 px-6 py-10 sm:p-8 lg:grid-cols-10 lg:col-start-3 lg:gap-0 lg:p-6 text-center lg:text-left"},[t("div",{staticClass:"grid gap-5 lg:col-span-10 lg:col-start-3"},[t("BaseTypography",{staticClass:"text-prime-navy",attrs:{component:"h2",variant:"h5"}},[e._v(" "+e._s(e.value.title)+" ")]),t("BaseTypography",{staticClass:"text-gray-600",attrs:{component:"p",variant:"p1"}},[e._v(" "+e._s(e.value.description)+" ")])],1)])])],1)},de=[];const j={};var pe=v(g,ue,de,!1,_e,null,null,null);function _e(e){for(let s in j)this[s]=j[s]}const ve=function(){return pe.exports}(),h={};h.props={id:{key:"id",required:!0,type:String},questionnaireId:{key:"questionnaireId",required:!0,type:String},sIndex:{key:"sIndex",required:!0,type:Number},question:{key:"question",required:!0,type:null},answers:{key:"answers",required:!0,type:Array},qIndex:{key:"qIndex",required:!0,type:Number}};h.setup=(e,s)=>{const t=e,n=i(()=>t.answers.find(a=>{var r,l;return((r=a.questionId)==null?void 0:r.value)===((l=t.question.id)==null?void 0:l.value)})),o=i(()=>{var a;return((a=n.value)==null?void 0:a.riskScore)||0}),p=i(()=>{var r,l,_,c;const a=(r=n.value)==null?void 0:r.answer.oneofKind;if(a==="answerText")return(l=n.value)==null?void 0:l.answer.answerText;if(a==="answerId")return(c=(_=n.value)==null?void 0:_.answer.answerId)==null?void 0:c.value}),d=i(()=>t.answers.some(a=>{var r,l;return((r=a.questionId)==null?void 0:r.value)===((l=t.question.id)==null?void 0:l.value)})),u=i(()=>d.value?{type:"info",text:p.value}:{type:"warn",text:"This question has not been answered yet."});return{score:o,hasAnswered:d,toolTipInfo:u}};h.components=Object.assign({ToolTip:V},h.components);var me=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex items-start justify-between p-4"},[t("div",{staticClass:"flex items-start space-x-2"},[t("BaseLink",{attrs:{"display-type":"primary-prime",to:{path:`/client/companies/${e.id}/journey/custom-assessments/${e.questionnaireId}`,query:{section:`${e.sIndex.toString()}`}}}},[e._v(" Question "+e._s(e.qIndex+1)+" ")]),t("ToolTip",{attrs:{type:e.toolTipInfo.type}},[e._v(" "+e._s(e.toolTipInfo.text)+" ")])],1),t("div",[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" Score: "+e._s(e.hasAnswered?e.score:"-")+" ")])],1)])},xe=[];const Q={};var ye=v(h,me,xe,!1,fe,null,null,null);function fe(e){for(let s in Q)this[s]=Q[s]}const ge=function(){return ye.exports}(),q={};q.props={id:{key:"id",required:!0,type:String},questionnaireId:{key:"questionnaireId",required:!0,type:String},section:{key:"section",required:!0,type:null},sIndex:{key:"sIndex",required:!0,type:Number},answers:{key:"answers",required:!0,type:Array},total:{key:"total",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};q.setup=(e,s)=>{const t=e;return{questions:i(()=>t.section.questions)}};q.components=Object.assign({QuestionnaireProgressBarText:A,QuestionOverview:ge},q.components);var he=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex flex-col"},[t("QuestionnaireProgressBarText",{attrs:{score:e.total,max:e.max}}),t("ul",{staticClass:"divide-y"},e._l(e.questions,function(n,o){return t("li",{key:o},[t("QuestionOverview",{attrs:{id:e.id,"questionnaire-id":e.questionnaireId,"s-index":e.sIndex,question:n,answers:e.answers,"q-index":o}})],1)}),0)],1)},qe=[];const R={};var we=v(q,he,qe,!1,$e,null,null,null);function $e(e){for(let s in R)this[s]=R[s]}const ke=function(){return we.exports}(),w={};w.props={id:{key:"id",required:!0,type:String},questionnaireId:{key:"questionnaireId",required:!0,type:String},section:{key:"section",required:!0,type:null},sIndex:{key:"sIndex",required:!0,type:Number},answers:{key:"answers",required:!0,type:Array}};w.setup=(e,s)=>{const t=e,n=S(!1),o=S(0),p=i(()=>{const u=[];return t.section.questions.forEach(a=>{const r=t.answers.find(l=>{var _,c;return((_=l.questionId)==null?void 0:_.value)===((c=a.id)==null?void 0:c.value)});r&&o.value++,u.push((r==null?void 0:r.riskScore)||0)}),u.reduce((a,r)=>a+r,0)}),d=i(()=>{const u=[];return t.section.questions.forEach(a=>{a.answerSet&&a.answerSet.answers.forEach(r=>u.push(r.riskScore))}),u.reduce((a,r)=>a+r,0)});return{isExpanded:n,questionsAnswered:o,total:p,max:d}};w.components=Object.assign({ToggleButton:H,TransitionExpand:J,SectionDetails:ke},w.components);var Ce=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex flex-col space-y-2"},[t("div",{staticClass:"flex flex-col -space-y-1"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"overline"}},[e._v(" Section "+e._s(e.sIndex+1)+" ")]),t("ToggleButton",{staticClass:"group hover:text-blue-800",scopedSlots:e._u([{key:"text",fn:function(){return[t("BaseTypography",{staticClass:"text-prime-navy group-hover:text-blue-800",attrs:{variant:"h6"}},[e._v(" "+e._s(e.section.name)+" ")])]},proxy:!0}]),model:{value:e.isExpanded,callback:function(n){e.isExpanded=n},expression:"isExpanded"}})],1),t("BaseSimpleCard",[t("div",{staticClass:"grid gap-x-4 grid-cols-2 sm:gap-x-6 items-center p-4"},[t("div",{staticClass:"col-span-2"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p3"}},[e._v(" "+e._s(e.questionsAnswered)+" of "+e._s(e.section.questions.length)+" Questions ")])],1),t("div",{staticClass:"col-span-1 flex flex-col items-center"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" Total Risk ")]),t("BaseTypography",{staticClass:"text-prime-indigo",attrs:{variant:"h2"}},[e._v(" "+e._s(e.total)+" ")])],1),t("div",{staticClass:"col-span-1 flex flex-col items-center"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" Max Risk ")]),t("BaseTypography",{staticClass:"text-prime-indigo",attrs:{variant:"h2"}},[e._v(" "+e._s(e.max)+" ")])],1)]),t("TransitionExpand",[e.isExpanded?t("SectionDetails",{attrs:{id:e.id,"questionnaire-id":e.questionnaireId,section:e.section,"s-index":e.sIndex,answers:e.answers,total:e.total,max:e.max}}):e._e()],1)],1)],1)},Se=[];const O={};var be=v(w,Ce,Se,!1,Ie,null,null,null);function Ie(e){for(let s in O)this[s]=O[s]}const Te=function(){return be.exports}(),$={};$.props={id:{key:"id",required:!0,type:String},questionnaireId:{key:"questionnaireId",required:!0,type:String},taken:{key:"taken",required:!0,type:String},value:{key:"value",required:!0,type:null}};$.setup=(e,s)=>{const t=e,n=i(()=>t.taken),o=i(()=>t.value),p=W.list(n),d=i(()=>p.data.value||[]),u=i(()=>Boolean(d.value)),a=i(()=>{const c=[];return d.value.forEach(m=>c.push(m.riskScore)),c.reduce((m,x)=>m+x,0)}),r=i(()=>{const c=[];return o.value.sections.forEach(m=>{m.questions.forEach(x=>{x.answerSet&&x.answerSet.answers.forEach(L=>c.push(L.riskScore))})}),c.reduce((m,x)=>m+x,0)}),l=i(()=>({title:"Total Score / Overview",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Veritatis saepe ullam laborum accusantium itaque, enim commodinumquam incidunt, id autem pariatur sit ut qui libero eos amet molestias inventore ab.",score:a.value,max:r.value})),_=i(()=>{var c;return(c=o.value)==null?void 0:c.sections});return{answers:d,ready:u,overview:l,sections:_}};$.components=Object.assign({LoadingSpinner:F,QuestionnaireSummaryOverview:ve,SectionOverview:Te},$.components);var Be=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.ready?t("section",{staticClass:"space-y-8"},[t("QuestionnaireSummaryOverview",{attrs:{value:e.overview}}),t("ul",{staticClass:"grid gap-4 xl:grid-cols-2 2xl:grid-cols-3 lg:gap-8"},e._l(e.sections,function(n,o){return t("li",{key:o},[t("SectionOverview",{attrs:{id:e.id,"questionnaire-id":e.questionnaireId,section:n,"s-index":o,answers:e.answers}})],1)}),0)],1):t("LoadingSpinner")},Ee=[];const M={};var je=v($,Be,Ee,!1,Qe,null,null,null);function Qe(e){for(let s in M)this[s]=M[s]}const Re=function(){return je.exports}(),k={};k.setup=(e,s)=>{const t=b("id"),n=b("questionnaireId"),o=z.read(n),p=i(()=>o.data.value||G.CustomQuestionnaire.create()),d=K.list(t),u=i(()=>{var a,r,l;return(l=(r=(a=d.data.value)==null?void 0:a.find(_=>{var c;return((c=_.questionnaireId)==null?void 0:c.value)===n.value}))==null?void 0:r.id)==null?void 0:l.value});return{id:t,questionnaireId:n,questionnaireRead:o,questionnaire:p,takenId:u}};k.components=Object.assign({LoadingSpinner:F,QuestionnaireReview:Re},k.components);var Oe=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[e.questionnaireRead.isLoading.value?t("LoadingSpinner"):t("div",{staticClass:"space-y-6"},[t("BaseTypography",{attrs:{variant:"h5",component:"h2"}},[e._v(" Review Questionnaire ")]),e.takenId?t("QuestionnaireReview",{attrs:{id:e.id,"questionnaire-id":e.questionnaireId,taken:e.takenId,value:e.questionnaire}}):e._e()],1)],1)},Me=[];const N={};var Ne=v(k,Oe,Me,!1,Fe,null,null,null);function Fe(e){for(let s in N)this[s]=N[s]}const We=function(){return Ne.exports}();export{We as default};
