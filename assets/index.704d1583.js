import{b_ as T,c as y,aR as h,aO as Q,aP as S,n as $,bV as w,am as M,r as u,b$ as P,c0 as C,aE as F}from"./index.91cb71ee.js";import{B}from"./BasicConfirmModal.cb099ed4.js";import{A as I,T as k}from"./AppTanStackTable.acf7eb42.js";import{I as D}from"./IsoDateTimeDisplay.a42a1347.js";import{c as E}from"./createOnChangeFn.56ecbd8e.js";import{F as N}from"./FileSaver.min.d0337625.js";import{u as V}from"./createSimpleTable.b37c2aa7.js";import"./BasicModal.ba7a859c.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.0afddc58.js";import"./chevron-up.736f4142.js";function R(e){switch(e){case T.QuestionnaireType.CANNED:return"Canned";case T.QuestionnaireType.CUSTOM:return"Custom";default:return"N/A"}}const d={};d.props={questionnaires:{key:"questionnaires",required:!0,type:Array}};d.setup=(e,n)=>{const t=e,o=n.emit,f=y(()=>t.questionnaires),a=E(),r=[a.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),a.accessor("industry",{header:()=>"Industry",enableColumnFilter:!1}),a.accessor("type",{header:()=>"Type",cell:s=>R(s.getValue()),enableColumnFilter:!1}),a.accessor("description",{header:()=>"Description",enableColumnFilter:!1}),a.accessor(s=>{var i;return(i=s.meta)==null?void 0:i.updatedAt},{id:"updatedAt",header:()=>"Updated At",cell:s=>h(D,{props:{value:s.getValue(),format:"date"}}),enableColumnFilter:!1}),a.display({id:"actions",header:"Actions",cell:({row:s})=>{var i;return h(k,{props:{actions:[{id:"edit",to:`/admin/custom-questionnaires/${(i=s.original.id)==null?void 0:i.value}`},{id:"download",async action(){var m;const{data:_}=await Q(`${S}/custom-questionnaires/${(m=s.original.id)==null?void 0:m.value}/download`,{responseType:"blob"}),v=`${s.original.fileUrl}.xlsx`;N.exports.saveAs(_,v)}},{id:"delete",action(){s.original&&o("delete",s.original)}}]}})}})];return{instance:V(f,r)}};d.components=Object.assign({AppTanStackTable:I},d.components);var j=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("AppTanStackTable",{attrs:{table:e.instance}})},L=[];const x={};var O=$(d,j,L,!1,U,null,null,null);function U(e){for(let n in x)this[n]=x[n]}const G=function(){return O.exports}(),p={};p.setup=(e,n)=>{const t=u(),o=u(),f=u("Doing so will affect the following questionnaires:"),a=u("You are not able to delete this questionnaire:"),r=u(!1);function b(l){var c;o.value=l,t.value=(c=l.id)==null?void 0:c.value,r.value=!0}const s=y(()=>{var l,c;return(c=(l=P.get(t==null?void 0:t.value).data)==null?void 0:l.value)==null?void 0:c.questionnairePreference}),i=C.list(),_=C.delete(),v=y(()=>i.data.value||[]),m=F();async function A(){if(o.value)await _.mutateAsync({questionnaireId:o.value.id}),g(),m.success(`Questionnaire  ${o.value.description} successfully deleted`);else throw new Error("Invalid request.")}function g(){r.value=!1}return{selected:o,message:f,deletionRestrictionMessage:a,isModalVisible:r,setPayload:b,affectedItemsGet:s,questionnaires:v,deleteQuestionnaire:A,closeModal:g}};p.components=Object.assign({BaseTablePageLayout:w,PlusSvg:M,QuestionnairesTable:G,BasicConfirmModal:B},p.components);var H=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Questionnaires")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{to:"new",append:""}},[t("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),t("span",[e._v("Questionnaire")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("QuestionnairesTable",{attrs:{questionnaires:e.questionnaires},on:{delete:e.setPayload}})]},proxy:!0}])}),e.isModalVisible&&e.selected?t("BasicConfirmModal",{attrs:{name:e.selected.name,message:e.message,"deletion-restriction-message":e.deletionRestrictionMessage,type:"Preference Questionnaires","items-affected":e.affectedItemsGet},on:{delete:e.deleteQuestionnaire,close:e.closeModal}}):e._e()],1)},z=[];const q={};var Y=$(p,H,z,!1,J,null,null,null);function J(e){for(let n in q)this[n]=q[n]}const re=function(){return Y.exports}();export{re as default};
