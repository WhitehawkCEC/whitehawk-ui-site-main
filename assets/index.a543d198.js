import{E as B}from"./exclamation-triangle.54812a62.js";import{d as g,aJ as T,aT as p,n as h,aq as M,c1 as $,cG as k,r as m,aG as A}from"./index.183f2327.js";import{B as R}from"./BasicModal.8d2a7aaa.js";import{A as E,R as I}from"./RowSelectionInput.f1ad2d71.js";import{A as j,T as q}from"./AppTanStackTable.5f2bac29.js";import{c as F}from"./createOnChangeFn.79c5963f.js";import{u as N}from"./createSimpleTable.89181a26.js";import{u as y}from"./useManufacturerProducts.f2736be9.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.4b5ead62.js";import"./chevron-up.736f4142.js";const i={};i.props={id:{key:"id",required:!0,type:String},products:{key:"products",required:!0,type:Array}};i.setup=(t,s)=>{const e=t,r=s.emit,n=g(()=>e.products),c=T(),o=F(),u=[o.display({id:"select",header:({table:a})=>p(E,{props:{table:a}}),cell:({row:a})=>p(I,{props:{row:a}})}),o.accessor("id",{header:()=>"Id",enableColumnFilter:!0}),o.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),o.accessor(a=>a.type.name,{id:"type",header:()=>"Type",enableColumnFilter:!1}),o.display({id:"actions",header:"Actions",cell:({row:a})=>p(q,{props:{actions:[{id:"view",action(){c.push(`/admin/manufacturers/${e.id}/products/${a.original.id}`)}},{id:"delete",action(){r("delete",a.original)}}]}})})];return{instance:N(n,u)}};i.components=Object.assign({AppTanStackTable:j},i.components);var V=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("AppTanStackTable",{attrs:{table:t.instance}})},D=[];const v={};var G=h(i,V,D,!1,H,null,null,null);function H(t){for(let s in v)this[s]=v[s]}const O=function(){return G.exports}(),d={};d.setup=(t,s)=>{const e=$("id"),r=y.list(e),n=k.get(e),c=m(),o=m(),u=m(!1),f=g(()=>{var l;return(l=n==null?void 0:n.data)==null?void 0:l.value});function a(l){const{id:S,name:P}=l;c.value=S,o.value=P,u.value=!0}const b=y.delete(e,c),w=A();async function C(){if(c)await b.mutateAsync(),w.success("Successfully deleted manufacturer.");else throw new Error("Invalid request.");_()}function _(){u.value=!1}return{id:e,productsQuery:r,productName:o,isModalVisible:u,totalProducts:f,setPayload:a,deleteProduct:C,closeModal:_}};d.components=Object.assign({PlusSvg:M,ManufacturerProductsTable:O,BasicModal:R,WarningSvg:B},d.components);var Q=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",[e("BaseTablePageLayout",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Products")]},proxy:!0},{key:"button",fn:function(){return[e("div",{staticClass:"flex space-x-4"},[e("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{to:`/admin/manufacturers/${t.id}/products/new`}},[e("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),e("span",[t._v("Product")])],1),e("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{"display-type":"danger",action:"secondary"}},[e("span",[t._v("Delete Products")])])],1)]},proxy:!0},{key:"table",fn:function(){return[e("BaseVueQuery",{attrs:{query:t.productsQuery},scopedSlots:t._u([{key:"success",fn:function(r){var n=r.data;return[e("ManufacturerProductsTable",{attrs:{id:t.id,products:n},on:{delete:t.setPayload}})]}}])})]},proxy:!0}])}),e("BasicModal",{directives:[{name:"show",rawName:"v-show",value:t.isModalVisible,expression:"isModalVisible"}],on:{close:t.closeModal},scopedSlots:t._u([{key:"body",fn:function(){return[e("div",{staticClass:"flex flex-col items-center justify-center space-y-8 px-5"},[e("BaseIcon",{staticClass:"mx-auto max-w-min lg:mx-0 lg:max-w-none",attrs:{color:"danger",shape:"round"}},[e("WarningSvg",{staticClass:"h-auto w-5"})],1),e("BaseTypography",{staticClass:"text-gray-500",attrs:{component:"h2",variant:"subtitle3"}},[t._v(" Are you sure you want to delete "),e("span",{staticClass:"text-red-500"},[t._v(t._s(t.productName))]),t._v(" product? "),t.totalProducts===1?e("BaseTypography",{staticClass:"text-gray-500",attrs:{component:"h2",variant:"subtitle3"}},[e("span",{staticClass:"text-red-500"},[t._v(t._s(t.id))]),t._v(" manufacturer will be without single product. ")]):t._e()],1),e("div",{staticClass:"py-4"},[e("BaseButton",{attrs:{"display-type":"danger",action:"secondary"},on:{click:t.deleteProduct}},[t._v(" Delete Product ")])],1)],1)]},proxy:!0}])})],1)},W=[];const x={};var z=h(d,Q,W,!1,J,null,null,null);function J(t){for(let s in x)this[s]=x[s]}const nt=function(){return z.exports}();export{nt as default};
