import{F as E}from"./FormButton.95316009.js";import{ai as k,aV as h,aF as $,aR as l,aS as m,aD as g,d,b2 as y,n as b,bv as B,c2 as q,bJ as C,r as M,aC as O,aK as F}from"./index.e75910c9.js";import{D as S}from"./DynamicForm.f0883469.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";const v={get(e){async function a(){const{data:t}=await l.get(`${m}/companies/${e.value}/black-kite/mapped-entity`);return t}return k(["companies",e,"black-kite","mapped-entity"],a,{retry:!1})},set(e){const a=h();return $(t=>l.put(`${m}/companies/${e.value}/black-kite/mapped-entity`,t).then(n=>n.data),{onSuccess(){a.invalidateQueries(["companies",e,"black-kite","mapped-entity"],{exact:!0})}})}},R={get(e){return k(["companies",e,"black-kite","mapped-entity-entry-options"],()=>l.get(`${m}/companies/${e.value}/black-kite/mapped-entity-entry-options`).then(a=>a.data))}},p={};p.props={value:{key:"value",required:!1,type:null},targetIsReadOnly:{key:"targetIsReadOnly",required:!1,type:Boolean},companies:{key:"companies",required:!0,type:Array},providerOptions:{key:"providerOptions",required:!0,type:Array}};p.setup=(e,a)=>{const t=e,n=a.emit,o=g(t,n),r=d(()=>t.companies.map(({id:s})=>({accountId:s}))),i=d(()=>[{name:"consumer",label:"Consumer",component:{is:y,attrs:{required:!0,options:r.value.map(s=>({text:s.accountId,value:s}))}}},{name:"provider",label:"Black Kite Entity",component:{is:y,attrs:{required:!0,options:t.providerOptions.map(s=>({text:s.data.name,value:s}))}}}]);return{proxy:o,schema:i}};p.components=Object.assign({DynamicForm:S},p.components);var D=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("DynamicForm",{attrs:{schema:e.schema},model:{value:e.proxy,callback:function(n){e.proxy=n},expression:"proxy"}})},I=[];const _={};var Q=b(p,D,I,!1,j,null,null,null);function j(e){for(let a in _)this[a]=_[a]}const K=function(){return Q.exports}(),u={};u.setup=(e,a)=>{const t=q("id"),n=[C.list(),R.get(t)],o=v.get(t),r=M();O(()=>o.data.value,c=>{c&&(r.value=c)},{immediate:!0});const i=F(),s=v.set(t);async function x(){if(r.value){const c=r.value;await s.mutateAsync(c),i.push(`/admin/companies/${t.value}/cyber-risk-rating/rating-service-2/mapped-entity`)}}return{queries:n,mappedEntity:r,updateMappedEntity:x}};u.components=Object.assign({BackButton:B,MappedEntityInput:K,FormButton:E},u.components);var A=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"space-y-6"},[t("BackButton"),t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h2",variant:"subtitle3"}},[e._v(" Update Mapped Entity ")]),t("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),e.updateMappedEntity.apply(null,arguments)}}},[t("BaseVueQueries",{attrs:{queries:e.queries},scopedSlots:e._u([{key:"success",fn:function(n){var o=n[0],r=n[1];return[t("MappedEntityInput",{attrs:{companies:o,"provider-options":r},model:{value:e.mappedEntity,callback:function(i){e.mappedEntity=i},expression:"mappedEntity"}})]}}])}),t("FormButton",{attrs:{action:"update"}})],1)],1)],1)},U=[];const f={};var w=b(u,A,U,!1,P,null,null,null);function P(e){for(let a in f)this[a]=f[a]}const H=function(){return w.exports}();export{H as default};
