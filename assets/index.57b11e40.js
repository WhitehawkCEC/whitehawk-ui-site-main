import{bP as R,n as m,aB as T,a$ as g,ah as $,aS as k,aD as E,aO as d,aP as y,L as I,bY as w,r as A,c as D,aI as F}from"./index.1be96d76.js";import{T as M}from"./ToolTip.48e41c2b.js";import{A as O}from"./AppTanStackTable.b4268540.js";import{c as P}from"./createOnChangeFn.67977a20.js";import{u as V}from"./createSimpleTable.5d942da3.js";import{D as q}from"./DynamicForm.073ddec0.js";import{S as B}from"./StatusInput.de667ecc.js";import"./exclamation-triangle.54812a62.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.acb23ae5.js";import"./chevron-up.736f4142.js";const i={};i.props={matches:{key:"matches",required:!0,type:Array}};i.setup=(e,a)=>{const t=e,{matches:n}=R(t),s=P(),c=[s.accessor(r=>r.cyberOne.id,{id:"id",header:()=>"ID",enableColumnFilter:!1}),s.accessor(r=>r.cyberOne.name,{id:"name",header:()=>"Name",enableColumnFilter:!1}),s.accessor(r=>r.cyberOne.domain,{id:"domain",header:()=>"Domain",enableColumnFilter:!1}),s.accessor(r=>r.supplier.name,{id:"supplier",header:()=>"Supplier",enableColumnFilter:!1})];return{instance:V(n,c)}};i.components=Object.assign({AppTanStackTable:O},i.components);var N=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("AppTanStackTable",{attrs:{table:e.instance}})},G=[];const v={};var H=m(i,N,G,!1,L,null,null,null);function L(e){for(let a in v)this[a]=v[a]}const j=function(){return H.exports}();var p=(e=>(e.RATING_SERVICE_1="RATING_SERVICE_1",e.RATING_SERVICE_2="RATING_SERVICE_2",e))(p||{});const u={};u.props={value:{key:"value",required:!1,type:null},matches:{key:"matches",required:!0,type:Array}};u.setup=(e,a)=>{const t=e,n=a.emit,s=T(t,n),c=[{name:"ratingService",label:"Report Type",component:{is:g,attrs:{required:!0,options:[{text:"Rating Service 1",value:p.RATING_SERVICE_1},{text:"Rating Service 2",value:p.RATING_SERVICE_2}]}}},{name:"status",label:"Status",component:{is:B,attrs:{required:!0}}}];return{proxy:s,schema:c}};u.components=Object.assign({DynamicForm:q},u.components);var Q=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("DynamicForm",{attrs:{schema:e.schema},model:{value:e.proxy,callback:function(n){e.proxy=n},expression:"proxy"}})},W=[];const h={};var U=m(u,Q,W,!1,Y,null,null,null);function Y(e){for(let a in h)this[a]=h[a]}const z=function(){return U.exports}(),f={get(e){return $(["companies",e,"cyber-one","matched-pairs","whitehawk"],()=>d.get(`${y}/companies/${e.value}/cyber-one/matched-pairs-whitehawk`).then(a=>a.data))},update(e){const a=k();return E(t=>d.post(`${y}/companies/${e.value}/cyber-one/matched-pairs-whitehawk/sync`,t).then(n=>n.data),{onSuccess(){a.invalidateQueries(["companies",e,"cyber-one","matched-pairs","whitehawk"],{exact:!0})}})}},l={};l.setup=(e,a)=>{const t=w("id"),n=f.get(t),s=A(),c=D({get(){if(s.value)return s.value;const o=new Date,x=o.getFullYear(),C=`Q${Math.ceil((o.getMonth()+1)/4)}`;return{id:t.value,matchedPair:n.data.value||[],status:{state:"COMPLETE",year:x,quarter:C},ratingService:"RATING_SERVICE_2"}},set(o){o&&(s.value=o)}}),_=F(),r=f.update(t);async function b(){c.value&&(await r.mutateAsync(c.value)).data&&_.push("../")}return{matches:n,sync:c,syncUpdate:r,upload:b}};l.components=Object.assign({WhiteHawkMatchedPairsTable:j,ToolTip:M,WhiteHawkSyncInput:z,LoadingSpinner:I},l.components);var J=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("main",{staticClass:"space-y-6"},[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"overline",fn:function(){return[e._v("VRM Dashboard")]},proxy:!0},{key:"title",fn:function(){return[e._v("Scorecard Sync")]},proxy:!0},{key:"table",fn:function(){return[t("WhiteHawkMatchedPairsTable",{attrs:{matches:e.matches.data.value||[]}})]},proxy:!0}])}),t("BaseSimpleCard",{staticClass:"divide-y"},[t("div",{staticClass:"flex items-center space-y-1 space-x-1 p-4"},[t("BaseTypography",{attrs:{variant:"subtitle3",component:"h2"}},[e._v(" Sync Scorecard Assets ")]),t("ToolTip",[e._v(" This will sync the documents for the assets listed above to CyberOne. ")])],1),t("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),e.upload.apply(null,arguments)}}},[t("BaseVueQuery",{attrs:{query:e.matches},scopedSlots:e._u([{key:"success",fn:function(n){var s=n.data;return[t("WhiteHawkSyncInput",{attrs:{matches:s},model:{value:e.sync,callback:function(c){e.sync=c},expression:"sync"}})]}}])}),t("div",{staticClass:"p-4"},[t("BaseButton",{attrs:{disabled:e.syncUpdate.isLoading.value}},[e.syncUpdate.isLoading.value?t("LoadingSpinner"):t("span",[e._v("Sync")])],1)],1)],1)])],1)},K=[];const S={};var X=m(l,J,K,!1,Z,null,null,null);function Z(e){for(let a in S)this[a]=S[a]}const _e=function(){return X.exports}();export{_e as default};
