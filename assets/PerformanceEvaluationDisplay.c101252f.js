import"./chartjs-adapter-date-fns.esm.71c55821.js";import{r as b,a_ as x,c,bl as k,b0 as T,bK as R,aY as B,n as _}from"./index.16267a9b.js";import{C,L as $,a as O,b as S,P as w,T as M,p as A}from"./chart.c54a61e9.js";import{B as j}from"./BitsightSummaryOverview.62589efc.js";import{C as q}from"./CisToCmmcMappingDisplay.750f3a69.js";import{R as D}from"./RiskVectorSummary.54d45cfc.js";C.register($,O,S,w,M,A);const g=B({inheritAttrs:!1});g.props={ratingsOverTime:{key:"ratingsOverTime",required:!0,type:Array},width:{key:"width",required:!1,type:Number},height:{key:"height",required:!1,type:Number},options:{key:"options",required:!0,type:Object}};g.setup=(e,a)=>{const t=e,i=a.emit,n=b(),o=x(),l=c(()=>({width:t.width?`${t.width}px`:"100%",height:t.height?`${t.height}px`:"100%"})),m=c(()=>{const r=t.ratingsOverTime.map(d=>d.date),s=t.ratingsOverTime.map(d=>d.score);return{labels:r,datasets:[{label:"Ratings Over Time",data:s}]}}),v=c(()=>({scales:{xAxis:{title:{display:!0,text:"Date"},type:"time",time:{unit:"month"}},yAxis:{title:{display:!0,text:"Rating"},min:250,max:900,grid:{color(r){const{value:s}=r.tick;if(s>=250&&s<=639)return"#ef4444";if(s>=640&&s<=739)return"#eab308";if(s>=740&&s<=900)return"#22c55e"}},ticks:{color(r){const{value:s}=r.tick;if(s>=250&&s<=639)return"#991b1b";if(s>=640&&s<=739)return"#854d0e";if(s>=740&&s<=900)return"#166534"},stepSize:50}}},elements:{point:{radius:2,hoverRadius:6,backgroundColor:"#3b82f6"},line:{stepped:!0,borderColor:"#bfdbfe",borderWidth:8,borderJoinStyle:"round"}},animation:{onComplete:()=>{n.value&&i("animation-complete",n.value)}},...t.options}));return k(()=>{T(()=>{const r=n.value;!r||(o.value=new C(r,{type:"line",data:m.value,options:v.value}))})}),R(()=>{var r;(r=o.value)==null||r.destroy()}),{canvas:n,parentStyle:l}};var V=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"relative",style:e.parentStyle},[t("canvas",e._b({ref:"canvas",attrs:{role:"img","aria-label":"Ratings Over Time chart"}},"canvas",e.$attrs,!1))])},E=[];const y={};var L=_(g,V,E,!1,P,null,null,null);function P(e){for(let a in y)this[a]=y[a]}const F=function(){return L.exports}(),p={};p.props={value:{key:"value",required:!0,type:Array}};p.setup=(e,a)=>{const t=e;return{ratingsOverTime:c(()=>t.value.map(({rating_date:o,rating:l})=>({date:o,score:l}))),bitsightBadges:[{label:"Basic",range:"250-640",color:"bg-red-100 text-red-800"},{label:"Intermediate",range:"640-740",color:"bg-yellow-100 text-yellow-800"},{label:"Advanced",range:"740-900",color:"bg-green-100 text-green-800"}]}};p.components=Object.assign({BitsightRatingsChart:F},p.components);var z=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"flex flex-col p-4"},[t("div",{staticClass:"grid grid-cols-3 gap-4"},e._l(e.bitsightBadges,function(i){return t("div",{key:i.label,staticClass:"flex flex-col items-center"},[t("span",{staticClass:"inline-flex items-center rounded px-2",class:i.color},[t("BaseTypography",{staticClass:"uppercase",attrs:{variant:"p3"}},[e._v(" "+e._s(i.label)+" ")])],1),t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p2"}},[e._v(" "+e._s(i.range)+" ")])],1)}),0),t("div",{staticClass:"h-96"},[t("BitsightRatingsChart",{attrs:{"ratings-over-time":e.ratingsOverTime,options:{maintainAspectRatio:!1,devicePixelRatio:1}}})],1)])},I=[];const f={};var N=_(p,z,I,!1,J,null,null,null);function J(e){for(let a in f)this[a]=f[a]}const K=function(){return N.exports}(),u={};u.props={value:{key:"value",required:!0,type:null},mapping:{key:"mapping",required:!1,type:null}};u.setup=(e,a)=>{const t=e;return{riskVectors:c(()=>{const n={};for(const o of Object.entries(t.value.analysis)){const[l,m]=o,{grade:v}=m;n[l]={grade:v}}return n})}};u.components=Object.assign({BitsightSummaryOverview:j,RiskVectorSummary:D,BitsightRatingsDisplay:K,CisToCmmcMappingDisplay:q},u.components);var U=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"flex flex-col space-y-10"},[t("BitsightSummaryOverview",{attrs:{rating:e.value,company:e.value.supplier.name,"show-badges":!1}}),t("div",{staticClass:"space-y-2"},[t("BaseTypography",{staticClass:"text-prime-navy",attrs:{variant:"h6",component:"h3"}},[e._v(" Risk Vector Analysis ")]),t("BaseSimpleCard",[t("RiskVectorSummary",{attrs:{value:e.riskVectors}})],1)],1),t("div",{staticClass:"space-y-2"},[t("BaseTypography",{staticClass:"text-prime-navy",attrs:{variant:"h6",component:"h3"}},[e._v(" Ratings Over Time ")]),t("BaseSimpleCard",[t("BitsightRatingsDisplay",{attrs:{value:e.value.ratings}})],1)],1),e.mapping?t("div",{staticClass:"space-y-2"},[t("BaseTypography",{staticClass:"text-prime-navy",attrs:{variant:"h6",component:"h3"}},[e._v(" CIS Controls Mapped to CMMC Maturity Levels ")]),t("CisToCmmcMappingDisplay",{attrs:{value:e.mapping}})],1):e._e()],1)},W=[];const h={};var Y=_(u,U,W,!1,G,null,null,null);function G(e){for(let a in h)this[a]=h[a]}const ae=function(){return Y.exports}();export{ae as P};
