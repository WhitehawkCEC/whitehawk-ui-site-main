import{R as E}from"./arrow-path.24b87f73.js";import{B as U,a as N,b as F,c as P,d as j,C as L,u as M}from"./ComplianceSummaryInput.9d322cdc.js";import{d as G,c as z}from"./BlackKiteProgressBar.5daec9bd.js";import{C as Q}from"./CollapsibleSection.2a003abe.js";import{A as H}from"./AnalystSelect.5572ab80.js";import{S as J}from"./StatusInput.66025d64.js";import{S as W}from"./SupplierSelect.9d9fa7f3.js";import{ax as R,d as c,aP as A,aQ as B,n as $}from"./index.bc3a24d1.js";import{e as p}from"./attributeValue.ea53a720.js";import{T as X}from"./TemplateSelect.274e27cc.js";const u={};u.props={value:{key:"value",required:!1,type:null},users:{key:"users",required:!0,type:Array},suppliers:{key:"suppliers",required:!0,type:Array},products:{key:"products",required:!0,type:Array}};u.setup=(e,o)=>{const t=e,s=o.emit,r=R(t,s),y=c(()=>t.users.filter(a=>p(a,"email").includes("@whitehawk")).map(a=>({id:p(a,"sub"),name:p(a,"name"),title:p(a,"custom:title"),email:p(a,"email")})).sort((a,i)=>a.email.localeCompare(i.email))),m=c(()=>{const a=[];for(const i of t.products)for(const n of i.categories)a.push(n);return M(a,"id").sort((i,n)=>i.name.localeCompare(n.name))}),l=c(()=>{var i,n;const a=[];return(i=r.value.supplier)!=null&&i.id||a.push("Select a supplier"),((n=r.value.status)==null?void 0:n.state)==="DELIVERED"&&a.push('The status of this scorecard has already been marked as "Delivered."'),{allowed:a.length===0,reasons:a}});async function f(){var b;const[a,i]=await Promise.all([A.get(`${B}/random-bundle-solution`),A.get(`${B}/companies/${(b=r.value.buyer.company)==null?void 0:b.id}/black-kite/entities/${r.value.supplier.id}/performance`)]),{BASIC:n,BALANCED:T,ADVANCED:V}=a.data,{cmmcAnalysis:K,reports:v,ratingScoreDetails:q,riskVectors:w,focusAreaOrder:x}=i.data,[k,C,_]=x,O=["NIST 800-53 R5","CIS CSC-20","CMMC 2.0","NIST 800-171"],S={};for(const g of v.compliance){const{StandardCode:h}=g;O.includes(h)&&(S[h]={report:g})}r.value.cmmcAnalysis=K,r.value.reports=v,r.value.ratingScore=q,r.value.riskVectors=w,r.value.focusAreas=[k,C,_],r.value.focusAreaOrder=x,r.value.bundle={BASIC:n[k],BALANCED:T[C],ADVANCED:V[_]},r.value.compliance=S,s("update-data")}return{proxy:r,analystOptions:y,productCategories:m,canUpdateData:l,updateData:f}};u.components=Object.assign({AnalystSelect:H,SupplierSelect:W,RefreshSvg:E,BlackKiteSummaryDescription:U,BlackKiteReportSummary:N,CollapsibleSection:Q,BlackKiteReportRisk:G,BlackKiteRiskVectorsDisplay:z,BlackKiteFocusAreasInput:F,BlackKiteRiskVectorPerformance:P,BundleSolutionInput:j,ComplianceSummaryInput:L,StatusInput:J},u.components);var Y=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("section",{staticClass:"flex flex-col divide-y"},[t("div",{staticClass:"flex flex-col divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Analyst Information ")]),t("AnalystSelect",{attrs:{options:e.analystOptions},model:{value:e.proxy.analyst,callback:function(s){e.$set(e.proxy,"analyst",s)},expression:"proxy.analyst"}})],1),t("div",{staticClass:"flex flex-col divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" General Information ")]),t("SupplierSelect",{attrs:{options:e.suppliers},model:{value:e.proxy.supplier,callback:function(s){e.$set(e.proxy,"supplier",s)},expression:"proxy.supplier"}})],1),t("div",{staticClass:"flex flex-col divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Update Data ")]),e.canUpdateData.allowed?e._e():t("BaseAlert",{attrs:{type:"warn"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Update Unavailable")]},proxy:!0},{key:"message",fn:function(){return[t("ul",{staticClass:"flex list-inside list-disc flex-col space-y-1"},e._l(e.canUpdateData.reasons,function(s){return t("li",{key:s},[e._v(" "+e._s(s)+" ")])}),0)]},proxy:!0}],null,!1,4159848379)}),t("div",{staticClass:"p-4"},[t("BaseButton",{staticClass:"w-full space-x-2 lg:w-auto",attrs:{type:"button",disabled:!e.canUpdateData.allowed},on:{click:e.updateData}},[t("RefreshSvg",{staticClass:"h-auto w-4 xl:w-5"}),t("span",[e._v("Update")])],1)],1)],1),e.proxy.reports?t("div",[t("div",{staticClass:"flex flex-col divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Summary Report ")]),t("div",{staticClass:"flex flex-col divide-y"},[t("BlackKiteSummaryDescription",{attrs:{score:parseInt(e.proxy.reports.summary.GradeOver100),date:e.proxy.reports.summary.LastUpdatedAt,description:e.proxy.ratingScore.description}}),t("div",{staticClass:"p-4"},[t("BlackKiteReportSummary",{attrs:{summary:e.proxy.reports.summary}})],1)],1),t("CollapsibleSection",{scopedSlots:e._u([{key:"title",fn:function(){return[t("BaseTypography",{staticClass:"py-4 pl-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" FAIR Report ")])]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"p-4"},[t("BlackKiteReportRisk",{attrs:{risk:e.proxy.reports.risk}})],1)]},proxy:!0}],null,!1,3664726691)})],1)]):e._e(),t("div",{staticClass:"grid divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Recommended Focus Areas ")]),e.proxy.riskVectors?t("div",{staticClass:"flex flex-col divide-y lg:grid lg:grid-cols-2 lg:divide-x lg:divide-y-0 xl:grid-cols-3"},[t("div",{staticClass:"p-4"},[t("BlackKiteRiskVectorsDisplay",{model:{value:e.proxy.riskVectors,callback:function(s){e.$set(e.proxy,"riskVectors",s)},expression:"proxy.riskVectors"}})],1),t("BlackKiteFocusAreasInput",{attrs:{options:e.proxy.focusAreaOrder},model:{value:e.proxy.focusAreas,callback:function(s){e.$set(e.proxy,"focusAreas",s)},expression:"proxy.focusAreas"}})],1):e._e()],1),t("CollapsibleSection",{scopedSlots:e._u([{key:"title",fn:function(){return[t("BaseTypography",{staticClass:"py-4 pl-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Risk Vector Performance ")])]},proxy:!0},{key:"content",fn:function(){return[t("BlackKiteRiskVectorPerformance",{model:{value:e.proxy.riskVectors,callback:function(s){e.$set(e.proxy,"riskVectors",s)},expression:"proxy.riskVectors"}})]},proxy:!0}])}),t("div",{staticClass:"flex flex-col"},[t("BundleSolutionInput",{attrs:{products:e.products,"product-categories":e.productCategories},model:{value:e.proxy.bundle,callback:function(s){e.$set(e.proxy,"bundle",s)},expression:"proxy.bundle"}})],1),t("div",{staticClass:"grid divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Compliance ")]),e.proxy.compliance?t("ComplianceSummaryInput",{model:{value:e.proxy.compliance,callback:function(s){e.$set(e.proxy,"compliance",s)},expression:"proxy.compliance"}}):e._e()],1),t("div",{staticClass:"grid divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Status ")]),t("StatusInput",{model:{value:e.proxy.status,callback:function(s){e.$set(e.proxy,"status",s)},expression:"proxy.status"}})],1)],1)},Z=[];const D={};var ee=$(u,Y,Z,!1,te,null,null,null);function te(e){for(let o in D)this[o]=D[o]}const se=function(){return ee.exports}(),d={};d.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:null},users:{key:"users",required:!0,type:Array},entities:{key:"entities",required:!0,type:Array},products:{key:"products",required:!0,type:Array},templates:{key:"templates",required:!0,type:Array}};d.setup=(e,o)=>{const t=e,s=o.emit,r=R(t,s),y=c(()=>t.entities.map(l=>({id:l.CompanyId,name:l.CompanyName})).sort((l,f)=>l.name.localeCompare(f.name))||[]),m=c(()=>t.templates.map(({key:l})=>l));return{proxy:r,suppliers:y,templateOptions:m}};d.components=Object.assign({TemplateSelect:X,DataInput:se},d.components);var ae=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"flex flex-col divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Template Information ")]),t("TemplateSelect",{attrs:{options:e.templateOptions},model:{value:e.proxy.template,callback:function(s){e.$set(e.proxy,"template",s)},expression:"proxy.template"}}),t("DataInput",{attrs:{users:e.users,suppliers:e.suppliers,products:e.products},model:{value:e.proxy.data,callback:function(s){e.$set(e.proxy,"data",s)},expression:"proxy.data"}})],1)},re=[];const I={};var oe=$(d,ae,re,!1,ie,null,null,null);function ie(e){for(let o in I)this[o]=I[o]}const xe=function(){return oe.exports}();export{xe as S};
