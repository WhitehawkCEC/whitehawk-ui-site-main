import{c0 as T,d as m,aS as h,aP as w,aQ as M,n as A,bX as F,an as I,c1 as q,b as c,c2 as P,aF as B}from"./index.699da5fb.js";import{B as k}from"./BasicConfirmModal.56c6383e.js";import{A as D,T as N}from"./AppTanStackTable.068eb12d.js";import{I as E}from"./IsoDateTimeDisplay.6624df38.js";import{c as V}from"./createOnChangeFn.0091f254.js";import{F as j}from"./FileSaver.min.392a6a35.js";import{u as L}from"./createSimpleTable.b77ab736.js";import"./BasicModal.484f76a6.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-up.736f4142.js";function R(e){switch(e){case T.QuestionnaireType.CANNED:return"Canned";case T.QuestionnaireType.CUSTOM:return"Custom";default:return"N/A"}}const u={};u.props={questionnaires:{key:"questionnaires",required:!0,type:Array}};u.setup=(e,n)=>{const s=e,f=n.emit,_=m(()=>s.questionnaires),a=V(),i=[a.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),a.accessor("industry",{header:()=>"Industry",enableColumnFilter:!1}),a.accessor("type",{header:()=>"Type",cell:t=>R(t.getValue()),enableColumnFilter:!1}),a.accessor("description",{header:()=>"Description",enableColumnFilter:!1}),a.accessor(t=>{var o;return(o=t.meta)==null?void 0:o.updatedAt},{id:"updatedAt",header:()=>"Updated At",cell:t=>h(E,{props:{value:t.getValue(),format:"date"}}),enableColumnFilter:!1}),a.display({id:"actions",header:"Actions",cell:({row:t})=>{var o;return h(N,{props:{actions:[{id:"edit",to:`/admin/custom-questionnaires/${(o=t.original.id)==null?void 0:o.value}`},{id:"download",async action(){var d;const{data:v}=await w(`${M}/custom-questionnaires/${(d=t.original.id)==null?void 0:d.value}/download`,{responseType:"blob"}),y=`${t.original.fileUrl}.xlsx`;j.exports.saveAs(v,y)}},{id:"delete",action(){t.original&&f("delete",t.original)}}]}})}})];return{instance:L(_,i)}};u.components=Object.assign({AppTanStackTable:D},u.components);var U=function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("AppTanStackTable",{attrs:{table:e.instance}})},O=[];const C={};var H=A(u,U,O,!1,z,null,null,null);function z(e){for(let n in C)this[n]=C[n]}const G=function(){return H.exports}(),p={};p.setup=(e,n)=>{const s=q.list(),f=m(()=>s.data.value||[]),_=c("Doing so will affect the following questionnaires:"),a=c("You are not able to delete this questionnaire:"),i=c(!1),r=c(),t=c();function o(l){var g;r.value=l,t.value=(g=l.id)==null?void 0:g.value,i.value=!0}const v=m(()=>t.value),y=P.get(v.value),d=m(()=>{var l;return((l=y.data.value)==null?void 0:l.questionnairePreference)||[]}),Q=B(),S=q.delete();async function $(){if(r.value)await S.mutateAsync({questionnaireId:r.value.id}),b(),Q.success("Questionnaire successfully deleted");else throw new Error("Invalid request.")}function b(){i.value=!1}return{questionnaires:f,message:_,deletionRestrictionMessage:a,isModalVisible:i,selected:r,setPayload:o,affectedItems:d,deleteQuestionnaire:$,closeModal:b}};p.components=Object.assign({BaseTablePageLayout:F,PlusSvg:I,QuestionnairesTable:G,BasicConfirmModal:k},p.components);var X=function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("div",[s("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Questionnaires")]},proxy:!0},{key:"button",fn:function(){return[s("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{to:"new",append:""}},[s("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),s("span",[e._v("Questionnaire")])],1)]},proxy:!0},{key:"table",fn:function(){return[s("QuestionnairesTable",{attrs:{questionnaires:e.questionnaires},on:{delete:e.setPayload}})]},proxy:!0}])}),e.isModalVisible&&e.selected?s("BasicConfirmModal",{attrs:{name:e.selected.name,message:e.message,"deletion-restriction-message":e.deletionRestrictionMessage,type:"Preference Questionnaires","items-affected":e.affectedItems},on:{delete:e.deleteQuestionnaire,close:e.closeModal}}):e._e()],1)},Y=[];const x={};var J=A(p,X,Y,!1,K,null,null,null);function K(e){for(let n in x)this[n]=x[n]}const le=function(){return J.exports}();export{le as default};
