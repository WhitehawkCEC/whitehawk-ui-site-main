import{b3 as I,ax as j,r as T,c as p,n as q}from"./index.83a9872f.js";import{T as N}from"./TabbedPanel.af12415f.js";import{B as $,u as y}from"./BarChart.5263b915.js";import{_ as P}from"./_baseOrderBy.4f87ec16.js";import{i as M}from"./keys.ba35a066.js";var R=P,_=M;function z(e,o,t,a){return e==null?[]:(_(o)||(o=o==null?[]:[o]),t=a?void 0:t,_(t)||(t=t==null?[]:[t]),R(e,o,t))}var D=z;const r={};r.props={value:{key:"value",required:!0,type:Object},companyId:{key:"companyId",required:!0,type:String},categories:{key:"categories",required:!0,type:null},canAddNotes:{key:"canAddNotes",required:!1,type:Boolean,default:!0}};r.setup=(e,o)=>{const t=e,a=o.emit,n=j(t,a),l=T(""),c=T(t.categories[0]),m=p(()=>t.value[c.value]||[]),u=p(()=>D(m.value,"order")),b=p(()=>Math.max(...m.value.map(s=>s.order?s.order:0))),C=y.create();async function w(s){const i={companyId:t.companyId,category:c.value,todoText:s,itemComplete:!1,order:b.value+1,readOnly:!1,createdAt:new Date().toISOString()},d=await C.mutateAsync(i),x=[...n.value[c.value]||[],d];x.sort((S,O)=>S.todoText.localeCompare(O.todoText)),n.value[c.value]=x,f()}function f(){l.value=""}const B=y.update();async function h(s){await B.mutateAsync(s)}const k=y.delete();async function A(s){const i=u.value[s];if(i){const{status:v}=await k.mutateAsync(i);if(v===204)return}const d=[...u.value];d.splice(s,1),n.value[c.value]=d}return{todoText:l,category:c,sortedSelectedCategory:u,addTodo:w,clearTodoText:f,updateTodo:h,deleteTodo:A}};r.components=Object.assign({BarChart:$,TabbedPanel:N,TrashSvg:I},r.components);var E=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("section",{staticClass:"flex flex-col divide-y overflow-y-auto 2xl:grid 2xl:grid-cols-2 2xl:divide-y-0 2xl:divide-x"},[t("div",{staticClass:"h-72 p-4 lg:mx-auto lg:w-full lg:max-w-xl 2xl:h-full 2xl:w-full 2xl:max-w-none"},[t("BarChart",{attrs:{value:e.value,options:{maintainAspectRatio:!1,devicePixelRatio:1}}})],1),t("div",{staticClass:"flex flex-col justify-between divide-y"},[t("TabbedPanel",{attrs:{tabs:e.categories},scopedSlots:e._u([{key:"content",fn:function(){return[t("ul",e._l(e.sortedSelectedCategory,function(a,n){return t("li",{key:n},[t("BaseLabel",{staticClass:"flex items-center space-x-2"},[t("BaseInput",{staticClass:"inline-block",attrs:{disabled:!e.canAddNotes,type:"checkbox"},on:{change:function(l){return e.updateTodo(a)}},model:{value:a.itemComplete,callback:function(l){e.$set(a,"itemComplete",l)},expression:"todo.itemComplete"}}),e.canAddNotes?t("BaseIcon",{attrs:{color:"danger",action:"secondary",size:"small",shape:"square",type:"button"},on:{click:function(l){return e.deleteTodo(n)}}},[t("TrashSvg",{staticClass:"h-5 w-5"})],1):e._e(),t("BaseTypography",{attrs:{variant:"p2"}},[e._v(" "+e._s(a.todoText)+" ")])],1)],1)}),0)]},proxy:!0}]),model:{value:e.category,callback:function(a){e.category=a},expression:"category"}}),e.canAddNotes?t("div",{staticClass:"space-y-2 p-4"},[t("BaseTextarea",{staticClass:"w-full",attrs:{rows:"1"},model:{value:e.todoText,callback:function(a){e.todoText=a},expression:"todoText"}}),t("div",{staticClass:"flex flex-col space-y-2 md:flex-row md:space-y-0 md:space-x-2"},[t("BaseButton",{staticClass:"w-full md:w-auto",attrs:{type:"button"},on:{click:function(a){return e.addTodo(e.todoText)}}},[e._v(" Add ")]),t("BaseButton",{staticClass:"w-full md:w-auto",attrs:{type:"button",action:"secondary","display-type":"danger"},on:{click:e.clearTodoText}},[e._v(" Cancel ")])],1)],1):e._e()],1)])},F=[];const g={};var L=q(r,E,F,!1,U,null,null,null);function U(e){for(let o in g)this[o]=g[o]}const V=function(){return L.exports}();export{V as T};
