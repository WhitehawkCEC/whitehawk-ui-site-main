import{bt as F,cC as O,n as d,r as I,a_ as E,c as l,bl as H,b0 as L,bK as W,aY as G,cy as N,bs as V,bo as Y,c8 as C}from"./index.1993afac.js";import"./chartjs-adapter-date-fns.esm.f18cb5a0.js";import{C as M,B as z,d as K,b as U,P as J,S as Q,p as X}from"./chart.c54a61e9.js";import{T as Z}from"./ToolTip.3ded196e.js";import{G as tt}from"./GradeLetterDisplay.c2997f66.js";import{t as et}from"./index.ebbce841.js";import{u as R}from"./usePeratonRiskAnalytics.78d32712.js";import"./index.eaafc38b.js";import"./index.c42c94dc.js";import"./index.f5468f34.js";import"./index.7a54c9f6.js";import"./index.87e44ac4.js";import"./index.47b58b41.js";import"./index.52070d00.js";import"./index.783c617b.js";import"./index.5b1ef434.js";import"./index.9050334f.js";const _={};_.props={link:{key:"link",required:!0,type:String},company:{key:"company",required:!0,type:null}};_.setup=(t,a)=>({});_.components=Object.assign({BackButton:F,BarChartSvg:O},_.components);var at=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"flex flex-col space-y-6 lg:flex-row lg:items-center lg:space-x-4 lg:space-y-0"},[e("BackButton",{attrs:{link:t.link}}),e("div",{staticClass:"flex items-center space-x-2"},[e("div",{staticClass:"shrink-0 rounded-full p-2 bg-gray-700"},[e("BarChartSvg",{staticClass:"h-auto w-6 text-white"})],1),e("div",{staticClass:"flex flex-col -space-y-1"},[e("BaseTypography",{staticClass:"uppercase text-gray-500",attrs:{variant:"overline"}},[t._v(" Subscription Supplier ")]),e("BaseTypography",{attrs:{variant:"h5",component:"h2"}},[t._v(" "+t._s(t.company.name)+" ")])],1)])],1)},st=[];const w={};var rt=d(_,at,st,!1,nt,null,null,null);function nt(t){for(let a in w)this[a]=w[a]}const ot=function(){return rt.exports}();M.register(z,K,U,J,Q,X);const $=G({inheritAttrs:!1});$.props={bar:{key:"bar",required:!0,type:Array},plotPoint:{key:"plotPoint",required:!0,type:Object},width:{key:"width",required:!1,type:Number},height:{key:"height",required:!1,type:Number},options:{key:"options",required:!0,type:Object}};$.setup=(t,a)=>{const e=t,s=a.emit,i=I(),u=E(),v=l(()=>({width:e.width?`${e.width}px`:"100%",height:e.height?`${e.height}px`:"100%"})),c=l(()=>({datasets:[{type:"bar",label:"Total Companies",data:e.bar,order:2},{type:"scatter",label:"My Company Risk",data:[e.plotPoint],order:1}]})),k=l(()=>({datasets:{bar:{borderWidth:0,borderRadius:8,barPercentage:1,categoryPercentage:1,backgroundColor:["rgba(191, 219, 254, 1)","rgba(147, 197, 253, 1)","rgba(96, 165, 250, 1)","rgba(59, 130, 246, 1)","rgba(37, 99, 235, 1)","rgba(29, 78, 216, 1)","rgba(30, 64, 175, 1)","rgba(30, 58, 138, 1)","rgba(25, 42, 110, 1)","rgba(20, 39, 93, 1)"],hoverBackgroundColor:["rgba(239, 246, 255, 0.95)","rgba(191, 219, 254, 0.95)","rgba(147, 197, 253, 0.95)","rgba(96, 165, 250, 0.95)","rgba(59, 130, 246, 0.95)","rgba(37, 99, 235, 0.95)","rgba(29, 78, 216, 0.95)","rgba(30, 64, 175, 0.95)","rgba(30, 58, 138, 0.95)","rgba(30, 58, 138, 0.95)","rgba(25, 42, 110, 0.95)"]},scatter:{pointStyle:"crossRot",pointRadius:7,borderWidth:3,borderCapStyle:"round",borderColor:"rgba(134, 210, 221,1)",backgroundColor:"rgba(134, 210, 221,1)",pointHitRadius:7,pointHoverRadius:8,hoverBorderWidth:3}},scales:{xAxis:{type:"linear",min:0,max:1,offset:!1,grid:{offset:!1},ticks:{stepSize:.1},title:{display:!0,text:"Risk"}},yAxis:{min:0,max:Math.max(...e.bar.map(({y:r})=>r))+1,title:{display:!0,text:"Companies"},ticks:{precision:0}}},plugins:{legend:{display:!1},tooltip:{xAlign:"center",yAlign:"center",backgroundColor:"white",borderColor:"#d1d5db",borderWidth:1,titleColor:"#111827",bodyColor:"#6b7280",cornerRadius:10,padding:10,boxHeight:12,boxWidth:12,boxPadding:4,callbacks:{title:r=>{var m,y;if(!r.length)return"";const o=((m=r[0])==null?void 0:m.parsed.x)||0;if(((y=r[0])==null?void 0:y.dataset.type)==="scatter")return"My Company";const n=o?o-.05:0,p=o?o+.0499:0;return`Risk Range: ${n.toFixed(4)} - ${p.toFixed(4)}`},label:r=>{const o=r.dataIndex,n=r.dataset.data[o];return r.dataset.type==="scatter"?`Risk: ${n==null?void 0:n.x.toFixed(4)}`:`${r.dataset.label}: ${n==null?void 0:n.y}`||""}}}},animation:{onComplete:()=>{i.value&&s("animation-complete",i.value)}},...e.options}));return H(()=>{L(()=>{const r=i.value;!r||(u.value=new M(r,{type:"bar",data:c.value,options:k.value,plugins:[{id:"customCanvasBackgroundColor",beforeDraw:o=>{const{ctx:n}=o;n.save(),n.globalCompositeOperation="destination-over";const p=n.createLinearGradient(0,0,o.width,o.height);p.addColorStop(0,"rgba(191, 219, 254, 0.15)"),p.addColorStop(.5,"rgba(96, 165, 250, 0.15)"),p.addColorStop(1,"rgba(37, 99, 235, 0.15)");const m=o.width*e.plotPoint.x-42;n.fillStyle=p,n.fillRect(42,12,m,o.height-62),n.restore()}}]}))})}),W(()=>{var r;(r=u.value)==null||r.destroy()}),{canvas:i,parentStyle:v}};var it=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"relative min-w-[338px]",style:t.parentStyle},[e("canvas",t._b({ref:"canvas",attrs:{role:"img","aria-label":"Ratings Over Time chart"}},"canvas",t.$attrs,!1))])},lt=[];const B={};var ct=d($,it,lt,!1,pt,null,null,null);function pt(t){for(let a in B)this[a]=B[a]}const ut=function(){return ct.exports}(),f={};f.props={value:{key:"value",required:!0,type:Array}};f.setup=(t,a)=>({toCurrency:et});f.components=Object.assign({ToolTip:Z,GradeLetterDisplay:tt},f.components);var dt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("dl",{staticClass:"grid gap-2"},t._l(t.value,function(s,i){return e("div",{key:s.id.value,staticClass:"grid gap-2 items-start lg:grid-cols-3 lg:items-end"},[e("dt",{staticClass:"flex flex-row items-center space-x-2 lg:col-span-1"},[s.description?e("ToolTip",[t._v(t._s(s.description))]):t._e(),e("BaseTypography",{staticClass:"text-gray-600",attrs:{variant:"p1"}},[t._v(" "+t._s(s.name)+" ")])],1),e("dd",{staticClass:"flex flex-row justify-between items-center ml-2 lg:flex-col lg:items-center"},[e("BaseTypography",{staticClass:"text-gray-500",class:i!==0?"lg:hidden":"",attrs:{variant:"p2"}},[t._v(" Company Value: ")]),e("div",[s.name!=="Total Debt"?[e("GradeLetterDisplay",{attrs:{grade:s.score}})]:[e("BaseTypography",{staticClass:"text-gray-700",attrs:{variant:"p1"}},[t._v(" "+t._s(t.toCurrency(s.score))+" ")])]],2)],1),e("dd",{staticClass:"flex flex-row justify-between items-center ml-2 lg:flex-col lg:items-center"},[e("BaseTypography",{staticClass:"text-gray-500",class:i!==0?"lg:hidden":"",attrs:{variant:"p2"}},[t._v(" Portfolio Mean: ")]),e("div",[s.name!=="Total Debt"?[e("GradeLetterDisplay",{attrs:{grade:s.score}})]:[e("BaseTypography",{staticClass:"text-gray-700",attrs:{variant:"p1"}},[t._v(" "+t._s(t.toCurrency(s.average))+" ")])]],2)],1)])}),0)},mt=[];const P={};var yt=d(f,dt,mt,!1,vt,null,null,null);function vt(t){for(let a in P)this[a]=P[a]}const _t=function(){return yt.exports}(),S={};S.props={score:{key:"score",required:!0,type:Number},maxScore:{key:"maxScore",required:!0,type:Number}};S.setup=(t,a)=>{const e=t,s=l(()=>200-e.score/e.maxScore*200),i=l(()=>`gradient-${Math.random()}`),u=l(()=>e.score>=.91?"#10b981":e.score>=.81?"#3b83f6":e.score>=.71?"#fde68a":e.score>=.61?"#ed8936":"#ef4444");return{fill:s,gradientId:i,displayColor:u}};var ft=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("svg",{attrs:{viewBox:"0 0 90 80",preserveAspectRatio:"none"}},[e("defs",[e("linearGradient",{attrs:{id:`${t.gradientId}`,x1:"15%",y1:"100%",x2:"80%",y2:"100%"}},[e("stop",{attrs:{offset:"0%","stop-color":`${t.displayColor}`}}),e("stop",{attrs:{offset:"100%","stop-color":`${t.displayColor}`}})],1)],1),e("path",{staticClass:"stroke-current text-gray-200 shadow-inner",attrs:{d:"M20,75 a40,40,0,1,1,50,0",fill:"none","stroke-linecap":"round","stroke-width":"3"}}),e("path",{staticClass:"filling transition duration-300",style:`--fill: ${t.fill}`,attrs:{d:"M20,75 a40,40,0,1,1,50,0",fill:"none",stroke:`url(#${t.gradientId})`,"stroke-dasharray":"200","stroke-dashoffset":"200","stroke-linecap":"round","stroke-width":"3"}})])},gt=[];const A={};var xt=d(S,ft,gt,!1,ht,"149e2882",null,null);function ht(t){for(let a in A)this[a]=A[a]}const bt=function(){return xt.exports}(),g={};g.props={score:{key:"score",required:!0,type:Number},date:{key:"date",required:!0,type:String}};g.setup=(t,a)=>({});g.components=Object.assign({DotsSquare:N,PeratonArcProgressBar:bt,DateIsoStringDisplay:V},g.components);var kt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"relative mx-auto flex max-w-xs flex-col items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-blue-100 via-white to-white px-4 py-8 shadow-md sm:max-w-sm sm:rounded-3xl xl:max-w-none xl:p-12"},[e("div",{staticClass:"absolute top-full left-full -translate-y-1/3 -translate-x-1/3 rotate-45 transform xl:-translate-y-1/2"},[e("DotsSquare",{attrs:{color:"blue"}})],1),e("div",{staticClass:"relative w-44 sm:w-56"},[e("PeratonArcProgressBar",{attrs:{score:t.score,"max-score":1}})],1),e("div",{staticClass:"absolute flex flex-col items-center space-y-2"},[e("BaseTypography",{attrs:{variant:"h2"}},[t._v(t._s(t.score.toFixed(4)))]),t.date?e("div",{staticClass:"flex flex-col text-center space-y-1"},[e("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"overline"}},[t._v(" Last updated: ")]),e("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"overline"}},[e("DateIsoStringDisplay",{attrs:{value:t.date,format:"date"}})],1)],1):t._e()],1)])},Ct=[];const T={};var $t=d(g,kt,Ct,!1,St,null,null,null);function St(t){for(let a in T)this[a]=T[a]}const Rt=function(){return $t.exports}();function wt(t){return t>=.91?"Your company falls into the 91-100 range meaning its relative security effectiveness is high, having a strong security performance and low risk.":t>=.81?"Your company falls into the 81-90 range meaning its relative security effectiveness is high, having a strong security performance and low risk.":t>=.71?"Your company falls into the 71-80 range meaning its relative security effectiveness is fair, having an average security performance and medium risk.":t>=.61?"Your company falls into the 61-70 range meaning its relative security effectiveness is fair, having an average security performance and medium risk.":"Your company falls into the 0 - 60 range meaning its relative security effectiveness is moderate to low, having a weak security performance and high risk."}const x={};x.props={score:{key:"score",required:!0,type:Number},date:{key:"date",required:!0,type:String}};x.setup=(t,a)=>{const e=t;return{ratingScoreDescription:l(()=>wt(e.score))}};x.components=Object.assign({WaveForm:Y,PeratonScoreDisplay:Rt},x.components);var Bt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"relative flex flex-col items-center justify-center xl:grid xl:grid-cols-12"},[e("div",{staticClass:"absolute top-36 w-full opacity-25 sm:top-40 xl:hidden"},[e("WaveForm")],1),e("div",{staticClass:"relative -mb-36 xl:col-span-4 xl:col-start-1 xl:row-start-1 xl:mb-0"},[e("div",{staticClass:"px-6 md:px-8 lg:px-4 xl:pl-0"},[e("PeratonScoreDisplay",{attrs:{score:t.score,date:t.date}})],1)]),e("BaseSimpleCard",{staticClass:"pt-32 xl:col-span-10 xl:col-start-3 xl:row-start-1 xl:h-fit xl:p-0"},[e("div",{staticClass:"grid items-center gap-6 px-6 py-10 sm:p-8 xl:grid-cols-10 xl:gap-0 xl:p-6"},[e("div",{staticClass:"grid gap-5 text-center xl:text-left xl:col-span-8 xl:col-start-3"},[e("BaseTypography",{staticClass:"text-prime-navy",attrs:{component:"h3",variant:"h5"}},[t._v(" Risk Analytics ")]),e("BaseTypography",{staticClass:"text-gray-600",attrs:{component:"p",variant:"p1"}},[t._v(" Risk Analytics are a measure of your company\u2019s relative security effectiveness. "+t._s(t.ratingScoreDescription)+" ")])],1)])])],1)},Pt=[];const D={};var At=d(x,Bt,Pt,!1,Tt,null,null,null);function Tt(t){for(let a in D)this[a]=D[a]}const Dt=function(){return At.exports}(),h={};h.props={value:{key:"value",required:!0,type:null},riskAnalytics:{key:"riskAnalytics",required:!0,type:Array}};h.setup=(t,a)=>{const e=t,s=[{min:0,max:.0999},{min:.1,max:.1999},{min:.2,max:.2999},{min:.3,max:.3999},{min:.4,max:.4999},{min:.5,max:.5999},{min:.6,max:.6999},{min:.7,max:.7999},{min:.8,max:.8999},{min:.9,max:.9999},{min:1,max:1.0999}],i=l(()=>{const c=new Map,k=e.riskAnalytics.map(r=>r.populationRisk.overallRisk);for(const r of s){const{min:o,max:n}=r,p=o,m=[];for(const y of k)y>=o&&y<=n&&m.push(y);c.has(p)||c.set(p,m.length)}return c}),u=l(()=>[...s.map(({min:c})=>({x:c+.05,y:i.value.get(c)||0}))]),v=l(()=>({x:e.value.populationRisk.overallRisk,y:.5}));return{bar:u,plotPoint:v}};h.components=Object.assign({PeratonSummaryOverview:Dt,PeratonRiskScoreHistogram:ut,PeratonRiskVectorsDisplay:_t},h.components);var jt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.value?e("section",{staticClass:"space-y-10"},[e("PeratonSummaryOverview",{attrs:{score:t.value.populationRisk.overallRisk,date:t.value.meta.updatedAt?t.value.meta.updatedAt.value:""}}),e("div",{staticClass:"space-y-2"},[e("BaseTypography",{staticClass:"text-prime-navy",attrs:{component:"h3",variant:"h6"}},[t._v(" Risk Histogram ")]),e("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p2"}},[t._v(" Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")]),e("BaseSimpleCard",{staticClass:"p-4 sm:px-6 sm:py-5 overflow-x-auto"},[e("PeratonRiskScoreHistogram",{attrs:{bar:t.bar,"plot-point":t.plotPoint,height:384,options:{maintainAspectRatio:!1,devicePixelRatio:1}}})],1)],1),e("div",{staticClass:"space-y-2"},[e("BaseTypography",{staticClass:"text-prime-navy",attrs:{component:"h3",variant:"h6"}},[t._v(" Risk Vector Analysis ")]),e("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p2"}},[t._v(" Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")]),e("BaseSimpleCard",{staticClass:"p-4 sm:px-6 sm:py-5"},[e("PeratonRiskVectorsDisplay",{attrs:{value:t.value.populationRisk.riskVectors}})],1)],1)],1):t._e()},qt=[];const j={};var Mt=d(h,jt,qt,!1,Ft,null,null,null);function Ft(t){for(let a in j)this[a]=j[a]}const Ot=function(){return Mt.exports}(),b={};b.setup=(t,a)=>{const e=C("id"),s=C("subscriptionId"),i=C("companyId"),u=R.list(e),v=R.read(e,i),c=l(()=>`/admin/companies/${e.value}/subscriptions/${s.value}/suppliers`);return{riskAnalytics:u,riskAnalysis:v,link:c}};b.components=Object.assign({CompanyIdHeader:ot,PeratonRiskAnalyticsDisplay:Ot},b.components);var It=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.riskAnalysis?e("section",{staticClass:"space-y-6"},[e("CompanyIdHeader",{attrs:{company:t.riskAnalysis.company,link:t.link}}),e("PeratonRiskAnalyticsDisplay",{attrs:{value:t.riskAnalysis,"risk-analytics":t.riskAnalytics}})],1):t._e()},Et=[];const q={};var Ht=d(b,It,Et,!1,Lt,null,null,null);function Lt(t){for(let a in q)this[a]=q[a]}const ne=function(){return Ht.exports}();export{ne as default};
