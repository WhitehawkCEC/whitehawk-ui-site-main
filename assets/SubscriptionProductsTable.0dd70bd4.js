import{r as C,n as h,c7 as D,d as c,c8 as B,c9 as V,c3 as E,c5 as R,aJ as q,aS as f}from"./index.f5fd5acd.js";import{D as A}from"./DateRangeDisplay.109047de.js";import{A as M,T as z}from"./AppTanStackTable.203ea0f8.js";import{I as P}from"./IsoDateTimeDisplay.c5c3d0e9.js";import{c as O}from"./createOnChangeFn.5135b543.js";import{u as G}from"./createSimpleTable.07a5a95c.js";var H=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("svg",e._g({attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"}},e.$listeners),[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5zm0 6a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5zm0 6a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5z"}})])};const N={render:H},y={};y.setup=(e,s)=>{const t=C(!1),o=C(!1);function i(){o.value=!0}function u(){o.value||(t.value=!0)}function l(){o.value||(t.value=!1)}function d(){t.value=!t.value,o.value=!1}return{open:t,touchend:i,show:u,hide:l,click:d}};y.components=Object.assign({EllipsisSvg:N},y.components);var J=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex flex-shrink-0 items-center space-x-3"},[t("div",{on:{mouseenter:e.show,mouseleave:e.hide}},[t("BaseIcon",{attrs:{type:"button",color:"light",size:"small"},on:{touchend:e.touchend,focus:e.show,blur:e.hide,click:e.click}},[t("EllipsisSvg",{staticClass:"h-auto w-6"})],1),t("Transition",{attrs:{"enter-active-class":"transition duration-75 ease-out","enter-class":"translate-y-1 opacity-0","enter-from-class":"translate-y-1 opacity-0","leave-active-class":"transition duration-150 ease-in","leave-to-class":"translate-y-1 opacity-0"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"absolute right-0 z-30 w-auto transform pt-1"},[t("div",{staticClass:"rounded-lg shadow-lg"},[t("div",{staticClass:"overflow-hidden rounded-lg ring-1 ring-black ring-opacity-5"},[t("ul",{staticClass:"relative grid bg-white"},[e._t("default")],2)])])])])],1)])},L=[];const w={};var K=h(y,J,L,!1,Q,null,null,null);function Q(e){for(let s in w)this[s]=w[s]}const U=function(){return K.exports}(),m={};m.props={id:{key:"id",required:!0,type:String},subscriptionId:{key:"subscriptionId",required:!0,type:String},product:{key:"product",required:!0,type:null}};m.setup=(e,s)=>{const t=e,{removePinned:o}=D();async function i(){const l=t.product;l.product&&l.product.id&&await o(l.product.id.value)}const u=c(()=>B(t.id,t.subscriptionId,t.product));return{removeFromPinned:i,displayProduct:u}};m.components=Object.assign({DateRangeDisplay:A,SimpleFlyoutMenu:U},m.components);var W=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.displayProduct?t("div",{staticClass:"relative col-span-1 flex rounded-xl shadow-sm xl:flex-col"},[t("div",{class:[e.displayProduct.bgColor,"flex w-16 flex-shrink-0 items-center justify-center rounded-l-xl p-4 xl:w-auto xl:rounded-t-xl xl:rounded-bl-none"]},[t(e.displayProduct.icon,{tag:"Component",staticClass:"h-auto w-8 text-white"})],1),t("div",{staticClass:"flex flex-1 items-center justify-between truncate rounded-r-xl border-r border-b border-t bg-white p-4 xl:items-start xl:rounded-b-xl xl:rounded-tr-none xl:border-t-0 xl:border-l"},[t("div",{staticClass:"flex-1 truncate xl:space-y-2"},[t("div",{staticClass:"truncate"},[e.displayProduct.productType?t("BaseTypography",{staticClass:"truncate uppercase text-gray-500",attrs:{variant:"overline",component:"p"}},[e._v(" "+e._s(e.displayProduct.productType)+" ")]):e._e(),t("BaseTypography",{staticClass:"truncate",attrs:{variant:"p1",component:"h4"}},[e._v(" "+e._s(e.displayProduct.name)+" ")]),e.displayProduct.validity?t("BaseTypography",{staticClass:"truncate text-gray-500",attrs:{variant:"p2",component:"p"}},[t("DateRangeDisplay",{attrs:{value:e.displayProduct.validity}})],1):e._e()],1),e.displayProduct.description?t("BaseTypography",{staticClass:"hidden whitespace-normal text-gray-500 xl:flex",attrs:{variant:"p2",component:"p"}},[e._v(" "+e._s(e.displayProduct.description)+" ")]):e._e()],1),t("SimpleFlyoutMenu",[t("li",[t("BaseLink",{staticClass:"w-full p-3 hover:bg-indigo-100 focus:bg-indigo-100",attrs:{"display-type":"gray",to:e.displayProduct.link}},[e._v(" View ")])],1),t("li",[t("button",{staticClass:"-mb-px w-full transform p-3 font-body text-base font-medium leading-6 text-gray-500 antialiased transition duration-200 ease-in-out hover:-translate-y-px hover:bg-indigo-100 hover:text-prime-indigo focus:bg-indigo-100 focus:text-prime-indigo focus:outline-none disabled:cursor-not-allowed disabled:opacity-50",on:{click:e.removeFromPinned}},[e._v(" Remove from pinned ")])])])],1)]):e._e()},X=[];const S={};var Y=h(m,W,X,!1,Z,null,null,null);function Z(e){for(let s in S)this[s]=S[s]}const fe=function(){return Y.exports}(),b={};b.props={value:{key:"value",required:!1,type:null}};b.setup=(e,s)=>{const t=e;return{displayValue:c(()=>{var i;return t.value?(i=V(t.value))==null?void 0:i.textColor:"hidden"})}};var ee=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("svg",{staticClass:"h-3 w-3 rounded-full fill-current",class:e.displayValue,attrs:{viewBox:"-3 -3 6 6"}},[t("circle",{attrs:{r:"3"}})])},te=[];const k={};var se=h(b,ee,te,!1,ae,null,null,null);function ae(e){for(let s in k)this[s]=k[s]}const re=function(){return se.exports}(),_={};_.props={id:{key:"id",required:!0,type:String},subId:{key:"subId",required:!0,type:String},value:{key:"value",required:!0,type:Array},hasPermissions:{key:"hasPermissions",required:!1,type:Boolean,default:!0}};_.setup=(e,s)=>{const t=e,o=c(()=>t.id),i=c(()=>t.subId),u=c(()=>t.value),l=D(),d=c(()=>t.hasPermissions?`/admin/companies/${o.value}/subscriptions/${i.value}`:`/client/companies/${o.value}/subscriptions/${i.value}`),F=E.read(o,i),x=c(()=>{var a;return((a=F.data.value)==null?void 0:a.features)||R.SubscriptionFeatures.create()}),I=c(()=>l.pinnedProductIds),g=q(),p=O(),j=[p.accessor(a=>a.configOnlyType,{id:"partner",header:"Partner",cell:a=>f(re,{props:{value:a.getValue()}}),enableColumnFilter:!1}),p.accessor(a=>{var r;return(r=a.product)==null?void 0:r.name},{id:"name",header:()=>"Name",enableColumnFilter:!1}),p.accessor(a=>{var r,n;return(n=(r=a.product)==null?void 0:r.validity)==null?void 0:n.start},{id:"startDate",header:()=>"Start Date",cell:a=>f(P,{props:{value:a.getValue(),format:"date"}}),enableColumnFilter:!1}),p.accessor(a=>{var r,n;return(n=(r=a.product)==null?void 0:r.validity)==null?void 0:n.end},{id:"endDate",header:()=>"End Date",cell:a=>f(P,{props:{value:a.getValue(),format:"date"}}),enableColumnFilter:!1}),p.display({id:"actions",header:"Actions",cell:({row:a})=>f(z,{props:{actions:[{id:"view",action(){var r,n,v,$;x.value.hasGroups?g.push(`${d.value}/products/${(n=(r=a.original.product)==null?void 0:r.id)==null?void 0:n.value}/groups`):g.push(`${d.value}/products/${($=(v=a.original.product)==null?void 0:v.id)==null?void 0:$.value}`)}},{id:"edit",action(){var r,n;g.push(`${d.value}/products/${(n=(r=a.original.product)==null?void 0:r.id)==null?void 0:n.value}/settings`)}},{id:"pinProduct",action(){var r,n;(n=(r=a.original.product)==null?void 0:r.id)!=null&&n.value&&l.setPinned(a.original.product.id.value)}}].filter(r=>{var n,v;return((v=(n=a.original.product)==null?void 0:n.id)==null?void 0:v.value)&&I.value.includes(a.original.product.id.value)||x.value.hasGroups?r.id!=="pinProduct":r})}})})];return{instance:G(u,j)}};_.components=Object.assign({AppTanStackTable:M},_.components);var ne=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},oe=[];const T={};var ie=h(_,ne,oe,!1,le,null,null,null);function le(e){for(let s in T)this[s]=T[s]}const ye=function(){return ie.exports}();export{fe as S,ye as a};
