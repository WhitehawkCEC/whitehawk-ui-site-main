import{F as $e}from"./FormButton.0647c1e5.js";import{df as be,aB as x,d as u,n as d,dg as C,dh as _,b1 as z,ah as he,aP as ge,aQ as Ce,ax as ve,cp as Ae,L as Re,bs as Ee,c7 as Z,di as Ie,c4 as Be,aF as De,aK as qe,dj as Oe}from"./index.b02a9779.js";import{S as Ve}from"./arrow-path.5187a52b.js";import{d as je,C as Fe,b as Te,c as Ne,B as Pe,a as Me}from"./ComplianceSummaryInput.5805bab8.js";import{l as we}from"./lodash.dce68ec9.js";import{t as Qe,a as Ue,b as Ke,c as I,d as Le}from"./index.df0dfd6b.js";import{C as ye}from"./CollapsibleSection.8316ed04.js";import{c as Ge,d as Ye}from"./BlackKiteProgressBar.8da77b28.js";import{T as _e}from"./ToolTip.91e7d40f.js";import{O as xe}from"./ObjectDisplay.0f2714b7.js";import{e as k}from"./attributeValue.ea53a720.js";import{D as Je}from"./DynamicForm.a9f4902e.js";import{u as ze}from"./useCompanyScorecardTemplates.dac8c40c.js";import{u as He}from"./useScorecardTemplates.f372ba28.js";import{u as We}from"./useBlackKiteEntities.b659df2d.js";import{u as Xe}from"./useUsers.d6a9e93c.js";import{s as Ze}from"./index.e4868c36.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./GradeLetterDisplay.e92c9acd.js";import"./ratingScoreDescription.3b48b1ea.js";import"./_baseIteratee.8d0851d7.js";import"./_Uint8Array.a432c20a.js";import"./keys.3aa78a8f.js";import"./_baseIsEqual.f4e04002.js";import"./_arrayMap.dcea68f3.js";import"./TransitionExpand.7ac2cab9.js";import"./index.ebbce841.js";function et(e){return e.map(r=>{var t,s;return{id:((t=r.id)==null?void 0:t.value)||"",name:r.name,description:r.description,manufacturer:tt(r.manufacturer),type:rt(r.type),features:st(r.features),categories:nt(r.categories),reseller:{name:((s=r.reseller)==null?void 0:s.name)||""},price:r.price}})}function tt(e){var r;if(e===void 0)throw new Error("undefined manufacturer");return{id:((r=e.id)==null?void 0:r.value)||"",name:e.name}}function rt(e){var r;if(e===void 0)throw new Error("undefined manufacturer");return{id:((r=e.id)==null?void 0:r.value)||"",name:e.name}}function st(e){return e.map(r=>{var t;return{id:((t=r.id)==null?void 0:t.value)||"",name:r.name}})}function nt(e){return e.map(r=>{var t;return{id:((t=r.id)==null?void 0:t.value)||"",name:r.name}})}function A(e){return e===void 0?be.BundleSolutionEntry.create():{title:e.title,description:e.description,groups:at(e.groups)}}function at(e){return e.map(({category:r,main:t,option:s})=>({category:{id:{value:r.id},name:r.name},main:{id:{value:(t==null?void 0:t.id)||""},name:(t==null?void 0:t.name)||"",description:t==null?void 0:t.description,manufacturer:{id:{value:(t==null?void 0:t.manufacturer.id)||""},name:(t==null?void 0:t.manufacturer.name)||""},categories:ot(t==null?void 0:t.categories)},option:{id:{value:(s==null?void 0:s.id)||""},name:(s==null?void 0:s.name)||"",description:s==null?void 0:s.description,manufacturer:{id:{value:(s==null?void 0:s.manufacturer.id)||""},name:(s==null?void 0:s.manufacturer.name)||""},categories:[]}}))}function ot(e){if(e===void 0)throw new Error("Product Category is undefined");return e.map(({id:r,name:t})=>({id:{value:r},name:t}))}function ct(e){const r=[];for(const t of Object.values(e))r.push({domain:Qe(t.displayValue),domainDisplayValue:t.displayValue,levels:lt(t.levels)});return r}function lt(e){const r=[];for(const[t,s]of Object.entries(e))r.push({level:Ue(t),averageStarLevel:s.averageStarLevel});return r}const B={};B.props={value:{key:"value",required:!1,type:null},products:{key:"products",required:!0,type:Array},random:{key:"random",required:!0,type:null},performance:{key:"performance",required:!0,type:null}};B.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s),l=u({get(){const{BASIC:o,BALANCED:c,ADVANCED:p}=t.random,[b,h,m]=t.performance.focusAreaOrder;if(b&&h&&m){const v=o[b],S=c[h],$=p[m];if(v&&S&&$)return{BASIC:v,BALANCED:S,ADVANCED:$}}},set(o){o&&(n.value={essential:A(o.BASIC),balanced:A(o.BALANCED),premier:A(o.ADVANCED)})}}),a=u(()=>et(t.products)),i=u(()=>{const o=[];for(const c of a.value)for(const p of c.categories)o.push(p);return we.exports.uniqBy(o,"id").sort((c,p)=>c.name.localeCompare(p.name))});return{bundle:l,converted:a,productCategories:i}};B.components=Object.assign({BundleSolutionInput:je},B.components);var it=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BundleSolutionInput",{attrs:{products:e.converted,"product-categories":e.productCategories},model:{value:e.bundle,callback:function(s){e.bundle=s},expression:"bundle"}})},ut=[];const ee={};var pt=d(B,it,ut,!1,mt,null,null,null);function mt(e){for(let r in ee)this[r]=ee[r]}const dt=function(){return pt.exports}(),D={};D.props={value:{key:"value",required:!0,type:null},performance:{key:"performance",required:!0,type:null}};D.setup=(e,r)=>{const t=["NIST 800-53 R5","CIS CSC-20","CMMC 2.0","NIST 800-171"],s=e,n=r.emit,l=x(s,n);return{compliance:u({get(){if(s.performance){const{compliance:i}=s.performance.reports,o={};for(const c of i){const{StandardCode:p}=c;t.includes(p)&&(o[p]={report:c})}return o}},set(i){i&&(l.value=i)}})}};D.components=Object.assign({ComplianceSummaryInput:Fe},D.components);var ft=function(){var e=this,r=e.$createElement,t=e._self._c||r;return e.compliance?t("div",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Compliance ")]),t("ComplianceSummaryInput",{model:{value:e.compliance,callback:function(s){e.compliance=s},expression:"compliance"}})],1):e._e()},vt=[];const te={};var yt=d(D,ft,vt,!1,_t,null,null,null);function _t(e){for(let r in te)this[r]=te[r]}const xt=function(){return yt.exports}(),q={};q.props={value:{key:"value",required:!1,type:null},order:{key:"order",required:!1,type:null},performance:{key:"performance",required:!0,type:null}};q.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s),l=u({get(){const[o,c,p]=t.performance.focusAreaOrder;if(o&&c&&p)return[o,c,p]},set(o){if(o){const c=i(o);n.value={first:c[0]||C.RiskVector.UNSPECIFIED,second:c[1]||C.RiskVector.UNSPECIFIED,third:c[2]||C.RiskVector.UNSPECIFIED}}}}),a=u(()=>{var o;return(o=t.order)==null?void 0:o.values.map(c=>Ke(c))});function i(o){const c=[];for(const p of o)p&&c.push(I(p));return c}return{focusAreas:l,options:a}};q.components=Object.assign({BlackKiteFocusAreasInput:Te},q.components);var kt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BlackKiteFocusAreasInput",{attrs:{options:e.options||[]},model:{value:e.focusAreas,callback:function(s){e.focusAreas=s},expression:"focusAreas"}})},St=[];const re={};var $t=d(q,kt,St,!1,bt,null,null,null);function bt(e){for(let r in re)this[r]=re[r]}const ht=function(){return $t.exports}(),O={};O.props={value:{key:"value",required:!1,type:null},performance:{key:"performance",required:!0,type:null}};O.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s);return{riskVectors:u({get(){return t.performance.riskVectors},set(a){const i=[];for(const[o,c]of Object.entries(a))i.push({riskVector:I(o),analysis:c});n.value={values:i}}})}};O.components=Object.assign({CollapsibleSection:ye,BlackKiteRiskVectorPerformance:Ne},O.components);var gt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("CollapsibleSection",{scopedSlots:e._u([{key:"title",fn:function(){return[t("BaseTypography",{staticClass:"py-4 pl-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Risk Vector Performance ")])]},proxy:!0},{key:"content",fn:function(){return[t("BlackKiteRiskVectorPerformance",{model:{value:e.riskVectors,callback:function(s){e.riskVectors=s},expression:"riskVectors"}})]},proxy:!0}])})},Ct=[];const se={};var At=d(O,gt,Ct,!1,Rt,null,null,null);function Rt(e){for(let r in se)this[r]=se[r]}const Et=function(){return At.exports}(),V={};V.props={value:{key:"value",required:!1,type:null},performance:{key:"performance",required:!0,type:null}};V.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s);return{riskVectors:u({get(){return t.performance.riskVectors},set(a){const i=[];for(const[o,c]of Object.entries(a))i.push({riskVector:I(o),analysis:c});n.value={values:i}}})}};V.components=Object.assign({BlackKiteRiskVectorsDisplay:Ge},V.components);var It=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"p-4"},[t("BlackKiteRiskVectorsDisplay",{model:{value:e.riskVectors,callback:function(s){e.riskVectors=s},expression:"riskVectors"}})],1)},Bt=[];const ne={};var Dt=d(V,It,Bt,!1,qt,null,null,null);function qt(e){for(let r in ne)this[r]=ne[r]}const Ot=function(){return Dt.exports}();function E(e){return JSON.parse(JSON.stringify(e))}const j={};j.props={value:{key:"value",required:!1,type:null},performance:{key:"performance",required:!0,type:null}};j.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s);return{summary:u({get(){return t.performance.reports.summary},set(a){a&&(n.value={json:E(a)})}})}};j.components=Object.assign({BlackKiteSummaryDescription:Pe,BlackKiteReportSummary:Me},j.components);var Vt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return e.summary?t("div",{staticClass:"flex flex-col divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Summary Report ")]),t("div",{staticClass:"flex flex-col divide-y"},[t("BlackKiteSummaryDescription",{attrs:{score:parseInt(e.summary.GradeOver100),date:e.summary.LastUpdatedAt}}),t("div",{staticClass:"p-4"},[t("BlackKiteReportSummary",{attrs:{summary:e.summary}})],1)],1)],1):e._e()},jt=[];const ae={};var Ft=d(j,Vt,jt,!1,Tt,null,null,null);function Tt(e){for(let r in ae)this[r]=ae[r]}const Nt=function(){return Ft.exports}(),F={};F.props={value:{key:"value",required:!1,type:null},performance:{key:"performance",required:!0,type:null}};F.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s);return{risk:u({get(){return t.performance.reports.risk},set(a){a&&(n.value={json:E(a)})}})}};F.components=Object.assign({CollapsibleSection:ye,BlackKiteReportRisk:Ye},F.components);var Pt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("CollapsibleSection",{scopedSlots:e._u([{key:"title",fn:function(){return[t("BaseTypography",{staticClass:"py-4 pl-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" FAIR Report ")])]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"p-4"},[t("BlackKiteReportRisk",{attrs:{risk:e.risk}})],1)]},proxy:!0}])})},Mt=[];const oe={};var wt=d(F,Pt,Mt,!1,Qt,null,null,null);function Qt(e){for(let r in oe)this[r]=oe[r]}const Ut=function(){return wt.exports}(),T={};T.props={value:{key:"value",required:!1,type:null},options:{key:"options",required:!0,type:Array}};T.setup=(e,r)=>{const t=e,s=r.emit;return{proxy:x(t,s)}};T.components=Object.assign({ToolTip:_e,ObjectDisplay:xe},T.components);var Kt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BaseLabel",{staticClass:"flex flex-col p-4 lg:grid lg:grid-cols-3 lg:items-center"},[t("div",{staticClass:"flex flex-row items-center space-x-1 after:content-['*'] after:ml-0.5 after:text-red-700"},[t("span",[e._v("Supplier")]),e.value?t("ToolTip",[t("ObjectDisplay",{attrs:{value:e.value}})],1):e._e()],1),t("div",{staticClass:"flex flex-col lg:col-span-2"},[t("BaseSelect",{model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}},e._l(e.options,function(s){return t("option",{key:s.id,domProps:{value:s}},[e._v(" "+e._s(s.name)+" ")])}),0)],1)])},Lt=[];const ce={};var Gt=d(T,Kt,Lt,!1,Yt,null,null,null);function Yt(e){for(let r in ce)this[r]=ce[r]}const Jt=function(){return Gt.exports}(),N={};N.props={value:{key:"value",required:!1,type:null},entities:{key:"entities",required:!0,type:Array}};N.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s),l=u(()=>t.entities.map(a=>({id:a.CompanyId,name:a.CompanyName})).sort((a,i)=>a.name.localeCompare(i.name))||[]);return{proxy:n,options:l}};N.components=Object.assign({SupplierEntryInput:Jt},N.components);var zt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("SupplierEntryInput",{attrs:{options:e.options},model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}})},Ht=[];const le={};var Wt=d(N,zt,Ht,!1,Xt,null,null,null);function Xt(e){for(let r in le)this[r]=le[r]}const Zt=function(){return Wt.exports}(),P={};P.props={value:{key:"value",required:!1,type:null},users:{key:"users",required:!0,type:Array}};P.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s),l=u(()=>t.users.map(a=>({id:{value:k(a,"sub")},name:k(a,"name")||"",title:k(a,"custom:title")||"",email:k(a,"email"),phone:k(a,"phone_number")||""})).sort((a,i)=>a.email.localeCompare(i.email)));return{proxy:n,options:l}};P.components=Object.assign({ToolTip:_e,ObjectDisplay:xe},P.components);var er=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BaseLabel",{staticClass:"flex flex-col p-4 lg:grid lg:grid-cols-3 lg:items-center"},[t("div",{staticClass:"flex flex-row items-center space-x-1 after:content-['*'] after:ml-0.5 after:text-red-700"},[t("span",[e._v("Analyst")]),e.value?t("ToolTip",[t("ObjectDisplay",{attrs:{value:e.value}})],1):e._e()],1),t("BaseSelect",{staticClass:"lg:col-span-2",attrs:{required:""},model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}},e._l(e.options,function(s,n){return t("option",{key:n,domProps:{value:s}},[e._v(" "+e._s(s.email)+" ")])}),0)],1)},tr=[];const ie={};var rr=d(P,er,tr,!1,sr,null,null,null);function sr(e){for(let r in ie)this[r]=ie[r]}const nr=function(){return rr.exports}(),M={};M.props={value:{key:"value",required:!1,type:null}};M.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s),l=u(()=>new Date().getFullYear()),a=u(()=>new Array(10).fill(l.value).map((p,b)=>({value:l.value-5+b}))),i=u(()=>[{text:"In Progress",value:_.State.IN_PROGRESS},{text:"Products Needed",value:_.State.PRODUCTS_NEEDED},{text:"Ready for QA",value:_.State.READY_FOR_QA},{text:"Delivered",value:_.State.DELIVERED},{text:"Complete",value:_.State.COMPLETE}]),o=u(()=>[{text:"Q1",value:_.Quarter.Q1},{text:"Q2",value:_.Quarter.Q2},{text:"Q3",value:_.Quarter.Q3},{text:"Q4",value:_.Quarter.Q4},{text:"Other",value:_.Quarter.OTHER}]),c=[{name:"state",label:"State",component:{is:z,attrs:{required:!0,options:i.value}}},{name:"year",label:"Year",component:{is:z,attrs:{required:!0,options:a.value}}},{name:"quarter",label:"Quarter",component:{is:z,attrs:{required:!0,options:o.value}}}];return{proxy:n,schema:c}};M.components=Object.assign({DynamicForm:Je},M.components);var ar=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("DynamicForm",{attrs:{schema:e.schema},model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}})},or=[];const ue={};var cr=d(M,ar,or,!1,lr,null,null,null);function lr(e){for(let r in ue)this[r]=ue[r]}const ir=function(){return cr.exports}(),ur={get(){return he(["random-bundle-solution"],()=>ge.get(`${Ce}/random-bundle-solution`).then(e=>e.data))}},w={};w.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:null},users:{key:"users",required:!0,type:Array},entities:{key:"entities",required:!0,type:Array},products:{key:"products",required:!0,type:Array}};w.setup=(e,r)=>{const t=e,s=r.emit,n=ve(t,s),l=u(()=>{var v,S;const m=[];return(v=n.value.supplier)!=null&&v.id||m.push("Select a supplier"),((S=n.value.status)==null?void 0:S.state)===_.State.DELIVERED&&m.push('The status of this scorecard has already been marked as "Delivered."'),{allowed:m.length===0,reasons:m}}),a=u(()=>t.id),i=u({get(){var m,v;return(v=(m=t.value)==null?void 0:m.supplier)==null?void 0:v.id},set(m){m&&n.value.supplier&&(n.value.supplier.id=m)}}),o=Ae.get(a,i),c=u(()=>o.data.value),p=ur.get(),b=u(()=>p.data.value);function h(){if(o.data.value&&p.data.value){const{cmmcAnalysis:m,focusAreaOrder:v,ratingScoreDetails:S,reports:$,riskVectors:G}=o.data.value,{BASIC:Y,BALANCED:y,ADVANCED:f}=p.data.value,[J,U,ke]=v,R=[];for(const g of v)R.push(I(g));const Se=["NIST 800-53 R5","CIS CSC-20","CMMC 2.0","NIST 800-171"],W={};for(const g of $.compliance){const{StandardCode:K}=g;Se.includes(K)&&(W[K]={report:g})}const X=[];for(const[g,K]of Object.entries(G))X.push({riskVector:I(g),analysis:K});n.value.cmmcAnalysis={entries:ct(m)},n.value.reports={summary:{json:E($.summary)},risk:{json:E($.risk)},compliance:{json:E($.compliance)}},n.value.ratingScore={description:S.description||""},n.value.riskVectors={values:X},n.value.focusAreaOrder={values:R},n.value.focusAreas={first:R[0]||C.RiskVector.UNSPECIFIED,second:R[1]||C.RiskVector.UNSPECIFIED,third:R[2]||C.RiskVector.UNSPECIFIED},n.value.compliance=W,n.value.bundle={essential:A(Y[J||""]),balanced:A(y[U||""]),premier:A(f[ke||""])},s("update-data")}}return{proxy:n,canUpdateData:l,performance:c,random:b,updateData:h}};w.components=Object.assign({AnalystInput:nr,SupplierInput:Zt,RefreshSvg:Ve,SummaryReport:Nt,SummaryRiskReport:Ut,RiskVectorAnalysisOverview:Ot,FocusAreas:ht,RiskVectorAnalysis:Et,BundleSolution:dt,ComplianceSummaryV2:xt,StatusInput:ir},w.components);var pr=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("section",{staticClass:"flex flex-col divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Analyst Information ")]),t("AnalystInput",{attrs:{users:e.users},model:{value:e.proxy.analyst,callback:function(s){e.$set(e.proxy,"analyst",s)},expression:"proxy.analyst"}}),t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Supplier Information ")]),t("SupplierInput",{attrs:{entities:e.entities},model:{value:e.proxy.supplier,callback:function(s){e.$set(e.proxy,"supplier",s)},expression:"proxy.supplier"}}),t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Update Data ")]),e.canUpdateData.allowed?t("div",{staticClass:"p-4"},[t("BaseButton",{staticClass:"w-full space-x-2 lg:w-auto",attrs:{type:"button",disabled:!e.canUpdateData.allowed},on:{click:e.updateData}},[t("RefreshSvg",{staticClass:"-ml-1 w-4 xl:w-5"}),t("span",[e._v("Update")])],1)],1):t("div",[t("BaseAlert",{staticClass:"shadow-none rounded-none",attrs:{type:"warn"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Update Unavailable")]},proxy:!0},{key:"message",fn:function(){return[t("ul",{staticClass:"flex list-inside list-disc flex-col space-y-1"},e._l(e.canUpdateData.reasons,function(s){return t("li",{key:s},[e._v(" "+e._s(s)+" ")])}),0)]},proxy:!0}],null,!1,4159848379)})],1),e.performance&&e.random?[e.proxy.reports?[t("SummaryReport",{attrs:{"v-model":e.proxy.reports.summary,performance:e.performance}}),t("SummaryRiskReport",{attrs:{"v-model":e.proxy.reports.risk,performance:e.performance}})]:e._e(),e.proxy.focusAreaOrder?t("div",{staticClass:"grid divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Recommended Focus Areas ")]),t("div",{staticClass:"flex flex-col divide-y lg:grid lg:grid-cols-2 lg:divide-x lg:divide-y-0 xl:grid-cols-3"},[t("RiskVectorAnalysisOverview",{attrs:{performance:e.performance},model:{value:e.proxy.riskVectors,callback:function(s){e.$set(e.proxy,"riskVectors",s)},expression:"proxy.riskVectors"}}),t("FocusAreas",{attrs:{order:e.proxy.focusAreaOrder,performance:e.performance},model:{value:e.proxy.focusAreas,callback:function(s){e.$set(e.proxy,"focusAreas",s)},expression:"proxy.focusAreas"}})],1)],1):e._e(),e.proxy.riskVectors?[t("RiskVectorAnalysis",{attrs:{performance:e.performance},model:{value:e.proxy.riskVectors,callback:function(s){e.$set(e.proxy,"riskVectors",s)},expression:"proxy.riskVectors"}})]:e._e(),e.proxy.bundle?[t("BundleSolution",{attrs:{products:e.products,random:e.random,performance:e.performance},model:{value:e.proxy.bundle,callback:function(s){e.$set(e.proxy,"bundle",s)},expression:"proxy.bundle"}})]:e._e(),e.proxy.compliance?[t("ComplianceSummaryV2",{attrs:{performance:e.performance},model:{value:e.proxy.compliance,callback:function(s){e.$set(e.proxy,"compliance",s)},expression:"proxy.compliance"}})]:e._e()]:e._e(),t("StatusInput",{model:{value:e.proxy.status,callback:function(s){e.$set(e.proxy,"status",s)},expression:"proxy.status"}})],2)},mr=[];const pe={};var dr=d(w,pr,mr,!1,fr,null,null,null);function fr(e){for(let r in pe)this[r]=pe[r]}const vr=function(){return dr.exports}(),H={};H.props={value:{key:"value",required:!1,type:null,default:void 0},templates:{key:"templates",required:!0,type:Array}};H.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s),l=u(()=>t.templates.map(({key:a})=>({value:a.split("/")[1]||""})));return{proxy:n,options:l}};var yr=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BaseLabel",{staticClass:"flex flex-col p-4 lg:grid lg:grid-cols-3 lg:items-center"},[t("span",{staticClass:"after:content-['*'] after:ml-0.5 after:text-red-700"},[e._v(" Template ")]),t("BaseSelect",{staticClass:"flex flex-col lg:col-span-2",model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}},e._l(e.options,function(s,n){return t("option",{key:n,domProps:{value:s}},[e._v(" "+e._s(s.value)+" ")])}),0)],1)},_r=[];const me={};var xr=d(H,yr,_r,!1,kr,null,null,null);function kr(e){for(let r in me)this[r]=me[r]}const Sr=function(){return xr.exports}(),Q={};Q.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:null},users:{key:"users",required:!0,type:Array},entities:{key:"entities",required:!0,type:Array},products:{key:"products",required:!0,type:Array},templates:{key:"templates",required:!0,type:Array}};Q.setup=(e,r)=>{const t=e,s=r.emit;return{proxy:ve(t,s)}};Q.components=Object.assign({TemplateInput:Sr,DataInput:vr},Q.components);var $r=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"flex flex-col divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Scorecard Template ")]),t("TemplateInput",{attrs:{templates:e.templates},model:{value:e.proxy.template,callback:function(s){e.$set(e.proxy,"template",s)},expression:"proxy.template"}}),t("DataInput",{attrs:{id:e.id,users:e.users,entities:e.entities,products:e.products},model:{value:e.proxy.data,callback:function(s){e.$set(e.proxy,"data",s)},expression:"proxy.data"}})],1)},br=[];const de={};var hr=d(Q,$r,br,!1,gr,null,null,null);function gr(e){for(let r in de)this[r]=de[r]}const Cr=function(){return hr.exports}(),L={};L.setup=(e,r)=>{const t=Z("id"),s=Z("subscriptionId"),n=[Ie.list(),He.list(),We.list(t)],l=Xe.list(),a=Be.read(t),i=ze.get(t),o=u(()=>{if(a.data.value){const{id:y,name:f}=a.data.value;return{company:y,name:f}}}),c=u(()=>{var y;return(y=l.data.value)==null?void 0:y.map(f=>({id:{value:k(f,"sub")},name:k(f,"name")||"",title:k(f,"custom:title")||"",email:k(f,"email"),phone:k(f,"phone_number")||""})).find(f=>f.email==="consultingservices@whitehawk.com")}),p=new Date,b=p.getUTCFullYear(),h=`Q${Math.ceil((p.getMonth()+1)/4)}`,m=Ze(u(()=>{var y;return{template:{value:((y=i.data.value)==null?void 0:y.split("/")[1])||""},data:{buyer:{company:o.value},analyst:c.value,status:{state:_.State.IN_PROGRESS,year:b,quarter:Le(h)}}}})),v=u(()=>Boolean(l.data.value&&a.data.value)),S=De(),$=qe(),G=Oe.create(t,s);async function Y(){var y,f;if(m.value){const J={scorecardInput:{oneofKind:"bk",bk:m.value}},{response:U}=await G.mutateAsync(J);U.scorecardId&&(S.success("Successfully created scorecard."),$.push(`/admin/companies/${t.value}/subscriptions/${s.value}/integrations/2/entities/${(f=(y=m.value.data)==null?void 0:y.supplier)==null?void 0:f.id}/scorecards/in-depth/${U.scorecardId}`))}}return{accountId:t,queries:n,users:l,scorecard:m,ready:v,createScorecard:Y}};L.components=Object.assign({LoadingSpinner:Re,BackButton:Ee,ScorecardInput:Cr,FormButton:$e},L.components);var Ar=function(){var e=this,r=e.$createElement,t=e._self._c||r;return e.ready?t("section",{staticClass:"space-y-6"},[t("div",{staticClass:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-4"},[t("BackButton"),t("BaseTypography",{attrs:{variant:"h5",component:"h2"}},[e._v(" Create Scorecard ")])],1),t("BaseSimpleCard",[t("form",{staticClass:"divide-y",on:{submit:function(s){return s.preventDefault(),e.createScorecard.apply(null,arguments)}}},[t("BaseVueQueries",{attrs:{queries:e.queries},scopedSlots:e._u([{key:"success",fn:function(s){var n=s[0],l=s[1],a=s[2];return[t("ScorecardInput",{attrs:{id:e.accountId,users:e.users.data.value||[],entities:a,products:n,templates:l},model:{value:e.scorecard,callback:function(i){e.scorecard=i},expression:"scorecard"}})]}}])}),t("FormButton",{attrs:{action:"create","is-valid-form":!1}})],1)])],1):t("LoadingSpinner")},Rr=[];const fe={};var Er=d(L,Ar,Rr,!1,Ir,null,null,null);function Ir(e){for(let r in fe)this[r]=fe[r]}const ns=function(){return Er.exports}();export{ns as default};
