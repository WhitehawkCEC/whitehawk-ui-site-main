import{F as g}from"./FormButton.5c8a1f07.js";import{L as k,bs as w,c9 as d,c6 as D,d as n,dq as R,aF as A,aK as F,dr as K,n as $}from"./index.98c2618d.js";import{A as T}from"./AccountCreateInputInDepthBlackKiteCmmcV2Input.c2541d4f.js";import{u as q}from"./useCompanyScorecardTemplates.66ffa96b.js";import{u as E}from"./useUsers.b3bc26e5.js";import{e as c}from"./attributeValue.ea53a720.js";import{s as L}from"./index.8f0b933c.js";import{t as M}from"./index.fa352419.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./arrow-path.24b87f73.js";import"./CollapsibleSection.48aadcc9.js";import"./_baseIteratee.7a55b0ca.js";import"./_Uint8Array.55fd4f08.js";import"./keys.246dbd23.js";import"./_baseIsEqual.5152fcbe.js";import"./_arrayMap.dcea68f3.js";import"./lodash.66ec0e3a.js";import"./GradeLetterDisplay.59f9ccda.js";import"./BlackKiteProgressBar.8408fbf8.js";import"./index.ebbce841.js";import"./ToolTip.886a4ae2.js";import"./ratingScoreDescription.3b48b1ea.js";import"./ObjectDisplay.cf886a92.js";import"./StatusInput.d99f4ae7.js";import"./DynamicForm.c88747cd.js";import"./useProducts.c7be64fe.js";import"./useScorecardTemplates.1defc2b5.js";import"./useBlackKiteEntities.18e3490d.js";const i={};i.setup=(a,r)=>{const t=d("id"),s=d("subscriptionId"),m=E.list(),p=D.read(t),v=q.get(t),y=n(()=>{if(p.data.value){const{id:o,name:e}=p.data.value;return{id:o,name:e}}}),_=n(()=>{var o;return(o=m.data.value)==null?void 0:o.map(e=>({id:{value:c(e,"sub")},name:c(e,"name")||"",title:c(e,"custom:title")||"",email:c(e,"email"),phone:c(e,"phone_number")||""})).find(e=>e.email==="consultingservices@whitehawk.com")}),l=new Date,h=l.getUTCFullYear(),I=`Q${Math.ceil((l.getMonth()+1)/4)}`,u=L(n(()=>{var o;return{template:{value:((o=v.data.value)==null?void 0:o.split("/")[1])||""},data:{buyer:{company:y.value},analyst:_.value,status:{state:R.State.IN_PROGRESS,year:h,quarter:M(I)}}}})),C=n(()=>Boolean(m.data.value&&p.data.value)),S=A(),b=F(),x=K.create(t,s);async function B(){if(u.value){const o={scorecardInput:{oneofKind:"bk",bk:u.value}},{response:e}=await x.mutateAsync(o);e.scorecardId&&(S.success("Successfully created scorecard."),b.push(`/admin/companies/${t.value}/subscriptions/${s.value}/integrations/2/scorecards/in-depth/${e.scorecardId.value}`))}}return{accountId:t,scorecard:u,ready:C,createScorecard:B}};i.components=Object.assign({LoadingSpinner:k,BackButton:w,AccountCreateInputInDepthBlackKiteCmmcV2Input:T,FormButton:g},i.components);var V=function(){var a=this,r=a.$createElement,t=a._self._c||r;return a.ready?t("section",{staticClass:"space-y-6"},[t("div",{staticClass:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-4"},[t("BackButton"),t("div",{staticClass:"flex flex-col -space-y-1"},[t("BaseTypography",{staticClass:"uppercase text-gray-500",attrs:{variant:"overline"}},[a._v(" Black Kite ")]),t("BaseTypography",{attrs:{variant:"h5",component:"h2"}},[a._v(" In-Depth Scorecard ")])],1)],1),t("BaseSimpleCard",[t("form",{staticClass:"divide-y",on:{submit:function(s){return s.preventDefault(),a.createScorecard.apply(null,arguments)}}},[t("AccountCreateInputInDepthBlackKiteCmmcV2Input",{attrs:{"account-id":a.accountId},model:{value:a.scorecard,callback:function(s){a.scorecard=s},expression:"scorecard"}}),t("FormButton",{attrs:{action:"create"}})],1)])],1):t("LoadingSpinner")},j=[];const f={};var N=$(i,V,j,!1,O,null,null,null);function O(a){for(let r in f)this[r]=f[r]}const ht=function(){return N.exports}();export{ht as default};
