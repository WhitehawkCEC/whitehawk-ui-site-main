import{S as B,F as k}from"./ScorecardBatchSuccessFailBadge.47b803dc.js";import{d as i,aS as h,n as I,bs as C,c7 as _,b as y,aK as $,aP as F,aQ as N}from"./index.78dd2457.js";import{A as T,T as q}from"./AppTanStackTable.98d97e9f.js";import{c as A}from"./createOnChangeFn.17d6c734.js";import{u as w}from"./createSimpleTable.a91d14b2.js";import{u as R}from"./useBatchScorecards.318a791c.js";import{d as E}from"./FormValidation.a5e2f641.js";import{s as S}from"./index.e0109f19.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.bbfe5743.js";import"./chevron-up.736f4142.js";const l={};l.props={id:{key:"id",required:!0,type:String},subId:{key:"subId",required:!0,type:String},batches:{key:"batches",required:!0,type:Array},bitsightCompanies:{key:"bitsightCompanies",required:!0,type:Array}};l.setup=(e,s)=>{const t=e,c=i(()=>t.id),f=i(()=>t.subId),u=i(()=>t.bitsightCompanies.map(a=>{var d;return{id:a.id,supplier:a.name,state:t.batches.some(o=>o.supplierId===a.id)?"Success":"Failed",scorecardId:(d=t.batches.find(o=>o.supplierId===a.id))==null?void 0:d.scorecardId}})),r=A(),p=[r.accessor("id",{header:()=>"Supplier ID",enableColumnFilter:!1}),r.accessor("supplier",{header:()=>"Supplier Name",enableColumnFilter:!1}),r.accessor("state",{header:()=>"Scorecard State",cell:a=>h(B,{props:{value:a.getValue()}}),enableColumnFilter:!1}),r.display({id:"actions",header:"Actions",cell:({row:a})=>h(q,{props:{actions:[{id:"edit",to:`/admin/companies/${c.value}/subscriptions/${f.value}/integrations/1/scorecards/in-depth/${a.original.scorecardId}`}]}})})];return{instance:w(u,p)}};l.components=Object.assign({AppTanStackTable:T},l.components);var j=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},D=[];const g={};var L=I(l,j,D,!1,P,null,null,null);function P(e){for(let s in g)this[s]=g[s]}const V=function(){return L.exports}(),m={};m.setup=(e,s)=>{const t=_("id"),c=_("subscriptionId"),f=_("batchId"),u=y(""),r=y(!1),p=R.read(t,f),b=S(i(()=>{var n;return((n=p.data.value)==null?void 0:n.scorecardIds)||[]})),a=S(i(()=>{var n;return((n=p.data.value)==null?void 0:n.batchRequest.supplierInfos)||[]})),d=$();async function o(){const n=b.value.map(v=>({scorecardId:v.scorecardId,supplierName:v.supplierName}));r.value=!0;try{await F.post(`${N}/companies/${t.value}/batch/scorecards`,{fileName:`${u.value}`,supplierScorecardInfos:n})}finally{r.value=!1}d.push(`/admin/companies/${t.value}/subscriptions/${c.value}/integrations/1/scorecards/zip-files`)}return{checkZipFileExtension:E,id:t,subscriptionId:c,fileName:u,batches:b,companies:a,convert:o}};m.components=Object.assign({BackButton:C,FolderDownloadSvg:k,BatchScorecardStatusTable:V},m.components);var z=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.batches&&e.companies?t("BaseTablePageLayout",{scopedSlots:e._u([{key:"backButton",fn:function(){return[t("BackButton")]},proxy:!0},{key:"overline",fn:function(){return[e._v("Bitsight")]},proxy:!0},{key:"title",fn:function(){return[e._v("Batch Scorecard")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-2",attrs:{disabled:!e.fileName},on:{click:e.convert}},[t("FolderDownloadSvg",{staticClass:"-ml-1 w-5"}),t("span",[e._v("Convert Batch")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("div",{staticClass:"space-y-6"},[t("BatchScorecardStatusTable",{attrs:{id:e.id,"sub-id":e.subscriptionId,batches:e.batches,"bitsight-companies":e.companies}}),t("BaseSimpleCard",[t("BaseLabel",{staticClass:"flex flex-col p-4 lg:grid lg:grid-cols-3 lg:items-center"},[t("span",{staticClass:"after:content-['*']` after:text-red-700"},[e._v(" File Name: ")]),t("div",{staticClass:"flex flex-col lg:col-span-2"},[t("BaseInputWithValidation",{attrs:{type:"text",required:"","aria-required":"true",validator:e.checkZipFileExtension},model:{value:e.fileName,callback:function(c){e.fileName=c},expression:"fileName"}})],1)])],1)],1)]},proxy:!0}],null,!1,1735806390)}):e._e()},H=[];const x={};var M=I(m,z,H,!1,O,null,null,null);function O(e){for(let s in x)this[s]=x[s]}const se=function(){return M.exports}();export{se as default};
