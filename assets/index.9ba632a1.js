import{b$ as g,c as m,aS as T,aP as Q,aQ as S,n as q,bW as M,an as w,r as u,c0 as F,c1 as h,aF as P}from"./index.998ad72c.js";import{B}from"./BasicConfirmModal.492712cc.js";import{A as D,T as I}from"./AppTanStackTable.fb7e5de7.js";import{I as k}from"./IsoDateTimeDisplay.6ddbd938.js";import{c as N}from"./createOnChangeFn.eb7eef09.js";import{F as E}from"./FileSaver.min.9196adac.js";import{u as V}from"./createSimpleTable.e01129bc.js";import"./BasicModal.09f72a72.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.2536147a.js";import"./chevron-up.736f4142.js";function j(e){switch(e){case g.QuestionnaireType.CANNED:return"Canned";case g.QuestionnaireType.CUSTOM:return"Custom";default:return"N/A"}}const d={};d.props={questionnaires:{key:"questionnaires",required:!0,type:Array}};d.setup=(e,n)=>{const t=e,o=n.emit,f=m(()=>t.questionnaires),a=N(),r=[a.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),a.accessor("industry",{header:()=>"Industry",enableColumnFilter:!1}),a.accessor("type",{header:()=>"Type",cell:s=>j(s.getValue()),enableColumnFilter:!1}),a.accessor("description",{header:()=>"Description",enableColumnFilter:!1}),a.accessor(s=>{var i;return(i=s.meta)==null?void 0:i.updatedAt},{id:"updatedAt",header:()=>"Updated At",cell:s=>T(k,{props:{value:s.getValue(),format:"date"}}),enableColumnFilter:!1}),a.display({id:"actions",header:"Actions",cell:({row:s})=>{var i;return T(I,{props:{actions:[{id:"edit",to:`/admin/custom-questionnaires/${(i=s.original.id)==null?void 0:i.value}`},{id:"download",async action(){const{data:_}=await Q(`${S}/${s.original.fileUrl}`,{responseType:"blob"}),v=`${s.original.name}-custom-questionnaire.xlsx`;E.exports.saveAs(_,v)},isDisabled:m(()=>!0)},{id:"delete",action(){s.original&&o("delete",s.original)}}]}})}})];return{instance:V(f,r)}};d.components=Object.assign({AppTanStackTable:D},d.components);var L=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("AppTanStackTable",{attrs:{table:e.instance}})},R=[];const C={};var U=q(d,L,R,!1,O,null,null,null);function O(e){for(let n in C)this[n]=C[n]}const G=function(){return U.exports}(),p={};p.setup=(e,n)=>{const t=u(),o=u(),f=u("Doing so will affect the following questionnaires:"),a=u("You are not able to delete this questionnaire:"),r=u(!1);function y(l){var c;o.value=l,t.value=(c=l.id)==null?void 0:c.value,r.value=!0}const s=m(()=>{var l,c;return(c=(l=F.get(t==null?void 0:t.value).data)==null?void 0:l.value)==null?void 0:c.questionnairePreference}),i=h.list(),_=h.delete(),v=m(()=>i.data.value||[]),$=P();async function A(){if(o.value)await _.mutateAsync({questionnaireId:o.value.id}),b(),$.success(`Questionnaire  ${o.value.description} successfully deleted`);else throw new Error("Invalid request.")}function b(){r.value=!1}return{selected:o,message:f,deletionRestrictionMessage:a,isModalVisible:r,setPayload:y,affectedItemsGet:s,questionnaires:v,deleteQuestionnaire:A,closeModal:b}};p.components=Object.assign({BaseTablePageLayout:M,PlusSvg:w,QuestionnairesTable:G,BasicConfirmModal:B},p.components);var H=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Questionnaires")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{to:"new",append:""}},[t("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),t("span",[e._v("Questionnaire")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("QuestionnairesTable",{attrs:{questionnaires:e.questionnaires},on:{delete:e.setPayload}})]},proxy:!0}])}),e.isModalVisible&&e.selected?t("BasicConfirmModal",{attrs:{name:e.selected.name,message:e.message,"deletion-restriction-message":e.deletionRestrictionMessage,type:"Preference Questionnaires","items-affected":e.affectedItemsGet},on:{delete:e.deleteQuestionnaire,close:e.closeModal}}):e._e()],1)},z=[];const x={};var W=q(p,H,z,!1,Y,null,null,null);function Y(e){for(let n in x)this[n]=x[n]}const re=function(){return W.exports}();export{re as default};
