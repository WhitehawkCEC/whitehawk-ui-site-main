import{ai as T,aP as k,aQ as h,aT as D,aE as E,d as S,aJ as G,aS as r,br as A,n as B,bZ as U}from"./index.5fb7466f.js";import{A as q,T as K}from"./AppTanStackTable.a6dd93bb.js";import{G as o}from"./GradeLetterDisplay.afc6de0d.js";import{c as Q}from"./createOnChangeFn.a0024f09.js";import{u as j}from"./createSimpleTable.e1ab228c.js";import{u as P}from"./useBlackKiteEntities.2b6ee80b.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.dac5d914.js";import"./chevron-up.736f4142.js";const w={list(e){return T(["companies",e,"black-kite","report-summaries"],()=>k.get(`${h}/companies/${e.value}/black-kite/report-summaries`).then(s=>s.data))}},$={create(e){const s=D();return E(()=>k.post(`${h}/companies/${e.value}/black-kite/sync`).then(a=>a.data),{onSuccess(){s.invalidateQueries(["companies",e,"black-kite","sync"],{exact:!0})}})},read(e){return T(["companies",e,"black-kite","sync"],()=>k.get(`${h}/companies/${e.value}/black-kite/sync`).then(s=>s.data))}},l={};l.props={id:{key:"id",required:!0,type:String},entities:{key:"entities",required:!0,type:Array},summaries:{key:"summaries",required:!0,type:Array}};l.setup=(e,s)=>{const a=e,c=S(()=>{const t=[];return a.entities.map(_=>{var d;const{CompanyId:f,DomainName:m,CompanyName:b}=_,p=(d=a.summaries.find(g=>g.data.DomainValue===m))==null?void 0:d.data;p&&t.push({id:f,name:b,domain:m,summary:p})}),t}),i=S(()=>c.value.map(t=>{const{id:_,name:f,domain:m,summary:b}=t,{GradeLetter:p,Reputation:d,Privacy:g,Resiliency:F,Safeguard:R,LastUpdatedAt:V}=b;return{id:_,name:f,domain:m,summary:p,reputation:d.GradeLetter,privacy:g.GradeLetter,resiliency:F.GradeLetter,safeguard:R.GradeLetter,lastUpdated:V}})),u=G(),n=Q(),v=[n.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),n.accessor("domain",{header:()=>"Domain",enableColumnFilter:!1}),n.accessor("summary",{header:()=>"Summary",cell:t=>r(o,{props:{value:t.getValue()}}),enableColumnFilter:!1}),n.accessor("reputation",{header:()=>"Reputation",cell:t=>r(o,{props:{value:t.getValue()}}),enableColumnFilter:!1}),n.accessor("privacy",{header:()=>"Privacy",cell:t=>r(o,{props:{value:t.getValue()}}),enableColumnFilter:!1}),n.accessor("resiliency",{header:()=>"Resiliency",cell:t=>r(o,{props:{value:t.getValue()}}),enableColumnFilter:!1}),n.accessor("safeguard",{header:()=>"Safeguard",cell:t=>r(o,{props:{value:t.getValue()}}),enableColumnFilter:!1}),n.accessor("lastUpdated",{header:()=>"LastUpdated",cell:t=>r(A,{props:{value:t.getValue(),format:"date"}}),enableColumnFilter:!1}),n.display({id:"actions",header:"Actions",cell:({row:t})=>r(K,{props:{actions:[{id:"view",action(){u.push(`/admin/companies/${a.id}/rating-service-2/entities/${t.original.id}`)}}]}})})];return{instance:j(i,v)}};l.components=Object.assign({AppTanStackTable:q},l.components);var I=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("AppTanStackTable",{attrs:{table:e.instance}})},M=[];const L={};var N=B(l,I,M,!1,H,null,null,null);function H(e){for(let s in L)this[s]=L[s]}const O=function(){return N.exports}(),y={};y.setup=(e,s)=>{const a=U("id"),c=$.read(a),i=$.create(a),u=P.list(a),n=w.list(a),v=S(()=>i.isLoading.value||u.isLoading.value||n.isLoading.value);async function C(){await i.mutateAsync()}return{id:a,syncStatus:c,entities:u,summaries:n,isLoading:v,runSync:C}};y.components=Object.assign({DateIsoStringDisplay:A,BlackKiteEntityTable:O},y.components);var z=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("main",{staticClass:"flex flex-col space-y-6"},[a("div",{staticClass:"space-y-1"},[a("BaseButton",{attrs:{shape:"rectangle",type:"button",disabled:e.isLoading},on:{click:e.runSync}},[e._v(" Update ")]),a("BaseVueQuery",{attrs:{query:e.syncStatus},scopedSlots:e._u([{key:"success",fn:function(c){var i=c.data;return[a("BaseTypography",{staticClass:"uppercase text-gray-500",attrs:{variant:"overline"}},[e._v(" Last Updated: "),a("DateIsoStringDisplay",{attrs:{value:i.meta.updatedAt}})],1)]}}])})],1),a("BlackKiteEntityTable",{attrs:{id:e.id,entities:e.entities.data.value||[],summaries:e.summaries.data.value||[]}})],1)},J=[];const x={};var Z=B(y,z,J,!1,W,null,null,null);function W(e){for(let s in x)this[s]=x[s]}const oe=function(){return Z.exports}();export{oe as default};
