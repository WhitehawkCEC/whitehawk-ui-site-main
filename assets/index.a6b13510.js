import{aq as B,bZ as g,c3 as h,c6 as Q,d as a,c7 as T,cE as w,c5 as R,aJ as q,n as A}from"./index.5ccce9a9.js";import{S as j,a as E}from"./SubscriptionProductsTable.196f5f16.js";import{S as F}from"./SubscriptionIdHeader.0ace65e1.js";import"./DateRangeDisplay.d4e9b438.js";import"./IsoDateTimeDisplay.b66f878c.js";import"./AppTanStackTable.40bde103.js";import"./createOnChangeFn.ac7e87d9.js";import"./chevron-up.736f4142.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.63a48500.js";import"./createSimpleTable.3c1aac5f.js";import"./BackButton.742126dd.js";import"./index.7f3e0f59.js";const p={};p.setup=(s,i)=>{const t=g("id"),e=g("subscriptionId"),c=h.read(t,e),m=Q.list(t,e),f=a(()=>m.data.value||[]),b=T(),_=a(()=>b.pinnedProductIds),C=a(()=>{const u=[];return f.value.filter(r=>{var o,n;return((n=(o=r.product)==null?void 0:o.id)==null?void 0:n.value)&&_.value.includes(r.product.id.value)?u.push(r):w.SubscriptionProductWithConfigType.create()}),u.sort((r,o)=>r.product&&o.product?r.product.name.localeCompare(o.product.name):-1)||[]}),$=h.read(t,e),y=a(()=>{var u;return((u=$.data.value)==null?void 0:u.features)||R.SubscriptionFeatures.create()}),d=q(),k=a(()=>{var l,r;const u=new Map;for(const o of f.value){const n=((r=(l=o.product)==null?void 0:l.id)==null?void 0:r.value)||"",I=[{id:"view",action(){y.value.hasGroups?d.push(`/admin/companies/${t.value}/subscriptions/${e.value}/products/${n}/groups`):d.push(`/admin/companies/${t.value}/subscriptions/${e.value}/products/${n}`)}},{id:"edit",action(){d.push(`/admin/companies/${t.value}/subscriptions/${e.value}/products/${n}/settings`)}},{id:"pinProduct",action(){b.setPinned(n)}}].filter(v=>{var P,S;return((S=(P=o.product)==null?void 0:P.id)==null?void 0:S.value)&&_.value.includes(o.product.id.value)||y.value.hasGroups?v.id!=="pinProduct":v});u.set(n,I)}return u});return{id:t,subscriptionId:e,subscriptionQuery:c,productsQuery:m,pinnedProducts:C,actions:k}};p.components=Object.assign({SubscriptionIdHeader:F,SubscriptionProductCard:j,PlusSvg:B,SubscriptionProductsTable:E},p.components);var G=function(){var s=this,i=s.$createElement,t=s._self._c||i;return t("section",{staticClass:"space-y-6"},[t("BaseVueQuery",{attrs:{query:s.subscriptionQuery},scopedSlots:s._u([{key:"success",fn:function(e){var c=e.data;return[t("SubscriptionIdHeader",{attrs:{id:s.id,subscription:c}})]}}])}),s.pinnedProducts.length>0?t("div",{staticClass:"space-y-2"},[t("BaseTypography",{staticClass:"uppercase text-gray-600",attrs:{variant:"overline"}},[s._v(" Pinned Products ")]),t("ul",{staticClass:"grid grid-cols-1 gap-4 sm:gap-6 lg:grid-cols-2 2xl:grid-cols-3"},s._l(s.pinnedProducts,function(e,c){return t("li",{key:c},[t("SubscriptionProductCard",{attrs:{id:s.id,"subscription-id":s.subscriptionId,product:e}})],1)}),0)],1):s._e(),t("BaseTablePageLayout",{scopedSlots:s._u([{key:"title",fn:function(){return[s._v("Subscription Products")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"./new",append:""}},[t("PlusSvg",{staticClass:"w-5"}),t("span",[s._v("Product")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("BaseVueQuery",{attrs:{query:s.productsQuery},scopedSlots:s._u([{key:"success",fn:function(e){var c=e.data;return[t("SubscriptionProductsTable",{attrs:{value:c,"mapped-actions":s.actions}})]}}])})]},proxy:!0}])})],1)},H=[];const x={};var M=A(p,G,H,!1,V,null,null,null);function V(s){for(let i in x)this[i]=x[i]}const rt=function(){return M.exports}();export{rt as default};
