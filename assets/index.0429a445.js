import{F as x}from"./FormButton.86f323d4.js";import{B}from"./BackButton.aaa73d2d.js";import{D as $}from"./DynamicForm.8f70b7af.js";import{ai as k,aT as h,aE as g,aP as m,aQ as l,aC as q,d,b0 as y,n as E,b_ as C,bE as M,r as O,aB as F,aJ as S}from"./index.6df6e292.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./chevron-left.0808b01b.js";const v={get(e){async function a(){const{data:t}=await m.get(`${l}/companies/${e.value}/black-kite/mapped-entity`);return t}return k(["companies",e,"black-kite","mapped-entity"],a,{retry:!1})},update(e){const a=h();return g(t=>m.put(`${l}/companies/${e.value}/black-kite/mapped-entity`,t).then(n=>n.data),{onSuccess(){a.invalidateQueries(["companies",e,"black-kite","mapped-entity"],{exact:!0})}})}},I={get(e){return k(["companies",e,"black-kite","mapped-entity-entry-options"],()=>m.get(`${l}/companies/${e.value}/black-kite/mapped-entity-entry-options`).then(a=>a.data))}},p={};p.props={value:{key:"value",required:!1,type:null},targetIsReadOnly:{key:"targetIsReadOnly",required:!1,type:Boolean},companies:{key:"companies",required:!0,type:Array},providerOptions:{key:"providerOptions",required:!0,type:Array}};p.setup=(e,a)=>{const t=e,n=a.emit,o=q(t,n),r=d(()=>t.companies.map(({id:s})=>({accountId:s}))),i=d(()=>[{name:"consumer",label:"Consumer",component:{is:y,attrs:{required:!0,options:r.value.map(s=>({text:s.accountId,value:s}))}}},{name:"provider",label:"Black Kite Entity",component:{is:y,attrs:{required:!0,options:t.providerOptions.map(s=>({text:s.data.name,value:s}))}}}]);return{proxy:o,schema:i}};p.components=Object.assign({DynamicForm:$},p.components);var Q=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("DynamicForm",{attrs:{schema:e.schema},model:{value:e.proxy,callback:function(n){e.proxy=n},expression:"proxy"}})},R=[];const _={};var D=E(p,Q,R,!1,j,null,null,null);function j(e){for(let a in _)this[a]=_[a]}const A=function(){return D.exports}(),u={};u.setup=(e,a)=>{const t=C("id"),n=[M.list(),I.get(t)],o=v.get(t),r=O();F(()=>o.data.value,c=>{c&&(r.value=c)},{immediate:!0});const i=S(),s=v.update(t);async function b(){if(r.value){const c=r.value;await s.mutateAsync(c),i.push(`/admin/companies/${t.value}/rating-service-2/mapped-entity`)}}return{id:t,queries:n,mappedEntity:r,updateMappedEntity:b}};u.components=Object.assign({BackButton:B,MappedEntityInput:A,FormButton:x},u.components);var K=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"space-y-6"},[t("BackButton",{attrs:{link:`/admin/companies/${e.id}/rating-service-2/access`}}),t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h2",variant:"subtitle3"}},[e._v(" Update Mapped Entity ")]),t("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),e.updateMappedEntity.apply(null,arguments)}}},[t("BaseVueQueries",{attrs:{queries:e.queries},scopedSlots:e._u([{key:"success",fn:function(n){var o=n[0],r=n[1];return[t("MappedEntityInput",{attrs:{companies:o,"provider-options":r},model:{value:e.mappedEntity,callback:function(i){e.mappedEntity=i},expression:"mappedEntity"}})]}}])}),t("FormButton",{attrs:{action:"update"}})],1)],1)],1)},P=[];const f={};var U=E(u,K,P,!1,w,null,null,null);function w(e){for(let a in f)this[a]=f[a]}const V=function(){return U.exports}();export{V as default};
