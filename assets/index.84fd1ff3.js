import{F as $}from"./FormButton.1a320f61.js";import{aq as b,bs as K,c as o,al as h,aC as I,n as _,ax as B,c8 as S,cV as y,d4 as A,d5 as E,aF as w}from"./index.940de7e7.js";import{A as D}from"./ApiKeyInput.02215cfa.js";import{s as T}from"./index.735aacee.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./arrow-top-right-on-square.b063d2af.js";import"./ApiKeyValidation.3a3d14f6.js";import"./ApiKeyDescriptionDisplay.3704fdb3.js";var j=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("svg",e._g({attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},e.$listeners),[t("path",{attrs:{"fill-rule":"evenodd",d:"m5.965 4.904 9.131 9.131a6.5 6.5 0 0 0-9.131-9.131zm8.07 10.192L4.904 5.965a6.5 6.5 0 0 0 9.131 9.131zM4.343 4.343a8 8 0 1 1 11.314 11.314A8 8 0 0 1 4.343 4.343z","clip-rule":"evenodd"}})])};const M={render:j},i={};i.props={accessToken:{key:"accessToken",required:!1,type:String}};i.setup=(e,n)=>{const t=e,a=o(()=>h.get(`${I}https://app.blackkitetech.com/api/v2/status`,{headers:{authorization:`Bearer ${t.accessToken}`}}));function c(r){return new Date(r).toISOString()}return{validityCheck:a,formatDate:c}};i.components=Object.assign({CheckSvg:b,DateIsoStringDisplay:K,NoSvg:M},i.components);var F=function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.accessToken!==void 0?t("BasePromise",{attrs:{promise:e.validityCheck},scopedSlots:e._u([{key:"success",fn:function(a){var c=a.result.data.ExpirationDateOfClientCredential;return[t("span",{staticClass:"inline-flex items-center space-x-1"},[t("CheckSvg",{staticClass:"-ml-1 h-auto w-4 shrink-0 text-green-600"}),c?t("BaseTypography",{staticClass:"text-green-600",attrs:{variant:"p3"}},[e._v(" Expires At: "),t("DateIsoStringDisplay",{attrs:{value:e.formatDate(c),format:"date"}})],1):e._e()],1)]}},{key:"error",fn:function(){return[t("span",{staticClass:"inline-flex items-center space-x-1"},[t("NoSvg",{staticClass:"-ml-1 h-auto w-4 shrink-0 text-red-600"}),t("BaseTypography",{staticClass:"text-red-600",attrs:{variant:"p3"}},[e._v(" Invalid Credentials ")])],1)]},proxy:!0}],null,!1,1295110825)}):e._e()},O=[];const g={};var q=_(i,F,O,!1,L,null,null,null);function L(e){for(let n in g)this[n]=g[n]}const R=function(){return q.exports}(),l={};l.props={id:{key:"id",required:!0,type:String},secret:{key:"secret",required:!0,type:String}};l.setup=(e,n)=>{const t=e;return{accessToken:o(()=>h.post(`${I}https://app.blackkitetech.com/api/v2/oauth/token`,{grant_type:"client_credentials",client_id:t.id,client_secret:t.secret}))}};l.components=Object.assign({ApiKeyValidationV2:R},l.components);var z=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("BasePromise",{attrs:{promise:e.accessToken},scopedSlots:e._u([{key:"success",fn:function(a){var c=a.result.data.access_token;return[t("ApiKeyValidationV2",{attrs:{"access-token":c}})]}}])})},P=[];const k={};var N=_(l,z,P,!1,G,null,null,null);function G(e){for(let n in k)this[n]=k[n]}const U=function(){return N.exports}(),u={};u.props={value:{key:"value",required:!1,type:null},ecosystems:{key:"ecosystems",required:!0,type:Array}};u.setup=(e,n)=>{const t=e,a=n.emit,c=B(t,a),r=o({get(){var v;const s=(v=t.value)==null?void 0:v.apiKeyMaybe;if((s==null?void 0:s.oneofKind)==="apiKey")return s.apiKey},set(s){s?c.value.apiKeyMaybe={oneofKind:"apiKey",apiKey:s}:c.value.apiKeyMaybe={oneofKind:void 0}}}),d=o({get(){var s;return(s=t.value)==null?void 0:s.mappedEcosystemId},set(s){s&&(c.value.mappedEcosystemId=s)}}),m=o({get(){var s;return(s=t.value)==null?void 0:s.clientId},set(s){s&&(c.value.clientId=s)}}),f=o({get(){var s;return(s=t.value)==null?void 0:s.secret},set(s){s&&(c.value.secret=s)}});return{apiKey:r,mappedEcosystemId:d,clientId:m,secret:f}};u.components=Object.assign({ApiKeyInput:D,ApiAccessToken:U},u.components);var V=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"space-y-8"},[t("BaseLabel",{staticClass:"space-y-1"},[t("span",[e._v("API Key:")]),t("ApiKeyInput",{model:{value:e.apiKey,callback:function(a){e.apiKey=a},expression:"apiKey"}})],1),t("BaseLabel",{staticClass:"space-y-1"},[t("span",[e._v("Mapped Ecosystem:")]),t("BaseInput",{staticClass:"w-full",model:{value:e.mappedEcosystemId,callback:function(a){e.mappedEcosystemId=e._n(a)},expression:"mappedEcosystemId"}})],1),t("BaseLabel",{staticClass:"space-y-1"},[t("div",{staticClass:"flex flex-col space-y-1 sm:flex-row sm:items-center sm:justify-between sm:space-y-0"},[t("span",[e._v("Client ID:")]),e.clientId&&e.secret?t("ApiAccessToken",{attrs:{id:e.clientId,secret:e.secret}}):e._e()],1),t("BaseInput",{staticClass:"w-full",model:{value:e.clientId,callback:function(a){e.clientId=a},expression:"clientId"}})],1),t("BaseLabel",{staticClass:"space-y-1"},[t("span",[e._v("Client Secret:")]),t("BaseInput",{staticClass:"w-full",model:{value:e.secret,callback:function(a){e.secret=a},expression:"secret"}})],1)],1)},W=[];const x={};var H=_(u,V,W,!1,J,null,null,null);function J(e){for(let n in x)this[n]=x[n]}const Q=function(){return H.exports}(),p={};p.setup=(e,n)=>{const t=S("id"),a=y.get(t),c=T(o(()=>a.data.value||A.create())),r=E.list(t),d=o(()=>r.data.value||[]),m=w(),f=y.set(t);async function s(){await f.mutateAsync(c.value),m.success("Successfully updated config.")}return{config:c,ecosystems:d,submit:s}};p.components=Object.assign({BlackKiteConfigInput:Q,FormButton:$},p.components);var X=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"block p-4",attrs:{variant:"subtitle3"}},[e._v(" Configure Black Kite ")]),t("form",{staticClass:"divide-y",on:{submit:function(a){return a.preventDefault(),e.submit.apply(null,arguments)}}},[t("div",{staticClass:"p-4"},[t("BlackKiteConfigInput",{attrs:{ecosystems:e.ecosystems},model:{value:e.config,callback:function(a){e.config=a},expression:"config"}})],1),t("FormButton",{attrs:{action:"save"}})],1)],1)},Y=[];const C={};var Z=_(p,X,Y,!1,ee,null,null,null);function ee(e){for(let n in C)this[n]=C[n]}const ue=function(){return Z.exports}();export{ue as default};
