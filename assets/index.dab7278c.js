import{bT as S,aS as g,n as x,an as A,bS as y,c as b,r as d,bU as $,aF as I}from"./index.ef503185.js";import{B as M}from"./BasicConfirmModal.a5863439.js";import{A as w,T as B}from"./AppTanStackTable.0cedb5ad.js";import{I as k}from"./IsoDateTimeDisplay.ef02a096.js";import{c as F}from"./createOnChangeFn.2ea319af.js";import{u as D}from"./createSimpleTable.ab7c9f94.js";import"./BasicModal.2482789c.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.9484627d.js";import"./chevron-up.736f4142.js";const l={};l.props={categories:{key:"categories",required:!0,type:Array}};l.setup=(e,a)=>{const t=e,{categories:p}=S(t),n=a.emit,c=F(),i=[c.accessor(s=>{var o;return(o=s.id)==null?void 0:o.value},{id:"id",header:()=>"ID",enableColumnFilter:!1}),c.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),c.accessor(s=>{var o;return(o=s.meta)==null?void 0:o.updatedAt},{id:"updatedAt",header:()=>"Last Updated",cell:s=>g(k,{props:{value:s.getValue(),format:"date"}}),enableColumnFilter:!1}),c.display({id:"actions",header:"Actions",cell:({row:s})=>{var o;return g(B,{props:{actions:[{id:"edit",to:`/admin/products/categories/${(o=s.original.id)==null?void 0:o.value}`},{id:"delete",action(){n("delete",s.original)}}]}})}})];return{instance:D(p,i)}};l.components=Object.assign({AppTanStackTable:w},l.components);var j=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("AppTanStackTable",{attrs:{table:e.instance}})},E=[];const C={};var V=x(l,j,E,!1,L,null,null,null);function L(e){for(let a in C)this[a]=C[a]}const R=function(){return V.exports}(),m={};m.setup=(e,a)=>{const t=y.list(),p=b(()=>t.data.value?t.data.value.sort((r,u)=>r.name.localeCompare(u.name)):[]),n=d(),c=d("Doing so will affect the following products and bundle sets:"),i=d();function _(r){var u;n.value=r,i.value=(u=r.id)==null?void 0:u.value,f.value=!0}const s=b(()=>{var r;return(r=$.get(i.value).data)==null?void 0:r.value}),o=I(),T=y.delete();async function P(){if(n.value)await T.mutateAsync({category:n.value}),v(),o.success(`Category ${n.value.name} successfully deleted`);else throw new Error("Invalid request.")}const f=d(!1);function v(){f.value=!1}return{categories:p,selected:n,message:c,setPayload:_,affectedItemsGet:s,deleteCategory:P,isModalVisible:f,closeModal:v}};m.components=Object.assign({PlusSvg:A,ProductCategoriesTable:R,BasicConfirmModal:M},m.components);var q=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Product Categories")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"/admin/products/categories/new"}},[t("PlusSvg",{staticClass:"mr-1 w-5 xl:w-5"}),e._v(" Category ")],1)]},proxy:!0},{key:"table",fn:function(){return[t("ProductCategoriesTable",{attrs:{categories:e.categories},on:{delete:e.setPayload}})]},proxy:!0}])}),e.isModalVisible&&e.selected?t("BasicConfirmModal",{attrs:{name:e.selected.name,message:e.message,"items-affected":e.affectedItemsGet,type:"Products"},on:{delete:e.deleteCategory,close:e.closeModal}}):e._e()],1)},G=[];const h={};var H=x(m,q,G,!1,N,null,null,null);function N(e){for(let a in h)this[a]=h[a]}const ee=function(){return H.exports}();export{ee as default};
