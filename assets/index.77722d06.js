import{R as A}from"./arrow-path.24b87f73.js";import{F as T}from"./FormButton.00f03b00.js";import{bs as F,L as U,c8 as B,bG as G,d as o,b as M,aK as $,aF as j,n as q}from"./index.5683a9c0.js";import{B as O}from"./BarChart.1b7a81d3.js";import{G as z,S as N}from"./ScorecardSnapshotInput.76010037.js";import{u as E,s as H,g as K}from"./sortBy.23191145.js";import{u as W,a as J}from"./useCompanyOverview.f760a265.js";import{u as V}from"./useNewestQuestionnaireResponses.e1c78daf.js";import{u as X}from"./useSnapshotScorecards.97a26472.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./chart.c54a61e9.js";import"./GaugeChart.dd388bc4.js";import"./BasicModal.5a11d0e0.js";import"./useCompanyWishlistItems.e50b3604.js";import"./cloneDeep.5fb2fb4b.js";import"./_Uint8Array.6cc7284b.js";import"./keys.8fec485e.js";import"./_baseAssignValue.1b2cb82b.js";import"./_copyArray.56331c81.js";import"./TabbedPanel.178be2d4.js";import"./_baseIteratee.c7743b27.js";import"./_baseIsEqual.ad8679da.js";import"./_arrayMap.dcea68f3.js";const u={};u.setup=(t,r)=>{const e=B("id"),i=B("subscriptionId"),d=G.read(e),R=o(()=>{if(d.data.value){const{id:a,name:s}=d.data.value;return{id:a,name:s}}}),v=E.list(e),n=o(()=>{const a=v.data.value;if(a){const s=H(a,"order");return K(s,"category")}}),l=o(()=>{if(n.value)return["basic","foundational","organizational"].reduce((a,s)=>{var c;return a[s]=((c=n.value)==null?void 0:c[s])||[],a},{})}),f=o(()=>{if(n.value)return["critical","next","pending"].reduce((a,s)=>{var c;return a[s]=((c=n.value)==null?void 0:c[s])||[],a},{})});async function k(){await v.refetch.value()}const y=V.get(e),x=o(()=>y.data.value);async function D(){await y.refetch.value()}const g=W.get(e),C=o(()=>g.data.value),h=o(()=>{var a,s;return(s=(a=g.data.value)==null?void 0:a.scores)==null?void 0:s.cyberPath}),I=J.get(e),_=o(()=>I.data.value),p=M(),m=o({get(){var a;return p.value?p.value:{type:"snapshot",company:R.value,questionnaireResponse:x.value,riskIndicator:{cyberScore:h.value,text:(a=C.value)==null?void 0:a.text},actionPlan:{data:f.value},maturityLevelAssessment:{data:l.value},bundles:_.value,cis:l.value?Object.values(l.value).flatMap(s=>s).map(s=>s.itemComplete):[]}},set(a){p.value=a}}),L=o(()=>Boolean(n.value&&_.value&&C.value&&x.value&&m.value)),P=$(),b=j(),S=X.create(e);async function Q(){const a=await S.mutateAsync(m.value);a?(b.success("Created Successfully"),P.push(`/admin/companies/${encodeURIComponent(e.value)}/subscriptions/${encodeURIComponent(i.value)}/integrations/6/scorecards/snapshot/${encodeURIComponent(a.id)}`)):b.error("Something went wrong.")}return{id:e,todos:n,maturityLevelAssessmentData:l,actionPlanData:f,latestTodos:k,latestQuestionnaireResponse:D,cyberScore:h,scorecard:m,ready:L,snapshotCreate:S,create:Q}};u.components=Object.assign({BackButton:F,LoadingSpinner:U,GaugeChartDisplay:z,RefreshSvg:A,BarChart:O,ScorecardSnapshotInput:N,FormButton:T},u.components);var Y=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("section",{staticClass:"flex flex-col space-y-10"},[e("div",{staticClass:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-4"},[e("BackButton"),e("div",{staticClass:"flex flex-col -space-y-1"},[e("BaseTypography",{staticClass:"uppercase text-gray-500",attrs:{variant:"overline"}},[t._v(" WhiteHawk ")]),e("BaseTypography",{attrs:{variant:"h5",component:"h2"}},[t._v(" Snapshot Scorecard ")])],1)],1),t.ready?e("div",[e("div",{staticClass:"flex flex-col space-y-10 2xl:grid 2xl:grid-cols-3 2xl:gap-10 2xl:space-y-0"},[t.cyberScore?e("fieldset",{staticClass:"space-y-2"},[e("legend",[e("BaseTypography",{staticClass:"text-prime-navy",attrs:{variant:"h6",component:"h3"}},[t._v(" Cyber Risk Indicator ")])],1),e("div",{staticClass:"flex-1 lg:flex"},[e("GaugeChartDisplay",{staticClass:"mx-0",attrs:{value:t.cyberScore},scopedSlots:t._u([{key:"button",fn:function(){return[e("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{type:"button"},on:{click:t.latestQuestionnaireResponse}},[e("RefreshSvg",{staticClass:"-ml-1 w-5"}),e("span",[t._v("Update")])],1)]},proxy:!0}],null,!1,1877849566)})],1)]):t._e(),t.todos?e("fieldset",{staticClass:"space-y-2 2xl:col-span-2"},[e("legend",[e("BaseTypography",{staticClass:"text-prime-navy",attrs:{variant:"h6",component:"h3"}},[t._v(" Cyber Maturity Roadmap ")])],1),e("BaseSimpleCard",{staticClass:"flex flex-col space-y-4 p-4 sm:py-5 sm:px-6"},[e("div",{staticClass:"space-y-6 lg:grid lg:grid-cols-2 lg:gap-6 lg:space-y-0"},[e("div",{staticClass:"h-72 w-60 xs:w-auto 2xl:max-h-[15rem]"},[t.maturityLevelAssessmentData?e("BarChart",{attrs:{value:t.maturityLevelAssessmentData,options:{maintainAspectRatio:!1,devicePixelRatio:1}}}):t._e()],1),e("div",{staticClass:"h-72 w-60 xs:w-auto 2xl:max-h-[15rem]"},[t.actionPlanData?e("BarChart",{attrs:{value:t.actionPlanData,options:{maintainAspectRatio:!1,devicePixelRatio:1}}}):t._e()],1)]),e("div",{staticClass:"md:inline-flex"},[e("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{type:"button"},on:{click:t.latestTodos}},[e("RefreshSvg",{staticClass:"-ml-1 w-5"}),e("span",[t._v("Update")])],1)],1)])],1):t._e()]),e("form",{staticClass:"flex flex-col space-y-10",on:{submit:function(i){return i.preventDefault(),t.create.apply(null,arguments)}}},[e("ScorecardSnapshotInput",{attrs:{id:t.id},model:{value:t.scorecard,callback:function(i){t.scorecard=i},expression:"scorecard"}}),e("FormButton",{attrs:{action:"create","is-valid-form":!t.snapshotCreate.isLoading.value}})],1)]):e("LoadingSpinner")],1)},Z=[];const w={};var ee=q(u,Y,Z,!1,te,null,null,null);function te(t){for(let r in w)this[r]=w[r]}const Re=function(){return ee.exports}();export{Re as default};
