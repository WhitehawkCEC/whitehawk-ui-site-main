import{c as g,aK as T,aS as y,n as h,an as $,c5 as b,aF as A,r as m,c6 as C}from"./index.eb352f97.js";import{B as M}from"./BasicConfirmModal.cb2cf23f.js";import{A as k,T as P}from"./AppTanStackTable.2853a1f1.js";import{I as w}from"./IsoDateTimeDisplay.67fab97a.js";import{c as F}from"./createOnChangeFn.41be0cad.js";import{u as q}from"./createSimpleTable.581e9907.js";import"./BasicModal.00165be1.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.8b04df52.js";import"./chevron-up.736f4142.js";const d={};d.props={value:{key:"value",required:!0,type:Array}};d.setup=(e,s)=>{const t=e,r=s.emit,c=g(()=>t.value),l=T(),n=F(),p=[n.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),n.accessor("bundleSource",{header:()=>"Bundle Source",enableColumnFilter:!1}),n.accessor(a=>{var o;return(o=a.meta)==null?void 0:o.updatedAt},{id:"updatedAt",header:()=>"Last Updated",cell:a=>y(w,{props:{value:a.getValue(),format:"date"}}),enableColumnFilter:!1}),n.display({id:"actions",header:"Actions",cell:({row:a})=>y(P,{props:{actions:[{id:"edit",action(){var o;l.push(`/admin/bundles/sets/${(o=a.original.id)==null?void 0:o.value}`)}},{id:"delete",action(){a.original&&r("delete",a.original)}}]}})})];return{instance:q(c,p)}};d.components=Object.assign({AppTanStackTable:k},d.components);var I=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},Q=[];const S={};var V=h(d,I,Q,!1,j,null,null,null);function j(e){for(let s in S)this[s]=S[s]}const D=function(){return V.exports}(),f={};f.setup=(e,s)=>{const t=b.list(),r=b.delete(),c=A(),l=m(),n=m(),p=m("Doing so will affect the following questionnaires:");function _(u){var i;n.value=u,l.value=(i=u.id)==null?void 0:i.value,o.value=!0}const a=g(()=>{var u,i;return(i=(u=C.get(l==null?void 0:l.value).data)==null?void 0:u.value)==null?void 0:i.questionnairePreference}),o=m(!1);async function x(){if(n.value)await r.mutateAsync(n.value),v(),c.success(`Bundle Set ${n.value.name} successfully deleted`);else throw new Error("Invalid request.")}function v(){o.value=!1}return{bundlesQuery:t,selected:n,message:p,setPayload:_,affectedItemsGet:a,isModalVisible:o,deleteBundleSet:x,closeModal:v}};f.components=Object.assign({PlusSvg:$,BundleSetsTable:D,BasicConfirmModal:M},f.components);var E=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Bundle Sets")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"/admin/bundles/sets/new"}},[t("PlusSvg",{staticClass:"w-5"}),t("span",[e._v("Bundle Set")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("BaseVueQuery",{attrs:{query:e.bundlesQuery},scopedSlots:e._u([{key:"success",fn:function(r){var c=r.data;return[t("BundleSetsTable",{attrs:{value:c},on:{delete:e.setPayload}})]}}])})]},proxy:!0}])}),e.isModalVisible&&e.selected?t("BasicConfirmModal",{attrs:{name:e.selected.name,message:e.message,type:"Preference Questionnaires","items-affected":e.affectedItemsGet},on:{delete:e.deleteBundleSet,close:e.closeModal}}):e._e()],1)},L=[];const B={};var R=h(f,E,L,!1,G,null,null,null);function G(e){for(let s in B)this[s]=B[s]}const Z=function(){return R.exports}();export{Z as default};
