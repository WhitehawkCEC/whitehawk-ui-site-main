import{F as I}from"./folder-arrow-down.817acc4a.js";import{dx as b,d as u,aS as k,n as x,bs as B,c7 as f,b as S,dv as $,aK as C,aP as F,aQ as N}from"./index.daf4a3c8.js";import{A as T,T as A}from"./AppTanStackTable.f9958620.js";import{c as M}from"./createOnChangeFn.f055bbd4.js";import{u as E}from"./createSimpleTable.e4052b1d.js";import{d as w}from"./FormValidation.a5e2f641.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.171006fa.js";import"./chevron-up.736f4142.js";function R(e){switch(e){case b.Status.SUCCESS:return"Success";case b.Status.FAILURE:return"Failure";default:return"NA"}}const n={};n.props={id:{key:"id",required:!0,type:String},subId:{key:"subId",required:!0,type:String},scorecardsMeta:{key:"scorecardsMeta",required:!0,type:Array}};n.setup=(e,a)=>{const t=e,r=u(()=>t.id),o=u(()=>t.subId),i=u(()=>t.scorecardsMeta),s=M(),p=[s.accessor("supplierId",{header:()=>"Supplier ID",enableColumnFilter:!1}),s.accessor("supplierName",{header:()=>"Supplier Name",enableColumnFilter:!1}),s.accessor("status",{header:()=>"Scorecard State",cell:c=>R(c.getValue()),enableColumnFilter:!1}),s.display({id:"actions",header:"Actions",cell:({row:c})=>k(A,{props:{actions:[{id:"edit",to:`/admin/companies/${r.value}/subscriptions/${o.value}/integrations/2/scorecards/in-depth/${c.original.scorecardId}`}]}})})];return{instance:E(i,p)}};n.components=Object.assign({AppTanStackTable:T},n.components);var V=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("AppTanStackTable",{attrs:{table:e.instance}})},q=[];const h={};var j=x(n,V,q,!1,L,null,null,null);function L(e){for(let a in h)this[a]=h[a]}const P=function(){return j.exports}(),d={};d.setup=(e,a)=>{const t=f("id"),r=f("subscriptionId"),o=f("batchId"),i=S(""),s=S(!1),p=$.read(t,o),m=u(()=>{var l;return((l=p.data.value)==null?void 0:l.scorecardMeta)||[]}),c=C();async function g(){const l=m.value.map(_=>{var v;return{scorecardId:(v=_.scorecardId)==null?void 0:v.value,supplierName:_.supplierName}});s.value=!0;try{await F.post(`${N}/companies/${t.value}/batch/scorecards`,{batchId:o.value,fileName:`${i.value}`,supplierScorecardInfos:l})}finally{s.value=!1}c.push(`/admin/companies/${t.value}/subscriptions/${r.value}/integrations/2/scorecards/zip-files`)}return{checkZipFileExtension:w,id:t,subscriptionId:r,fileName:i,scorecardsMeta:m,convert:g}};d.components=Object.assign({BackButton:B,FolderDownloadSvg:I,BatchScorecardsStatusV3Table:P},d.components);var D=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.scorecardsMeta?t("BaseTablePageLayout",{scopedSlots:e._u([{key:"backButton",fn:function(){return[t("BackButton")]},proxy:!0},{key:"overline",fn:function(){return[e._v("Black Kite")]},proxy:!0},{key:"title",fn:function(){return[e._v("Batch Scorecard")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-2",attrs:{disabled:!e.fileName},on:{click:e.convert}},[t("FolderDownloadSvg",{staticClass:"-ml-1 w-5"}),t("span",[e._v("ZIP Batch")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("div",{staticClass:"space-y-6"},[t("BatchScorecardsStatusV3Table",{attrs:{id:e.id,"sub-id":e.subscriptionId,"scorecards-meta":e.scorecardsMeta}}),t("BaseSimpleCard",[t("BaseLabel",{staticClass:"flex flex-col p-4 lg:grid lg:grid-cols-3 lg:items-center"},[t("span",{staticClass:"after:content-['*']` after:text-red-700"},[e._v(" File Name: ")]),t("div",{staticClass:"flex flex-col lg:col-span-2"},[t("BaseInputWithValidation",{attrs:{type:"text",required:"","aria-required":"true",validator:e.checkZipFileExtension},model:{value:e.fileName,callback:function(r){e.fileName=r},expression:"fileName"}})],1)])],1)],1)]},proxy:!0}],null,!1,3056871286)}):e._e()},U=[];const y={};var Z=x(d,D,U,!1,z,null,null,null);function z(e){for(let a in y)this[a]=y[a]}const ee=function(){return Z.exports}();export{ee as default};
