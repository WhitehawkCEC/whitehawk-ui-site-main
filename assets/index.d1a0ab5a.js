import{F as $}from"./FormButton.b4dbac98.js";import{b0 as O,ay as T,c as o,n as d,cK as F,cU as L,cL as N,aF as h,c5 as g,aZ as A,aA as D,d9 as w,cd as K,aI as P,c7 as V,b$ as E}from"./index.a947e411.js";import{s as G}from"./index.a4269f77.js";import{S as Q}from"./SubscriptionPartialUpdateRequestInput.395314f7.js";import{D as z}from"./DateRangeInput.ec262a8a.js";import{u as k}from"./useAccountSubscriptionValidity.b5674776.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./SlugInput.73635cdf.js";import"./FormValidation.fcce8505.js";import"./index.2a176fda.js";import"./DynamicForm.d5f1a153.js";import"./index.07915586.js";import"./index.1865f824.js";import"./index.7a54c9f6.js";import"./index.87e44ac4.js";import"./index.c16e046c.js";import"./index.6ab913c5.js";const _={};_.props={value:{key:"value",required:!1,type:null},entities:{key:"entities",required:!0,type:Array}};_.setup=(t,e)=>{const s=t,n=e.emit,c=T(s,n),r=o(()=>s.entities.map(({id:i,name:p})=>({text:p,value:i}))),a=o({get(){var i;return(i=s.value)==null?void 0:i.mappedEntityId},set(i){i&&(c.value.mappedEntityId=i)}});return{entityOptions:r,mappedEntityId:a}};_.components=Object.assign({SimpleSelect:O},_.components);var W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("BaseLabel",{staticClass:"space-y-1 p-4"},[s("span",[t._v("Mapped Entity:")]),s("SimpleSelect",{staticClass:"w-full",attrs:{options:t.entityOptions},model:{value:t.mappedEntityId,callback:function(n){t.mappedEntityId=n},expression:"mappedEntityId"}})],1)},Z=[];const B={};var H=d(_,W,Z,!1,J,null,null,null);function J(t){for(let e in B)this[e]=B[e]}const X=function(){return H.exports}(),v={};v.props={accountId:{key:"accountId",required:!0,type:String}};v.setup=(t,e)=>{const s=t,n=o(()=>s.accountId),c=F.get(n),r=G(o(()=>c.data.value||L.create())),a=N.list(n),i=o(()=>a.data.value||[]),p=h(),l=F.set(n);async function m(){await l.mutateAsync(r.value),p.success("Successfully updated config.")}return{config:r,entities:i,submit:m}};v.components=Object.assign({SubscriptionMappedEntityInput:X,FormButton:$},v.components);var Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),t.submit.apply(null,arguments)}}},[s("SubscriptionMappedEntityInput",{attrs:{entities:t.entities},model:{value:t.config,callback:function(n){t.config=n},expression:"config"}}),s("FormButton",{attrs:{action:"update"}})],1)},tt=[];const R={};var st=d(v,Y,tt,!1,et,null,null,null);function et(t){for(let e in R)this[e]=R[e]}const nt=function(){return st.exports}(),f={};f.props={accountId:{key:"accountId",required:!0,type:String},subId:{key:"subId",required:!0,type:String}};f.setup=(t,e)=>{const s=t,n=o(()=>s.accountId),c=o(()=>s.subId),r=g.read(n,c),a=A();D(()=>r.data.value,u=>{u&&(a.value={accountId:u.accountId,subscriptionId:u.subscriptionId,name:u.name})},{immediate:!0});const i=o(()=>{var x,C;const u=a.value;return Boolean(u&&((x=u.subscriptionId)==null?void 0:x.value)&&u.name&&((C=u.accountId)==null?void 0:C.value))}),p=w(),l=h(),m=g.update(n,c);async function I(){if(a.value){const{response:u}=await m.mutateAsync(a.value);u?(l.success("Successfully updated subscription."),p.push(`/admin/companies/${n.value}/subscriptions`)):l.error("Something went wrong.")}}return{update:a,isValid:i,updateSubscription:I}};f.components=Object.assign({SubscriptionPartialUpdateRequestInput:Q,FormButton:$},f.components);var it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),t.updateSubscription.apply(null,arguments)}}},[t.update?s("SubscriptionPartialUpdateRequestInput",{model:{value:t.update,callback:function(n){t.update=n},expression:"update"}}):t._e(),s("FormButton",{attrs:{action:"update","is-valid-form":t.isValid}})],1)},at=[];const U={};var ot=d(f,it,at,!1,ct,null,null,null);function ct(t){for(let e in U)this[e]=U[e]}const rt=function(){return ot.exports}(),y={};y.props={id:{key:"id",required:!0,type:String},subscriptionId:{key:"subscriptionId",required:!0,type:String}};y.setup=(t,e)=>{const s=t,n=o(()=>s.id),c=o(()=>s.subscriptionId),r=A(K.DateRange.create()),a=k.get(n,c);D(()=>a.data.value,I=>{I&&(r.value=I)},{immediate:!0});const i=P(),p=h(),l=k.update(n,c);async function m(){await l.mutateAsync({value:r.value}),p.success("Successfully updated subscription validity."),i.push(`/admin/companies/${n.value}/subscriptions`)}return{validity:r,submit:m}};y.components=Object.assign({DateRangeInput:z,FormButton:$},y.components);var ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),t.submit.apply(null,arguments)}}},[s("div",{staticClass:"p-4"},[s("BaseLabel",{staticClass:"grid grid-cols-1 gap-1 sm:grid-cols-3 sm:items-center sm:gap-4"},[s("span",[t._v("Validity")]),s("DateRangeInput",{staticClass:"sm:col-span-2",model:{value:t.validity,callback:function(n){t.validity=n},expression:"validity"}})],1)],1),s("FormButton",{attrs:{action:"update"}})],1)},pt=[];const j={};var lt=d(y,ut,pt,!1,dt,null,null,null);function dt(t){for(let e in j)this[e]=j[e]}const mt=function(){return lt.exports}(),b={};b.props={accountId:{key:"accountId",required:!0,type:String},subId:{key:"subId",required:!0,type:String}};b.setup=(t,e)=>{const s=t,n=o(()=>s.accountId),c=o(()=>s.subId),r=g.read(n,c),a=o(()=>{var i;return(i=r.data.value)==null?void 0:i.type});return{SubscriptionType:V.SubscriptionType,id:n,subscriptionId:c,subscriptionType:a}};b.components=Object.assign({UpdateSubscriptionNameForm:rt,UpdateSubscriptionValidityForm:mt,SubscriptionMappedEntityForm:nt},b.components);var _t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"space-y-6"},[s("BaseSimpleCard",{staticClass:"divide-y"},[s("BaseTypography",{staticClass:"p-4",attrs:{component:"h4",variant:"subtitle3"}},[t._v(" Update Subscription Name ")]),s("UpdateSubscriptionNameForm",{attrs:{"account-id":t.id,"sub-id":t.subscriptionId}})],1),s("BaseSimpleCard",{staticClass:"divide-y"},[s("BaseTypography",{staticClass:"p-4",attrs:{component:"h4",variant:"subtitle3"}},[t._v(" Update Subscription Validity ")]),s("UpdateSubscriptionValidityForm",{attrs:{id:t.id,"subscription-id":t.subscriptionId}})],1),t.subscriptionType===t.SubscriptionType.INDIVIDUAL?s("BaseSimpleCard",{staticClass:"divide-y"},[s("BaseTypography",{staticClass:"p-4",attrs:{component:"h4",variant:"subtitle3"}},[t._v(" Mapped Entity ")]),s("SubscriptionMappedEntityForm",{attrs:{"account-id":t.id}})],1):t._e()],1)},vt=[];const M={};var ft=d(b,_t,vt,!1,yt,null,null,null);function yt(t){for(let e in M)this[e]=M[e]}const bt=function(){return ft.exports}(),S={};S.setup=(t,e)=>{const s=E("id"),n=E("subscriptionId");return{id:s,subscriptionId:n}};S.components=Object.assign({UpdateSubscriptionForm:bt},S.components);var It=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("UpdateSubscriptionForm",{attrs:{"account-id":t.id,"sub-id":t.subscriptionId}})},St=[];const q={};var gt=d(S,It,St,!1,$t,null,null,null);function $t(t){for(let e in q)this[e]=q[e]}const wt=function(){return gt.exports}();export{wt as default};
