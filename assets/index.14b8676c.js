import{d as l,aF as F,aS as u,br as d,n as v,bs as A,an as T,c8 as _}from"./index.f953b30f.js";import{A as q,T as V}from"./AppTanStackTable.6b49a29b.js";import{c as R}from"./createOnChangeFn.9b019266.js";import{u as g}from"./useScheduledBatches.0020ad93.js";import{u as j}from"./createSimpleTable.97b0a177.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.c401c0de.js";import"./chevron-up.736f4142.js";const i={};i.props={id:{key:"id",required:!0,type:String},subId:{key:"subId",required:!0,type:String},batches:{key:"batches",required:!0,type:Array}};i.setup=(e,n)=>{const a=e,r=l(()=>a.id),o=l(()=>a.subId),S=l(()=>{var t;return(t=a.batches)==null?void 0:t.map(f=>{const{id:$,type:I,company:x,frequency:B,range:b,batchResultId:D,meta:c}=f;return{id:$,type:I,company:x.name,batchResultId:D,frequency:B,quarter:f.quarter,startDate:b.start,endDate:b.end,createdDate:c==null?void 0:c.createdAt,updatedDate:c==null?void 0:c.updatedAt}})}),m=F(),k=g.delete(r),s=R(),C=[s.accessor("company",{header:()=>"Company",enableColumnFilter:!1}),s.accessor("type",{header:()=>"Report Type",enableColumnFilter:!1}),s.accessor("startDate",{header:()=>"Start Date",cell:t=>{if(t.getValue())return u(d,{props:{value:t.getValue(),format:"date"}})},enableColumnFilter:!1}),s.accessor("endDate",{header:()=>"End Date",cell:t=>{if(t.getValue())return u(d,{props:{value:t.getValue(),format:"date"}})},enableColumnFilter:!1}),s.accessor("frequency",{header:()=>"Frequency",enableColumnFilter:!1}),s.accessor("quarter",{header:()=>"Quarter",enableColumnFilter:!1}),s.accessor("createdDate",{header:()=>"Created At",cell:t=>{if(t.getValue())return u(d,{props:{value:t.getValue(),format:"date"}})},enableColumnFilter:!1}),s.accessor("updatedDate",{header:()=>"Last Updated",cell:t=>{if(t.getValue())return u(d,{props:{value:t.getValue(),format:"date"}})},enableColumnFilter:!1}),s.display({id:"actions",header:"Actions",cell:({row:t})=>u(V,{props:{actions:[{id:"view",to:`/admin/companies/${encodeURIComponent(r.value)}/subscriptions/${o.value}/integrations/2/scorecards/scheduler/${t.original.batchResultId}/status`,isDisabled:l(()=>t.original.batchResultId===null)},{id:"edit",to:`/admin/companies/${encodeURIComponent(r.value)}/subscriptions/${o.value}/integrations/2/scorecards/scheduler/${t.original.id}`},{id:"archive",async action(){t.original&&(await k.mutateAsync(t.original.id),m.success("Archived batch successfully")),m.error("Something went wrong")}}]}})})];return{instance:j(S,C)}};i.components=Object.assign({AppTanStackTable:q},i.components);var w=function(){var e=this,n=e.$createElement,a=e._self._c||n;return a("AppTanStackTable",{attrs:{table:e.instance}})},E=[];const h={};var P=v(i,w,E,!1,U,null,null,null);function U(e){for(let n in h)this[n]=h[n]}const H=function(){return P.exports}(),p={};p.setup=(e,n)=>{const a=_("id"),r=_("subscriptionId"),o=g.list(a);return{id:a,subscriptionId:r,batches:o}};p.components=Object.assign({BackButton:A,PlusSvg:T,BatchScheduleTable:H},p.components);var L=function(){var e=this,n=e.$createElement,a=e._self._c||n;return a("BaseTablePageLayout",{scopedSlots:e._u([{key:"backButton",fn:function(){return[a("BackButton",{attrs:{link:`/admin/companies/${e.id}/subscriptions/${e.subscriptionId}/integrations`}})]},proxy:!0},{key:"overline",fn:function(){return[e._v("Black Kite")]},proxy:!0},{key:"title",fn:function(){return[e._v("Scheduled Batches")]},proxy:!0},{key:"button",fn:function(){return[a("BaseButton",{staticClass:"space-x-2",attrs:{to:"new",append:""}},[a("PlusSvg",{staticClass:"-ml-1 w-5"}),a("span",[e._v("New Schedule")])],1)]},proxy:!0},{key:"table",fn:function(){return[a("BaseVueQuery",{attrs:{query:e.batches},scopedSlots:e._u([{key:"success",fn:function(r){var o=r.data;return[a("BatchScheduleTable",{attrs:{id:e.id,"sub-id":e.subscriptionId,batches:o}})]}}])})]},proxy:!0}])})},M=[];const y={};var N=v(p,L,M,!1,O,null,null,null);function O(e){for(let n in y)this[n]=y[n]}const ee=function(){return N.exports}();export{ee as default};
