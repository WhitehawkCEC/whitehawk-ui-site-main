import{c as a,n as p,cy as P,bo as N,b as D,r as F,L,c8 as A,c1 as H,b$ as W}from"./index.f77c6cad.js";import{a as z}from"./index.ebbce841.js";import{T as G}from"./ToolTip.dc364fd7.js";import{u as C}from"./active-questionnaire.f3d912a9.js";import"./index.396f7846.js";const b={};b.props={score:{key:"score",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};b.setup=(e,s)=>{const t=e,n=a(()=>200-t.score/t.max*200),r=a(()=>`gradient-${Math.random()}`),o=a(()=>t.score>=740?"#10b981":t.score>=640?"#fde68a":"#ef4444");return{fill:n,gradientId:r,displayColor:o}};var V=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("svg",{attrs:{viewBox:"0 0 90 80",preserveAspectRatio:"none"}},[t("defs",[t("linearGradient",{attrs:{id:`${e.gradientId}`,x1:"15%",y1:"100%",x2:"80%",y2:"100%"}},[t("stop",{attrs:{offset:"0%","stop-color":`${e.displayColor}`}}),t("stop",{attrs:{offset:"100%","stop-color":`${e.displayColor}`}})],1)],1),t("path",{staticClass:"stroke-current text-gray-200 shadow-inner",attrs:{d:"M20,75 a40,40,0,1,1,50,0",fill:"none","stroke-linecap":"round","stroke-width":"3"}}),t("path",{staticClass:"filling transition duration-300",style:`--fill: ${e.fill}`,attrs:{d:"M20,75 a40,40,0,1,1,50,0",fill:"none",stroke:`url(#${e.gradientId})`,"stroke-dasharray":"200","stroke-dashoffset":"200","stroke-linecap":"round","stroke-width":"3"}})])},X=[];const T={};var J=p(b,V,X,!1,K,"62ebebb3",null,null);function K(e){for(let s in T)this[s]=T[s]}const U=function(){return J.exports}(),v={};v.props={score:{key:"score",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};v.setup=(e,s)=>{const t=e;return{percentage:a(()=>z(Math.round(t.score*100/t.max)))}};v.components=Object.assign({QuestionnaireProgressBar:U},v.components);var Y=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"relative flex items-center justify-center p-4"},[t("div",{staticClass:"absolute flex items-center"},[t("BaseTypography",{staticClass:"text-blue-800",attrs:{variant:"h2"}},[e._v(" "+e._s(e.percentage)+" ")])],1),t("div",{staticClass:"relative w-44 sm:w-56"},[t("QuestionnaireProgressBar",{attrs:{score:e.score,max:e.max}})],1)])},Z=[];const k={};var ee=p(v,Y,Z,!1,te,null,null,null);function te(e){for(let s in k)this[s]=k[s]}const I=function(){return ee.exports}(),d={};d.props={score:{key:"score",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};d.setup=(e,s)=>({});d.components=Object.assign({DotsSquare:P,QuestionnaireProgressBarText:I},d.components);var se=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"relative mx-auto flex max-w-xs flex-col items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-blue-100 via-white to-white px-4 py-8 shadow-md sm:max-w-sm sm:rounded-3xl xl:max-w-none xl:p-12"},[t("div",{staticClass:"absolute top-full left-full -translate-y-1/3 -translate-x-1/3 rotate-45 transform xl:-translate-y-1/2"},[t("DotsSquare",{attrs:{color:"blue"}})],1),t("QuestionnaireProgressBarText",{attrs:{score:e.score,max:e.max}})],1)},ne=[];const B={};var re=p(d,se,ne,!1,ae,null,null,null);function ae(e){for(let s in B)this[s]=B[s]}const oe=function(){return re.exports}(),m={};m.props={value:{key:"value",required:!0,type:null}};m.setup=(e,s)=>({});m.components=Object.assign({WaveForm:N,QuestionnaireScoreDisplay:oe},m.components);var ie=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"relative flex flex-col items-center justify-center lg:grid lg:grid-cols-12"},[t("div",{staticClass:"absolute top-36 w-full opacity-25 sm:top-40 lg:hidden"},[t("WaveForm")],1),t("div",{staticClass:"relative -mb-36 lg:col-span-4 lg:col-start-1 lg:row-start-1 lg:mb-0"},[t("div",{staticClass:"px-6 md:px-8 lg:px-4 lg:pl-0"},[t("QuestionnaireScoreDisplay",{attrs:{score:e.value.score,max:e.value.max}})],1)]),t("BaseSimpleCard",{staticClass:"pt-32 lg:col-span-10 lg:col-start-3 lg:row-start-1 lg:h-fit lg:p-0"},[t("div",{staticClass:"grid items-center gap-5 px-6 py-10 sm:p-8 lg:grid-cols-10 lg:col-start-3 lg:gap-0 lg:p-6 text-center lg:text-left"},[t("div",{staticClass:"grid gap-5 lg:col-span-10 lg:col-start-3"},[t("BaseTypography",{staticClass:"text-prime-navy",attrs:{component:"h2",variant:"h5"}},[e._v(" "+e._s(e.value.title)+" ")]),t("BaseTypography",{staticClass:"text-gray-600",attrs:{component:"p",variant:"p1"}},[e._v(" "+e._s(e.value.description)+" ")])],1)])])],1)},ce=[];const Q={};var le=p(m,ie,ce,!1,ue,null,null,null);function ue(e){for(let s in Q)this[s]=Q[s]}const pe=function(){return le.exports}(),f={};f.props={question:{key:"question",required:!0,type:null},index:{key:"index",required:!0,type:Number}};f.setup=(e,s)=>{const t=e,n=a(()=>{var i;return(i=t.question.id)==null?void 0:i.value}),r=C(),o=a(()=>n.value?r.questionScore(n.value):0),l=a(()=>{var _;const i=(_=t.question.answerSet)==null?void 0:_.answers.find(S=>{var h;return((h=S.id)==null?void 0:h.value)===n.value});if(i)return i.value}),c=a(()=>Boolean(o.value||l.value)),u=a(()=>c.value?{type:"info",text:l.value}:{type:"warn",text:"This question has not been answered yet."});return{score:o,text:l,toolTipInfo:u}};f.components=Object.assign({ToolTip:G},f.components);var _e=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex items-center justify-between p-4"},[t("div",{staticClass:"flex items-center space-x-4"},[t("BaseLink",{attrs:{"display-type":"primary-prime",to:"#"}},[e._v(" "+e._s(`Question ${e.index+1}`)+" ")]),t("ToolTip",{attrs:{type:e.toolTipInfo.type}},[e._v(" "+e._s(e.toolTipInfo.text)+" ")])],1),t("div",[e.question.questionType!=="TEXTAREA"?t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" "+e._s(`Score: ${e.score}`)+" ")]):t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" "+e._s(`Response: ${e.text}`)+" ")])],1)])},ve=[];const j={};var de=p(f,_e,ve,!1,me,null,null,null);function me(e){for(let s in j)this[s]=j[s]}const fe=function(){return de.exports}(),x={};x.props={section:{key:"section",required:!0,type:null}};x.setup=(e,s)=>{const t=e,n=a(()=>{var u;return(u=t.section.id)==null?void 0:u.value}),r=C(),o=a(()=>n.value&&r.sectionTotal(n.value)||0),l=a(()=>n.value&&r.sectionMax(n.value)||0),c=a(()=>t.section.questions);return{total:o,max:l,questions:c}};x.components=Object.assign({QuestionnaireProgressBarText:I,QuestionOverview:fe},x.components);var xe=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex flex-col divide-y"},[t("QuestionnaireProgressBarText",{attrs:{score:e.total,max:e.max}}),t("ul",{staticClass:"divide-y"},e._l(e.questions,function(n,r){return t("li",{key:r},[t("QuestionOverview",{attrs:{question:n,index:r}})],1)}),0)],1)},ye=[];const R={};var ge=p(x,xe,ye,!1,he,null,null,null);function he(e){for(let s in R)this[s]=R[s]}const $e=function(){return ge.exports}(),y={};y.props={section:{key:"section",required:!0,type:null}};y.setup=(e,s)=>{const t=e,n=F(!1),r=a(()=>{var u;return(u=t.section.id)==null?void 0:u.value}),o=C(),l=a(()=>{if(r.value)return o.sectionTotal(r.value)}),c=a(()=>{if(r.value)return o.sectionMax(r.value)});return{isExpanded:n,total:l,max:c}};y.components=Object.assign({ToggleButton:D,SectionDetails:$e},y.components);var Ce=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex flex-col space-y-2 my-1"},[t("div",{staticClass:"flex flex-col items-start -space-y-1"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"overline"}},[e._v(" "+e._s(e.section.questions.length)+" Questions ")]),t("ToggleButton",{scopedSlots:e._u([{key:"text",fn:function(){return[t("BaseTypography",{staticClass:"text-prime-navy",attrs:{variant:"h6"}},[e._v(" "+e._s(e.section.name)+" ")])]},proxy:!0}]),model:{value:e.isExpanded,callback:function(n){e.isExpanded=n},expression:"isExpanded"}})],1),t("BaseSimpleCard",[t("div",{staticClass:"grid gap-4 grid-cols-2 sm:gap-6 items-center p-4"},[t("div",{staticClass:"col-span-1 flex flex-col items-center"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" Total Score ")]),t("BaseTypography",{staticClass:"text-prime-indigo",attrs:{variant:"h2"}},[e._v(" "+e._s(e.total)+" ")])],1),t("div",{staticClass:"col-span-1 flex flex-col items-center"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" Max Score ")]),t("BaseTypography",{staticClass:"text-prime-indigo",attrs:{variant:"h2"}},[e._v(" "+e._s(e.max)+" ")])],1)]),e.isExpanded?t("SectionDetails",{attrs:{section:e.section}}):e._e()],1)],1)},be=[];const E={};var Se=p(y,Ce,be,!1,qe,null,null,null);function qe(e){for(let s in E)this[s]=E[s]}const we=function(){return Se.exports}(),g={};g.props={value:{key:"value",required:!0,type:null}};g.setup=(e,s)=>{const t=e,n=a(()=>t.value),r=C(),o=a(()=>({title:"Total Score / Overview",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Veritatis saepe ullam laborum accusantium itaque, enim commodinumquam incidunt, id autem pariatur sit ut qui libero eos amet molestias inventore ab.",score:r.riskScoreTotal,max:r.riskScoreMax})),l=a(()=>{var i;return(i=n.value)==null?void 0:i.sections}),c=F(!1);function u(i){const _=i.currentTarget,h=i.srcElement.offsetHeight,q=_.scrollTop,w=_.scrollHeight-q;if(w===h){c.value=!0;return}else if(w===q){c.value=!1;return}c.value=!1}return{overview:o,sections:l,atBottom:c,handleScroll:u}};g.components=Object.assign({QuestionnaireSummaryOverview:pe,SectionOverview:we},g.components);var Te=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",{staticClass:"space-y-8"},[t("QuestionnaireSummaryOverview",{attrs:{value:e.overview}}),t("div",{staticClass:"grid gap-4 h-120 space-y-8 overflow-y-scroll",class:[{"fade-bottom":!e.atBottom}],on:{scroll:e.handleScroll}},e._l(e.sections,function(n,r){return t("div",{key:r,staticClass:"flex items-center"},[t("SectionOverview",{attrs:{section:n}})],1)}),0)],1)},ke=[];const M={};var Be=p(g,Te,ke,!1,Qe,"c90878e6",null,null);function Qe(e){for(let s in M)this[s]=M[s]}const je=function(){return Be.exports}(),$={};$.setup=(e,s)=>{const t=A("questionnaireId"),n=H.read(t),r=a(()=>n.data.value||W.CustomQuestionnaire.create());return{questionnaireRead:n,questionnaire:r}};$.components=Object.assign({LoadingSpinner:L,QuestionnaireReview:je},$.components);var Re=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[e.questionnaireRead.isLoading.value?t("LoadingSpinner"):t("div",{staticClass:"space-y-6"},[t("BaseTypography",{attrs:{variant:"h5",component:"h2"}},[e._v(" Review Questionnaire ")]),t("QuestionnaireReview",{attrs:{value:e.questionnaire}})],1)],1)},Ee=[];const O={};var Me=p($,Re,Ee,!1,Oe,null,null,null);function Oe(e){for(let s in O)this[s]=O[s]}const Ae=function(){return Me.exports}();export{Ae as default};
