import{F as b}from"./FormButton.560791f8.js";import{E as B}from"./arrow-top-right-on-square.b063d2af.js";import{aq as K,br as S,d as o,am as I,aC as $,n as d,ax as E,c7 as A,co as k,cX as w,cY as T,aF as D}from"./index.b52a2fa9.js";import{A as L}from"./ApiKeyInput.c3d2dbe4.js";import{s as j}from"./index.ed991bc1.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./ApiKeyValidation.3430d9c7.js";import"./ApiKeyDescriptionDisplay.cc501365.js";var M=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("svg",e._g({attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},e.$listeners),[t("path",{attrs:{"fill-rule":"evenodd",d:"m5.965 4.904 9.131 9.131a6.5 6.5 0 0 0-9.131-9.131zm8.07 10.192L4.904 5.965a6.5 6.5 0 0 0 9.131 9.131zM4.343 4.343a8 8 0 1 1 11.314 11.314A8 8 0 0 1 4.343 4.343z","clip-rule":"evenodd"}})])};const F={render:M},l={};l.props={accessToken:{key:"accessToken",required:!1,type:String}};l.setup=(e,s)=>{const t=e,n=o(()=>I.get(`${$}https://app.blackkitetech.com/api/v2/status`,{headers:{authorization:`Bearer ${t.accessToken}`}}));function c(i){return new Date(i).toISOString()}return{validityCheck:n,formatDate:c}};l.components=Object.assign({CheckSvg:K,DateIsoStringDisplay:S,NoSvg:F},l.components);var O=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.accessToken!==void 0?t("BasePromise",{attrs:{promise:e.validityCheck},scopedSlots:e._u([{key:"success",fn:function(n){var c=n.result.data.ExpirationDateOfClientCredential;return[t("span",{staticClass:"inline-flex items-center space-x-1"},[t("CheckSvg",{staticClass:"-ml-1 h-auto w-4 shrink-0 text-green-600"}),c?t("BaseTypography",{staticClass:"text-green-600",attrs:{variant:"p3"}},[e._v(" Expires At: "),t("DateIsoStringDisplay",{attrs:{value:e.formatDate(c),format:"date"}})],1):e._e()],1)]}},{key:"error",fn:function(){return[t("span",{staticClass:"inline-flex items-center space-x-1"},[t("NoSvg",{staticClass:"-ml-1 h-auto w-4 shrink-0 text-red-600"}),t("BaseTypography",{staticClass:"text-red-600",attrs:{variant:"p3"}},[e._v(" Invalid Credentials ")])],1)]},proxy:!0}],null,!1,1295110825)}):e._e()},R=[];const g={};var q=d(l,O,R,!1,z,null,null,null);function z(e){for(let s in g)this[s]=g[s]}const P=function(){return q.exports}(),p={};p.props={id:{key:"id",required:!0,type:String},secret:{key:"secret",required:!0,type:String}};p.setup=(e,s)=>{const t=e;return{accessToken:o(()=>I.post(`${$}https://app.blackkitetech.com/api/v2/oauth/token`,{grant_type:"client_credentials",client_id:t.id,client_secret:t.secret}))}};p.components=Object.assign({ApiKeyValidationV2:P},p.components);var N=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("BasePromise",{attrs:{promise:e.accessToken},scopedSlots:e._u([{key:"success",fn:function(n){var c=n.result.data.access_token;return[t("ApiKeyValidationV2",{attrs:{"access-token":c}})]}}])})},U=[];const h={};var G=d(p,N,U,!1,W,null,null,null);function W(e){for(let s in h)this[s]=h[s]}const X=function(){return G.exports}(),u={};u.props={value:{key:"value",required:!1,type:null},ecosystems:{key:"ecosystems",required:!0,type:Array}};u.setup=(e,s)=>{const t=e,n=s.emit,c=E(t,n),i=o({get(){var y;const a=(y=t.value)==null?void 0:y.apiKeyMaybe;if((a==null?void 0:a.oneofKind)==="apiKey")return a.apiKey},set(a){a?c.value.apiKeyMaybe={oneofKind:"apiKey",apiKey:a}:c.value.apiKeyMaybe={oneofKind:void 0}}}),r=o({get(){var a;return(a=t.value)==null?void 0:a.mappedEcosystemId},set(a){a&&(c.value.mappedEcosystemId=a)}}),_=o(()=>r.value?`https://app.blackkitetech.com/ecosystem/companies?ecoId=${encodeURIComponent(r.value)}`:"https://app.blackkitetech.com/ecosystem/companies#ecosystemListTab"),f=o({get(){var a;return(a=t.value)==null?void 0:a.clientId},set(a){a&&(c.value.clientId=a)}}),v=o({get(){var a;return(a=t.value)==null?void 0:a.secret},set(a){a&&(c.value.secret=a)}});return{apiKey:i,mappedEcosystemId:r,mappedEcosystemLink:_,clientId:f,secret:v}};u.components=Object.assign({ApiKeyInput:L,ExternalLinkSvg:B,ApiAccessToken:X},u.components);var Y=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"space-y-8"},[t("BaseLabel",{staticClass:"space-y-1"},[t("span",[e._v("API Key:")]),t("ApiKeyInput",{model:{value:e.apiKey,callback:function(n){e.apiKey=n},expression:"apiKey"}})],1),t("BaseLabel",{staticClass:"flex flex-col space-y-1"},[t("span",[e._v("Mapped Ecosystem:")]),t("BaseExternalLink",{staticClass:"space-x-2",attrs:{"display-type":"primary",href:e.mappedEcosystemLink}},[t("ExternalLinkSvg",{staticClass:"h-auto w-5 shrink-0"}),t("span",[e._v("Check Mapped Ecosystem")])],1),t("BaseInput",{staticClass:"w-full",model:{value:e.mappedEcosystemId,callback:function(n){e.mappedEcosystemId=e._n(n)},expression:"mappedEcosystemId"}})],1),t("BaseLabel",{staticClass:"space-y-1"},[t("div",{staticClass:"flex flex-col space-y-1 sm:flex-row sm:items-center sm:justify-between sm:space-y-0"},[t("span",[e._v("Client ID:")]),e.clientId&&e.secret?t("ApiAccessToken",{attrs:{id:e.clientId,secret:e.secret}}):e._e()],1),t("BaseInput",{staticClass:"w-full",model:{value:e.clientId,callback:function(n){e.clientId=n},expression:"clientId"}})],1),t("BaseLabel",{staticClass:"space-y-1"},[t("span",[e._v("Client Secret:")]),t("BaseInput",{staticClass:"w-full",model:{value:e.secret,callback:function(n){e.secret=n},expression:"secret"}})],1)],1)},H=[];const x={};var J=d(u,Y,H,!1,Q,null,null,null);function Q(e){for(let s in x)this[s]=x[s]}const V=function(){return J.exports}(),m={};m.setup=(e,s)=>{const t=A("id"),n=k.get(t),c=j(o(()=>n.data.value||w.create())),i=T.list(t),r=o(()=>i.data.value||[]),_=D(),f=k.set(t);async function v(){await f.mutateAsync(c.value),_.success("Successfully updated config.")}return{config:c,ecosystems:r,submit:v}};m.components=Object.assign({BlackKiteConfigInput:V,FormButton:b},m.components);var Z=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"block p-4",attrs:{variant:"subtitle3"}},[e._v(" Configure Black Kite ")]),t("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),e.submit.apply(null,arguments)}}},[t("div",{staticClass:"p-4"},[t("BlackKiteConfigInput",{attrs:{ecosystems:e.ecosystems},model:{value:e.config,callback:function(n){e.config=n},expression:"config"}})],1),t("FormButton",{attrs:{action:"save"}})],1)],1)},ee=[];const C={};var te=d(m,Z,ee,!1,se,null,null,null);function se(e){for(let s in C)this[s]=C[s]}const me=function(){return te.exports}();export{me as default};
