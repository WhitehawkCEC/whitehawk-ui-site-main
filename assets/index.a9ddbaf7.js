import{aT as $,aD as C,ag as Q,aP as y,aQ as g,br as j,aO as q,n as h,c as F,aI as E,aF as R,aS as m,bS as O,ao as L}from"./index.ad7eb698.js";import{A as V,R as z}from"./RowSelectionInput.44661c78.js";import{A as H,T as N}from"./AppTanStackTable.f3a8da6b.js";import{c as U}from"./createOnChangeFn.0d66198a.js";import{u as X}from"./useProducts.ed8d7bce.js";import{u as Y}from"./createSimpleTable.008ede08.js";import{u as w}from"./useManufacturers.379507aa.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.912b9dfa.js";import"./chevron-up.736f4142.js";const A={create(){const e=$();return C(a=>y.post(`${g}/featured-manufacturers`,a).then(s=>s.data),{onSuccess(){e.invalidateQueries(["manufacturers"],{exact:!0})}})},delete(){const e=$();return C(a=>y.delete(`${g}/featured-manufacturers/${a}`).then(s=>s.data),{onSuccess(){e.invalidateQueries(["manufacturers"],{exact:!0})}})},list(){return Q(["featured-manufacturers"],()=>y.get(`${g}/featured-manufacturers`).then(e=>e.data))}},i={};i.props={value:{key:"value",required:!1,type:String},remove:{key:"remove",required:!0,type:Function}};i.setup=(e,a)=>({});i.components=Object.assign({DateIsoStringDisplay:j,XSvg:q},i.components);var G=function(){var e=this,a=e.$createElement,s=e._self._c||a;return e.value?s("div",{staticClass:"flex items-center space-x-1"},[s("DateIsoStringDisplay",{staticClass:"inline-flex items-center rounded bg-indigo-100 px-2 py-0.5 text-xs font-medium uppercase leading-4 tracking-widest text-indigo-800",attrs:{value:e.value,format:"date"}}),s("BaseIcon",{attrs:{color:"danger",size:"small",action:"secondary"},on:{click:e.remove}},[s("XSvg",{staticClass:"w-3"})],1)],1):e._e()},J=[];const M={};var K=h(i,G,J,!1,W,null,null,null);function W(e){for(let a in M)this[a]=M[a]}const Z=function(){return K.exports}(),l={};l.props={manufacturers:{key:"manufacturers",required:!0,type:Array}};l.setup=(e,a)=>{const s=e,c=a.emit,o=F(()=>s.manufacturers.map(t=>{const{id:n,name:r,url:f,featured:I}=t;return{id:n,name:r,url:f,featured:I,productCount:B(n)}})),_=X.list(),v=F(()=>_.data.value||[]),b=E(),d=R(),S=A.create(),D=A.delete(),u=U(),P=[u.display({id:"select",header:({table:t})=>m(V,{props:{table:t}}),cell:({row:t})=>m(z,{props:{row:t}})}),u.accessor("id",{header:()=>"ID",enableColumnFilter:!1}),u.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),u.accessor("url",{header:()=>"URL",enableColumnFilter:!1}),u.accessor(t=>t.featured,{id:"featured",header:()=>"Featured",cell:t=>m(Z,{props:{value:t.getValue(),async remove(){await D.mutateAsync(t.row.original.id)&&d.success("Featured removed successfully.")}}}),enableColumnFilter:!1}),u.accessor(t=>t.productCount,{id:"productCount",header:()=>"Product Count",enableColumnFilter:!1}),u.display({id:"actions",header:"Actions",cell:({row:t})=>m(N,{props:{actions:[{id:"view",action(){b.push(`/admin/manufacturers/${t.original.id}/products`)}},{id:"edit",action(){b.push(`/admin/manufacturers/${t.original.id}`)}},{id:"delete",action(){c("delete",t.original.id)}},{id:"setFeatured",async action(){await S.mutateAsync({id:t.original.id,name:t.original.name})&&d.success("Successfully featured manufacturer.")}}].filter(n=>t.original.featured?n.id!=="setFeatured":t.original.productCount!==0?n.id!=="delete":n)}})})],x=Y(o,P);function B(t){const n=[];return v.value.map(r=>{r.manufacturer.id===t&&n.push(r)}),n.length}return{instance:x,bulkActions:[{id:"setFeatured",async action(){const t=x.getSelectedRowModel().rows,n=[];if(t.length>0){for(const r of t)if(!r.original.featured){const f=await S.mutateAsync({id:r.original.id,name:r.original.name});f&&n.push(f.id)}d.success(`Successfully Featured ${n.length}/${t.length} Manufacturers(s).`)}else d.error("You must select a row.")}}]}};l.components=Object.assign({AppTanStackTable:H},l.components);var ee=function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("AppTanStackTable",{attrs:{table:e.instance,"table-actions":e.bulkActions}})},te=[];const k={};var ae=h(l,ee,te,!1,se,null,null,null);function se(e){for(let a in k)this[a]=k[a]}const ne=function(){return ae.exports}(),p={};p.setup=(e,a)=>{const s=w.list(),c=R(),o=w.delete();async function _(v){await o.mutateAsync(v),c.success("Successfully deleted manufacturer.")}return{manufacturers:s,deleteManufacturer:_}};p.components=Object.assign({BaseTablePageLayout:O,PlusSvg:L,ManufacturersTable:ne},p.components);var re=function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Manufacturers")]},proxy:!0},{key:"button",fn:function(){return[s("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{to:"/admin/manufacturers/new"}},[s("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),s("span",[e._v("Manufacturer")])],1)]},proxy:!0},{key:"table",fn:function(){return[s("BaseVueQuery",{attrs:{query:e.manufacturers},scopedSlots:e._u([{key:"success",fn:function(c){var o=c.data;return[s("ManufacturersTable",{attrs:{manufacturers:o},on:{delete:e.deleteManufacturer}})]}}])})]},proxy:!0}])})},ue=[];const T={};var ce=h(p,re,ue,!1,oe,null,null,null);function oe(e){for(let a in T)this[a]=T[a]}const be=function(){return ce.exports}();export{be as default};
