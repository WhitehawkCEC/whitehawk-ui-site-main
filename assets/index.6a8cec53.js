import{E as P}from"./exclamation-triangle.54812a62.js";import{T as B}from"./trash.78f57a7a.js";import{c as _,aI as M,aS as m,n as b,ao as $,c0 as k,r as f,aF as A}from"./index.5b3e200c.js";import{B as I}from"./BasicModal.7000ac5f.js";import{A as R,R as E}from"./RowSelectionInput.d3ee0159.js";import{A as F,T as j}from"./AppTanStackTable.0007d42c.js";import{c as N}from"./createOnChangeFn.6bd8c770.js";import{u as V}from"./createSimpleTable.be1e8f81.js";import{u as x}from"./useManufacturerProducts.4420e7f8.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.a2074afe.js";import"./chevron-up.736f4142.js";const l={};l.props={id:{key:"id",required:!0,type:String},products:{key:"products",required:!0,type:Array}};l.setup=(t,s)=>{const e=t,n=s.emit,r=_(()=>e.products),c=M(),o=N(),p=[o.display({id:"select",header:({table:a})=>m(R,{props:{table:a}}),cell:({row:a})=>m(E,{props:{row:a}})}),o.accessor("id",{header:()=>"Id",enableColumnFilter:!0}),o.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),o.accessor(a=>a.type.name,{id:"type",header:()=>"Type",enableColumnFilter:!1}),o.display({id:"actions",header:"Actions",cell:({row:a})=>m(j,{props:{actions:[{id:"view",action(){c.push(`/admin/manufacturers/${e.id}/products/${a.original.id}`)}},{id:"delete",action(){n("delete",a.original)}}]}})})];return{instance:V(r,p)}};l.components=Object.assign({AppTanStackTable:F},l.components);var q=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("AppTanStackTable",{attrs:{table:t.instance}})},D=[];const h={};var H=b(l,q,D,!1,O,null,null,null);function O(t){for(let s in h)this[s]=h[s]}const W=function(){return H.exports}(),d={};d.setup=(t,s)=>{const e=k("id"),n=x.list(e),r=f(),c=f(),o=f(!1);function p(u){const{id:i,name:T}=u;return r.value=i,c.value=T,o.value=!0,!0}const v=_(()=>{var u,i;return(i=(u=n==null?void 0:n.data)==null?void 0:u.value)==null?void 0:i.length}),a=x.delete(e,r),w=A(),S=_(()=>c.value?c.value:"");async function C(){if(r)await a.mutateAsync(),y(),w.success(`Successfully deleted ${S.value} product.`);else throw new Error("Invalid request.")}function y(){o.value=!1}return{id:e,productsQuery:n,productName:c,isModalVisible:o,setPayload:p,totalProducts:v,deleteProduct:C,closeModal:y}};d.components=Object.assign({PlusSvg:$,ManufacturerProductsTable:W,BasicModal:I,WarningSvg:P,TrashSvg:B},d.components);var z=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",[e("BaseTablePageLayout",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Products")]},proxy:!0},{key:"button",fn:function(){return[e("div",{staticClass:"flex space-x-4"},[e("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{to:`/admin/manufacturers/${t.id}/products/new`}},[e("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),e("span",[t._v("Product")])],1)],1)]},proxy:!0},{key:"table",fn:function(){return[e("BaseVueQuery",{attrs:{query:t.productsQuery},scopedSlots:t._u([{key:"success",fn:function(n){var r=n.data;return[e("ManufacturerProductsTable",{attrs:{id:t.id,products:r},on:{delete:t.setPayload}})]}}])})]},proxy:!0}])}),e("BasicModal",{directives:[{name:"show",rawName:"v-show",value:t.isModalVisible,expression:"isModalVisible"}],on:{close:t.closeModal},scopedSlots:t._u([{key:"body",fn:function(){return[e("div",{staticClass:"flex flex-col items-center justify-center space-y-8 px-5"},[e("BaseIcon",{staticClass:"mx-auto max-w-min lg:mx-0 lg:max-w-none",attrs:{color:"danger",shape:"round"}},[e("WarningSvg",{staticClass:"h-auto w-5"})],1),e("BaseTypography",{staticClass:"text-gray-500",attrs:{component:"h2",variant:"subtitle3"}},[t._v(" Are you sure you want to delete "),e("span",{staticClass:"text-red-500"},[t._v(t._s(t.productName))]),t._v(" product? "),t.totalProducts===1?e("BaseTypography",{staticClass:"text-gray-500",attrs:{component:"h2",variant:"subtitle3"}},[e("span",{staticClass:"text-red-500"},[t._v(t._s(t.id))]),t._v(" manufacturer will be without single product. ")]):t._e()],1),e("div",{staticClass:"py-4"},[e("BaseButton",{attrs:{"display-type":"danger",action:"secondary"},on:{click:t.deleteProduct}},[e("TrashSvg",{staticClass:"h-auto w-4 xl:w-5"}),e("span",[t._v("Delete")])],1)],1)],1)]},proxy:!0}])})],1)},L=[];const g={};var Q=b(d,z,L,!1,G,null,null,null);function G(t){for(let s in g)this[s]=g[s]}const rt=function(){return Q.exports}();export{rt as default};
