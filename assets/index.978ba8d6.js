import{aF as T,d as u,aS as n,br as m,ab as F,aP as g,aQ as _,n as b,an as L,ca as y,ds as D,dj as k}from"./index.4dc5b018.js";import{A as P,T as w}from"./AppTanStackTable.1fd0e436.js";import{S as B}from"./StatusBadge.aca63790.js";import{c as I}from"./createOnChangeFn.fcf8b3c1.js";import{F as V}from"./FileSaver.min.9805f45f.js";import{u as j}from"./createSimpleTable.456b6b91.js";import{A as O}from"./AggregateLicenseDisplay.464ec6f4.js";import{u as U}from"./useAccountGroupScorecardOrders.f914ccf5.js";import"./magnifying-glass.b7cbe8fe.js";import"./arrow-down-tray.793d581e.js";import"./chevron-up.736f4142.js";const c={};c.props={scorecards:{key:"scorecards",required:!0,type:Array}};c.setup=(a,r)=>{const t=a,i=T(),l=u(()=>t.scorecards.filter(e=>e.status.state!=="Archived")),s=I(),p=[s.accessor(e=>e.licenseType,{id:"licenseType",header:()=>"License Type",enableColumnFilter:!1}),s.accessor(e=>e.id,{id:"id",header:()=>"Scorecard ID",enableColumnFilter:!1}),s.group({id:"company",header:()=>"Company",columns:[s.accessor(e=>e.company.name,{id:"name",header:()=>"Name",enableColumnFilter:!1}),s.accessor(e=>e.company.domain,{id:"domain",header:()=>"Domain",enableColumnFilter:!1})]}),s.accessor(e=>e.status.state,{id:"state",header:()=>"State",cell:e=>n(B,{props:{value:e.getValue()}}),enableColumnFilter:!1}),s.accessor(e=>e.log.receivedAt,{id:"createdAt",header:()=>"Created At",cell:e=>n(m,{props:{value:e.getValue(),format:"date"}}),enableColumnFilter:!1}),s.accessor(e=>e.log.updatedAt,{id:"updatedAt",header:()=>"Updated At",cell:e=>n(m,{props:{value:e.getValue(),format:"date"}}),enableColumnFilter:!1}),s.accessor(e=>e.log.expiresAt,{id:"expiresAt",header:()=>"Expires At",cell:e=>n(m,{props:{value:e.getValue(),format:"date"}}),enableColumnFilter:!1}),s.display({id:"actions",header:"Actions",cell:({row:e})=>n(w,{props:{actions:[{id:"download",async action(){const{id:o,company:{name:A},log:{receivedAt:h}}=e.original,x=F(h).toLocaleString(),C=await g.get(`${_}/scorecards-v3/${o}/pdf`,{responseType:"blob"}),$=`${A} Scorecard ${x} ${o}.pdf`;V.exports.saveAs(C.data,$)},isDisabled:u(()=>e.original.status.state!=="Completed")},{id:"archive",async action(){const{id:o}=e.original;await g.put(`${_}/scorecard-orders/${o}/status`,{state:"Archived",date:new Date().toISOString()}),i.success("Archived Scorecard Successfully")}}]}})})];return{instance:j(l,p)}};c.components=Object.assign({AppTanStackTable:P},c.components);var E=function(){var a=this,r=a.$createElement,t=a._self._c||r;return t("AppTanStackTable",{attrs:{table:a.instance}})},N=[];const v={};var R=b(c,E,N,!1,q,null,null,null);function q(a){for(let r in v)this[r]=v[r]}const G=function(){return R.exports}(),d={};d.setup=(a,r)=>{const t=y("id"),i=y("groupId"),l=D.get(t,i),s=u(()=>{var e,o;return((o=(e=l.data.value)==null?void 0:e.value)==null?void 0:o.groupLicenses)||k.AggregateLicenseUsage.create()}),p=U.list(t,i),f=u(()=>p.data.value||[]);return{summary:l,aggregateLicenseUsage:s,scorecards:f}};d.components=Object.assign({AggregateLicenseDisplay:O,PlusSvg:L,PortfolioScorecardsTable:G},d.components);var H=function(){var a=this,r=a.$createElement,t=a._self._c||r;return t("section",{staticClass:"space-y-6"},[t("BaseVueQuery",{attrs:{query:a.summary},scopedSlots:a._u([{key:"success",fn:function(){return[t("AggregateLicenseDisplay",{attrs:{"license-usage":a.aggregateLicenseUsage}})]},proxy:!0}])}),t("BaseTablePageLayout",{scopedSlots:a._u([{key:"title",fn:function(){return[a._v("Scorecards")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-2",attrs:{to:"new",type:"button",append:""}},[t("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),t("span",[a._v("Scorecard")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("PortfolioScorecardsTable",{attrs:{scorecards:a.scorecards}})]},proxy:!0}])})],1)},M=[];const S={};var Q=b(d,H,M,!1,z,null,null,null);function z(a){for(let r in S)this[r]=S[r]}const oe=function(){return Q.exports}();export{oe as default};
