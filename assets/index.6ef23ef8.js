import{U as B}from"./arrow-down-on-square.bf61cdc5.js";import{T as Q}from"./trash.78f57a7a.js";import{I as A}from"./ImageInput.e666c737.js";import{ag as U,aT as C,aD as I,aP as y,aQ as m,c as S,aF as D,n as b,b$ as x,r as T,aA as q,aI as M}from"./index.6898036f.js";import{P as F,u as R,a as j,b as k}from"./ProductInput.81f78d71.js";import{u as _}from"./useManufacturerProducts.a23a5fa3.js";import"./BasicModal.a17a6dd3.js";import"./DynamicForm.6e23b3bb.js";const P={read(e){return U(["products",e,"image"],()=>y.get(`${m}/products/${e.value}/image`).then(s=>s.data),{retry:!1})},update(e){const s=C();return I(t=>y.put(`${m}/products/${e.value}/image`,t,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>a),{onSuccess(){s.invalidateQueries(["products",e]),s.invalidateQueries(["products",e,"image"])}})},delete(e){const s=C();return I(()=>y.delete(`${m}/products/${e.value}/image`).then(t=>t),{onSuccess(){s.invalidateQueries(["products",e]),s.invalidateQueries(["products",e,"image"])}})}},p={};p.props={productId:{key:"productId",required:!0,type:String}};p.setup=(e,s)=>{const t=e,a=S(()=>t.productId),u=S(()=>`${m}/products/${encodeURIComponent(a.value)}/image`),r=D(),o=P.update(a);async function n(c,l){const d=new FormData;d.append("data",c),(await o.mutateAsync(d)).status===204&&(l(),r.success("Successfully updated logo."))}const v=P.delete(a);async function g(c){confirm("Are you sure you want to remove this image?")&&(await v.mutateAsync()).status===204&&(c(),r.success("Successfully deleted logo."))}return{imageUrl:u,updateImage:n,removeImage:g}};p.components=Object.assign({ImageInput:A},p.components);var L=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{variant:"subtitle3",component:"h3"}},[e._v(" Product Logo ")]),t("ImageInput",{attrs:{url:e.imageUrl,"btn-text":"Change Logo"},on:{"update-image":e.updateImage,"remove-image":e.removeImage}})],1)},E=[];const $={};var O=b(p,L,E,!1,z,null,null,null);function z(e){for(let s in $)this[s]=$[s]}const N=function(){return O.exports}(),f={};f.setup=(e,s)=>{const t=x("id"),a=x("productId"),u=[R.list(),j.list(),k.list()],r=_.read(t,a),o=T();q(()=>r.data.value,i=>{i&&(o.value=i)},{immediate:!0});const n=M(),v=D(),g=_.update(t,a);async function c(){o.value&&await g.mutateAsync(o.value)&&v.success("Successfully updated product.")}const l=_.delete(t,a);async function d(){var h;confirm("Are you sure you want to delete the product "+((h=o.value)==null?void 0:h.name)+"?")&&(await l.mutateAsync(),n.push(`/admin/manufacturers/${t.value}/products`))}return{id:t,queries:u,product:o,updateProduct:c,deleteProduct:d}};f.components=Object.assign({ManufacturerProductLogoInput:N,ProductInput:F,SaveSvg:B,DeleteSvg:Q},f.components);var G=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",{staticClass:"space-y-8"},[t("ManufacturerProductLogoInput",{attrs:{"product-id":e.id}}),t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{variant:"subtitle3",component:"h3"}},[e._v(" Product Attributes ")]),t("form",{staticClass:"divide-y",on:{submit:function(a){return a.preventDefault(),e.updateProduct.apply(null,arguments)}}},[t("BaseVueQueries",{attrs:{queries:e.queries},scopedSlots:e._u([{key:"success",fn:function(a){var u=a[0],r=a[1],o=a[2];return[t("ProductInput",{attrs:{"is-id-readonly":!0,types:u,features:r,categories:o},model:{value:e.product,callback:function(n){e.product=n},expression:"product"}})]}}])}),t("div",{staticClass:"flex flex-col space-y-2 p-4 md:flex-row md:space-y-0 md:space-x-2"},[t("BaseButton",{staticClass:"w-full space-x-2 md:w-auto"},[t("SaveSvg",{staticClass:"h-auto w-4 xl:w-5"}),t("span",[e._v("Save")])],1),t("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{"display-type":"danger",action:"secondary"},on:{click:function(a){return a.preventDefault(),e.deleteProduct.apply(null,arguments)}}},[t("DeleteSvg",{staticClass:"h-auto w-4 xl:w-5"}),t("span",[e._v("Delete")])],1)],1)],1)],1)],1)},H=[];const w={};var J=b(f,G,H,!1,K,null,null,null);function K(e){for(let s in w)this[s]=w[s]}const ae=function(){return J.exports}();export{ae as default};
