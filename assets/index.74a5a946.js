import{L as Q}from"./LicenseTypeMapQuantitiesInput.88d2b964.js";import{c as u,cI as T,cF as C,r as I,cA as x,w as $,ct as k,n as q,bH as y}from"./index.b3e93f33.js";import{u as A}from"./LicenseTypeMapQuantities.32ccbdfc.js";import{L as M}from"./LicenseBatchUsageDisplay.182f0ff2.js";import"./index.9d2bf537.js";import"./DynamicForm.39629456.js";import"./calendar.aad8910e.js";import"./identification.ea2beb71.js";import"./AggregateLicenseDisplay.61e9d257.js";import"./DateRangeDisplay.ea6f9ec8.js";import"./IsoDateTimeDisplay.c7b9ab43.js";import"./message_pb.2cee1129.js";const d={};d.props={accountId:{key:"accountId",required:!0,type:String},groupId:{key:"groupId",required:!0,type:String},groupBatchId:{key:"groupBatchId",required:!0,type:String}};d.setup=(t,a)=>{const e=t,s=u(()=>e.accountId),r=u(()=>e.groupId),o=u(()=>e.groupBatchId),_=T.create(s,r,o),i=C.read(s,r,o),p=u(()=>{var n,c;return(c=(n=i.data.value)==null?void 0:n.value)==null?void 0:c.accountBatchId}),g=u(()=>{var n,c,l;return(l=(c=(n=i.data.value)==null?void 0:n.value)==null?void 0:c.usage)==null?void 0:l.counts}),v=I(x.LicenseTypeMapQuantities.create()),h=I(!1);$(()=>g.value,n=>{var c,l;!n||h.value||(v.value={annual:((c=n.annual)==null?void 0:c.quantity)||0,oneTime:((l=n.oneTime)==null?void 0:l.quantity)||0},h.value=!0)},{immediate:!0});const f=A(g,v),L=u(()=>({accountBatchId:p.value||k.create(),quantitiesDiff:f.value})),S=u(()=>p.value&&(f.value.annual!==0||f.value.oneTime!==0));async function D(){await _.mutateAsync(L.value)}return{currentState:i,quantitiesDesired:v,canSubmit:S,submit:D}};d.components=Object.assign({LicenseTypeMapQuantitiesInput:Q},d.components);var j=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("BaseSimpleCard",{staticClass:"divide-y"},[e("BaseTypography",{staticClass:"p-4",attrs:{component:"h2",variant:"subtitle3"}},[t._v(" Edit Quantities ")]),e("form",{staticClass:"divide-y",on:{submit:function(s){return s.preventDefault(),t.submit.apply(null,arguments)}}},[e("BaseVueQuery",{attrs:{query:t.currentState},scopedSlots:t._u([{key:"success",fn:function(){return[e("LicenseTypeMapQuantitiesInput",{model:{value:t.quantitiesDesired,callback:function(s){t.quantitiesDesired=s},expression:"quantitiesDesired"}})]},proxy:!0}])}),e("div",{staticClass:"p-4"},[e("div",{staticClass:"md:inline-flex"},[e("BaseButton",{staticClass:"w-full md:w-auto",attrs:{"display-type":"info",disabled:!t.canSubmit}},[t._v(" Change ")])],1)])],1)],1)},F=[];const B={};var G=q(d,j,F,!1,U,null,null,null);function U(t){for(let a in B)this[a]=B[a]}const w=function(){return G.exports}(),m={};m.setup=(t,a)=>{const e=y("id"),s=y("groupId"),r=y("batchId"),o=C.read(e,s,r),_=u(()=>{var i,p;return((p=(i=o.data.value)==null?void 0:i.value)==null?void 0:p.usage)||x.LicenseBatchUsage.create()});return{id:e,groupId:s,batchId:r,licenseBatch:o,usage:_}};m.components=Object.assign({LicenseBatchUsageDisplay:M,AccountGroupLicenseBatchQuantitiesChange:w},m.components);var E=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",[e("BaseVueQuery",{attrs:{query:t.licenseBatch},scopedSlots:t._u([{key:"success",fn:function(){return[e("div",{staticClass:"flex flex-col space-y-4"},[e("LicenseBatchUsageDisplay",{attrs:{value:t.usage}}),e("AccountGroupLicenseBatchQuantitiesChange",{attrs:{"account-id":t.id,"group-id":t.groupId,"group-batch-id":t.batchId}})],1)]},proxy:!0}])})],1)},R=[];const b={};var O=q(m,E,R,!1,z,null,null,null);function z(t){for(let a in b)this[a]=b[a]}const at=function(){return O.exports}();export{at as default};
