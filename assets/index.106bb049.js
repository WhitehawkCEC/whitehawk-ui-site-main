import{br as A,aO as B,n as x,d as v,aF as w,bW as h,aS as M,bX as P,an as j,b}from"./index.1543f442.js";import{B as V}from"./BasicConfirmModal.f241002d.js";import{A as I,T as N}from"./AppTanStackTable.666e7cbc.js";import{c as q}from"./createOnChangeFn.4b472854.js";import{u as E}from"./useProducts.e4cec7f0.js";import{u as O}from"./createSimpleTable.a9e677bc.js";import{u as C}from"./useManufacturers.d09ada1a.js";import"./BasicModal.eb4a590c.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-up.736f4142.js";const l={};l.props={value:{key:"value",required:!1,type:String},remove:{key:"remove",required:!0,type:Function}};l.setup=(e,a)=>({});l.components=Object.assign({DateIsoStringDisplay:A,XSvg:B},l.components);var R=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.value?t("div",{staticClass:"flex items-center space-x-1"},[t("DateIsoStringDisplay",{staticClass:"inline-flex items-center rounded bg-indigo-100 px-2 py-0.5 text-xs font-medium uppercase leading-4 tracking-widest text-indigo-800",attrs:{value:e.value,format:"date"}}),t("BaseIcon",{attrs:{color:"danger",size:"small",action:"secondary"},on:{click:e.remove}},[t("XSvg",{staticClass:"w-3"})],1)],1):e._e()},L=[];const S={};var X=x(l,R,L,!1,z,null,null,null);function z(e){for(let a in S)this[a]=S[a]}const H=function(){return X.exports}(),d={};d.props={manufacturers:{key:"manufacturers",required:!0,type:Array}};d.setup=(e,a)=>{const t=e,o=a.emit,u=v(()=>t.manufacturers.map(s=>{const{id:r,name:_,url:T,featured:D}=s;return{id:r,name:_,url:T,featured:D,productCount:c(r)}}));function c(s){const r=[];return i.value.map(_=>{_.manufacturer.id===s&&r.push(_)}),r.length}const m=E.list(),i=v(()=>m.data.value||[]),f=w(),g=h.create(),p=h.delete(),n=q(),k=[n.accessor("id",{header:()=>"ID",enableColumnFilter:!1}),n.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),n.accessor("url",{header:()=>"URL",enableColumnFilter:!1}),n.accessor(s=>s.featured,{id:"featured",header:()=>"Featured",cell:s=>M(H,{props:{value:s.getValue(),async remove(){await p.mutateAsync(s.row.original.id)&&f.success("Featured removed successfully.")}}}),enableColumnFilter:!1}),n.accessor(s=>s.productCount,{id:"productCount",header:()=>"Product Count",enableColumnFilter:!1}),n.display({id:"actions",header:"Actions",cell:({row:s})=>M(N,{props:{actions:[{id:"view",to:`/admin/manufacturers/${s.original.id}/products`},{id:"edit",to:`/admin/manufacturers/${s.original.id}`},{id:"delete",action(){o("delete",s.original)},isDisabled:v(()=>s.original.productCount>0)},{id:"setFeatured",async action(){await g.mutateAsync({id:s.original.id,name:s.original.name})&&f.success("Successfully featured manufacturer.")},isDisabled:v(()=>s.original.featured!==void 0)}]}})})];return{instance:O(u,k)}};d.components=Object.assign({AppTanStackTable:I},d.components);var Q=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("AppTanStackTable",{attrs:{table:e.instance}})},U=[];const $={};var W=x(d,Q,U,!1,G,null,null,null);function G(e){for(let a in $)this[a]=$[a]}const J=function(){return W.exports}(),y={};y.setup=(e,a)=>{const t=C.list(),o=w(),u=C.delete(),c=b(""),m=b(""),i=b(!1);function f(n){c.value=n.id,m.value=n.name,i.value=!0}async function g(){c?(await u.mutateAsync(c.value),p(),o.success("Successfully deleted manufacturer.")):o.error("Something went wrong.")}function p(){i.value=!1}return{manufacturers:t,manufacturerName:m,isModalVisible:i,toggleModal:f,deleteManufacturer:g,closeModal:p}};y.components=Object.assign({BaseTablePageLayout:P,PlusSvg:j,ManufacturersTable:J,BasicConfirmModal:V},y.components);var K=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Manufacturers")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{to:"/admin/manufacturers/new"}},[t("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),t("span",[e._v("Manufacturer")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("BaseVueQuery",{attrs:{query:e.manufacturers},scopedSlots:e._u([{key:"success",fn:function(o){var u=o.data;return[t("ManufacturersTable",{attrs:{manufacturers:u},on:{delete:e.toggleModal}})]}}])})]},proxy:!0}])}),t("BasicConfirmModal",{directives:[{name:"show",rawName:"v-show",value:e.isModalVisible,expression:"isModalVisible"}],attrs:{name:e.manufacturerName},on:{delete:e.deleteManufacturer,close:e.closeModal}})],1)},Y=[];const F={};var Z=x(y,K,Y,!1,ee,null,null,null);function ee(e){for(let a in F)this[a]=F[a]}const me=function(){return Z.exports}();export{me as default};
