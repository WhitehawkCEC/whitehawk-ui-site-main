import{c,aI as I,aS as f,n as h,ao as T,b$ as b,db as w}from"./index.4c25b472.js";import{A,T as q}from"./AppTanStackTable.84b88ef9.js";import{c as C}from"./createOnChangeFn.a60f85cf.js";import{u as P}from"./createSimpleTable.42092fdc.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.1b7cb063.js";import"./chevron-up.736f4142.js";const m={};m.props={id:{key:"id",required:!0,type:String},subId:{key:"subId",required:!0,type:String},value:{key:"value",required:!0,type:Array}};m.setup=(e,r)=>{const t=e,i=c(()=>t.id),l=c(()=>t.subId),v=c(()=>{var n;const s=new Map;for(const{products:o}of t.value)for(const a of o){const u=((n=a.id)==null?void 0:n.value)||"";s.has(u)||s.set(u,a)}return Array.from(s.values())}),g=I(),x=c(()=>{var n;const s=new Map;for(const o of v.value){const a=((n=o.id)==null?void 0:n.value)||"",u=o.name,d=[];u==="Cyber Risk Rating"&&d.push({id:"view",action(){g.push(`/admin/companies/${i.value}/subscriptions/${l.value}/products/${a}`)}}),s.set(a,d)}return s}),$=c(()=>t.value),p=C(),k=c(()=>[p.group({id:"supplier",header:()=>"Supplier",columns:[p.accessor(s=>{var n;return(n=s.supplier)==null?void 0:n.name},{id:"name",header:()=>"Name"}),p.accessor(s=>{var n;return(n=s.supplier)==null?void 0:n.domain},{id:"domain",header:()=>"Domain"})]}),p.group({id:"products",header:()=>"Products",columns:v.value.map(s=>{var n;return p.accessor(o=>o.products.find(a=>{var u,d;return((u=a.id)==null?void 0:u.value)===((d=s.id)==null?void 0:d.value)}),{id:((n=s.id)==null?void 0:n.value)||"",header:()=>s.name,cell:o=>o.getValue()!==void 0?f(q,{props:{actions:s.id?x.value.get(s.id.value):[]}}):f("span"),enableColumnFilter:!1})})})]);return{instance:P($,k)}};m.components=Object.assign({AppTanStackTable:A},m.components);var R=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("AppTanStackTable",{attrs:{table:e.instance}})},j=[];const S={};var B=h(m,R,j,!1,M,null,null,null);function M(e){for(let r in S)this[r]=S[r]}const E=function(){return B.exports}(),_={};_.setup=(e,r)=>{const t=b("id"),i=b("subscriptionId"),l=w.list(t,i);return{id:t,subscriptionId:i,list:l}};_.components=Object.assign({PlusSvg:T,SubscriptionSuppliersTable:E},_.components);var F=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Subscription Suppliers")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"./new",append:""}},[t("PlusSvg",{staticClass:"w-5"}),t("span",[e._v("Supplier")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("BaseVueQuery",{attrs:{query:e.list},scopedSlots:e._u([{key:"success",fn:function(i){var l=i.data;return[t("SubscriptionSuppliersTable",{attrs:{id:e.id,value:l,"sub-id":e.subscriptionId}})]}}])})]},proxy:!0}])})},O=[];const y={};var V=h(_,F,O,!1,H,null,null,null);function H(e){for(let r in y)this[r]=y[r]}const U=function(){return V.exports}();export{U as default};
