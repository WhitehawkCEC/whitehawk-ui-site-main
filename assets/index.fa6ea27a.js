import{n as f,c as i,c0 as I,cG as k,cA as P,aK as U,aG as R,c7 as F,b4 as D,r as M,c4 as N,az as O}from"./index.eb352f97.js";import{P as A}from"./ProgressBar.8d5a3bbe.js";import{I as E}from"./IsoDateTimeDisplay.67fab97a.js";import{u as z}from"./active-questionnaire.374e9d2e.js";const Q={};Q.props={links:{key:"links",required:!0,type:Array}};Q.setup=(e,s)=>({});var G=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"absolute w-full -top-[4.6rem] left-2 md:-inset-x-6 md:-top-8 lg:-inset-x-8 xl:-inset-x-16 2xl:-inset-x-20 md:w-auto"},[t("nav",{staticClass:"bg-white border-l md:border-l-none md:border-b"},[t("div",{staticClass:"mx-auto flex max-w-8xl md:px-6 lg:px-8 xl:px-16 2xl:px-20"},[t("ul",{staticClass:"flex items-center space-x-1 overflow-x-auto"},e._l(e.links,function(r){return t("li",{key:r.name},[t("BaseLink",{staticClass:"border-b-2 border-transparent p-2 text-gray-500 hover:border-prime-navy hover:text-prime-navy focus:border-prime-navy focus:text-prime-navy focus:outline-none",attrs:{"exact-active-class":"text-prime-navy border-prime-navy focus:text-prime-navy focus:border-prime-navy",to:r.to,"display-type":"none"}},[t("BaseTypography",{staticClass:"whitespace-nowrap",attrs:{variant:"p2"}},[e._v(" "+e._s(r.name)+" ")])],1)],1)}),0)])])])},H=[];const $={};var V=f(Q,G,H,!1,W,null,null,null);function W(e){for(let s in $)this[s]=$[s]}const K=function(){return V.exports}(),g={};g.props={accountId:{key:"accountId",required:!0,type:String},id:{key:"id",required:!0,type:String}};g.setup=(e,s)=>{const t=e,r=i(()=>t.accountId),n=i(()=>t.id),l=I.read(n),u=i(()=>l.data.value),d=i(()=>{var a,o;return(o=(a=u.value)==null?void 0:a.meta)==null?void 0:o.updatedAt}),v=i(()=>{var o;const a=[];return(o=u.value)==null||o.sections.forEach(c=>{a.push(c.questions.length)}),a.reduce((c,p)=>c+p,0)}),_=k.list(r),y=i(()=>{var a,o,c;return(c=(o=(a=_.data.value)==null?void 0:a.find(p=>{var x;return((x=p.questionnaireId)==null?void 0:x.value)===n.value}))==null?void 0:o.id)==null?void 0:c.value}),m=P.list(y);return{questionnaireId:n,questionnaire:u,lastUpdated:d,totalQuestions:v,answeredList:m}};g.components=Object.assign({ProgressBar:A,IsoDateTimeDisplay:E},g.components);var J=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.questionnaire?t("BaseSimpleCard",{staticClass:"relative overflow-hidden p-5"},[t("BaseVueQuery",{attrs:{query:e.answeredList},scopedSlots:e._u([{key:"success",fn:function(r){var n=r.data;return[t("ProgressBar",{staticClass:"absolute inset-x-0 bottom-0 h-2 bg-gray-200",attrs:{current:n.length,max:e.totalQuestions}})]}}],null,!1,3440009378)}),t("div",{staticClass:"relative flex flex-col space-y-3"},[t("div",{staticClass:"flex flex-col space-y-1"},[e.lastUpdated?t("BaseTypography",{staticClass:"text-gray-500 uppercase",attrs:{variant:"overline"}},[t("span",[e._v("Last Updated:")]),t("IsoDateTimeDisplay",{attrs:{value:e.lastUpdated,format:"date"}})],1):e._e(),t("BaseTypography",{attrs:{variant:"subtitle3"}},[e._v(" "+e._s(e.questionnaire.name)+" ")])],1),t("div",{staticClass:"flex justify-between items-baseline"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p3"}},[e._v(" "+e._s(e.totalQuestions)+" Questions ")]),t("BaseButton",{attrs:{shape:"rectangle",to:`custom-questionnaires/${e.questionnaireId}`}},[e._v(" Results ")])],1)])],1):e._e()},X=[];const B={};var Y=f(g,J,X,!1,Z,null,null,null);function Z(e){for(let s in B)this[s]=B[s]}const ee=function(){return Y.exports}(),h={};h.props={accountId:{key:"accountId",required:!0,type:String},id:{key:"id",required:!0,type:String}};h.setup=(e,s)=>{const t=e,r=i(()=>t.accountId),n=i(()=>t.id),l=I.read(n),u=i(()=>l.data.value),d=i(()=>{var a,o;return(o=(a=u.value)==null?void 0:a.meta)==null?void 0:o.updatedAt}),v=i(()=>{var o;const a=[];return(o=u.value)==null||o.sections.forEach(c=>{a.push(c.questions.length)}),a.reduce((c,p)=>c+p,0)}),_=k.list(r),y=i(()=>{var a,o,c;return(c=(o=(a=_.data.value)==null?void 0:a.find(p=>{var x;return((x=p.questionnaireId)==null?void 0:x.value)===n.value}))==null?void 0:o.id)==null?void 0:c.value}),m=P.list(y);return{questionnaireId:n,questionnaire:u,lastUpdated:d,totalQuestions:v,answeredList:m}};h.components=Object.assign({ProgressBar:A,IsoDateTimeDisplay:E},h.components);var te=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.questionnaire?t("BaseSimpleCard",{staticClass:"relative overflow-hidden p-5"},[t("BaseVueQuery",{attrs:{query:e.answeredList},scopedSlots:e._u([{key:"success",fn:function(r){var n=r.data;return[t("ProgressBar",{staticClass:"absolute inset-x-0 bottom-0 h-2 bg-gray-200",attrs:{current:n.length,max:e.totalQuestions}})]}}],null,!1,3440009378)}),t("div",{staticClass:"relative flex flex-col space-y-3"},[t("div",{staticClass:"flex flex-col space-y-1"},[e.lastUpdated?t("BaseTypography",{staticClass:"text-gray-500 uppercase",attrs:{variant:"overline"}},[t("span",[e._v("Last Updated:")]),t("IsoDateTimeDisplay",{attrs:{value:e.lastUpdated,format:"date"}})],1):e._e(),t("BaseTypography",{attrs:{variant:"subtitle3"}},[e._v(" "+e._s(e.questionnaire.name)+" ")])],1),t("div",{staticClass:"flex justify-between items-baseline"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p3"}},[e._v(" "+e._s(e.totalQuestions)+" Questions ")]),t("BaseButton",{attrs:{shape:"rectangle",to:`custom-questionnaires/${e.questionnaireId}`}},[e._v(" Continue ")])],1)])],1):e._e()},se=[];const S={};var ae=f(h,te,se,!1,ne,null,null,null);function ne(e){for(let s in S)this[s]=S[s]}const L=function(){return ae.exports}(),b={};b.props={accountId:{key:"accountId",required:!0,type:String},id:{key:"id",required:!0,type:String}};b.setup=(e,s)=>{const t=e,r=i(()=>t.accountId),n=i(()=>t.id),l=I.read(n),u=i(()=>l.data.value),d=i(()=>{var o;const a=[];return(o=u.value)==null||o.sections.forEach(c=>{a.push(c.questions.length)}),a.reduce((c,p)=>c+p,0)}),v=z(),_=U(),y=k.create();async function m(){var o;const{response:a}=await y.mutateAsync({accountId:{value:r.value},questionnaireId:{value:n.value}});a.taken&&a.taken.id&&(await v.setQuestionnaireId(n.value),await v.setTakenId((o=a.taken.id)==null?void 0:o.value),_.push(`custom-questionnaires/${n.value}`))}return{questionnaire:u,totalQuestions:d,createTaken:m}};var re=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.questionnaire?t("BaseSimpleCard",{staticClass:"relative overflow-hidden flex h-full flex-col justify-between space-y-3 p-5"},[t("div",{staticClass:"flex flex-col space-y-1"},[t("BaseTypography",{staticClass:"text-gray-500 uppercase",attrs:{variant:"overline"}},[e._v(" Not Started ")]),t("BaseTypography",{attrs:{variant:"subtitle3"}},[e._v(" "+e._s(e.questionnaire.name)+" ")])],1),t("div",{staticClass:"flex justify-between items-baseline"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p3"}},[e._v(" "+e._s(e.totalQuestions)+" Questions ")]),t("BaseButton",{attrs:{shape:"rectangle"},on:{click:e.createTaken}},[e._v("Begin")])],1)]):e._e()},oe=[];const w={};var ie=f(b,re,oe,!1,ue,null,null,null);function ue(e){for(let s in w)this[s]=w[s]}const ce=function(){return ie.exports}(),C={};C.props={accountId:{key:"accountId",required:!0,type:String},questionnaireId:{key:"questionnaireId",required:!0,type:String}};C.setup=(e,s)=>{const t=R(),r=i(()=>t.inProgressQuestionnaires.map(l=>{var u;return(u=l.id)==null?void 0:u.value})),n=i(()=>t.completedQuestionnaires.map(l=>{var u;return(u=l.id)==null?void 0:u.value}));return{inProgressIds:r,completedIds:n}};C.components=Object.assign({InProgressQuestionnaireCard:L,CompletedQuestionnaireCard:ee,NotStartedQuestionnaireCard:ce},C.components);var le=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.inProgressIds.includes(e.questionnaireId)?t("div",[t("InProgressQuestionnaireCard",{attrs:{id:e.questionnaireId,"account-id":e.accountId}})],1):e.completedIds.includes(e.questionnaireId)?t("div",[t("CompletedQuestionnaireCard",{attrs:{id:e.questionnaireId,"account-id":e.accountId}})],1):t("div",[t("NotStartedQuestionnaireCard",{attrs:{id:e.questionnaireId,"account-id":e.accountId}})],1)},de=[];const T={};var pe=f(C,le,de,!1,ve,null,null,null);function ve(e){for(let s in T)this[s]=T[s]}const _e=function(){return pe.exports}(),q={};q.setup=(e,s)=>{const t=F("id"),r=D("status",void 0),n=M(),l=N.read(t),u=i(()=>l.data.value),d=R(),v=i(()=>d.questionnaires),_=i(()=>d.inProgressQuestionnaires),y=i(()=>d.completedQuestionnaires);O(()=>r.value,a=>{n.value=a},{immediate:!0});const m=i(()=>{const a=`/client/companies/${t.value}/journey/cyber-risk-profile/custom-questionnaires`;return[{to:a,name:"All"},{to:{path:a,query:{status:"in-progress"}},name:"In Progress"},{to:{path:a,query:{status:"completed"}},name:"Completed"}]});return{id:t,status:n,company:u,questionnaires:v,inProgress:_,completed:y,links:m}};q.components=Object.assign({QuestionnaireTabbedNav:K,CompanyQuestionnaireCard:_e,InProgressQuestionnaireCard:L},q.components);var ye=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"relative md:space-y-14"},[e.questionnaires.length!==0?t("QuestionnaireTabbedNav",{attrs:{links:e.links}}):e._e(),t("div",{staticClass:"space-y-6"},[t("div",{staticClass:"-space-y-2"},[t("BaseTypography",{staticClass:"text-gray-500 uppercase",attrs:{variant:"overline"}},[e._v(" "+e._s(e.status?e.status:"All")+" ")]),t("BaseTypography",{attrs:{variant:"h5",component:"h2"}},[e._v(" Questionnaires ")])],1),e.questionnaires.length===0?t("BaseAlert",{attrs:{type:"friendly"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Questionnaire Not Found")]},proxy:!0},{key:"message",fn:function(){return[e._v(" It appears that your company is not associated with any Questionnaires. To learn more and add questionnaires to take, please contact a WhiteHawk Cyber Analyst. ")]},proxy:!0},{key:"action",fn:function(){return[t("BaseButton",{attrs:{shape:"rectangle","display-type":"success",to:{path:"/contact-us",query:{textBody:"I would like to talk with a WhiteHawk Consultant to request a questionnaire for my company.",subject:"Services and Solutions",company:e.company?e.company.name:""}}}},[e._v(" Request Questionnaire ")])]},proxy:!0}],null,!1,826400206)}):t("ul",{staticClass:"grid sm:grid-cols-3 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4"},[e.status==="completed"?e._l(e.completed,function(r,n){return t("li",{key:n},[r.id?t("CompanyQuestionnaireCard",{attrs:{"questionnaire-id":r.id.value,"account-id":e.id}}):e._e()],1)}):e.status==="in-progress"?e._l(e.inProgress,function(r,n){return t("li",{key:n},[r.id?t("InProgressQuestionnaireCard",{attrs:{id:r.id.value,"account-id":e.id}}):e._e()],1)}):e._l(e.questionnaires,function(r,n){return t("li",{key:n},[r.id?t("CompanyQuestionnaireCard",{attrs:{"questionnaire-id":r.id.value,"account-id":e.id}}):e._e()],1)})],2)],1)],1)},me=[];const j={};var fe=f(q,ye,me,!1,xe,null,null,null);function xe(e){for(let s in j)this[s]=j[s]}const Ie=function(){return fe.exports}();export{Ie as default};
