import{d as a,n as _,cB as H,bn as W,c as z,b as T,L as G,c8 as B,cH as K,b$ as V,b_ as J,cI as U}from"./index.28561d0a.js";import{a as E}from"./index.ebbce841.js";import{T as X}from"./TransitionExpand.f9449993.js";import{T as Y}from"./ToolTip.d8d2a10f.js";const k={};k.props={score:{key:"score",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};k.setup=(e,s)=>{const t=e,n=a(()=>200-t.score/t.max*200),c=a(()=>`gradient-${Math.random()}`),d=a(()=>t.score>=740?"#10b981":t.score>=640?"#fde68a":"#ef4444");return{fill:n,gradientId:c,displayColor:d}};var Z=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("svg",{attrs:{viewBox:"0 0 90 80",preserveAspectRatio:"none"}},[t("defs",[t("linearGradient",{attrs:{id:`${e.gradientId}`,x1:"15%",y1:"100%",x2:"80%",y2:"100%"}},[t("stop",{attrs:{offset:"0%","stop-color":`${e.displayColor}`}}),t("stop",{attrs:{offset:"100%","stop-color":`${e.displayColor}`}})],1)],1),t("path",{staticClass:"stroke-current text-gray-200 shadow-inner",attrs:{d:"M20,75 a40,40,0,1,1,50,0",fill:"none","stroke-linecap":"round","stroke-width":"3"}}),t("path",{staticClass:"filling transition duration-300",style:`--fill: ${e.fill}`,attrs:{d:"M20,75 a40,40,0,1,1,50,0",fill:"none",stroke:`url(#${e.gradientId})`,"stroke-dasharray":"200","stroke-dashoffset":"200","stroke-linecap":"round","stroke-width":"3"}})])},ee=[];const j={};var te=_(k,Z,ee,!1,se,"0c4e781c",null,null);function se(e){for(let s in j)this[s]=j[s]}const re=function(){return te.exports}(),m={};m.props={score:{key:"score",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};m.setup=(e,s)=>{const t=e,n=a(()=>t.score===0&&t.max===0),c=a(()=>isNaN(t.score/t.max)?E(0):E(t.score/t.max));return{shouldHide:n,percentage:c}};m.components=Object.assign({QuestionnaireProgressBar:re},m.components);var ne=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.shouldHide?t("div",{staticClass:"flex p-4"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" Long form input requires examination by a Cyber Analyst. ")])],1):t("div",{staticClass:"relative flex items-center justify-center p-4"},[t("div",{staticClass:"absolute flex items-center"},[t("BaseTypography",{staticClass:"text-blue-800",attrs:{variant:"h2"}},[e._v(" "+e._s(e.percentage)+" ")])],1),t("div",{staticClass:"relative w-44 sm:w-56 lg:w-44 xl:w-56"},[t("QuestionnaireProgressBar",{attrs:{score:e.score,max:e.max}})],1)])},ae=[];const Q={};var oe=_(m,ne,ae,!1,ie,null,null,null);function ie(e){for(let s in Q)this[s]=Q[s]}const P=function(){return oe.exports}(),x={};x.props={score:{key:"score",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};x.setup=(e,s)=>({});x.components=Object.assign({DotsSquare:H,QuestionnaireProgressBarText:P},x.components);var ce=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"relative mx-auto flex max-w-xs flex-col items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-blue-100 via-white to-white px-4 py-8 shadow-md sm:max-w-sm sm:rounded-3xl xl:max-w-none xl:p-12"},[t("div",{staticClass:"absolute top-full left-full -translate-y-1/3 -translate-x-1/3 rotate-45 transform xl:-translate-y-1/2"},[t("DotsSquare",{attrs:{color:"blue"}})],1),t("QuestionnaireProgressBarText",{attrs:{score:e.score,max:e.max}})],1)},ue=[];const R={};var le=_(x,ce,ue,!1,pe,null,null,null);function pe(e){for(let s in R)this[s]=R[s]}const de=function(){return le.exports}(),y={};y.props={value:{key:"value",required:!0,type:null}};y.setup=(e,s)=>({});y.components=Object.assign({WaveForm:W,QuestionnaireScoreDisplay:de},y.components);var _e=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"relative flex flex-col items-center justify-center lg:grid lg:grid-cols-12"},[t("div",{staticClass:"absolute top-36 w-full opacity-25 sm:top-40 lg:hidden"},[t("WaveForm")],1),t("div",{staticClass:"relative -mb-36 lg:col-span-4 lg:col-start-1 lg:row-start-1 lg:mb-0"},[t("div",{staticClass:"px-6 md:px-8 lg:px-4 lg:pl-0"},[t("QuestionnaireScoreDisplay",{attrs:{score:e.value.score,max:e.value.max}})],1)]),t("BaseSimpleCard",{staticClass:"pt-32 lg:col-span-10 lg:col-start-3 lg:row-start-1 lg:h-fit lg:p-0"},[t("div",{staticClass:"grid items-center gap-5 px-6 py-10 text-center sm:p-8 lg:col-start-3 lg:grid-cols-10 lg:gap-0 lg:p-6 lg:text-left"},[t("div",{staticClass:"grid gap-5 lg:col-span-10 lg:col-start-3"},[t("BaseTypography",{staticClass:"text-prime-navy",attrs:{component:"h2",variant:"h5"}},[e._v(" "+e._s(e.value.title)+" ")]),t("BaseTypography",{staticClass:"text-gray-600",attrs:{component:"p",variant:"p1"}},[e._v(" "+e._s(e.value.description)+" ")])],1)])])],1)},ve=[];const A={};var me=_(y,_e,ve,!1,xe,null,null,null);function xe(e){for(let s in A)this[s]=A[s]}const ye=function(){return me.exports}(),f={};f.props={accountId:{key:"accountId",required:!0,type:String},responseId:{key:"responseId",required:!0,type:String},sIndex:{key:"sIndex",required:!0,type:Number},question:{key:"question",required:!0,type:null},answers:{key:"answers",required:!0,type:Array},qIndex:{key:"qIndex",required:!0,type:Number}};f.setup=(e,s)=>{const t=e,n=a(()=>t.answers.find(o=>{var r,i;return((r=o.questionId)==null?void 0:r.value)===((i=t.question.id)==null?void 0:i.value)})),c=a(()=>{var o;return((o=n.value)==null?void 0:o.riskScore)||0}),d=a(()=>{var r,i,u,p;const o=(r=n.value)==null?void 0:r.answer.oneofKind;if(o==="answerText")return(i=n.value)==null?void 0:i.answer.answerText;if(o==="answerId")return(p=(u=n.value)==null?void 0:u.answer.answerId)==null?void 0:p.value}),v=a(()=>t.answers.some(o=>{var r,i;return((r=o.questionId)==null?void 0:r.value)===((i=t.question.id)==null?void 0:i.value)})),l=a(()=>v.value?{type:"info",text:d.value}:{type:"warn",text:"This question has not been answered yet."});return{score:c,hasAnswered:v,toolTipInfo:l}};f.components=Object.assign({ToolTip:Y},f.components);var fe=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex items-start justify-between p-4"},[t("div",{staticClass:"flex items-start space-x-2"},[t("BaseLink",{attrs:{"display-type":"primary-prime",to:{path:`/client/companies/${e.accountId}/journey/custom-assessments/${e.responseId}`,query:{section:`${e.sIndex.toString()}`}}}},[e._v(" Question "+e._s(e.qIndex+1)+" ")]),t("ToolTip",{attrs:{type:e.toolTipInfo.type}},[e._v(" "+e._s(e.toolTipInfo.text)+" ")])],1),t("div",[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" Score: "+e._s(e.hasAnswered?e.score:"-")+" ")])],1)])},ge=[];const O={};var he=_(f,fe,ge,!1,we,null,null,null);function we(e){for(let s in O)this[s]=O[s]}const qe=function(){return he.exports}(),g={};g.props={accountId:{key:"accountId",required:!0,type:String},responseId:{key:"responseId",required:!0,type:String},section:{key:"section",required:!0,type:null},sIndex:{key:"sIndex",required:!0,type:Number},answers:{key:"answers",required:!0,type:Array},total:{key:"total",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};g.setup=(e,s)=>{const t=e;return{questions:a(()=>t.section.questions)}};g.components=Object.assign({QuestionnaireProgressBarText:P,QuestionOverview:qe},g.components);var $e=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex flex-col"},[t("QuestionnaireProgressBarText",{attrs:{score:e.total,max:e.max}}),t("ul",{staticClass:"divide-y"},e._l(e.questions,function(n,c){return t("li",{key:c},[t("QuestionOverview",{attrs:{"account-id":e.accountId,"response-id":e.responseId,"s-index":e.sIndex,question:n,answers:e.answers,"q-index":c}})],1)}),0)],1)},ke=[];const M={};var Ie=_(g,$e,ke,!1,Ce,null,null,null);function Ce(e){for(let s in M)this[s]=M[s]}const Se=function(){return Ie.exports}(),h={};h.props={accountId:{key:"accountId",required:!0,type:String},responseId:{key:"responseId",required:!0,type:String},section:{key:"section",required:!0,type:null},sIndex:{key:"sIndex",required:!0,type:Number},answers:{key:"answers",required:!0,type:Array}};h.setup=(e,s)=>{const t=e,n=T(!1),c=T(0),d=a(()=>{const l=[];return t.section.questions.forEach(o=>{const r=t.answers.find(i=>{var u,p;return((u=i.questionId)==null?void 0:u.value)===((p=o.id)==null?void 0:p.value)});r&&c.value++,l.push((r==null?void 0:r.riskScore)||0)}),l.reduce((o,r)=>o+r,0)}),v=a(()=>{const l=[];return t.section.questions.forEach(o=>{o.answerSet&&o.answerSet.answers.forEach(r=>l.push(r.riskScore))}),l.reduce((o,r)=>o+r,0)});return{isExpanded:n,questionsAnswered:c,total:d,max:v}};h.components=Object.assign({ToggleButton:z,TransitionExpand:X,SectionDetails:Se},h.components);var be=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex flex-col space-y-2"},[t("div",{staticClass:"flex flex-col -space-y-1"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"overline"}},[e._v(" Section "+e._s(e.sIndex+1)+" ")]),t("ToggleButton",{staticClass:"group hover:text-blue-800",scopedSlots:e._u([{key:"text",fn:function(){return[t("BaseTypography",{staticClass:"text-prime-navy group-hover:text-blue-800",attrs:{variant:"h6"}},[e._v(" "+e._s(e.section.name)+" ")])]},proxy:!0}]),model:{value:e.isExpanded,callback:function(n){e.isExpanded=n},expression:"isExpanded"}})],1),t("BaseSimpleCard",[t("div",{staticClass:"grid grid-cols-2 items-center gap-x-4 p-4 sm:gap-x-6"},[t("div",{staticClass:"col-span-2"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p3"}},[e._v(" "+e._s(e.questionsAnswered)+" of "+e._s(e.section.questions.length)+" Questions ")])],1),t("div",{staticClass:"col-span-1 flex flex-col items-center"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" Total Risk ")]),t("BaseTypography",{staticClass:"text-prime-indigo",attrs:{variant:"h2"}},[e._v(" "+e._s(e.total)+" ")])],1),t("div",{staticClass:"col-span-1 flex flex-col items-center"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" Max Risk ")]),t("BaseTypography",{staticClass:"text-prime-indigo",attrs:{variant:"h2"}},[e._v(" "+e._s(e.max)+" ")])],1)]),t("TransitionExpand",[e.isExpanded?t("SectionDetails",{attrs:{"account-id":e.accountId,"response-id":e.responseId,section:e.section,"s-index":e.sIndex,answers:e.answers,total:e.total,max:e.max}}):e._e()],1)],1)],1)},Te=[];const N={};var Be=_(h,be,Te,!1,Ee,null,null,null);function Ee(e){for(let s in N)this[s]=N[s]}const je=function(){return Be.exports}(),w={};w.props={accountId:{key:"accountId",required:!0,type:String},responseId:{key:"responseId",required:!0,type:String},value:{key:"value",required:!0,type:null},questionAnswers:{key:"questionAnswers",required:!0,type:Array}};w.setup=(e,s)=>{const t=e,n=a(()=>t.value),c=a(()=>t.questionAnswers),d=a(()=>{const r=[];return c.value.forEach(i=>r.push(i.riskScore)),r.reduce((i,u)=>i+u,0)}),v=a(()=>{const r=[];return n.value.sections.forEach(i=>{i.questions.forEach(u=>{u.answerSet&&u.answerSet.answers.forEach($=>r.push($.riskScore))})}),r.reduce((i,u)=>i+u,0)}),l=a(()=>({title:"Total Score / Overview",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Veritatis saepe ullam laborum accusantium itaque, enim commodinumquam incidunt, id autem pariatur sit ut qui libero eos amet molestias inventore ab.",score:d.value,max:v.value})),o=a(()=>{var r;return(r=n.value)==null?void 0:r.sections});return{answers:c,overview:l,sections:o}};w.components=Object.assign({QuestionnaireSummaryOverview:ye,SectionOverview:je},w.components);var Qe=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",{staticClass:"space-y-8"},[t("QuestionnaireSummaryOverview",{attrs:{value:e.overview}}),t("ul",{staticClass:"grid gap-4 lg:gap-8 xl:grid-cols-2 2xl:grid-cols-3"},e._l(e.sections,function(n,c){return t("li",{key:c},[t("SectionOverview",{attrs:{"account-id":e.accountId,"response-id":e.responseId,section:n,"s-index":c,answers:e.answers}})],1)}),0)],1)},Re=[];const F={};var Ae=_(w,Qe,Re,!1,Oe,null,null,null);function Oe(e){for(let s in F)this[s]=F[s]}const Me=function(){return Ae.exports}(),q={};q.setup=(e,s)=>{const t=B("id"),n=B("takenId"),c=K.read(n),d=a(()=>c.data.value),v=a(()=>{var u,p;return(p=(u=d.value)==null?void 0:u.questionnaireId)==null?void 0:p.value}),l=V.read(v),o=a(()=>l.data.value||J.CustomQuestionnaire.create()),r=U.list(n),i=a(()=>{var u;return((u=r.data.value)==null?void 0:u.sort((p,$)=>{var I,C,S,b;const D=((C=(I=p.meta)==null?void 0:I.updatedAt)==null?void 0:C.value)||"";return(((b=(S=$.meta)==null?void 0:S.updatedAt)==null?void 0:b.value)||"").localeCompare(D)}))||[]});return{id:t,takenId:n,questionnaireRead:l,questionnaire:o,answersList:r,answers:i}};q.components=Object.assign({LoadingSpinner:G,QuestionnaireReview:Me},q.components);var Ne=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.questionnaireRead.isLoading.value||e.answersList.isLoading.value?t("LoadingSpinner"):t("section",[t("QuestionnaireReview",{attrs:{"account-id":e.id,"response-id":e.takenId,value:e.questionnaire,"question-answers":e.answers}})],1)},Fe=[];const L={};var Le=_(q,Ne,Fe,!1,Pe,null,null,null);function Pe(e){for(let s in L)this[s]=L[s]}const Ke=function(){return Le.exports}();export{Ke as default};
