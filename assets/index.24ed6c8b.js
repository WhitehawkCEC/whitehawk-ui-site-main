import{c as i,n as v,cz as L,bn as F,b as P,r as b,L as D,c7 as S,c0 as z,b_ as G,cF as H,cG as W}from"./index.a478453f.js";import{a as I}from"./index.ebbce841.js";import{T as K}from"./ToolTip.1dc51429.js";import{T as V}from"./TransitionExpand.48f3e95d.js";const k={};k.props={score:{key:"score",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};k.setup=(e,s)=>{const t=e,n=i(()=>200-t.score/t.max*200),c=i(()=>`gradient-${Math.random()}`),d=i(()=>t.score>=740?"#10b981":t.score>=640?"#fde68a":"#ef4444");return{fill:n,gradientId:c,displayColor:d}};var J=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("svg",{attrs:{viewBox:"0 0 90 80",preserveAspectRatio:"none"}},[t("defs",[t("linearGradient",{attrs:{id:`${e.gradientId}`,x1:"15%",y1:"100%",x2:"80%",y2:"100%"}},[t("stop",{attrs:{offset:"0%","stop-color":`${e.displayColor}`}}),t("stop",{attrs:{offset:"100%","stop-color":`${e.displayColor}`}})],1)],1),t("path",{staticClass:"stroke-current text-gray-200 shadow-inner",attrs:{d:"M20,75 a40,40,0,1,1,50,0",fill:"none","stroke-linecap":"round","stroke-width":"3"}}),t("path",{staticClass:"filling transition duration-300",style:`--fill: ${e.fill}`,attrs:{d:"M20,75 a40,40,0,1,1,50,0",fill:"none",stroke:`url(#${e.gradientId})`,"stroke-dasharray":"200","stroke-dashoffset":"200","stroke-linecap":"round","stroke-width":"3"}})])},U=[];const T={};var X=v(k,J,U,!1,Y,"62ebebb3",null,null);function Y(e){for(let s in T)this[s]=T[s]}const Z=function(){return X.exports}(),m={};m.props={score:{key:"score",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};m.setup=(e,s)=>{const t=e,n=i(()=>t.score===0&&t.max===0),c=i(()=>isNaN(t.score/t.max)?I(0):I(t.score/t.max));return{shouldHide:n,percentage:c}};m.components=Object.assign({QuestionnaireProgressBar:Z},m.components);var ee=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.shouldHide?t("div",{staticClass:"flex p-4"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" Long form input requires examination by a Cyber Analyst. ")])],1):t("div",{staticClass:"relative flex items-center justify-center p-4"},[t("div",{staticClass:"absolute flex items-center"},[t("BaseTypography",{staticClass:"text-blue-800",attrs:{variant:"h2"}},[e._v(" "+e._s(e.percentage)+" ")])],1),t("div",{staticClass:"relative w-44 sm:w-56 lg:w-44 xl:w-56"},[t("QuestionnaireProgressBar",{attrs:{score:e.score,max:e.max}})],1)])},te=[];const B={};var se=v(m,ee,te,!1,re,null,null,null);function re(e){for(let s in B)this[s]=B[s]}const N=function(){return se.exports}(),x={};x.props={score:{key:"score",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};x.setup=(e,s)=>({});x.components=Object.assign({DotsSquare:L,QuestionnaireProgressBarText:N},x.components);var ne=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"relative mx-auto flex max-w-xs flex-col items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-blue-100 via-white to-white px-4 py-8 shadow-md sm:max-w-sm sm:rounded-3xl xl:max-w-none xl:p-12"},[t("div",{staticClass:"absolute top-full left-full -translate-y-1/3 -translate-x-1/3 rotate-45 transform xl:-translate-y-1/2"},[t("DotsSquare",{attrs:{color:"blue"}})],1),t("QuestionnaireProgressBarText",{attrs:{score:e.score,max:e.max}})],1)},ae=[];const E={};var ie=v(x,ne,ae,!1,oe,null,null,null);function oe(e){for(let s in E)this[s]=E[s]}const ce=function(){return ie.exports}(),y={};y.props={value:{key:"value",required:!0,type:null}};y.setup=(e,s)=>({});y.components=Object.assign({WaveForm:F,QuestionnaireScoreDisplay:ce},y.components);var ue=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"relative flex flex-col items-center justify-center lg:grid lg:grid-cols-12"},[t("div",{staticClass:"absolute top-36 w-full opacity-25 sm:top-40 lg:hidden"},[t("WaveForm")],1),t("div",{staticClass:"relative -mb-36 lg:col-span-4 lg:col-start-1 lg:row-start-1 lg:mb-0"},[t("div",{staticClass:"px-6 md:px-8 lg:px-4 lg:pl-0"},[t("QuestionnaireScoreDisplay",{attrs:{score:e.value.score,max:e.value.max}})],1)]),t("BaseSimpleCard",{staticClass:"pt-32 lg:col-span-10 lg:col-start-3 lg:row-start-1 lg:h-fit lg:p-0"},[t("div",{staticClass:"grid items-center gap-5 px-6 py-10 sm:p-8 lg:grid-cols-10 lg:col-start-3 lg:gap-0 lg:p-6 text-center lg:text-left"},[t("div",{staticClass:"grid gap-5 lg:col-span-10 lg:col-start-3"},[t("BaseTypography",{staticClass:"text-prime-navy",attrs:{component:"h2",variant:"h5"}},[e._v(" "+e._s(e.value.title)+" ")]),t("BaseTypography",{staticClass:"text-gray-600",attrs:{component:"p",variant:"p1"}},[e._v(" "+e._s(e.value.description)+" ")])],1)])])],1)},le=[];const j={};var de=v(y,ue,le,!1,pe,null,null,null);function pe(e){for(let s in j)this[s]=j[s]}const _e=function(){return de.exports}(),f={};f.props={id:{key:"id",required:!0,type:String},questionnaireId:{key:"questionnaireId",required:!0,type:String},sIndex:{key:"sIndex",required:!0,type:Number},question:{key:"question",required:!0,type:null},answers:{key:"answers",required:!0,type:Array},qIndex:{key:"qIndex",required:!0,type:Number}};f.setup=(e,s)=>{const t=e,n=i(()=>t.answers.find(a=>{var r,o;return((r=a.questionId)==null?void 0:r.value)===((o=t.question.id)==null?void 0:o.value)})),c=i(()=>{var a;return((a=n.value)==null?void 0:a.riskScore)||0}),d=i(()=>{var r,o,u,_;const a=(r=n.value)==null?void 0:r.answer.oneofKind;if(a==="answerText")return(o=n.value)==null?void 0:o.answer.answerText;if(a==="answerId")return(_=(u=n.value)==null?void 0:u.answer.answerId)==null?void 0:_.value}),p=i(()=>t.answers.some(a=>{var r,o;return((r=a.questionId)==null?void 0:r.value)===((o=t.question.id)==null?void 0:o.value)})),l=i(()=>p.value?{type:"info",text:d.value}:{type:"warn",text:"This question has not been answered yet."});return{score:c,hasAnswered:p,toolTipInfo:l}};f.components=Object.assign({ToolTip:K},f.components);var ve=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex items-start justify-between p-4"},[t("div",{staticClass:"flex items-start space-x-2"},[t("BaseLink",{attrs:{"display-type":"primary-prime",to:{path:`/client/companies/${e.id}/journey/custom-assessments/${e.questionnaireId}`,query:{section:`${e.sIndex.toString()}`}}}},[e._v(" Question "+e._s(e.qIndex+1)+" ")]),t("ToolTip",{attrs:{type:e.toolTipInfo.type}},[e._v(" "+e._s(e.toolTipInfo.text)+" ")])],1),t("div",[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" Score: "+e._s(e.hasAnswered?e.score:"-")+" ")])],1)])},me=[];const Q={};var xe=v(f,ve,me,!1,ye,null,null,null);function ye(e){for(let s in Q)this[s]=Q[s]}const fe=function(){return xe.exports}(),g={};g.props={id:{key:"id",required:!0,type:String},questionnaireId:{key:"questionnaireId",required:!0,type:String},section:{key:"section",required:!0,type:null},sIndex:{key:"sIndex",required:!0,type:Number},answers:{key:"answers",required:!0,type:Array},total:{key:"total",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};g.setup=(e,s)=>{const t=e;return{questions:i(()=>t.section.questions)}};g.components=Object.assign({QuestionnaireProgressBarText:N,QuestionOverview:fe},g.components);var ge=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex flex-col"},[t("QuestionnaireProgressBarText",{attrs:{score:e.total,max:e.max}}),t("ul",{staticClass:"divide-y"},e._l(e.questions,function(n,c){return t("li",{key:c},[t("QuestionOverview",{attrs:{id:e.id,"questionnaire-id":e.questionnaireId,"s-index":e.sIndex,question:n,answers:e.answers,"q-index":c}})],1)}),0)],1)},qe=[];const R={};var he=v(g,ge,qe,!1,we,null,null,null);function we(e){for(let s in R)this[s]=R[s]}const $e=function(){return he.exports}(),q={};q.props={id:{key:"id",required:!0,type:String},questionnaireId:{key:"questionnaireId",required:!0,type:String},section:{key:"section",required:!0,type:null},sIndex:{key:"sIndex",required:!0,type:Number},answers:{key:"answers",required:!0,type:Array}};q.setup=(e,s)=>{const t=e,n=b(!1),c=b(0),d=i(()=>{const l=[];return t.section.questions.forEach(a=>{const r=t.answers.find(o=>{var u,_;return((u=o.questionId)==null?void 0:u.value)===((_=a.id)==null?void 0:_.value)});r&&c.value++,l.push((r==null?void 0:r.riskScore)||0)}),l.reduce((a,r)=>a+r,0)}),p=i(()=>{const l=[];return t.section.questions.forEach(a=>{a.answerSet&&a.answerSet.answers.forEach(r=>l.push(r.riskScore))}),l.reduce((a,r)=>a+r,0)});return{isExpanded:n,questionsAnswered:c,total:d,max:p}};q.components=Object.assign({ToggleButton:P,TransitionExpand:V,SectionDetails:$e},q.components);var ke=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex flex-col space-y-2"},[t("div",{staticClass:"flex flex-col -space-y-1"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"overline"}},[e._v(" Section "+e._s(e.sIndex+1)+" ")]),t("ToggleButton",{staticClass:"group hover:text-blue-800",scopedSlots:e._u([{key:"text",fn:function(){return[t("BaseTypography",{staticClass:"text-prime-navy group-hover:text-blue-800",attrs:{variant:"h6"}},[e._v(" "+e._s(e.section.name)+" ")])]},proxy:!0}]),model:{value:e.isExpanded,callback:function(n){e.isExpanded=n},expression:"isExpanded"}})],1),t("BaseSimpleCard",[t("div",{staticClass:"grid gap-x-4 grid-cols-2 sm:gap-x-6 items-center p-4"},[t("div",{staticClass:"col-span-2"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p3"}},[e._v(" "+e._s(e.questionsAnswered)+" of "+e._s(e.section.questions.length)+" Questions ")])],1),t("div",{staticClass:"col-span-1 flex flex-col items-center"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" Total Risk ")]),t("BaseTypography",{staticClass:"text-prime-indigo",attrs:{variant:"h2"}},[e._v(" "+e._s(e.total)+" ")])],1),t("div",{staticClass:"col-span-1 flex flex-col items-center"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" Max Risk ")]),t("BaseTypography",{staticClass:"text-prime-indigo",attrs:{variant:"h2"}},[e._v(" "+e._s(e.max)+" ")])],1)]),t("TransitionExpand",[e.isExpanded?t("SectionDetails",{attrs:{id:e.id,"questionnaire-id":e.questionnaireId,section:e.section,"s-index":e.sIndex,answers:e.answers,total:e.total,max:e.max}}):e._e()],1)],1)],1)},Ce=[];const O={};var be=v(q,ke,Ce,!1,Se,null,null,null);function Se(e){for(let s in O)this[s]=O[s]}const Ie=function(){return be.exports}(),h={};h.props={id:{key:"id",required:!0,type:String},questionnaireId:{key:"questionnaireId",required:!0,type:String},value:{key:"value",required:!0,type:null},questionAnswers:{key:"questionAnswers",required:!0,type:Array}};h.setup=(e,s)=>{const t=e,n=i(()=>t.value),c=i(()=>t.questionAnswers),d=i(()=>{const r=[];return c.value.forEach(o=>r.push(o.riskScore)),r.reduce((o,u)=>o+u,0)}),p=i(()=>{const r=[];return n.value.sections.forEach(o=>{o.questions.forEach(u=>{u.answerSet&&u.answerSet.answers.forEach($=>r.push($.riskScore))})}),r.reduce((o,u)=>o+u,0)}),l=i(()=>({title:"Total Score / Overview",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Veritatis saepe ullam laborum accusantium itaque, enim commodinumquam incidunt, id autem pariatur sit ut qui libero eos amet molestias inventore ab.",score:d.value,max:p.value})),a=i(()=>{var r;return(r=n.value)==null?void 0:r.sections});return{answers:c,overview:l,sections:a}};h.components=Object.assign({QuestionnaireSummaryOverview:_e,SectionOverview:Ie},h.components);var Te=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",{staticClass:"space-y-8"},[t("QuestionnaireSummaryOverview",{attrs:{value:e.overview}}),t("ul",{staticClass:"grid gap-4 xl:grid-cols-2 2xl:grid-cols-3 lg:gap-8"},e._l(e.sections,function(n,c){return t("li",{key:c},[t("SectionOverview",{attrs:{id:e.id,"questionnaire-id":e.questionnaireId,section:n,"s-index":c,answers:e.answers}})],1)}),0)],1)},Be=[];const A={};var Ee=v(h,Te,Be,!1,je,null,null,null);function je(e){for(let s in A)this[s]=A[s]}const Qe=function(){return Ee.exports}(),w={};w.setup=(e,s)=>{const t=S("id"),n=S("questionnaireId"),c=z.read(n),d=i(()=>c.data.value||G.CustomQuestionnaire.create()),p=H.list(t),l=i(()=>{var o,u,_;return(_=(u=(o=p.data.value)==null?void 0:o.find($=>{var C;return((C=$.questionnaireId)==null?void 0:C.value)===n.value}))==null?void 0:u.id)==null?void 0:_.value}),a=W.list(l),r=i(()=>a.data.value||[]);return{id:t,questionnaireId:n,questionnaireRead:c,questionnaire:d,takenList:p,answersList:a,answers:r}};w.components=Object.assign({LoadingSpinner:D,QuestionnaireReview:Qe},w.components);var Re=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.questionnaireRead.isLoading.value||e.takenList.isLoading.value||e.answersList.isLoading.value?t("LoadingSpinner"):t("section",[t("QuestionnaireReview",{attrs:{id:e.id,"questionnaire-id":e.questionnaireId,value:e.questionnaire,"question-answers":e.answers}})],1)},Oe=[];const M={};var Ae=v(w,Re,Oe,!1,Me,null,null,null);function Me(e){for(let s in M)this[s]=M[s]}const De=function(){return Ae.exports}();export{De as default};
