import{E as S}from"./exclamation-triangle.54812a62.js";import{d as P,aJ as C,aS as T,n as v,aq as B,b_ as M,r as d,aG as $}from"./index.919da4e3.js";import{B as k}from"./BasicModal.124095af.js";import{A,T as E}from"./AppTanStackTable.942da035.js";import{c as j}from"./createOnChangeFn.13eef65c.js";import{u as q}from"./createSimpleTable.117a4d02.js";import{u as f}from"./useManufacturerProducts.569b1995.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.b7cb340f.js";import"./chevron-up.736f4142.js";const c={};c.props={id:{key:"id",required:!0,type:String},products:{key:"products",required:!0,type:Array}};c.setup=(t,s)=>{const e=t,r=s.emit,o=P(()=>e.products),u=C(),a=j(),l=[a.accessor("id",{header:()=>"Id",enableColumnFilter:!1}),a.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),a.accessor(n=>n.type.name,{id:"type",header:()=>"Type",enableColumnFilter:!1}),a.display({id:"actions",header:"Actions",cell:({row:n})=>T(E,{props:{actions:[{id:"view",action(){u.push(`/admin/manufacturers/${e.id}/products/${n.original.id}`)}},{id:"delete",action(){r("delete",n.original)}}]}})})];return{instance:q(o,l)}};c.components=Object.assign({AppTanStackTable:A},c.components);var F=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("AppTanStackTable",{attrs:{table:t.instance}})},N=[];const _={};var V=v(c,F,N,!1,I,null,null,null);function I(t){for(let s in _)this[s]=_[s]}const O=function(){return V.exports}(),i={};i.setup=(t,s)=>{const e=M("id"),r=f.list(e),o=d(),u=d(),a=d(!1);function l(g){const{id:h,name:w}=g;o.value=h,u.value=w,a.value=!0}const p=f.delete(e,o),n=2,x=$();async function b(){if(o)await p.mutateAsync(),x.success("Successfully deleted manufacturer.");else throw new Error("Invalid request.");m()}function m(){a.value=!1}return{id:e,productsQuery:r,productName:u,isModalVisible:a,setPayload:l,isOnlyProduct:n,deleteProduct:b,closeModal:m}};i.components=Object.assign({PlusSvg:B,ManufacturerProductsTable:O,BasicModal:k,WarningSvg:S},i.components);var R=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",[e("BaseTablePageLayout",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Products")]},proxy:!0},{key:"button",fn:function(){return[e("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{to:`/admin/manufacturers/${t.id}/products/new`}},[e("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),e("span",[t._v("Product")])],1)]},proxy:!0},{key:"table",fn:function(){return[e("BaseVueQuery",{attrs:{query:t.productsQuery},scopedSlots:t._u([{key:"success",fn:function(r){var o=r.data;return[e("ManufacturerProductsTable",{attrs:{id:t.id,products:o},on:{delete:t.setPayload}})]}}])})]},proxy:!0}])}),e("BasicModal",{directives:[{name:"show",rawName:"v-show",value:t.isModalVisible,expression:"isModalVisible"}],on:{close:t.closeModal},scopedSlots:t._u([{key:"body",fn:function(){return[e("div",{staticClass:"flex flex-col items-center justify-center space-y-8 px-5"},[e("BaseIcon",{staticClass:"mx-auto max-w-min lg:mx-0 lg:max-w-none",attrs:{color:"danger",shape:"round"}},[e("WarningSvg",{staticClass:"h-auto w-5"})],1),e("BaseTypography",{staticClass:"text-gray-500",attrs:{component:"h2",variant:"subtitle3"}},[t._v(" Are you sure you want to delete "),e("span",{staticClass:"text-red-500"},[t._v(t._s(t.productName))]),t._v(" product? "),t.isOnlyProduct===1?e("BaseTypography",{staticClass:"text-gray-500",attrs:{component:"h2",variant:"subtitle3"}},[e("span",{staticClass:"text-red-500"},[t._v(t._s(t.id))]),t._v(" manufacturer will be without single product. ")]):t._e()],1),e("div",{staticClass:"py-4"},[e("BaseButton",{attrs:{"display-type":"danger",action:"secondary"},on:{click:t.deleteProduct}},[t._v(" Delete Product ")])],1)],1)]},proxy:!0}])})],1)},Q=[];const y={};var D=v(i,R,Q,!1,H,null,null,null);function H(t){for(let s in y)this[s]=y[s]}const et=function(){return D.exports}();export{et as default};
