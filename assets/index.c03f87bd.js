import{F as B}from"./FormButton.dcb6209f.js";import{E as K}from"./arrow-top-right-on-square.b063d2af.js";import{aq as S,br as A,d as i,am as I,aC as E,n as v,ax as L,c7 as w,co as k,cX as T,cY as D,aF as M}from"./index.e1f29fa0.js";import{A as j}from"./ApiKeyInput.eac9ae3e.js";import{s as R}from"./index.61663a14.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./ApiKeyValidation.b4eb9c8c.js";import"./ApiKeyDescriptionDisplay.a21bbbf6.js";var F=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},e.$listeners),[t("path",{attrs:{"fill-rule":"evenodd",d:"m5.965 4.904 9.131 9.131a6.5 6.5 0 0 0-9.131-9.131zm8.07 10.192L4.904 5.965a6.5 6.5 0 0 0 9.131 9.131zM4.343 4.343a8 8 0 1 1 11.314 11.314A8 8 0 0 1 4.343 4.343z","clip-rule":"evenodd"}})])};const O={render:F},p={};p.props={accessToken:{key:"accessToken",required:!1,type:String}};p.setup=(e,a)=>{const t=e,n=i(()=>I.get(`${E}https://app.blackkitetech.com/api/v2/status`,{headers:{authorization:`Bearer ${t.accessToken}`}}));function c(r){return new Date(r).toISOString()}return{validityCheck:n,formatDate:c}};p.components=Object.assign({CheckSvg:S,DateIsoStringDisplay:A,NoSvg:O},p.components);var q=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.accessToken!==void 0?t("BasePromise",{attrs:{promise:e.validityCheck},scopedSlots:e._u([{key:"success",fn:function(n){var c=n.result.data.ExpirationDateOfClientCredential;return[t("span",{staticClass:"inline-flex items-center space-x-1"},[t("CheckSvg",{staticClass:"-ml-1 h-auto w-4 shrink-0 text-green-600"}),c?t("BaseTypography",{staticClass:"text-green-600",attrs:{variant:"p3"}},[e._v(" Expires At: "),t("DateIsoStringDisplay",{attrs:{value:e.formatDate(c),format:"date"}})],1):e._e()],1)]}},{key:"error",fn:function(){return[t("span",{staticClass:"inline-flex items-center space-x-1"},[t("NoSvg",{staticClass:"-ml-1 h-auto w-4 shrink-0 text-red-600"}),t("BaseTypography",{staticClass:"text-red-600",attrs:{variant:"p3"}},[e._v(" Invalid Credentials ")])],1)]},proxy:!0}],null,!1,1295110825)}):e._e()},z=[];const h={};var P=v(p,q,z,!1,U,null,null,null);function U(e){for(let a in h)this[a]=h[a]}const N=function(){return P.exports}(),u={};u.props={id:{key:"id",required:!0,type:String},secret:{key:"secret",required:!0,type:String}};u.setup=(e,a)=>{const t=e;return{accessToken:i(()=>I.post(`${E}https://app.blackkitetech.com/api/v2/oauth/token`,{grant_type:"client_credentials",client_id:t.id,client_secret:t.secret}))}};u.components=Object.assign({ApiKeyValidationV2:N},u.components);var G=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("BasePromise",{attrs:{promise:e.accessToken},scopedSlots:e._u([{key:"success",fn:function(n){var c=n.result.data.access_token;return[t("ApiKeyValidationV2",{attrs:{"access-token":c}})]}}])})},W=[];const x={};var X=v(u,G,W,!1,Y,null,null,null);function Y(e){for(let a in x)this[a]=x[a]}const H=function(){return X.exports}(),m={};m.props={value:{key:"value",required:!1,type:null},ecosystems:{key:"ecosystems",required:!0,type:Array}};m.setup=(e,a)=>{const t=e,n=a.emit,c=L(t,n),r=i({get(){var _;const s=(_=t.value)==null?void 0:_.apiKeyMaybe;if((s==null?void 0:s.oneofKind)==="apiKey")return s.apiKey},set(s){s?c.value.apiKeyMaybe={oneofKind:"apiKey",apiKey:s}:c.value.apiKeyMaybe={oneofKind:void 0}}}),o=i({get(){var s;return(s=t.value)==null?void 0:s.mappedEcosystemId},set(s){s&&(c.value.mappedEcosystemId=s)}}),f=i(()=>o.value?`https://app.blackkitetech.com/ecosystem/companies?ecoId=${encodeURIComponent(o.value)}`:"https://app.blackkitetech.com/ecosystem/companies#ecosystemListTab"),l=i({get(){var s;return(s=t.value)==null?void 0:s.mappedEntityId},set(s){s&&(c.value.mappedEntityId=s)}}),y=i(()=>o.value&&l.value?`https://app.blackkitetech.com/ecosystem/${encodeURIComponent(o.value)}/company/${encodeURIComponent(l.value)}/dashboard`:"https://app.blackkitetech.com/ecosystem/companies"),b=i({get(){var s;return(s=t.value)==null?void 0:s.clientId},set(s){s&&(c.value.clientId=s)}}),$=i({get(){var s;return(s=t.value)==null?void 0:s.secret},set(s){s&&(c.value.secret=s)}});return{apiKey:r,mappedEcosystemId:o,mappedEcosystemLink:f,mappedEntityId:l,mappedEntityLink:y,clientId:b,secret:$}};m.components=Object.assign({ApiKeyInput:j,ExternalLinkSvg:K,ApiAccessToken:H},m.components);var J=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"space-y-8"},[t("BaseLabel",{staticClass:"space-y-1"},[t("span",[e._v("API Key:")]),t("ApiKeyInput",{model:{value:e.apiKey,callback:function(n){e.apiKey=n},expression:"apiKey"}})],1),t("BaseLabel",{staticClass:"flex flex-col space-y-1"},[t("span",[e._v("Mapped Ecosystem:")]),t("BaseExternalLink",{staticClass:"space-x-2",attrs:{"display-type":"primary",href:e.mappedEcosystemLink}},[t("ExternalLinkSvg",{staticClass:"h-auto w-5 shrink-0"}),t("span",[e._v("Check Mapped Ecosystem")])],1),t("BaseInput",{staticClass:"w-full",model:{value:e.mappedEcosystemId,callback:function(n){e.mappedEcosystemId=e._n(n)},expression:"mappedEcosystemId"}})],1),t("BaseLabel",{staticClass:"flex flex-col space-y-1"},[t("span",[e._v("Mapped Entity:")]),t("BaseExternalLink",{staticClass:"space-x-2",attrs:{"display-type":"primary",href:e.mappedEntityLink}},[t("ExternalLinkSvg",{staticClass:"h-auto w-5 shrink-0"}),t("span",[e._v("Check Mapped Entity")])],1),t("BaseInput",{staticClass:"w-full",model:{value:e.mappedEntityId,callback:function(n){e.mappedEntityId=e._n(n)},expression:"mappedEntityId"}})],1),t("BaseLabel",{staticClass:"space-y-1"},[t("div",{staticClass:"flex flex-col space-y-1 sm:flex-row sm:items-center sm:justify-between sm:space-y-0"},[t("span",[e._v("Client ID:")]),e.clientId&&e.secret?t("ApiAccessToken",{attrs:{id:e.clientId,secret:e.secret}}):e._e()],1),t("BaseInput",{staticClass:"w-full",model:{value:e.clientId,callback:function(n){e.clientId=n},expression:"clientId"}})],1),t("BaseLabel",{staticClass:"space-y-1"},[t("span",[e._v("Client Secret:")]),t("BaseInput",{staticClass:"w-full",model:{value:e.secret,callback:function(n){e.secret=n},expression:"secret"}})],1)],1)},Q=[];const C={};var Z=v(m,J,Q,!1,V,null,null,null);function V(e){for(let a in C)this[a]=C[a]}const ee=function(){return Z.exports}(),d={};d.setup=(e,a)=>{const t=w("id"),n=k.get(t),c=R(i(()=>n.data.value||T.create())),r=D.list(t),o=i(()=>r.data.value||[]),f=M(),l=k.set(t);async function y(){await l.mutateAsync(c.value),f.success("Successfully updated config.")}return{config:c,ecosystems:o,submit:y}};d.components=Object.assign({BlackKiteConfigInput:ee,FormButton:B},d.components);var te=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"block p-4",attrs:{variant:"subtitle3"}},[e._v(" Configure Black Kite ")]),t("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),e.submit.apply(null,arguments)}}},[t("div",{staticClass:"p-4"},[t("BlackKiteConfigInput",{attrs:{ecosystems:e.ecosystems},model:{value:e.config,callback:function(n){e.config=n},expression:"config"}})],1),t("FormButton",{attrs:{action:"save"}})],1)],1)},se=[];const g={};var ae=v(d,te,se,!1,ne,null,null,null);function ne(e){for(let a in g)this[a]=g[a]}const ve=function(){return ae.exports}();export{ve as default};
