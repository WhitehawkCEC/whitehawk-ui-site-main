import{bU as A,aS as y,n as x,an as k,bT as b,d,b as m,bV as I,aF as M}from"./index.b7714616.js";import{B as V}from"./BasicConfirmModal.2802ab60.js";import{A as w,T as B}from"./AppTanStackTable.d788747f.js";import{I as F}from"./IsoDateTimeDisplay.bdb6f26d.js";import{c as D}from"./createOnChangeFn.81b39edf.js";import{u as j}from"./createSimpleTable.1af2a061.js";import"./BasicModal.cd22d17a.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-up.736f4142.js";const i={};i.props={categories:{key:"categories",required:!0,type:Array}};i.setup=(e,s)=>{const t=e,{categories:f}=A(t),r=s.emit,l=D(),u=[l.accessor(o=>{var a;return(a=o.id)==null?void 0:a.value},{id:"id",header:()=>"ID",enableColumnFilter:!1}),l.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),l.accessor(o=>{var a;return(a=o.meta)==null?void 0:a.updatedAt},{id:"updatedAt",header:()=>"Last Updated",cell:o=>y(F,{props:{value:o.getValue(),format:"date"}}),enableColumnFilter:!1}),l.display({id:"actions",header:"Actions",cell:({row:o})=>{var a;return y(B,{props:{actions:[{id:"edit",to:`/admin/products/categories/${(a=o.original.id)==null?void 0:a.value}`},{id:"delete",action(){r("delete",o.original)}}]}})}})];return{instance:j(f,u)}};i.components=Object.assign({AppTanStackTable:w},i.components);var E=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},L=[];const C={};var R=x(i,E,L,!1,q,null,null,null);function q(e){for(let s in C)this[s]=C[s]}const G=function(){return R.exports}(),p={};p.setup=(e,s)=>{const t=b.list(),f=d(()=>t.data.value?t.data.value.sort((n,c)=>n.name.localeCompare(c.name)):[]),r=m(),l=m("Doing so will affect the following products and bundle sets:"),u=m();function v(n){var c;r.value=n,u.value=(c=n.id)==null?void 0:c.value,_.value=!0}const o=d(()=>u.value),a=d(()=>{var n;return(n=I.get(o.value).data)==null?void 0:n.value}),T=d(()=>{var n,c;if(a.value)return((n=a.value.bundleSets)==null?void 0:n.length)>0||((c=a.value.products)==null?void 0:c.length)>0?l.value:""}),P=M(),S=b.delete();async function $(){if(r.value)await S.mutateAsync({category:r.value}),g(),P.success(`Category ${r.value.name} successfully deleted`);else throw new Error("Invalid request.")}const _=m(!1);function g(){_.value=!1}return{categories:f,selected:r,setPayload:v,affectedItemsGet:a,checkValues:T,deleteCategory:$,isModalVisible:_,closeModal:g}};p.components=Object.assign({PlusSvg:k,ProductCategoriesTable:G,BasicConfirmModal:V},p.components);var H=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Product Categories")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"/admin/products/categories/new"}},[t("PlusSvg",{staticClass:"mr-1 w-5 xl:w-5"}),e._v(" Category ")],1)]},proxy:!0},{key:"table",fn:function(){return[t("ProductCategoriesTable",{attrs:{categories:e.categories},on:{delete:e.setPayload}})]},proxy:!0}])}),e.isModalVisible&&e.selected&&e.checkValues?t("BasicConfirmModal",{attrs:{name:e.selected.name,message:`${e.checkValues}`,"items-affected":e.affectedItemsGet,type:"Products"},on:{delete:e.deleteCategory,close:e.closeModal}}):e._e()],1)},N=[];const h={};var O=x(p,H,N,!1,U,null,null,null);function U(e){for(let s in h)this[s]=h[s]}const te=function(){return O.exports}();export{te as default};
