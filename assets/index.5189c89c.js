import{U as D}from"./arrow-down-on-square.bf61cdc5.js";import{T as Q}from"./trash.78f57a7a.js";import{I as U}from"./ImageInput.f01f18fd.js";import{ai as A,aT as C,aE as S,aP as g,aQ as m,d as I,aG as B,n as b,b_ as x,r as T,aB as q,aJ as M}from"./index.56af1370.js";import{P as R,u as j,a as k,b as F}from"./ProductInput.27a5f7ef.js";import{u as _}from"./useManufacturerProducts.1f64df02.js";import"./BasicModal.650a3e38.js";import"./DynamicForm.af317de4.js";const P={read(e){return A(["products",e,"image"],()=>g.get(`${m}/products/${e.value}/image`).then(s=>s.data),{retry:!1})},update(e){const s=C();return S(t=>g.put(`${m}/products/${e.value}/image`,t,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>a),{onSuccess(){s.invalidateQueries(["products",e]),s.invalidateQueries(["products",e,"image"])}})},delete(e){const s=C();return S(()=>g.delete(`${m}/products/${e.value}/image`).then(t=>t),{onSuccess(){s.invalidateQueries(["products",e]),s.invalidateQueries(["products",e,"image"])}})}},p={};p.props={productId:{key:"productId",required:!0,type:String}};p.setup=(e,s)=>{const t=e,a=I(()=>t.productId),u=I(()=>`${m}/products/${encodeURIComponent(a.value)}/image`),r=B(),o=P.update(a);async function n(c,d){const l=new FormData;l.append("data",c),(await o.mutateAsync(l)).status===204&&(d(),r.success("Successfully updated logo."))}const v=P.delete(a);async function y(c){confirm("Are you sure you want to remove this image?")&&(await v.mutateAsync()).status===204&&(c(),r.success("Successfully deleted logo."))}return{imageUrl:u,updateImage:n,removeImage:y}};p.components=Object.assign({ImageInput:U},p.components);var L=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{variant:"subtitle3",component:"h3"}},[e._v(" Product Logo ")]),t("ImageInput",{attrs:{url:e.imageUrl,"btn-text":"Change Logo"},on:{"update-image":e.updateImage,"remove-image":e.removeImage}})],1)},E=[];const $={};var O=b(p,L,E,!1,z,null,null,null);function z(e){for(let s in $)this[s]=$[s]}const G=function(){return O.exports}(),f={};f.setup=(e,s)=>{const t=x("id"),a=x("productId"),u=[j.list(),k.list(),F.list()],r=_.read(t,a),o=T();q(()=>r.data.value,i=>{i&&(o.value=i)},{immediate:!0});const n=M(),v=B(),y=_.update(t,a);async function c(){o.value&&await y.mutateAsync(o.value)&&v.success("Successfully updated product.")}const d=_.delete(t,a);async function l(){var h;confirm("Are you sure you want to delete the product "+((h=o.value)==null?void 0:h.name)+"?")&&(await d.mutateAsync(),n.push(`/admin/manufacturers/${t.value}/products`))}return{id:t,queries:u,product:o,updateProduct:c,deleteProduct:l}};f.components=Object.assign({ManufacturerProductLogoInput:G,ProductInput:R,SaveSvg:D,DeleteSvg:Q},f.components);var J=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",{staticClass:"space-y-8"},[t("ManufacturerProductLogoInput",{attrs:{"product-id":e.id}}),t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{variant:"subtitle3",component:"h3"}},[e._v(" Product Attributes ")]),t("form",{staticClass:"divide-y",on:{submit:function(a){return a.preventDefault(),e.updateProduct.apply(null,arguments)}}},[t("BaseVueQueries",{attrs:{queries:e.queries},scopedSlots:e._u([{key:"success",fn:function(a){var u=a[0],r=a[1],o=a[2];return[t("ProductInput",{attrs:{"is-id-readonly":!0,types:u,features:r,categories:o},model:{value:e.product,callback:function(n){e.product=n},expression:"product"}})]}}])}),t("div",{staticClass:"flex flex-col space-y-2 p-4 md:flex-row md:space-y-0 md:space-x-2"},[t("BaseButton",{staticClass:"w-full space-x-2 md:w-auto"},[t("SaveSvg",{staticClass:"h-auto w-4 xl:w-5"}),t("span",[e._v("Save")])],1),t("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{"display-type":"danger",action:"secondary"},on:{click:function(a){return a.preventDefault(),e.deleteProduct.apply(null,arguments)}}},[t("DeleteSvg",{staticClass:"h-auto w-4 xl:w-5"}),t("span",[e._v("Delete")])],1)],1)],1)],1)],1)},N=[];const w={};var H=b(f,J,N,!1,K,null,null,null);function K(e){for(let s in w)this[s]=w[s]}const ae=function(){return H.exports}();export{ae as default};
