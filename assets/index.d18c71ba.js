import{cB as D,cC as Q,c,cD as S,cA as b,r as y,cz as C,w as T,n as I,bG as h}from"./index.d7842beb.js";import{L as $}from"./LicenseTypeMapQuantitiesInput.ff8fe112.js";import{u as A}from"./LicenseTypeMapQuantities.6335eb76.js";import{L as M}from"./LicenseBatchUsageDisplay.b236e2c4.js";import"./index.997ac16c.js";import"./DynamicForm.461a2b0a.js";import"./calendar.aad8910e.js";import"./identification.ea2beb71.js";import"./AggregateLicenseDisplay.18f82142.js";import"./DateRangeDisplay.aca24a2d.js";import"./IsoDateTimeDisplay.0ee36ac5.js";import"./message_pb.d59c3261.js";const p={};p.props={accountId:{key:"accountId",required:!0,type:String},accountBatchId:{key:"accountBatchId",required:!0,type:String}};p.setup=(t,a)=>{const e=t,s=c(()=>e.accountId),i=c(()=>e.accountBatchId),m=S.create(s,i),u=b.read(s,i),o=c(()=>{var n,r,l;return(l=(r=(n=u.data.value)==null?void 0:n.value)==null?void 0:r.usage)==null?void 0:l.counts}),_=y(C.LicenseTypeMapQuantities.create()),v=y(!1);T(()=>o.value,n=>{var r,l;!n||v.value||(_.value={annual:((r=n.annual)==null?void 0:r.quantity)||0,oneTime:((l=n.oneTime)==null?void 0:l.quantity)||0},v.value=!0)},{immediate:!0});const f=A(o,_),x=c(()=>({quantitiesDiff:f.value})),L=c(()=>f.value.annual!==0||f.value.oneTime!==0);async function q(){await m.mutateAsync(x.value)}return{currentState:u,quantitiesDesired:_,canSubmit:L,submit:q}};p.components=Object.assign({BaseVueQuery:D,LicenseTypeMapQuantitiesInput:$,BaseButton:Q},p.components);var k=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("BaseSimpleCard",{staticClass:"divide-y"},[e("BaseTypography",{staticClass:"p-4",attrs:{component:"h2",variant:"subtitle3"}},[t._v(" Edit Quantities ")]),e("form",{staticClass:"divide-y",on:{submit:function(s){return s.preventDefault(),t.submit.apply(null,arguments)}}},[e("BaseVueQuery",{attrs:{query:t.currentState},scopedSlots:t._u([{key:"success",fn:function(){return[e("LicenseTypeMapQuantitiesInput",{model:{value:t.quantitiesDesired,callback:function(s){t.quantitiesDesired=s},expression:"quantitiesDesired"}})]},proxy:!0}])}),e("div",{staticClass:"p-4"},[e("BaseButton",{staticClass:"w-full md:w-auto",attrs:{action:"primary",shape:"rectangle","display-type":"success",disabled:!t.canSubmit}},[t._v(" Change ")])],1)],1)],1)},j=[];const B={};var w=I(p,k,j,!1,E,null,null,null);function E(t){for(let a in B)this[a]=B[a]}const F=function(){return w.exports}(),d={};d.setup=(t,a)=>{const e=h("id"),s=h("batchId"),i=b.read(e,s),m=c(()=>{var u,o;return((o=(u=i.data.value)==null?void 0:u.value)==null?void 0:o.usage)||C.LicenseBatchUsage.create()});return{id:e,batchId:s,licenseBatch:i,usage:m}};d.components=Object.assign({LicenseBatchUsageDisplay:M,AccountLicenseBatchQuantitiesChange:F},d.components);var R=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",[e("BaseVueQuery",{attrs:{query:t.licenseBatch},scopedSlots:t._u([{key:"success",fn:function(){return[e("div",{staticClass:"flex flex-col space-y-4"},[e("LicenseBatchUsageDisplay",{attrs:{value:t.usage}}),e("AccountLicenseBatchQuantitiesChange",{attrs:{"account-id":t.id,"account-batch-id":t.batchId}})],1)]},proxy:!0}])})],1)},U=[];const g={};var z=I(d,R,U,!1,O,null,null,null);function O(t){for(let a in g)this[a]=g[a]}const et=function(){return z.exports}();export{et as default};
