import{d as b,aS as F,n as T,an as S,bN as h,aF as $,b as v}from"./index.1543f442.js";import{B as A}from"./BasicConfirmModal.f241002d.js";import{A as C,T as M}from"./AppTanStackTable.666e7cbc.js";import{I as P}from"./IsoDateTimeDisplay.ad4424dd.js";import{c as k}from"./createOnChangeFn.4b472854.js";import{u as B}from"./createSimpleTable.a9e677bc.js";import"./BasicModal.eb4a590c.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-up.736f4142.js";const u={};u.props={features:{key:"features",required:!0,type:Array}};u.setup=(e,a)=>{const s=e,p=a.emit,f=b(()=>s.features),l=k(),r=[l.accessor(t=>{var n;return(n=t.id)==null?void 0:n.value},{id:"id",header:()=>"ID",enableColumnFilter:!1}),l.accessor("name",{id:"name",header:()=>"Feature",enableColumnFilter:!1}),l.accessor(t=>{var n;return(n=t.meta)==null?void 0:n.updatedAt},{id:"updatedAt",header:()=>"Last Updated",cell:t=>F(P,{props:{value:t.getValue(),format:"date"}}),enableColumnFilter:!1}),l.display({id:"actions",header:"Actions",cell:({row:t})=>{var n;return F(M,{props:{actions:[{id:"edit",to:`/admin/products/features/${(n=t.original.id)==null?void 0:n.value}`},{id:"delete",action(){if(t.original&&t.original.id){const _=t.original.id.value,i=t.original.name,d=t.original.description;p("delete",{id:{value:_},name:i,description:d})}}}]}})}})];return{instance:B(f,r)}};u.components=Object.assign({AppTanStackTable:C},u.components);var w=function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("AppTanStackTable",{attrs:{table:e.instance}})},I=[];const x={};var N=T(u,w,I,!1,V,null,null,null);function V(e){for(let a in x)this[a]=x[a]}const j=function(){return N.exports}(),m={};m.setup=(e,a)=>{const s=h.list(),p=b(()=>{var o;return((o=s.data.value)==null?void 0:o.productFeatures)||[]}),f=$(),l=h.delete(),r=v(),y=v();function t(o){var c;r.value={productFeature:{...o}},y.value=(c=o==null?void 0:o.id)==null?void 0:c.value,i.value=!0}const n=b(()=>{var o,c;return(c=(o=r==null?void 0:r.value)==null?void 0:o.productFeature)==null?void 0:c.name});async function _(){if(r.value)await l.mutateAsync(r.value),d(),f.success(`Feature ${n.value}successfully deleted`);else throw new Error("Invalid request.")}const i=v(!1);function d(){i.value=!1}return{features:p,setPayload:t,featureName:n,deleteFeature:_,isModalVisible:i,closeModal:d}};m.components=Object.assign({PlusSvg:S,ProductFeaturesTable:j,BasicConfirmModal:A},m.components);var D=function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("section",[s("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Product Features")]},proxy:!0},{key:"button",fn:function(){return[s("BaseButton",{staticClass:"space-x-1",attrs:{to:"/admin/products/features/new"}},[s("PlusSvg",{staticClass:"mr-1 w-5 xl:w-5"}),e._v(" Feature ")],1)]},proxy:!0},{key:"table",fn:function(){return[s("ProductFeaturesTable",{attrs:{features:e.features},on:{delete:e.setPayload}})]},proxy:!0}])}),s("BasicConfirmModal",{directives:[{name:"show",rawName:"v-show",value:e.isModalVisible,expression:"isModalVisible"}],attrs:{name:e.featureName},on:{delete:e.deleteFeature,close:e.closeModal}})],1)},E=[];const g={};var q=T(m,D,E,!1,H,null,null,null);function H(e){for(let a in g)this[a]=g[a]}const W=function(){return q.exports}();export{W as default};
