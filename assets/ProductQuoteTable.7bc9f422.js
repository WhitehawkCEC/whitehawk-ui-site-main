import{aT as m,aE as y,ai as D,aP as l,aQ as i,br as h,d as E,n as Q}from"./index.e6919ae3.js";import{D as T}from"./arrow-down-tray.5bfa5b2e.js";import{A}from"./AppVueGoodTable.42cd161b.js";import{F as P}from"./FileSaver.min.cc090229.js";const M={create(){const e=m();return y(t=>l.post(`${i}/productQuote`,t).then(s=>s.data),{onSuccess(t){e.invalidateQueries(["productQuote",t.id],{exact:!0})}})},update(){const e=m();return y(t=>l.put(`${i}/productQuote/${t.id}`,t).then(s=>s.data),{onSuccess(t){e.invalidateQueries(["productQuote",t.id],{exact:!0})}})},list(e){return D(["productQuote",e],()=>l.get(`${i}/productQuote/${e.value}`).then(t=>t.data))}},r={};r.props={purchaseHistory:{key:"purchaseHistory",required:!0,type:Array}};r.setup=(e,t)=>{const s=e,c=[{label:"Date",field:"date"},{label:"Title",field:"title"},{label:"Type",field:"type"},{label:"Status",field:"status"},{label:"Download",field:"download",sortable:!1}],n=E(()=>s.purchaseHistory.map(({id:a,timestamp:u,title:d,type:p,status:w})=>{const C=o(w),b=f(p);return{id:a,date:u,title:d,type:b,status:C}}));function o(a){switch(a){case"NEW":return"New";case"IN_PROGRESS":return"In Progress";case"COMPLETE":return"Complete";case"CANCELED":return"Cancelled"}}function f(a){switch(a){case"MARKETPLACE":return"Marketplace";case"SCORECARD_INDEPTH":return"In-Depth Scorecard";case"SCORECARD_SNAPSHOT":return"Snapshot Scorecard";case"BATCH":return"Batch";case"PORTFOLIO":return"Portfolio"}}async function v(a){const u=await l(`${i}/productQuote/${a.id}/file`,{responseType:"blob"}),d=S(u.headers["content-type"]),p=a.companyId+"-"+a.id+d;P.exports.saveAs(u.data,p)}function S(a){switch(a){case"application/pdf":return".pdf";case"application/zip":return".zip";case"application/csv":return".csv";default:return".docx"}}return{columns:c,rows:n,download:v}};r.components=Object.assign({AppVueGoodTable:A,DownloadSvg:T,DateIsoStringDisplay:h},r.components);var x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"p-4"},[s("AppVueGoodTable",{attrs:{"style-class":"vgt-table condensed striped bordered",columns:e.columns,rows:e.rows},scopedSlots:e._u([{key:"table-row",fn:function(c){var n=c.row,o=c.column;return[o.field==="download"?[s("BaseIcon",{attrs:{action:"secondary",size:"small",color:"info"},on:{click:function(f){return e.download(n)}}},[s("DownloadSvg",{staticClass:"h-auto w-4"})],1)]:o.field==="date"?[s("DateIsoStringDisplay",{attrs:{value:n[o.field],format:"date"}})]:[e._v(" "+e._s(n[o.field])+" ")]]}}])})],1)},g=[];const _={};var I=Q(r,x,g,!1,O,null,null,null);function O(e){for(let t in _)this[t]=_[t]}const k=function(){return I.exports}();export{k as P,M as u};
