import{K as m}from"./key.80cb24b1.js";import{F as f}from"./FormEmbeddedButton.94a28c80.js";import{af as v,aS as _,aC as K,aO as c,aP as u,c7 as k,r as g,ay as x,aE as C,n as b}from"./index.4c13ca02.js";import"./arrow-down-on-square.bf61cdc5.js";const l={read(e){return v(["companies",e,"black-kite","api-key"],()=>c.get(`${u}/companies/${e.value}/black-kite/api-key`).then(t=>t.data))},update(e){const t=_();return K(a=>c.put(`${u}/companies/${e.value}/black-kite/api-key`,a).then(s=>s.data),{onSuccess(){t.invalidateQueries(["companies",e,"black-kite","api-key"],{exact:!0})}})}},o={};o.setup=(e,t)=>{const a=k("id"),s=l.read(a),n=g();x(()=>s.data.value,i=>{i&&(n.value=i.data)},{immediate:!0});const r=C(),d=l.update(a);async function y(){if(n.value){const i={id:{accountId:a.value},data:n.value};await d.mutateAsync(i)?r.success("Successfully updated API key."):r.error("Something went wrong.")}}return{apiKey:n,updateKey:y}};o.components=Object.assign({KeySvg:m,FormEmbeddedButton:f},o.components);var h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"space-y-8"},[e.apiKey?a("div",{staticClass:"rounded-lg border-gray-300 bg-gray-200 px-2 py-4 shadow-inner sm:py-2"},[a("dl",{staticClass:"flex items-center space-x-2 overflow-x-auto whitespace-nowrap text-gray-500"},[a("KeySvg",{staticClass:"h-5 w-5 text-gray-500"}),a("dt",[e._v("Current Key:")]),a("dd",[e._v(e._s(e.apiKey))])],1)]):e._e(),a("BaseSimpleCard",{staticClass:"divide-y"},[a("h2",{staticClass:"p-4 font-display text-lg font-semibold"},[e._v("Update Key")]),a("form",{staticClass:"space-y-4 p-4",on:{submit:function(s){return s.preventDefault(),e.updateKey.apply(null,arguments)}}},[a("FormEmbeddedButton",{model:{value:e.apiKey,callback:function(s){e.apiKey=s},expression:"apiKey"}})],1)])],1)},S=[];const p={};var w=b(o,h,S,!1,B,null,null,null);function B(e){for(let t in p)this[t]=p[t]}const P=function(){return w.exports}();export{P as default};
