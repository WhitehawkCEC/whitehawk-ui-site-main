import{K as m}from"./key.80cb24b1.js";import{F as f}from"./FormEmbeddedButton.ffc0ae2c.js";import{f as v,u as _,e as K,g as c,h as u,bH as g,r as k,w as x,G as b,n as h}from"./index.fe9d2f8c.js";import"./arrow-down-on-square.6f2806b6.js";const l={read(e){return v(["companies",e,"black-kite","api-key"],()=>c.get(`${u}/companies/${e.value}/black-kite/api-key`).then(a=>a.data))},update(e){const a=_();return K(t=>c.put(`${u}/companies/${e.value}/black-kite/api-key`,t).then(s=>s.data),{onSuccess(){a.invalidateQueries(["companies",e,"black-kite","api-key"],{exact:!0})}})}},o={};o.setup=(e,a)=>{const t=g("id"),s=l.read(t),n=k();x(()=>s.data.value,i=>{i&&(n.value=i.data)},{immediate:!0});const r=b(),d=l.update(t);async function y(){if(n.value){const i={id:{accountId:t.value},data:n.value};await d.mutateAsync(i)?r.success("Successfully updated API key."):r.error("Something went wrong.")}}return{apiKey:n,updateKey:y}};o.components=Object.assign({KeySvg:m,FormEmbeddedButton:f},o.components);var C=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"space-y-8"},[e.apiKey?t("div",{staticClass:"rounded-lg border-gray-300 bg-gray-200 px-2 py-4 shadow-inner sm:py-2"},[t("dl",{staticClass:"flex items-center space-x-2 overflow-x-auto whitespace-nowrap text-gray-500"},[t("KeySvg",{staticClass:"h-5 w-5 text-gray-500"}),t("dt",[e._v("Current Key:")]),t("dd",[e._v(e._s(e.apiKey))])],1)]):e._e(),t("BaseSimpleCard",{staticClass:"divide-y"},[t("h2",{staticClass:"p-4 font-display text-lg font-semibold"},[e._v("Update Key")]),t("form",{staticClass:"space-y-4 p-4",on:{submit:function(s){return s.preventDefault(),e.updateKey.apply(null,arguments)}}},[t("FormEmbeddedButton",{model:{value:e.apiKey,callback:function(s){e.apiKey=s},expression:"apiKey"}})],1)])],1)},w=[];const p={};var S=h(o,C,w,!1,B,null,null,null);function B(e){for(let a in p)this[a]=p[a]}const j=function(){return S.exports}();export{j as default};
