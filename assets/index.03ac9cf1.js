import{F as J}from"./FormButton.694e789e.js";import{D as Q}from"./DynamicForm.a490b194.js";import{aU as Y,aE as U,ai as q,aQ as h,aR as k,b1 as I,aC as _,n as m,d as i,bH as K,c0 as A,a_ as N,aJ as H}from"./index.3a060c94.js";import{m as d,u as z}from"./useScheduledJobs.87df2f52.js";import{D as G}from"./DateRangeInput.48f8635e.js";import{a as X}from"./index.b2cb5237.js";import{f as F}from"./index.87300340.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./index.85a3efc4.js";import"./index.bf01276a.js";import"./index.7a54c9f6.js";import"./index.87e44ac4.js";import"./index.7dcccfc6.js";import"./index.42218ab2.js";const Z={create(e){const n=Y();return U(t=>h.post(`${k}/companies/${e.value}/supply-wisdom-targets`,t).then(s=>s.data),{onSuccess(){n.invalidateQueries(["companies",e,"supply-wisdom","targets"],{exact:!0})}})},read(e,n){return q(["companies",e,"supply-wisdom","targets",n],()=>h.get(`${k}/companies/${e.value}/supply-wisdom-targets/${n.value}`).then(t=>t.data))},list(e){return q(["companies",e,"supply-wisdom","targets"],()=>h.get(`${k}/companies/${e.value}/supply-wisdom-targets`).then(n=>n.data))}},g={};g.props={value:{key:"value",required:!1,type:null}};g.setup=(e,n)=>{const t=e,s=n.emit,r=_(t,s),u=[{text:" ",value:d.RatingProviderType.UNSPECIFIED},{text:"Bitsight",value:d.RatingProviderType.BITSIGHT},{text:"Black Kite",value:d.RatingProviderType.BLACK_KITE}];return{proxy:r,options:u}};g.components=Object.assign({SimpleSelect:I},g.components);var V=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("SimpleSelect",{staticClass:"w-full",attrs:{options:e.options},model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}})},ee=[];const j={};var te=m(g,V,ee,!1,ne,null,null,null);function ne(e){for(let n in j)this[n]=j[n]}const se=function(){return te.exports}(),x={};x.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:null}};x.setup=(e,n)=>{const t=e,s=n.emit,r=_(t,s),u=i({get(){var a;return(a=t.value)==null?void 0:a.ratingProviderType},set(a){a&&(r.value.ratingProviderType=a)}}),p=i({get(){var a;return(a=t.value)==null?void 0:a.sourceId},set(a){a&&(r.value.sourceId=a)}}),c=i({get(){var a;return(a=t.value)==null?void 0:a.targetId},set(a){a&&(r.value.targetId=a)}}),v=K.list(),o=i(()=>v.data.value||[]),y=i(()=>o.value.map(({id:a,name:b})=>({text:b,value:a})).sort((a,b)=>a.text.localeCompare(b.text)));return{ratingProviderType:u,sourceId:p,targetId:c,companyOptions:y}};x.components=Object.assign({RatingProviderTypeInput:se,SimpleSelect:I},x.components);var oe=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"flex flex-col space-y-6"},[t("BaseLabel",[t("span",[e._v("Rating Provider")]),t("RatingProviderTypeInput",{model:{value:e.ratingProviderType,callback:function(s){e.ratingProviderType=s},expression:"ratingProviderType"}})],1),t("BaseLabel",[t("span",[e._v("Source")]),t("SimpleSelect",{staticClass:"w-full lg:max-w-sm",attrs:{options:e.companyOptions},model:{value:e.sourceId,callback:function(s){e.sourceId=s},expression:"sourceId"}})],1),t("BaseLabel",[t("span",[e._v("Target")]),t("SimpleSelect",{staticClass:"w-full lg:max-w-sm",attrs:{options:e.companyOptions},model:{value:e.targetId,callback:function(s){e.targetId=s},expression:"targetId"}})],1)],1)},re=[];const B={};var ae=m(x,oe,re,!1,ce,null,null,null);function ce(e){for(let n in B)this[n]=B[n]}const le=function(){return ae.exports}(),C={};C.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:null}};C.setup=(e,n)=>{const t=e,s=n.emit,r=_(t,s),u=i(()=>t.id),p=Z.list(u),c=i(()=>p.data.value||[]),v=i(()=>c.value.map(l=>({text:`${l.targetName} - ${l.targetType}`,value:l.targetType}))),o=i({get(){var l;return(l=t.value)==null?void 0:l.sourceId},set(l){l&&(r.value.sourceId=l)}}),y=K.list(),a=i(()=>y.data.value||[]),b=i(()=>a.value.map(({id:l,name:f})=>({text:f,value:l})).sort((l,f)=>l.text.localeCompare(f.text))),M=i({get(){var l,f;return(f=(l=t.value)==null?void 0:l.targetId)==null?void 0:f.value},set(l){l&&r.value.targetId&&(r.value.targetId.value=l)}});return{targetOptions:v,sourceId:o,companyOptions:b,targetId:M}};C.components=Object.assign({SimpleSelect:I},C.components);var ie=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"flex flex-col space-y-6"},[t("BaseLabel",[t("span",[e._v("Source")]),t("SimpleSelect",{staticClass:"w-full lg:max-w-sm",attrs:{options:e.targetOptions},model:{value:e.sourceId,callback:function(s){e.sourceId=s},expression:"sourceId"}})],1),t("BaseLabel",[t("span",[e._v("Target")]),t("SimpleSelect",{staticClass:"w-full lg:max-w-sm",attrs:{options:e.companyOptions},model:{value:e.targetId,callback:function(s){e.targetId=s},expression:"targetId"}})],1)],1)},ue=[];const E={};var pe=m(C,ie,ue,!1,de,null,null,null);function de(e){for(let n in E)this[n]=E[n]}const ye=function(){return pe.exports}(),T={};T.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:null}};T.setup=(e,n)=>{const t=e,s=n.emit,r=_(t,s),u=i({get(){var o;return(o=t.value)==null?void 0:o.value.oneofKind},set(o){if(o==="cyberRiskScorecardToCyberOne")r.value={value:{oneofKind:"cyberRiskScorecardToCyberOne",cyberRiskScorecardToCyberOne:d.CyberRiskScorecardToCyberOne.create()}};else if(o==="supplyWisdomToCyberOne")r.value={value:{oneofKind:"supplyWisdomToCyberOne",supplyWisdomToCyberOne:d.SupplyWisdomToCyberOne.create()}};else throw new Error(`Unhandled case: ${o}`)}}),p=[{text:"Cyber Risk Scorecard to CyberOne",value:"cyberRiskScorecardToCyberOne"},{text:"Business Reports to CyberOne",value:"supplyWisdomToCyberOne"}],c=i({get(){var y;const o=(y=t.value)==null?void 0:y.value;if((o==null?void 0:o.oneofKind)==="cyberRiskScorecardToCyberOne")return o.cyberRiskScorecardToCyberOne},set(o){o?r.value={value:{oneofKind:"cyberRiskScorecardToCyberOne",cyberRiskScorecardToCyberOne:o}}:r.value={value:{oneofKind:void 0}}}}),v=i({get(){var y;const o=(y=t.value)==null?void 0:y.value;if((o==null?void 0:o.oneofKind)==="supplyWisdomToCyberOne")return o.supplyWisdomToCyberOne},set(o){o?r.value={value:{oneofKind:"supplyWisdomToCyberOne",supplyWisdomToCyberOne:o}}:r.value={value:{oneofKind:void 0}}}});return{type:u,typeOptions:p,cyberRiskScorecardToCyberOne:c,supplyWisdomToCyberOne:v}};T.components=Object.assign({SimpleSelect:I,CyberRiskScorecardToCyberOneConfigInput:le,SupplyWisdomToCyberOneConfigInput:ye},T.components);var me=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"space-y-6"},[t("BaseLabel",[t("span",[e._v("Type:")]),t("SimpleSelect",{staticClass:"w-full lg:max-w-sm",attrs:{options:e.typeOptions},model:{value:e.type,callback:function(s){e.type=s},expression:"type"}})],1),e.type==="cyberRiskScorecardToCyberOne"?[t("CyberRiskScorecardToCyberOneConfigInput",{attrs:{id:e.id},model:{value:e.cyberRiskScorecardToCyberOne,callback:function(s){e.cyberRiskScorecardToCyberOne=s},expression:"cyberRiskScorecardToCyberOne"}})]:e.type==="supplyWisdomToCyberOne"?[t("SupplyWisdomToCyberOneConfigInput",{attrs:{id:e.id},model:{value:e.supplyWisdomToCyberOne,callback:function(s){e.supplyWisdomToCyberOne=s},expression:"supplyWisdomToCyberOne"}})]:e._e()],2)},ve=[];const P={};var _e=m(T,me,ve,!1,fe,null,null,null);function fe(e){for(let n in P)this[n]=P[n]}const be=function(){return _e.exports}(),S={};S.props={value:{key:"value",required:!1,type:null}};S.setup=(e,n)=>{const t=e,s=n.emit,r=_(t,s),u=[{text:" ",value:d.FrequencyType.UNSPECIFIED},{text:"Daily",value:d.FrequencyType.DAILY},{text:"Monthly",value:d.FrequencyType.MONTHLY},{text:"Quarterly",value:d.FrequencyType.QUARTERLY},{text:"Yearly",value:d.FrequencyType.YEARLY}];return{proxy:r,options:u}};S.components=Object.assign({SimpleSelect:I},S.components);var ge=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("SimpleSelect",{staticClass:"w-full",attrs:{options:e.options},model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}})},xe=[];const W={};var Ce=m(S,ge,xe,!1,Te,null,null,null);function Te(e){for(let n in W)this[n]=W[n]}const Se=function(){return Ce.exports}(),$={};$.props={value:{key:"value",required:!1,type:null}};$.setup=(e,n)=>{const t=e,s=n.emit,r=_(t,s),u=i({get(){var c;return(c=t.value)==null?void 0:c.frequency},set(c){c&&(r.value.frequency=c)}}),p=i({get(){var c;return(c=t.value)==null?void 0:c.range},set(c){c&&(r.value.range=c)}});return{frequency:u,dateRange:p}};$.components=Object.assign({FrequencyTypeInput:Se,DateRangeInput:G},$.components);var $e=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"space-y-6"},[t("BaseLabel",[t("span",[e._v("Frequency:")]),t("FrequencyTypeInput",{staticClass:"w-full lg:max-w-sm",model:{value:e.frequency,callback:function(s){e.frequency=s},expression:"frequency"}})],1),t("DateRangeInput",{staticClass:"sm:col-span-2",model:{value:e.dateRange,callback:function(s){e.dateRange=s},expression:"dateRange"}})],1)},Oe=[];const w={};var Ie=m($,$e,Oe,!1,Re,null,null,null);function Re(e){for(let n in w)this[n]=w[n]}const he=function(){return Ie.exports}(),O={};O.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:null,default:void 0}};O.setup=(e,n)=>{const t=e,s=n.emit,r=_(t,s),u=i(()=>t.id),p=i(()=>[{name:"schedule",label:"Schedule",component:{is:he,attrs:{required:!0}}},{name:"config",label:"Sync",component:{is:be,attrs:{required:!0,id:u.value}}}]);return{proxy:r,schema:p}};O.components=Object.assign({DynamicForm:Q},O.components);var ke=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("DynamicForm",{attrs:{schema:e.schema},model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}})},qe=[];const L={};var Fe=m(O,ke,qe,!1,je,null,null,null);function je(e){for(let n in L)this[n]=L[n]}const Be=function(){return Fe.exports}(),R={};R.setup=(e,n)=>{const t=A("id"),s=new Date,r=X(s,1),u=N({config:{value:{oneofKind:void 0}},schedule:{range:{start:{value:F(s)},end:{value:F(r)}},frequency:d.FrequencyType.MONTHLY}}),p=H(),c=z.create(t);async function v(){u.value&&(await c.mutateAsync(u.value),p.push(`/admin/companies/${t.value}/jobs`))}return{id:t,job:u,createJob:v}};R.components=Object.assign({JobInput:Be,FormButton:J},R.components);var Ee=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("BaseFormPageLayout",{scopedSlots:e._u([{key:"form",fn:function(){return[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h4",variant:"subtitle3"}},[e._v(" Create Scheduled Job ")]),t("form",{staticClass:"divide-y",on:{submit:function(s){return s.preventDefault(),e.createJob.apply(null,arguments)}}},[t("JobInput",{attrs:{id:e.id},model:{value:e.job,callback:function(s){e.job=s},expression:"job"}}),t("FormButton",{attrs:{action:"create"}})],1)]},proxy:!0}])})},Pe=[];const D={};var We=m(R,Ee,Pe,!1,we,null,null,null);function we(e){for(let n in D)this[n]=D[n]}const Ve=function(){return We.exports}();export{Ve as default};
