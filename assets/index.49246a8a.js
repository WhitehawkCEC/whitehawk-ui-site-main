import{ah as x,aP as b,aQ as g,aD as A,d as n,aF as T,aS as f,br as k,n as h,bs as I,c8 as y,cG as $}from"./index.535fc850.js";import{A as C,T as B}from"./AppTanStackTable.a8b95bf3.js";import{S as F}from"./StatusBadge.8e230260.js";import{c as D}from"./createOnChangeFn.dc228b79.js";import{u as G}from"./createSimpleTable.a88426f8.js";import{G as E}from"./GroupSummaryTable.0c8beb9d.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.623f0ac1.js";import"./chevron-up.736f4142.js";import"./IsoDateTimeDisplay.183235b1.js";const P={get(e){return x(["accounts",e,"scorecards"],()=>b.get(`${g}/accounts/${e.value}/scorecards`).then(s=>s.data))}},O={update(){return A(e=>b.put(`${g}/scorecard-orders/${e.id}/status`,e.status).then(s=>s.data))}},u={};u.props={scorecards:{key:"scorecards",required:!0,type:Array}};u.setup=(e,s)=>{const a=e,l=n(()=>a.scorecards.filter(t=>t.status.state==="Expired")),o=D(),d=T(),p=O.update(),m=[o.accessor(t=>t.account.id,{id:"accountId",header:()=>"Account ID",enableColumnFilter:!1}),o.accessor(t=>t.group.id,{id:"groupId",header:()=>"Group ID",enableColumnFilter:!1}),o.accessor(t=>t.id,{id:"scorecardId",header:()=>"Scorecard ID",enableColumnFilter:!1}),o.accessor(t=>t.company.domain,{id:"domain",header:()=>"Company Domain",enableColumnFilter:!1}),o.accessor(t=>t.status.state,{id:"state",header:()=>"Scorecard State",cell:t=>f(F,{props:{value:t.getValue()}}),enableColumnFilter:!1}),o.accessor(t=>t.log.expiresAt,{id:"expiresAt",header:()=>"Expires At",cell:t=>{var r;if(t.getValue())return f(k,{props:{value:(r=t.getValue())==null?void 0:r.toLocaleString(),format:"date"}})},enableColumnFilter:!1}),o.display({id:"actions",header:"Actions",cell:({row:t})=>f(B,{props:{actions:[{id:"archive",async action(){const r={id:t.original.id,status:{state:"Archived",date:new Date().toISOString()}};await p.mutateAsync(r),d.success("Archived Scorecard Successfully")}}]}})})];return{instance:G(l,m)}};u.components=Object.assign({AppTanStackTable:C},u.components);var j=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("AppTanStackTable",{attrs:{table:e.instance}})},V=[];const S={};var w=h(u,j,V,!1,L,null,null,null);function L(e){for(let s in S)this[s]=S[s]}const M=function(){return w.exports}(),i={};i.setup=(e,s)=>{const a=y("id"),l=y("subscriptionId"),o=P.get(a),d=n(()=>o.data.value||[]),p=n(()=>d.value.filter(r=>r.status.state==="Expired")),m=$.get(a),_=n(()=>{var r,c;return((c=(r=m.data.value)==null?void 0:r.data)==null?void 0:c.groups)||[]}),t=n(()=>_.value.filter(r=>{var c;return((c=r.status)==null?void 0:c.state)===3}));return{id:a,subscriptionId:l,filteredScorecards:p,filteredGroups:t}};i.components=Object.assign({BackButton:I,PortfolioAdminScorecardsTable:M,GroupSummaryTable:E},i.components);var Q=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("section",{staticClass:"space-y-6"},[a("BaseTablePageLayout",{scopedSlots:e._u([{key:"backButton",fn:function(){return[a("BackButton",{attrs:{link:"../in-depth"}})]},proxy:!0},{key:"title",fn:function(){return[e._v("Expired Scorecards")]},proxy:!0},{key:"table",fn:function(){return[a("PortfolioAdminScorecardsTable",{attrs:{scorecards:e.filteredScorecards}})]},proxy:!0}])}),a("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Inactive Groups")]},proxy:!0},{key:"table",fn:function(){return[a("GroupSummaryTable",{attrs:{"account-id":e.id,"sub-id":e.subscriptionId,groups:e.filteredGroups}})]},proxy:!0}])})],1)},R=[];const v={};var H=h(i,Q,R,!1,U,null,null,null);function U(e){for(let s in v)this[s]=v[s]}const te=function(){return H.exports}();export{te as default};
