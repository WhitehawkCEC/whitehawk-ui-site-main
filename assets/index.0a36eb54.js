import{am as k,c7 as _,cd as $,ci as g,c as u,cj as w,cf as h,n as B}from"./index.91cb71ee.js";import{S as D,P as I,a as C}from"./SubscriptionProductsTable.fe0d815c.js";import"./DateRangeDisplay.fd5d07ac.js";import"./IsoDateTimeDisplay.a42a1347.js";import"./AppVDateRangePicker.27ebfb99.js";import"./index.4f265322.js";import"./index.4d2fef89.js";import"./index.b27529ab.js";import"./index.5c4fc2e6.js";import"./index.87e44ac4.js";import"./AppTanStackTable.acf7eb42.js";import"./createOnChangeFn.56ecbd8e.js";import"./chevron-up.736f4142.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.0afddc58.js";import"./createSimpleTable.b37c2aa7.js";const c={};c.setup=(t,r)=>{const s=_("id"),e=_("subscriptionId"),o=$.read(s,e),a=g.list(s,e),p=u(()=>a.data.value||[]),d=w(),y=u(()=>d.pinnedProductIds),l=u(()=>{var n;return((n=o.data.value)==null?void 0:n.features)||h.SubscriptionFeatures.create()}),S=u(()=>{var m,v;const n=new Map;for(const P of p.value){const i=((v=(m=P.product)==null?void 0:m.id)==null?void 0:v.value)||"",x=[{id:"view",to:`/admin/companies/${s.value}/subscriptions/${e.value}/products/${i}`},{id:"edit",to:`/admin/companies/${s.value}/subscriptions/${e.value}/products/${i}/settings`},{id:"pinProduct",action(){d.setPinned(i)},isDisabled:u(()=>y.value.includes(i))}].filter(f=>l.value.hasGroups||l.value.hasSuppliers?f.id!=="pinProduct":f);n.set(i,x)}return n});return{id:s,subscriptionId:e,subscriptionRead:o,productsList:a,products:p,actions:S}};c.components=Object.assign({SubscriptionOverviewDisplay:D,PinnedProductsDisplay:I,PlusSvg:k,SubscriptionProductsTable:C},c.components);var R=function(){var t=this,r=t.$createElement,s=t._self._c||r;return s("section",{staticClass:"space-y-6"},[s("BaseVueQuery",{attrs:{query:t.subscriptionRead},scopedSlots:t._u([{key:"success",fn:function(e){var o=e.data.status;return[o?s("SubscriptionOverviewDisplay",{attrs:{status:o}}):t._e()]}}])}),s("PinnedProductsDisplay",{attrs:{"company-id":t.id,"sub-id":t.subscriptionId,products:t.products}}),s("BaseTablePageLayout",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Subscription Products")]},proxy:!0},{key:"button",fn:function(){return[s("BaseButton",{staticClass:"space-x-1",attrs:{to:"./products/new",append:""}},[s("PlusSvg",{staticClass:"w-5"}),s("span",[t._v("Product")])],1)]},proxy:!0},{key:"table",fn:function(){return[s("BaseVueQuery",{attrs:{query:t.productsList},scopedSlots:t._u([{key:"success",fn:function(e){var o=e.data;return[s("SubscriptionProductsTable",{attrs:{value:o,"mapped-actions":t.actions}})]}}])})]},proxy:!0}])})],1)},j=[];const b={};var A=B(c,R,j,!1,L,null,null,null);function L(t){for(let r in b)this[r]=b[r]}const Y=function(){return A.exports}();export{Y as default};
