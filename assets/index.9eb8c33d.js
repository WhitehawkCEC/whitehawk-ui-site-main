import{R as B}from"./arrow-path.24b87f73.js";import{c,aS as A,n as I,L as E,aF as L,cF as F,cG as O,cO as k,cI as w,cP as j,cK as q,b$ as M,cQ as P,cM as V}from"./index.25835af6.js";import{A as N}from"./AppTanStackTable.e35b7de3.js";import{S as h,V as G,a as U}from"./SyncStatusDisplay.261be18b.js";import{c as Y}from"./createOnChangeFn.5167f836.js";import{u as K}from"./createSimpleTable.185c786c.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.77f19c45.js";import"./check-circle.48e4a9f5.js";import"./chevron-up.736f4142.js";const v={};v.props={value:{key:"value",required:!0,type:Array}};v.setup=(e,t)=>{const s=e,u=c(()=>s.value),l=Y(),i=[l.accessor("toBeSynced",{header:()=>"To Be Synced",cell:o=>A(h,{props:{value:o.getValue()}}),enableColumnFilter:!1}),l.group({id:"supplier",header:()=>"Supplier",columns:[l.accessor(o=>o.supplier.name,{id:"name",header:()=>"Name",enableColumnFilter:!1}),l.accessor(o=>o.supplier.name,{id:"domain",header:()=>"Domain",enableColumnFilter:!1})]}),l.accessor("syncedFromSupplyWisdom",{header:()=>"Synced From Supply Wisdom?",cell:o=>A(h,{props:{value:o.getValue()}}),enableColumnFilter:!1}),l.accessor("syncedFromCyberOne",{header:()=>"Synced From CyberOne?",cell:o=>A(h,{props:{value:o.getValue()}}),enableColumnFilter:!1})];return{instance:K(u,i)}};v.components=Object.assign({AppTanStackTable:N},v.components);var H=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("AppTanStackTable",{attrs:{table:e.instance}})},z=[];const W={};var Q=I(v,H,z,!1,J,null,null,null);function J(e){for(let t in W)this[t]=W[t]}const X=function(){return Q.exports}(),f={};f.props={accountId:{key:"accountId",required:!0,type:String},vrmSync:{key:"vrmSync",required:!0,type:null},assets:{key:"assets",required:!0,type:Array},supplyWisdomAssets:{key:"supplyWisdomAssets",required:!0,type:Array}};f.setup=(e,t)=>{const s=e,u=c(()=>s.accountId),l=c(()=>s.supplyWisdomAssets.map(({webSiteUrl:n})=>n)),i=c(()=>s.assets.map(({domain:n})=>n)),y=c(()=>s.assets.map(({referenceId:n,name:a,domain:r})=>{var p;return{supplyWisdomId:(p=s.supplyWisdomAssets.find(b=>b.webSiteUrl===r))==null?void 0:p.id,cyberOneId:n,name:a,domain:r}})),o=c(()=>y.value.map(n=>({supplier:n,syncedFromSupplyWisdom:n.domain?l.value.includes(n.domain):void 0,syncedFromCyberOne:n.domain?i.value.includes(n.domain):void 0,toBeSynced:n.domain?l.value.includes(n.domain)&&i.value.includes(n.domain):void 0}))),d=c(()=>{const n=[];return o.value.forEach(a=>{if(a.toBeSynced){const{supplyWisdomId:r,cyberOneId:p}=a.supplier;r&&n.push({target:{oneofKind:"cyberOneAssetId",cyberOneAssetId:p},source:{oneofKind:"supplyWisdomAssetId",supplyWisdomAssetId:r}})}}),n}),m=L(),S=F.create(u);async function _(){const n={syncType:O.SyncType.SUPPLY_WISDOM_TO_CYBER_ONE,entries:d.value},a=await S.mutateAsync(n);if(a){const r=a.response.syncId;m.success(`Sync ID: ${r}`)}}return{rows:o,mappings:d,syncCreate:S,createSync:_}};f.components=Object.assign({VrmSyncStatusDisplay:G,LoadingSpinner:E,SyncSvg:B,BusinessRatingSyncTable:X},f.components);var Z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"space-y-6"},[s("div",{staticClass:"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0"},[s("VrmSyncStatusDisplay",{attrs:{header:"Business Rating Sync",sync:e.vrmSync}}),s("BaseButton",{staticClass:"space-x-1",attrs:{disabled:e.mappings.length===0,shape:"rectangle"},on:{click:e.createSync}},[e.syncCreate.isLoading.value?s("LoadingSpinner"):s("SyncSvg",{staticClass:"w-4 xl:w-5"}),s("span",[e._v("Sync")])],1)],1),s("BusinessRatingSyncTable",{attrs:{value:e.rows}})],1)},ee=[];const D={};var se=I(f,Z,ee,!1,ne,null,null,null);function ne(e){for(let t in D)this[t]=D[t]}const te=function(){return se.exports}(),g={};g.props={accountId:{key:"accountId",required:!0,type:String},syncType:{key:"syncType",required:!0,type:null}};g.setup=(e,t)=>{const s=e,u=c(()=>s.accountId),l=k.get(u),i=c(()=>{var a;return(a=l.data.value)==null?void 0:a.targetName}),y=w.get(u),o=c(()=>{var a;return(a=y.data.value)==null?void 0:a.mappedAssetId}),d=j.get(u),m=c(()=>d.data.value),S=q.get(u),_=c(()=>S.data.value);return{syncStatus:c(()=>{var a,r,p,b,$,T;return{source:{mappedSource:i.value,syncDate:(r=(a=m.value)==null?void 0:a.lastSynced)==null?void 0:r.value,syncedReports:(p=m.value)==null?void 0:p.reportsSynced},target:{mappedTarget:o.value,syncDate:($=(b=_.value)==null?void 0:b.lastSynced)==null?void 0:$.value,syncedReports:(T=_.value)==null?void 0:T.reportsSynced}}})}};g.components=Object.assign({SyncStatusDisplay:U},g.components);var ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("SyncStatusDisplay",{attrs:{"sync-status":e.syncStatus,"sync-type":e.syncType}})},ce=[];const R={};var oe=I(g,ae,ce,!1,re,null,null,null);function re(e){for(let t in R)this[t]=R[t]}const le=function(){return oe.exports}(),C={};C.setup=(e,t)=>{const s=M("id"),u=F.list(s),l=c(()=>u.data.value?u.data.value.sort((n,a)=>{let r="",p="";return n.lastSynced&&n.lastSynced.value&&a.lastSynced&&a.lastSynced.value&&(r=n.lastSynced.value,p=a.lastSynced.value),r.localeCompare(p)}):[]),i=c(()=>l.value.find(n=>n.syncType===O.SyncType.SUPPLY_WISDOM_TO_CYBER_ONE)),y=P.list(s),o=c(()=>y.data.value||[]),d=V.list(s),m=c(()=>d.data.value||[]),S=c(()=>{var n,a,r;return{syncDate:(a=(n=i.value)==null?void 0:n.lastSynced)==null?void 0:a.value,syncedReports:(r=i.value)==null?void 0:r.numSynced}}),_=c(()=>i.value?i.value.syncType:O.SyncType.UNSPECIFIED);return{id:s,supplyWisdomAssets:o,assets:m,sync:S,syncType:_}};C.components=Object.assign({BusinessRatingSyncStatusDisplay:le,BusinessRatingSyncDisplay:te},C.components);var ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{staticClass:"space-y-6"},[s("BusinessRatingSyncStatusDisplay",{attrs:{"account-id":e.id,"sync-type":e.syncType}}),s("BusinessRatingSyncDisplay",{attrs:{"account-id":e.id,"vrm-sync":e.sync,"supply-wisdom-assets":e.supplyWisdomAssets,assets:e.assets}})],1)},ie=[];const x={};var pe=I(C,ue,ie,!1,ye,null,null,null);function ye(e){for(let t in x)this[t]=x[t]}const Ae=function(){return pe.exports}();export{Ae as default};
