import{aT as _,aD as h,ah as y,aP as u,aQ as l,d as i,aS as b,br as I,n as B,bs as T,an as q,c7 as $}from"./index.8b337dc3.js";import{A,T as z}from"./AppTanStackTable.cdd8c488.js";import{S as Q}from"./ScorecardStatusBadge.3286bca7.js";import{c as V}from"./createOnChangeFn.a25153a2.js";import{F as D}from"./FileSaver.min.d7a97fd0.js";import{u as P}from"./createSimpleTable.fb966d69.js";import{u as j}from"./useBatchScorecardsZip.a5327c52.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.24b1500d.js";import"./chevron-up.736f4142.js";const R={create(e){const a=_();return h(t=>u.post(`${l}/companies/${e.value}/batch/generate/scorecards-v2`,t).then(r=>r.data),{onSuccess(){a.invalidateQueries(["companies",e,"batch","generate","scorecards-v2"],{exact:!0})}})},read(e,a){return y(["companies",e,"batch","scorecards","status-v2",a],()=>u.get(`${l}/companies/${e.value}/batch/scorecards/status-v2/${a.value}`).then(t=>t.data))},delete(e,a){const t=_();return h(()=>u.delete(`${l}/companies/${e.value}/batch/generate/scorecards-v2/${a.value}`).then(r=>r.data),{onSuccess(){t.invalidateQueries(["companies",e,"batch","generate","scorecards-v2",a],{exact:!0})}})},list(e){return y(["companies",e,"batch","scorecards","status-v2"],()=>u.get(`${l}/companies/${e.value}/batch/scorecards/status-v2`).then(a=>a.data))}},p={};p.props={id:{key:"id",required:!0,type:String},subId:{key:"subId",required:!0,type:String},batches:{key:"batches",required:!0,type:Array},zipFiles:{key:"zipFiles",required:!0,type:Array}};p.setup=(e,a)=>{const t=e,r=i(()=>t.id),o=i(()=>t.subId),m=i(()=>t.batches),v=i(()=>t.zipFiles),n=V(),k=[n.accessor("id",{header:()=>"Batch ID",enableColumnFilter:!1}),n.accessor(s=>s.status.state,{id:"state",header:()=>"State",cell:s=>b(Q,{props:{value:s.getValue()}}),enableColumnFilter:!1}),n.accessor(s=>s.status.quarter,{id:"quarter",header:()=>"Quarter",enableColumnFilter:!1}),n.accessor(s=>s.status.year,{id:"year",header:()=>"Year",enableColumnFilter:!1}),n.accessor(s=>{var c;return(c=s.meta)==null?void 0:c.updatedAt},{id:"updatedAt",header:()=>"Updated At",cell:s=>b(I,{props:{value:s.getValue(),format:"date"}}),enableColumnFilter:!1}),n.display({id:"actions",header:"Actions",cell:({row:s})=>b(z,{props:{actions:[{id:"view",to:`/admin/companies/${r.value}/subscriptions/${o.value}/integrations/2/scorecards/batch/${s.original.id}`},{id:"download",async action(){var f;const c=encodeURIComponent(s.original.id),x=((f=v.value.find(C=>C.batchId===s.original.id))==null?void 0:f.zipFileName)||"",F=await u(`${l}/companies/${r.value}/batch/file/zip/${c}`,{responseType:"blob"});D.exports.saveAs(F.data,`${x}.zip`)},isDisabled:i(()=>!v.value.find(c=>c.batchId===s.original.id))}]}})})];return{instance:P(m,k)}};p.components=Object.assign({AppTanStackTable:A},p.components);var w=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("AppTanStackTable",{attrs:{table:e.instance}})},E=[];const S={};var M=B(p,w,E,!1,U,null,null,null);function U(e){for(let a in S)this[a]=S[a]}const H=function(){return M.exports}(),d={};d.setup=(e,a)=>{const t=$("id"),r=$("subscriptionId"),o=[R.list(t),j.list(t)];return{id:t,subscriptionId:r,queries:o}};d.components=Object.assign({BackButton:T,PlusSvg:q,BatchScorecardsV2Table:H},d.components);var N=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("BaseTablePageLayout",{scopedSlots:e._u([{key:"backButton",fn:function(){return[t("BackButton",{attrs:{link:`/admin/companies/${e.id}/subscriptions/${e.subscriptionId}/integrations`}})]},proxy:!0},{key:"overline",fn:function(){return[e._v("Black Kite")]},proxy:!0},{key:"title",fn:function(){return[e._v("Batch Scorecards")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"./new",append:""}},[t("PlusSvg",{staticClass:"-ml-1 w-5"}),t("span",[e._v("Batch")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("BaseVueQueries",{attrs:{queries:e.queries},scopedSlots:e._u([{key:"success",fn:function(r){var o=r[0],m=r[1];return[t("BatchScorecardsV2Table",{attrs:{id:e.id,"sub-id":e.subscriptionId,batches:o,"zip-files":m}})]}}])})]},proxy:!0}])})},O=[];const g={};var K=B(d,N,O,!1,L,null,null,null);function L(e){for(let a in g)this[a]=g[a]}const ne=function(){return K.exports}();export{ne as default};
