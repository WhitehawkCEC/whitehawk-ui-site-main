import{U as R}from"./arrow-down-on-square.bf61cdc5.js";import{T as U}from"./trash.78f57a7a.js";import{ai as T,aQ as E,aR as O,aC as z,n as m,az as H,c1 as W,r as x,bH as p,aB as C,aJ as G,aG as J,ct as S,aH as L,d as l,aI as N}from"./index.d7921925.js";import{C as V,u as K}from"./CompanyInput.86614486.js";import{M as X}from"./MembersDisplay.c7eb9638.js";import{c as Y}from"./cloneDeep.7e642553.js";import{u as Z}from"./useCompanyAccess.ddf77e83.js";import"./DynamicForm.24a4616b.js";import"./AddressClaimInput.02e5e60a.js";import"./index.750b4c8a.js";import"./FormValidation.907ef868.js";import"./_Uint8Array.fe57294b.js";import"./keys.08a0acf6.js";import"./_baseAssignValue.baf8c7a4.js";import"./_copyArray.56331c81.js";const ee={list(){return T(["company-features"],()=>E.get(`${O}/company-features`).then(e=>e.data))}},y={};y.props={value:{key:"value",required:!1,type:Array},options:{key:"options",required:!0,type:Array}};y.setup=(e,a)=>{const t=e,s=a.emit;return{proxy:z(t,s)}};var te=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",{staticClass:"grid gap-4 lg:grid-cols-2 xl:grid-cols-3"},e._l(e.options,function(s){return t("BaseLabel",{key:s.id,staticClass:"flex items-center space-x-1"},[t("BaseInput",{attrs:{type:"checkbox",value:s,disabled:!0},model:{value:e.proxy,callback:function(n){e.proxy=n},expression:"proxy"}}),t("span",[e._v(e._s(s.display))])],1)}),1)},se=[];const h={};var ae=m(y,te,se,!1,ne,null,null,null);function ne(e){for(let a in h)this[a]=h[a]}const oe=function(){return ae.exports}(),c={};c.props={value:{key:"value",required:!1,type:null},options:{key:"options",required:!0,type:Array}};c.setup=(e,a)=>{const t=e,s=a.emit;return{proxy:H(t,s)}};c.components=Object.assign({FeaturesInput:oe},c.components);var re=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("FeaturesInput",{staticClass:"p-4",attrs:{options:e.options},model:{value:e.proxy.features,callback:function(s){e.$set(e.proxy,"features",s)},expression:"proxy.features"}})},ce=[];const b={};var ie=m(c,re,ce,!1,ue,null,null,null);function ue(e){for(let a in b)this[a]=b[a]}const pe=function(){return ie.exports}(),u={};u.setup=(e,a)=>{const t=W("id"),s=x(),n=p.read(t),r=K.list();C(()=>n.data.value,o=>{o&&(s.value=Y(o))},{immediate:!0});const g=G(),d=J(),k=p.update(t);async function B(){s.value&&(await k.mutateAsync(s.value),d.success("Saved"))}const $=p.delete(t);async function A(){await $.mutateAsync(),g.push("/companies")}const i=x(),Q=ee.list(),w=S.read(t),I=L(),v=l(()=>I.company);C(()=>w.data.value,o=>{o&&v.value&&(i.value={company:v.value,features:o.features})},{immediate:!0});const P=S.update(t);async function D(){i.value&&(await P.mutateAsync(i.value),d.success("Saved"))}const f=N(),q=l(()=>f.isAdmin),j=l(()=>{var _;return((_=f.email)==null?void 0:_.split("@")[1])=="whitehawk.com"&&q.value}),M=Z.list(t);return{id:t,company:s,industriesQuery:r,updateCompany:B,deleteCompany:A,companyFeatures:i,featuresQuery:Q,saveFeatures:D,isWhitehawkAdmin:j,companyAccessQuery:M,enableFeaturePermission:!1}};u.components=Object.assign({CompanyInput:V,SaveSvg:R,TrashSvg:U,CompanyFeaturesPermissionInput:pe,MembersDisplay:X},u.components);var le=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",{staticClass:"space-y-6"},[t("ClientOnly",[t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Attributes ")]),t("form",{staticClass:"flex flex-col divide-y",on:{submit:function(s){return s.preventDefault(),e.updateCompany.apply(null,arguments)}}},[t("BaseVueQuery",{attrs:{query:e.industriesQuery},scopedSlots:e._u([{key:"success",fn:function(s){var n=s.data;return[t("CompanyInput",{attrs:{industries:n,"is-readonly":!0},model:{value:e.company,callback:function(r){e.company=r},expression:"company"}})]}}])}),t("div",{staticClass:"flex flex-col space-y-2 p-4 md:flex-row md:items-center md:space-x-2 md:space-y-0"},[t("BaseButton",{staticClass:"space-x-2"},[t("SaveSvg",{staticClass:"w-5"}),t("span",[e._v("Save")])],1),e.isWhitehawkAdmin?t("BaseButton",{staticClass:"space-x-2",attrs:{type:"button",action:"secondary","display-type":"danger"},on:{click:e.deleteCompany}},[t("TrashSvg",{staticClass:"w-5"}),t("span",[e._v("Delete")])],1):e._e()],1)],1)],1),t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h2",variant:"subtitle3"}},[e._v(" Edit Permissions ")]),t("form",{staticClass:"divide-y",on:{submit:function(s){return s.preventDefault(),e.saveFeatures.apply(null,arguments)}}},[t("BaseVueQuery",{attrs:{query:e.featuresQuery},scopedSlots:e._u([{key:"success",fn:function(s){var n=s.data;return[t("CompanyFeaturesPermissionInput",{attrs:{options:n},model:{value:e.companyFeatures,callback:function(r){e.companyFeatures=r},expression:"companyFeatures"}})]}}])}),e.enableFeaturePermission?t("div",{staticClass:"p-4"},[t("BaseButton",{staticClass:"space-x-2"},[t("SaveSvg",{staticClass:"w-5"}),t("span",[e._v("Save")])],1)],1):e._e()],1)],1),t("BaseVueQuery",{attrs:{query:e.companyAccessQuery},scopedSlots:e._u([{key:"success",fn:function(s){var n=s.data;return[t("MembersDisplay",{attrs:{id:e.id,access:n}})]}}])})],1)],1)},me=[];const F={};var ye=m(u,le,me,!1,de,null,null,null);function de(e){for(let a in F)this[a]=F[a]}const Ie=function(){return ye.exports}();export{Ie as default};
