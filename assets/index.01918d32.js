import{c as A,aE as k,aR as p,br as T,aO as g,aP as _,aZ as i,n as F,am as M,c7 as I}from"./index.52b75f7e.js";import{A as P,R as V}from"./RowSelectionInput.68a1959f.js";import{A as q,T as B}from"./AppTanStackTable.f241f1a2.js";import{u as N,c as O,i as l,r as U,h as j,g as E,f as D,b as z,e as H,d as L}from"./createOnChangeFn.64a6d8bf.js";import{F as G}from"./FileSaver.min.6445314f.js";import{u as Q}from"./useSnapshotScorecards.f57e993d.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.4cf84afa.js";import"./chevron-up.736f4142.js";const u={};u.props={id:{key:"id",required:!0,type:String},scorecards:{key:"scorecards",required:!0,type:Array}};u.setup=(t,o)=>{const a=t,n=A(()=>a.scorecards),d=k(),r=O(),C=[r.display({id:"select",header:({table:e})=>p(P,{props:{table:e}}),cell:({row:e})=>p(V,{props:{row:e}})}),r.accessor(e=>e.company.name,{id:"company",header:()=>"Company",cell:e=>e.getValue(),enableColumnFilter:!1}),r.accessor("id",{header:()=>"Scorecard ID",enableColumnFilter:!1}),r.accessor("updatedAt",{header:()=>"Last Updated",cell:e=>p(T,{props:{value:e.getValue(),format:"date"}}),enableColumnFilter:!1}),r.display({id:"actions",header:"Actions",cell:({row:e})=>p(B,{props:{actions:[{id:"view",to:`/admin/companies/${encodeURIComponent(a.id)}/scorecards/snapshot/${e.original.id}`},{id:"download",async action(){const s=await g(`${_}/companies/${a.id}/scorecards/${e.original.id}/docx`,{responseType:"blob"}),c=`${e.original.company.name} - Snapshot - ${e.id}.docx`;G.exports.saveAs(s.data,c)}},{id:"archive",async action(){(await g.delete(`${_}/companies/${a.id}/snapshot-scorecards/${e.original.id}`)).status===200&&d.success("Archived Scorecard Successfully")}}]}})})],f=i([]),S=i({pageIndex:0,pageSize:10}),v=i(""),h=i([]),y=i({}),b=N({get data(){return n.value},columns:C,state:{get sorting(){return f.value},get pagination(){return S.value},get globalFilter(){return v.value},get columnFilters(){return h.value},get rowSelection(){return y.value}},onSortingChange:l(f),onPaginationChange:l(S),onColumnFiltersChange:l(h),onGlobalFilterChange:l(v),globalFilterFn:(e,s,c,x)=>{const w=U(e.getValue(s),c,{threshold:j.CONTAINS});return x(w),w.passed},onRowSelectionChange:l(y),getCoreRowModel:E(),getSortedRowModel:D(),getFacetedUniqueValues:z(),getPaginationRowModel:H(),getFilteredRowModel:L()});return{instance:b,bulkActions:[{id:"archive",async action(){const e=b.getSelectedRowModel().rows;for(const s of e){const c=s.original.id;await g.delete(`${_}/companies/${a.id}/snapshot-scorecards/${c}`)}d.success("Archived Scorecard(s) Successfully")}}]}};u.components=Object.assign({AppTanStackTable:q},u.components);var Z=function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("AppTanStackTable",{attrs:{table:t.instance,"table-actions":t.bulkActions}})},J=[];const R={};var K=F(u,Z,J,!1,W,null,null,null);function W(t){for(let o in R)this[o]=R[o]}const X=function(){return K.exports}(),m={};m.setup=(t,o)=>{const a=I("id"),n=Q.list(a);return{id:a,scorecards:n}};m.components=Object.assign({PlusSvg:M,SnapshotScorecardsTable:X},m.components);var Y=function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("BaseTablePageLayout",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Snapshot Scorecards")]},proxy:!0},{key:"button",fn:function(){return[a("BaseButton",{staticClass:"space-x-2",attrs:{type:"button",to:"new",append:""}},[a("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),a("span",[t._v("New Report")])],1)]},proxy:!0},{key:"table",fn:function(){return[a("BaseVueQuery",{attrs:{query:t.scorecards},scopedSlots:t._u([{key:"success",fn:function(n){var d=n.data;return[a("SnapshotScorecardsTable",{attrs:{id:t.id,scorecards:d}})]}}])})]},proxy:!0}])})},ee=[];const $={};var te=F(m,Y,ee,!1,ae,null,null,null);function ae(t){for(let o in $)this[o]=$[o]}const me=function(){return te.exports}();export{me as default};
