import{a5 as R,n as m,V as T,i as g,f as k,u as $,e as E,g as d,h as y,B as I,bG as w,r as A,c as F,I as M}from"./index.915cb62f.js";import{T as V}from"./ToolTip.9503badb.js";import{A as D}from"./AppTanStackTable.e831bfc8.js";import{c as O}from"./createOnChangeFn.aad9fb4d.js";import{u as q}from"./createSimpleTable.1eb8476f.js";import{D as B}from"./DynamicForm.3e341623.js";import{S as G}from"./StatusInput.935a3bae.js";import"./exclamation-triangle.54812a62.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.22877ed3.js";import"./chevron-up.736f4142.js";const i={};i.props={matches:{key:"matches",required:!0,type:Array}};i.setup=(e,a)=>{const t=e,{matches:n}=R(t),s=O(),c=[s.accessor(r=>r.cyberOne.id,{id:"id",header:()=>"ID",enableColumnFilter:!1}),s.accessor(r=>r.cyberOne.name,{id:"name",header:()=>"Name",enableColumnFilter:!1}),s.accessor(r=>r.cyberOne.domain,{id:"domain",header:()=>"Domain",enableColumnFilter:!1}),s.accessor(r=>r.supplier.name,{id:"supplier",header:()=>"Supplier",enableColumnFilter:!1})];return{instance:q(n,c)}};i.components=Object.assign({AppTanStackTable:D},i.components);var N=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("AppTanStackTable",{attrs:{table:e.instance}})},H=[];const v={};var P=m(i,N,H,!1,j,null,null,null);function j(e){for(let a in v)this[a]=v[a]}const L=function(){return P.exports}();var p=(e=>(e.RATING_SERVICE_1="RATING_SERVICE_1",e.RATING_SERVICE_2="RATING_SERVICE_2",e))(p||{});const u={};u.props={value:{key:"value",required:!1,type:null},matches:{key:"matches",required:!0,type:Array}};u.setup=(e,a)=>{const t=e,n=a.emit,s=T(t,n),c=[{name:"ratingService",label:"Report Type",component:{is:g,attrs:{required:!0,options:[{text:"Rating Service 1",value:p.RATING_SERVICE_1},{text:"Rating Service 2",value:p.RATING_SERVICE_2}]}}},{name:"status",label:"Status",component:{is:G,attrs:{required:!0}}}];return{proxy:s,schema:c}};u.components=Object.assign({DynamicForm:B},u.components);var Q=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("DynamicForm",{attrs:{schema:e.schema},model:{value:e.proxy,callback:function(n){e.proxy=n},expression:"proxy"}})},W=[];const h={};var U=m(u,Q,W,!1,z,null,null,null);function z(e){for(let a in h)this[a]=h[a]}const Y=function(){return U.exports}(),f={get(e){return k(["companies",e,"cyber-one","matched-pairs","whitehawk"],()=>d.get(`${y}/companies/${e.value}/cyber-one/matched-pairs-whitehawk`).then(a=>a.data))},update(e){const a=$();return E(t=>d.post(`${y}/companies/${e.value}/cyber-one/matched-pairs-whitehawk/sync`,t).then(n=>n.data),{onSuccess(){a.invalidateQueries(["companies",e,"cyber-one","matched-pairs","whitehawk"],{exact:!0})}})}},l={};l.setup=(e,a)=>{const t=w("id"),n=f.get(t),s=A(),c=F({get(){if(s.value)return s.value;const o=new Date,x=o.getFullYear(),C=`Q${Math.ceil((o.getMonth()+1)/4)}`;return{id:t.value,matchedPair:n.data.value||[],status:{state:"COMPLETE",year:x,quarter:C},ratingService:"RATING_SERVICE_2"}},set(o){o&&(s.value=o)}}),_=M(),r=f.update(t);async function b(){c.value&&(await r.mutateAsync(c.value)).data&&_.push("../")}return{matches:n,sync:c,syncUpdate:r,upload:b}};l.components=Object.assign({WhiteHawkMatchedPairsTable:L,ToolTip:V,WhiteHawkSyncInput:Y,LoadingSpinner:I},l.components);var J=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("main",{staticClass:"space-y-6"},[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"overline",fn:function(){return[e._v("VRM Dashboard")]},proxy:!0},{key:"title",fn:function(){return[e._v("Scorecard Sync")]},proxy:!0},{key:"table",fn:function(){return[t("WhiteHawkMatchedPairsTable",{attrs:{matches:e.matches.data.value||[]}})]},proxy:!0}])}),t("BaseSimpleCard",{staticClass:"divide-y"},[t("div",{staticClass:"flex items-center space-y-1 space-x-1 p-4"},[t("BaseTypography",{attrs:{variant:"subtitle3",component:"h2"}},[e._v(" Sync Scorecard Assets ")]),t("ToolTip",[e._v(" This will sync the documents for the assets listed above to CyberOne. ")])],1),t("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),e.upload.apply(null,arguments)}}},[t("BaseVueQuery",{attrs:{query:e.matches},scopedSlots:e._u([{key:"success",fn:function(n){var s=n.data;return[t("WhiteHawkSyncInput",{attrs:{matches:s},model:{value:e.sync,callback:function(c){e.sync=c},expression:"sync"}})]}}])}),t("div",{staticClass:"p-4"},[t("BaseButton",{attrs:{disabled:e.syncUpdate.isLoading.value}},[e.syncUpdate.isLoading.value?t("LoadingSpinner"):t("span",[e._v("Sync")])],1)],1)],1)])],1)},K=[];const S={};var X=m(l,J,K,!1,Z,null,null,null);function Z(e){for(let a in S)this[a]=S[a]}const _e=function(){return X.exports}();export{_e as default};
