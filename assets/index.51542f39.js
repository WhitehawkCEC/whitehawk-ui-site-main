import{U as w}from"./arrow-down-on-square.bf61cdc5.js";import{I as U}from"./ImageInput.8f5dc406.js";import{af as B,aS as g,aC as y,aO as v,aP as d,c as I,aE as x,n as b,c7 as h,r as Q,ay as q,aJ as M}from"./index.19e24043.js";import{P as A,u as R,a as j,b as F}from"./ProductInput.ff26cc97.js";import{u as C}from"./useManufacturerProducts.bc0ede6c.js";import"./BasicModal.b3f9807e.js";import"./DynamicForm.747924b0.js";const S={read(t){return B(["products",t,"image"],()=>v.get(`${d}/products/${t.value}/image`).then(s=>s.data),{retry:!1})},update(t){const s=g();return y(e=>v.put(`${d}/products/${t.value}/image`,e,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>a),{onSuccess(){s.invalidateQueries(["products",t]),s.invalidateQueries(["products",t,"image"])}})},delete(t){const s=g();return y(()=>v.delete(`${d}/products/${t.value}/image`).then(e=>e),{onSuccess(){s.invalidateQueries(["products",t]),s.invalidateQueries(["products",t,"image"])}})}},p={};p.props={productId:{key:"productId",required:!0,type:String}};p.setup=(t,s)=>{const e=t,a=I(()=>e.productId),n=I(()=>`${d}/products/${encodeURIComponent(a.value)}/image`),r=x(),o=S.update(a);async function c(i,u){const _=new FormData;_.append("data",i),(await o.mutateAsync(_)).status===204&&(u(),r.success("Successfully updated logo."))}const m=S.delete(a);async function f(i){confirm("Are you sure you want to remove this image?")&&(await m.mutateAsync()).status===204&&(i(),r.success("Successfully deleted logo."))}return{imageUrl:n,updateImage:c,removeImage:f}};p.components=Object.assign({ImageInput:U},p.components);var L=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("BaseSimpleCard",{staticClass:"divide-y"},[e("BaseTypography",{staticClass:"p-4",attrs:{variant:"subtitle3",component:"h3"}},[t._v(" Product Logo ")]),e("ImageInput",{attrs:{url:t.imageUrl,"btn-text":"Change Logo"},on:{"update-image":t.updateImage,"remove-image":t.removeImage}})],1)},T=[];const $={};var k=b(p,L,T,!1,D,null,null,null);function D(t){for(let s in $)this[s]=$[s]}const E=function(){return k.exports}(),l={};l.setup=(t,s)=>{const e=h("id"),a=h("productId"),n=[R.list(),j.list(),F.list()],r=C.read(e,a),o=Q();q(()=>r.data.value,u=>{u&&(o.value=u)},{immediate:!0});const c=M(),m=x(),f=C.update(e,a);async function i(){o.value&&await f.mutateAsync(o.value)&&m.success("Successfully updated product."),c.push(`/admin/manufacturers/${e.value}/products`)}return{productId:a,queries:n,product:o,updateProduct:i}};l.components=Object.assign({ManufacturerProductLogoInput:E,ProductInput:A,SaveSvg:w},l.components);var O=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"space-y-8"},[e("ManufacturerProductLogoInput",{attrs:{"product-id":t.productId}}),e("BaseSimpleCard",{staticClass:"divide-y"},[e("BaseTypography",{staticClass:"p-4",attrs:{variant:"subtitle3",component:"h3"}},[t._v(" Product Attributes ")]),e("form",{staticClass:"divide-y",on:{submit:function(a){return a.preventDefault(),t.updateProduct.apply(null,arguments)}}},[e("BaseVueQueries",{attrs:{queries:t.queries},scopedSlots:t._u([{key:"success",fn:function(a){var n=a[0],r=a[1],o=a[2];return[e("ProductInput",{attrs:{"is-id-readonly":!0,types:n,features:r,categories:o},model:{value:t.product,callback:function(c){t.product=c},expression:"product"}})]}}])}),e("BaseButton",{staticClass:"w-full space-x-2 md:w-auto"},[e("SaveSvg",{staticClass:"h-auto w-4 xl:w-5"}),e("span",[t._v("Update")])],1)],1)],1)],1)},z=[];const P={};var J=b(l,O,z,!1,N,null,null,null);function N(t){for(let s in P)this[s]=P[s]}const tt=function(){return J.exports}();export{tt as default};
