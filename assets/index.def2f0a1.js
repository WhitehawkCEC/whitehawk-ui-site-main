import{u as R,e as M,f as j,g as v,h as y,$ as q,X as D,n as h,a5 as O,I as Q,G as E,d as f,v as m,a6 as N,P as V}from"./index.f4a84ec3.js";import{A as z,R as L}from"./RowSelectionInput.7e685f59.js";import{A as X,T as G}from"./AppTanStackTable.c5c36b3a.js";import{u as H,c as U,i as p,r as Y,h as J,g as K,f as W,e as Z,d as ee}from"./createOnChangeFn.c812c8eb.js";import{u as te}from"./useManufacturers.c5f62561.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.3c84e1c2.js";import"./chevron-up.736f4142.js";const k={create(){const e=R();return M(t=>v.post(`${y}/featured-manufacturers`,t).then(a=>a.data),{onSuccess(){e.invalidateQueries(["manufacturers"],{exact:!0})}})},delete(){const e=R();return M(t=>v.delete(`${y}/featured-manufacturers/${t}`).then(a=>a.data),{onSuccess(){e.invalidateQueries(["manufacturers"],{exact:!0})}})},list(){return j(["featured-manufacturers"],()=>v.get(`${y}/featured-manufacturers`).then(e=>e.data))}},u={};u.props={value:{key:"value",required:!1,type:String},remove:{key:"remove",required:!0,type:Function}};u.setup=(e,t)=>({});u.components=Object.assign({DateIsoStringDisplay:q,XSvg:D},u.components);var ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.value?a("div",{staticClass:"flex items-center space-x-1"},[a("DateIsoStringDisplay",{staticClass:"inline-flex items-center rounded bg-indigo-100 px-2 py-0.5 text-xs font-medium uppercase leading-4 tracking-widest text-indigo-800",attrs:{value:e.value,format:"date"}}),a("BaseIcon",{attrs:{color:"danger",size:"small",action:"secondary"},on:{click:e.remove}},[a("XSvg",{staticClass:"w-3"})],1)],1):e._e()},ne=[];const A={};var se=h(u,ae,ne,!1,re,null,null,null);function re(e){for(let t in A)this[t]=A[t]}const oe=function(){return se.exports}(),c={};c.props={manufacturers:{key:"manufacturers",required:!0,type:Array}};c.setup=(e,t)=>{const a=e,{manufacturers:_}=O(a),l=Q(),i=E(),w=k.create(),P=k.delete(),r=U(),B=[r.display({id:"select",header:({table:n})=>f(z,{props:{table:n}}),cell:({row:n})=>f(L,{props:{row:n}})}),r.accessor("id",{header:()=>"Id",enableColumnFilter:!1}),r.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),r.accessor("url",{header:()=>"URL",enableColumnFilter:!1}),r.accessor(n=>n.featured,{id:"featured",header:()=>"Featured",cell:n=>f(oe,{props:{value:n.getValue(),async remove(){await P.mutateAsync(n.row.original.id)&&(i.success("Featured removed successfully."),window.location.reload())}}}),enableColumnFilter:!1}),r.display({id:"actions",header:"Actions",cell:({row:n})=>f(G,{props:{actions:[{id:"view",action(){l.push(`/admin/manufacturers/${n.original.id}/products`)}},{id:"edit",action(){l.push(`/admin/manufacturers/${n.original.id}`)}},{id:"setFeatured",async action(){await w.mutateAsync({id:n.original.id,name:n.original.name})&&i.success("Successfully featured manufacturer.")}}].filter(s=>n.original.featured?s.id!=="setFeatured":s)}})})],S=m([]),b=m({pageIndex:0,pageSize:10}),x=m(""),F=m({}),$=H({get data(){return _.value},columns:B,state:{get sorting(){return S.value},get pagination(){return b.value},get globalFilter(){return x.value},get rowSelection(){return F.value}},onSortingChange:p(S),onPaginationChange:p(b),onGlobalFilterChange:p(x),globalFilterFn:(n,s,o,d)=>{const C=Y(n.getValue(s),o,{threshold:J.CONTAINS});return d(C),C.passed},onRowSelectionChange:p(F),getCoreRowModel:K(),getSortedRowModel:W(),getPaginationRowModel:Z(),getFilteredRowModel:ee()});return{instance:$,bulkActions:[{id:"setFeatured",async action(){const n=$.getSelectedRowModel().rows,s=[];if(n.length>0){for(const o of n)if(!o.original.featured){const d=await w.mutateAsync({id:o.original.id,name:o.original.name});d&&s.push(d.id)}i.success(`Successfully Featured ${s.length}/${n.length} Manufacturers(s).`),window.location.reload()}else i.error("You must select a row.")}}]}};c.components=Object.assign({AppTanStackTable:X},c.components);var ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("AppTanStackTable",{attrs:{table:e.instance,"table-actions":e.bulkActions}})},ce=[];const T={};var le=h(c,ue,ce,!1,ie,null,null,null);function ie(e){for(let t in T)this[t]=T[t]}const de=function(){return le.exports}(),g={};g.setup=(e,t)=>({manufacturers:te.list()});g.components=Object.assign({BaseTablePageLayout:N,PlusSvg:V,ManufacturersTable:de},g.components);var fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Manufacturers")]},proxy:!0},{key:"button",fn:function(){return[a("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{to:"/admin/manufacturers/new"}},[a("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),a("span",[e._v("Add Manufacturer")])],1)]},proxy:!0},{key:"table",fn:function(){return[a("BaseVueQuery",{attrs:{query:e.manufacturers},scopedSlots:e._u([{key:"success",fn:function(_){var l=_.data;return[a("ManufacturersTable",{attrs:{manufacturers:l}})]}}])})]},proxy:!0}])})},me=[];const I={};var pe=h(g,fe,me,!1,ge,null,null,null);function ge(e){for(let t in I)this[t]=I[t]}const Ce=function(){return pe.exports}();export{Ce as default};
