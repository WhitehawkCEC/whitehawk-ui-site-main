import{E as C}from"./exclamation-triangle.54812a62.js";import{bO as h,aI as w,aR as f,n as x,ap as S,bM as _,c as T,aF as A,r as g}from"./index.c3d11368.js";import{B}from"./BasicModal.66412ea7.js";import{A as M,T as P}from"./AppTanStackTable.e2c5a1d6.js";import{I as $}from"./IsoDateTimeDisplay.cbe79cd4.js";import{c as k}from"./createOnChangeFn.f4259cb2.js";import{u as F}from"./createSimpleTable.02919ee0.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.4ea4f608.js";import"./chevron-up.736f4142.js";const r={};r.props={categories:{key:"categories",required:!0,type:Array}};r.setup=(e,a)=>{const t=e,{categories:l}=h(t),i=a.emit,u=w(),n=k(),p=[n.accessor(s=>{var o;return(o=s.id)==null?void 0:o.value},{id:"id",header:()=>"ID",enableColumnFilter:!1}),n.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),n.accessor(s=>{var o;return(o=s.meta)==null?void 0:o.updatedAt},{id:"updatedAt",header:()=>"Last Updated",cell:s=>f($,{props:{value:s.getValue(),format:"date"}}),enableColumnFilter:!1}),n.accessor("description",{header:()=>"Description",enableColumnFilter:!1}),n.display({id:"actions",header:"Actions",cell:({row:s})=>f(P,{props:{actions:[{id:"edit",action(){var o;u.push(`/admin/products/categories/${(o=s.original.id)==null?void 0:o.value}`)}},{id:"delete",action(){i("delete",s.original)}}]}})})];return{instance:F(l,p)}};r.components=Object.assign({AppTanStackTable:M},r.components);var D=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("AppTanStackTable",{attrs:{table:e.instance}})},E=[];const v={};var I=x(r,D,E,!1,j,null,null,null);function j(e){for(let a in v)this[a]=v[a]}const R=function(){return I.exports}(),c={};c.setup=(e,a)=>{const t=_.list(),l=T(()=>t.data.value?t.data.value.sort((d,b)=>d.name.localeCompare(b.name)):[]),i=A(),u=_.delete(),n=g();function p(d){n.value={category:{...d}},s.value=!0}async function m(){if(n.value)await u.mutateAsync(n.value),o(),i.success("Category successfully deleted");else throw new Error("Invalid request.")}const s=g(!1);function o(){s.value=!1}return{categories:l,setPayload:p,deleteCategory:m,isModalVisible:s,closeModal:o}};c.components=Object.assign({PlusSvg:S,ProductCategoriesTable:R,BasicModal:B,WarningSvg:C},c.components);var V=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Product Categories")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"/admin/products/categories/new"}},[t("PlusSvg",{staticClass:"mr-1 w-5 xl:w-5"}),e._v(" Category ")],1)]},proxy:!0},{key:"table",fn:function(){return[t("ProductCategoriesTable",{attrs:{categories:e.categories},on:{delete:e.setPayload}})]},proxy:!0}])}),t("BasicModal",{directives:[{name:"show",rawName:"v-show",value:e.isModalVisible,expression:"isModalVisible"}],on:{close:e.closeModal},scopedSlots:e._u([{key:"body",fn:function(){return[t("div",{staticClass:"flex flex-col items-center justify-center space-y-8 px-5 pb-6"},[t("div",{staticClass:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:space-x-4 lg:space-y-0"},[t("BaseIcon",{staticClass:"mx-auto max-w-min lg:mx-0 lg:max-w-none",attrs:{color:"danger",shape:"square"}},[t("WarningSvg",{staticClass:"h-auto w-5"})],1),t("BaseTypography",{attrs:{component:"p",variant:"subtitle1"}},[e._v(" Are you sure you want to delete this category? ")])],1),t("BaseButton",{attrs:{"display-type":"danger",action:"secondary"},on:{click:e.deleteCategory}},[e._v(" Delete ")])],1)]},proxy:!0}])})],1)},q=[];const y={};var N=x(c,V,q,!1,O,null,null,null);function O(e){for(let a in y)this[a]=y[a]}const Z=function(){return N.exports}();export{Z as default};
