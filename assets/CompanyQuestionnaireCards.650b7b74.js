import{P as b}from"./ProgressBar.1de474b6.js";import{I as w}from"./IsoDateTimeDisplay.f5c012d0.js";import{c as i,c1 as C,cB as x,cC as T,n as q,aK as j,aG as P}from"./index.b904d58c.js";import{u as R}from"./active-questionnaire.4ad52247.js";const g={};g.props={accountId:{key:"accountId",required:!0,type:String},id:{key:"id",required:!0,type:String}};g.setup=(e,a)=>{const t=e,c=i(()=>t.accountId),r=i(()=>t.id),l=C.read(r),u=i(()=>l.data.value),v=i(()=>{var s,n;return(n=(s=u.value)==null?void 0:s.meta)==null?void 0:n.updatedAt}),p=i(()=>{var n;const s=[];return(n=u.value)==null||n.sections.forEach(o=>{s.push(o.questions.length)}),s.reduce((o,d)=>o+d,0)}),_=x.list(c),m=i(()=>{var s,n,o;return(o=(n=(s=_.data.value)==null?void 0:s.find(d=>{var f;return((f=d.questionnaireId)==null?void 0:f.value)===r.value}))==null?void 0:n.id)==null?void 0:o.value}),y=T.list(m);return{questionnaireId:r,questionnaire:u,lastUpdated:v,totalQuestions:p,answeredList:y}};g.components=Object.assign({ProgressBar:b,IsoDateTimeDisplay:w},g.components);var L=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.questionnaire?t("BaseSimpleCard",{staticClass:"relative overflow-hidden p-5"},[t("BaseVueQuery",{attrs:{query:e.answeredList},scopedSlots:e._u([{key:"success",fn:function(c){var r=c.data;return[t("ProgressBar",{staticClass:"absolute inset-x-0 bottom-0 h-2 bg-gray-200",attrs:{current:r.length,max:e.totalQuestions}})]}}],null,!1,3440009378)}),t("div",{staticClass:"relative flex flex-col space-y-3"},[t("div",{staticClass:"flex flex-col space-y-1"},[e.lastUpdated?t("BaseTypography",{staticClass:"text-gray-500 uppercase",attrs:{variant:"overline"}},[t("span",[e._v("Last Updated:")]),t("IsoDateTimeDisplay",{attrs:{value:e.lastUpdated,format:"date"}})],1):e._e(),t("BaseTypography",{attrs:{variant:"subtitle3"}},[e._v(" "+e._s(e.questionnaire.name)+" ")])],1),t("div",{staticClass:"flex justify-between items-baseline"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p3"}},[e._v(" "+e._s(e.totalQuestions)+" Questions ")]),t("BaseButton",{attrs:{shape:"rectangle",to:`custom-assessments/${e.questionnaireId}/results`}},[e._v(" Results ")])],1)])],1):e._e()},U=[];const B={};var D=q(g,L,U,!1,E,null,null,null);function E(e){for(let a in B)this[a]=B[a]}const A=function(){return D.exports}(),I={};I.props={accountId:{key:"accountId",required:!0,type:String},id:{key:"id",required:!0,type:String}};I.setup=(e,a)=>{const t=e,c=i(()=>t.accountId),r=i(()=>t.id),l=C.read(r),u=i(()=>l.data.value),v=i(()=>{var s,n;return(n=(s=u.value)==null?void 0:s.meta)==null?void 0:n.updatedAt}),p=i(()=>{var n;const s=[];return(n=u.value)==null||n.sections.forEach(o=>{s.push(o.questions.length)}),s.reduce((o,d)=>o+d,0)}),_=x.list(c),m=i(()=>{var s,n,o;return(o=(n=(s=_.data.value)==null?void 0:s.find(d=>{var f;return((f=d.questionnaireId)==null?void 0:f.value)===r.value}))==null?void 0:n.id)==null?void 0:o.value}),y=T.list(m);return{questionnaireId:r,questionnaire:u,lastUpdated:v,totalQuestions:p,answeredList:y}};I.components=Object.assign({ProgressBar:b,IsoDateTimeDisplay:w},I.components);var F=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.questionnaire?t("BaseSimpleCard",{staticClass:"relative overflow-hidden p-5"},[t("BaseVueQuery",{attrs:{query:e.answeredList},scopedSlots:e._u([{key:"success",fn:function(c){var r=c.data;return[t("ProgressBar",{staticClass:"absolute inset-x-0 bottom-0 h-2 bg-gray-200",attrs:{current:r.length,max:e.totalQuestions}})]}}],null,!1,3440009378)}),t("div",{staticClass:"relative flex flex-col space-y-3"},[t("div",{staticClass:"flex flex-col space-y-1"},[e.lastUpdated?t("BaseTypography",{staticClass:"text-gray-500 uppercase",attrs:{variant:"overline"}},[t("span",[e._v("Last Updated:")]),t("IsoDateTimeDisplay",{attrs:{value:e.lastUpdated,format:"date"}})],1):e._e(),t("BaseTypography",{attrs:{variant:"subtitle3"}},[e._v(" "+e._s(e.questionnaire.name)+" ")])],1),t("div",{staticClass:"flex justify-between items-baseline"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p3"}},[e._v(" "+e._s(e.totalQuestions)+" Questions ")]),t("BaseButton",{attrs:{shape:"rectangle",to:{path:`custom-assessments/${e.questionnaireId}`,query:{section:"0"}}}},[e._v(" Continue ")])],1)])],1):e._e()},M=[];const $={};var N=q(I,F,M,!1,O,null,null,null);function O(e){for(let a in $)this[a]=$[a]}const V=function(){return N.exports}(),Q={};Q.props={accountId:{key:"accountId",required:!0,type:String},id:{key:"id",required:!0,type:String}};Q.setup=(e,a)=>{const t=e,c=i(()=>t.accountId),r=i(()=>t.id),l=C.read(r),u=i(()=>l.data.value),v=i(()=>{var n;const s=[];return(n=u.value)==null||n.sections.forEach(o=>{s.push(o.questions.length)}),s.reduce((o,d)=>o+d,0)}),p=R(),_=j(),m=x.create();async function y(){const{response:s}=await m.mutateAsync({accountId:{value:c.value},questionnaireId:{value:r.value}});s.taken&&s.taken.id&&(await p.clearData(),await p.setQuestionnaireId(r.value),await p.setTakenId(s.taken.id.value),_.push({path:`custom-assessments/${r.value}`,query:{section:"0"}}))}return{questionnaire:u,totalQuestions:v,createTaken:y}};var z=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.questionnaire?t("BaseSimpleCard",{staticClass:"relative overflow-hidden flex h-full flex-col justify-between space-y-3 p-5"},[t("div",{staticClass:"flex flex-col space-y-1"},[t("BaseTypography",{staticClass:"text-gray-500 uppercase",attrs:{variant:"overline"}},[e._v(" Not Started ")]),t("BaseTypography",{attrs:{variant:"subtitle3"}},[e._v(" "+e._s(e.questionnaire.name)+" ")])],1),t("div",{staticClass:"flex justify-between items-baseline"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p3"}},[e._v(" "+e._s(e.totalQuestions)+" Questions ")]),t("BaseButton",{attrs:{shape:"rectangle"},on:{click:e.createTaken}},[e._v("Begin")])],1)]):e._e()},G=[];const S={};var K=q(Q,z,G,!1,H,null,null,null);function H(e){for(let a in S)this[a]=S[a]}const J=function(){return K.exports}(),h={};h.props={accountId:{key:"accountId",required:!0,type:String},questionnaireId:{key:"questionnaireId",required:!0,type:String}};h.setup=(e,a)=>{const t=P(),c=i(()=>t.inProgressQuestionnaires.map(l=>{var u;return(u=l.id)==null?void 0:u.value})),r=i(()=>t.completedQuestionnaires.map(l=>{var u;return(u=l.id)==null?void 0:u.value}));return{inProgressIds:c,completedIds:r}};h.components=Object.assign({InProgressQuestionnaireCard:V,CompletedQuestionnaireCard:A,NotStartedQuestionnaireCard:J},h.components);var W=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.inProgressIds.includes(e.questionnaireId)?t("div",[t("InProgressQuestionnaireCard",{attrs:{id:e.questionnaireId,"account-id":e.accountId}})],1):e.completedIds.includes(e.questionnaireId)?t("div",[t("CompletedQuestionnaireCard",{attrs:{id:e.questionnaireId,"account-id":e.accountId}})],1):t("div",[t("NotStartedQuestionnaireCard",{attrs:{id:e.questionnaireId,"account-id":e.accountId}})],1)},X=[];const k={};var Y=q(h,W,X,!1,Z,null,null,null);function Z(e){for(let a in k)this[a]=k[a]}const ne=function(){return Y.exports}();export{A as C,V as I,ne as a};
