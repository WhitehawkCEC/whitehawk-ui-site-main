import{U as b}from"./arrow-down-on-square.bf61cdc5.js";import{I as Q}from"./ImageInput.b1383711.js";import{ag as U,aT as _,aD as y,aP as v,aQ as d,c as I,aF as P,n as w,c0 as h,r as B,aA as q,aI as A}from"./index.88f35843.js";import{P as M,u as F,a as R,b as T}from"./ProductInput.993611c0.js";import{u as C}from"./useManufacturerProducts.33321a98.js";import"./BasicModal.372e3950.js";import"./DynamicForm.a0931955.js";const S={read(t){return U(["products",t,"image"],()=>v.get(`${d}/products/${t.value}/image`).then(s=>s.data),{retry:!1})},update(t){const s=_();return y(e=>v.put(`${d}/products/${t.value}/image`,e,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>a),{onSuccess(){s.invalidateQueries(["products",t]),s.invalidateQueries(["products",t,"image"])}})},delete(t){const s=_();return y(()=>v.delete(`${d}/products/${t.value}/image`).then(e=>e),{onSuccess(){s.invalidateQueries(["products",t]),s.invalidateQueries(["products",t,"image"])}})}},p={};p.props={productId:{key:"productId",required:!0,type:String}};p.setup=(t,s)=>{const e=t,a=I(()=>e.productId),n=I(()=>`${d}/products/${encodeURIComponent(a.value)}/image`),r=P(),o=S.update(a);async function c(i,u){const g=new FormData;g.append("data",i),(await o.mutateAsync(g)).status===204&&(u(),r.success("Successfully updated logo."))}const m=S.delete(a);async function f(i){confirm("Are you sure you want to remove this image?")&&(await m.mutateAsync()).status===204&&(i(),r.success("Successfully deleted logo."))}return{imageUrl:n,updateImage:c,removeImage:f}};p.components=Object.assign({ImageInput:Q},p.components);var j=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("BaseSimpleCard",{staticClass:"divide-y"},[e("BaseTypography",{staticClass:"p-4",attrs:{variant:"subtitle3",component:"h3"}},[t._v(" Product Logo ")]),e("ImageInput",{attrs:{url:t.imageUrl,"btn-text":"Change Logo"},on:{"update-image":t.updateImage,"remove-image":t.removeImage}})],1)},D=[];const $={};var L=w(p,j,D,!1,k,null,null,null);function k(t){for(let s in $)this[s]=$[s]}const E=function(){return L.exports}(),l={};l.setup=(t,s)=>{const e=h("id"),a=h("productId"),n=[F.list(),R.list(),T.list()],r=C.read(e,a),o=B();q(()=>r.data.value,u=>{u&&(o.value=u)},{immediate:!0});const c=A(),m=P(),f=C.update(e,a);async function i(){o.value&&await f.mutateAsync(o.value)&&m.success("Successfully updated product."),c.push(`/admin/manufacturers/${e.value}/products`)}return{id:e,queries:n,product:o,updateProduct:i}};l.components=Object.assign({ManufacturerProductLogoInput:E,ProductInput:M,SaveSvg:b},l.components);var O=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"space-y-8"},[e("ManufacturerProductLogoInput",{attrs:{"product-id":t.id}}),e("BaseSimpleCard",{staticClass:"divide-y"},[e("BaseTypography",{staticClass:"p-4",attrs:{variant:"subtitle3",component:"h3"}},[t._v(" Product Attributes ")]),e("form",{staticClass:"divide-y",on:{submit:function(a){return a.preventDefault(),t.updateProduct.apply(null,arguments)}}},[e("BaseVueQueries",{attrs:{queries:t.queries},scopedSlots:t._u([{key:"success",fn:function(a){var n=a[0],r=a[1],o=a[2];return[e("ProductInput",{attrs:{"is-id-readonly":!0,types:n,features:r,categories:o},model:{value:t.product,callback:function(c){t.product=c},expression:"product"}})]}}])}),e("div",{staticClass:"flex flex-col space-y-2 p-4 md:flex-row md:space-y-0 md:space-x-2"},[e("BaseButton",{staticClass:"w-full space-x-2 md:w-auto"},[e("SaveSvg",{staticClass:"h-auto w-4 xl:w-5"}),e("span",[t._v("Update")])],1)],1)],1)],1)],1)},z=[];const x={};var N=w(l,O,z,!1,G,null,null,null);function G(t){for(let s in x)this[s]=x[s]}const tt=function(){return N.exports}();export{tt as default};
