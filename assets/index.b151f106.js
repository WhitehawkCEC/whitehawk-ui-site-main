import{F}from"./FormButton.12c4a05e.js";import{S as j}from"./SubscriptionProductConfigInput.bdca84c3.js";import{d as b,a_ as U,aB as k,aJ as q,aG as B,n as p,bP as D,bU as A,ce as S,ca as $,c1 as g}from"./index.fe49c200.js";import{u as C}from"./useAccountSubscriptionProductConfig.61151eb1.js";import{D as E}from"./DateRangeInput.922471ef.js";import{d as M}from"./index.bb979e3d.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./ApiKeyInput.ed681686.js";import"./ApiKeyValidation.907bbd20.js";import"./ApiKeyDescriptionDisplay.6daeae85.js";import"./useBitsightCompanies.7a5ecf31.js";import"./useBlackKiteEntities.91277f98.js";import"./index.bf416bbb.js";import"./index.5b0eb428.js";import"./index.7a54c9f6.js";import"./index.87e44ac4.js";import"./index.a57ff14d.js";import"./index.96bf7158.js";import"./DynamicForm.ffb2cae3.js";const a={};a.props={accountId:{key:"accountId",required:!0,type:String},subscriptionId:{key:"subscriptionId",required:!0,type:String},productId:{key:"productId",required:!0,type:String}};a.setup=(t,s)=>{const e=t,n=b(()=>e.accountId),o=b(()=>e.subscriptionId),c=b(()=>e.productId),i=U({value:{oneofKind:void 0}}),l=C.get(n,o,c);k(()=>l.data.value,r=>{r&&(i.value=r.config?r.config:{value:{oneofKind:void 0}})},{immediate:!0});const m=q(),_=B(),f=C.update(n,o,c);async function v(){await f.mutateAsync({config:i.value}),_.success("Successfully updated subscription product."),m.push(`/admin/companies/${n.value}/subscriptions/${o.value}/products`)}return{id:n,config:i,submit:v}};a.components=Object.assign({SubscriptionProductConfigInput:j,FormButton:F},a.components);var w=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),t.submit.apply(null,arguments)}}},[e("fieldset",{staticClass:"grid gap-1 p-4 sm:grid-cols-3 sm:items-center sm:gap-4"},[t._m(0),e("div",{staticClass:"flex flex-col space-y-6 sm:col-span-2"},[e("SubscriptionProductConfigInput",{attrs:{id:t.id},model:{value:t.config,callback:function(n){t.config=n},expression:"config"}})],1)]),e("FormButton",{attrs:{action:"update","is-valid-form":!0}})],1)},O=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("legend",{staticClass:"block font-body text-sm font-medium leading-5 tracking-wide text-gray-600 antialiased"},[t._v(" Config "),e("span",{staticClass:"text-red-700"},[t._v("*")])])])}];const h={};var G=p(a,w,O,!1,K,null,null,null);function K(t){for(let s in h)this[s]=h[s]}const N=function(){return G.exports}(),T=[{name:"name",label:"Name",component:{is:D,attrs:{required:!0,class:"w-full lg:max-w-sm"}}},{name:"validity",label:"Validity",component:{is:E,attrs:{required:!0}}}],z=M(T);let J,H;const x={};var L=p(z,J,H,!1,Q,null,null,null);function Q(t){for(let s in x)this[s]=x[s]}const W=function(){return L.exports}(),u={};u.props={accountId:{key:"accountId",required:!0,type:String},subscriptionId:{key:"subscriptionId",required:!0,type:String},productId:{key:"productId",required:!0,type:String}};u.setup=(t,s)=>{const e=t,{accountId:n,subscriptionId:o,productId:c}=A(e),i=U({name:"",validity:S.DateRange.create()}),l=$.read(n,o,c);k(()=>l.data.value,r=>{var y,I;r&&(i.value={name:((y=r.product)==null?void 0:y.name)||"",validity:((I=r.product)==null?void 0:I.validity)||S.DateRange.create()})},{immediate:!0});const m=q(),_=B(),f=$.update(n,o,c);async function v(){await f.mutateAsync(i.value),_.success("Successfully updated subscription product."),m.push(`/admin/companies/${n.value}/subscriptions/${o.value}/products`)}return{update:i,submit:v}};u.components=Object.assign({SubscriptionProductPartialUpdateRequestInput:W,FormButton:F},u.components);var X=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),t.submit.apply(null,arguments)}}},[e("SubscriptionProductPartialUpdateRequestInput",{model:{value:t.update,callback:function(n){t.update=n},expression:"update"}}),e("FormButton",{attrs:{action:"update","is-valid-form":!0}})],1)},Y=[];const P={};var Z=p(u,X,Y,!1,V,null,null,null);function V(t){for(let s in P)this[s]=P[s]}const tt=function(){return Z.exports}(),d={};d.setup=(t,s)=>{const e=g("id"),n=g("subscriptionId"),o=g("productId");return{id:e,subscriptionId:n,productId:o}};d.components=Object.assign({UpdateSubscriptionProductForm:tt,UpdateSubscriptionProductConfigForm:N},d.components);var et=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"space-y-6"},[e("BaseSimpleCard",{staticClass:"divide-y"},[e("BaseTypography",{staticClass:"p-4",attrs:{component:"h4",variant:"subtitle3"}},[t._v(" Update Product Attributes ")]),e("UpdateSubscriptionProductForm",{attrs:{"account-id":t.id,"subscription-id":t.subscriptionId,"product-id":t.productId}})],1),e("BaseSimpleCard",{staticClass:"divide-y"},[e("BaseTypography",{staticClass:"p-4",attrs:{component:"h4",variant:"subtitle3"}},[t._v(" Update Product Config ")]),e("UpdateSubscriptionProductConfigForm",{attrs:{"account-id":t.id,"subscription-id":t.subscriptionId,"product-id":t.productId}})],1)],1)},st=[];const R={};var nt=p(d,et,st,!1,ot,null,null,null);function ot(t){for(let s in R)this[s]=R[s]}const xt=function(){return nt.exports}();export{xt as default};
