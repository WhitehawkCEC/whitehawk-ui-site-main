import{E as k}from"./exclamation-triangle.54812a62.js";import{aI as S,c as p,aR as C,n as x,ap as A,r as M,aY as P,bH as T,aF as j}from"./index.c27a1789.js";import{B as D}from"./BasicModal.a3b803da.js";import{B as E}from"./BackButton.553a2fdb.js";import{A as R,T as V}from"./AppTanStackTable.9573a171.js";import{I}from"./IsoDateTimeDisplay.a0a0ad3f.js";import{c as q}from"./createOnChangeFn.bb7e1ced.js";import{u as N}from"./createSimpleTable.306462ff.js";import"./chevron-left.0808b01b.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.ef5ca218.js";import"./chevron-up.736f4142.js";const l={};l.props={features:{key:"features",required:!0,type:Array}};l.setup=(e,s)=>{const t=e,c=s.emit,i=S(),f=p(()=>t.features),n=q(),_=[n.accessor(a=>{var r;return(r=a.id)==null?void 0:r.value},{id:"id",header:()=>"ID",enableColumnFilter:!1}),n.accessor("name",{id:"name",header:()=>"Feature",enableColumnFilter:!1}),n.accessor(a=>{var r;return(r=a.meta)==null?void 0:r.updatedAt},{id:"updatedAt",header:()=>"Last Updated",cell:a=>C(I,{props:{value:a.getValue(),format:"date"}}),enableColumnFilter:!1}),n.accessor("description",{id:"description",header:()=>"Description",enableColumnFilter:!1}),n.display({id:"actions",header:"Actions",cell:({row:a})=>C(V,{props:{actions:[{id:"edit",action(){var r;i.push(`/admin/products/features/${(r=a.original.id)==null?void 0:r.value}`)}},{id:"delete",action(){if(a.original&&a.original.id){const r=a.original.id.value,d=a.original.name,v=a.original.description;c("delete",{id:{value:r},name:d,description:v})}}}]}})})];return{instance:N(f,_)}};l.components=Object.assign({AppTanStackTable:R},l.components);var Q=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},H=[];const b={};var O=x(l,Q,H,!1,W,null,null,null);function W(e){for(let s in b)this[s]=b[s]}const z=function(){return O.exports}(),u={};u.props={features:{key:"features",required:!0,type:Array}};u.setup=(e,s)=>{const t=e,c=M(!1),i=p(()=>t.features),f=p(()=>i.value.sort((o,y)=>o.name.localeCompare(y.name))),n=P(),_=p(()=>{var o;return(o=n.value)==null?void 0:o.name}),h=T.delete();function a(o){n.value=o,c.value=!0}const r=S(),d=j();async function v(){var o;if(n.value){const y={productFeature:{...n.value}};try{await h.mutateAsync(y),d.success(`Feature  ${(o=n.value)==null?void 0:o.name} deleted`),r.push("/admin/products/features")}catch(g){const{message:w}=g;d.error(w,g)}}F()}function F(){c.value=!1}return{isModalVisible:c,sortedFeatures:f,featureName:_,getFeature:a,deleteFeature:v,closeModal:F}};u.components=Object.assign({BackButton:E,PlusSvg:A,BasicModal:D,WarningSvg:k,ProductFeaturesTable:z},u.components);var L=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",{staticClass:"space-y-8"},[t("div",{staticClass:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:space-x-4 sm:space-y-0"},[t("div",[t("BackButton",{attrs:{link:"/admin/products"}})],1)]),t("div",{staticClass:"flex justify-between"},[t("BaseTypography",{attrs:{component:"h2",variant:"h5"}},[e._v(" Product Features ")]),t("BaseButton",{staticClass:"space-x-1",attrs:{to:"/admin/products/features/new",type:"button"}},[t("PlusSvg",{staticClass:"mr-1 w-5 xl:w-5"}),e._v(" Feature ")],1)],1),t("BaseSimpleCard",{staticClass:"p-4"},[t("BasicModal",{directives:[{name:"show",rawName:"v-show",value:e.isModalVisible,expression:"isModalVisible"}],attrs:{"modal-width":!0},on:{close:e.closeModal},scopedSlots:e._u([{key:"body",fn:function(){return[t("div",{staticClass:"flex flex-col"},[t("div",{staticClass:"flex flex-col"},[t("BaseTypography",{staticClass:"pl-4",attrs:{component:"p",variant:"subtitle1"}},[t("BaseIcon",{attrs:{color:"danger",shape:"square"}},[t("WarningSvg",{staticClass:"h-auto w-4"})],1),e._v(" Do you really want to delete "),t("span",{staticClass:"text-red-500"},[e._v(" "+e._s(e.featureName)+" ")]),e._v(" feature. ")],1)],1),t("div",{staticClass:"flex justify-center"},[t("BaseButton",{staticClass:"my-8 w-96",attrs:{"display-type":"danger",action:"secondary"},on:{click:e.deleteFeature}},[e._v(" Delete ")])],1)])]},proxy:!0}])}),t("ProductFeaturesTable",{attrs:{features:e.sortedFeatures},on:{delete:e.getFeature}})],1)],1)},U=[];const B={};var Y=x(u,L,U,!1,G,null,null,null);function G(e){for(let s in B)this[s]=B[s]}const J=function(){return Y.exports}(),m={};m.setup=(e,s)=>({featuresQuery:T.list()});m.components=Object.assign({ProductFeatures:J},m.components);var K=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",{staticClass:"space-y-8"},[t("BaseVueQuery",{attrs:{query:e.featuresQuery},scopedSlots:e._u([{key:"success",fn:function(c){var i=c.data;return[t("div",{staticClass:"flex flex-col space-y-12"},[t("ProductFeatures",{attrs:{features:i.productFeatures}})],1)]}}])})],1)},X=[];const $={};var Z=x(m,K,X,!1,ee,null,null,null);function ee(e){for(let s in $)this[s]=$[s]}const me=function(){return Z.exports}();export{me as default};
