import{R as j}from"./arrow-path.24b87f73.js";import{c as a,aS as $,n as W,L as q,aF as M,cF as L,cG as D,cO as P,cI as U,cJ as V,b$ as N,cP as Y,cQ as G,cM as H}from"./index.1f71e50f.js";import{A as K}from"./AppTanStackTable.99a49d86.js";import{S as R,V as z,p as T,a as J}from"./SyncStatusDisplay.42712efd.js";import{c as Q}from"./createOnChangeFn.0c048202.js";import{u as X}from"./createSimpleTable.f43bc837.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.861d9b26.js";import"./check-circle.48e4a9f5.js";import"./chevron-up.736f4142.js";const C={};C.props={value:{key:"value",required:!0,type:Array}};C.setup=(e,t)=>{const n=e,m=a(()=>n.value),l=Q(),i=[l.accessor("toBeSynced",{header:()=>"To Be Synced",cell:c=>$(R,{props:{value:c.getValue()}}),enableColumnFilter:!1}),l.group({id:"supplier",header:()=>"Supplier",columns:[l.accessor(c=>c.supplier.name,{id:"name",header:()=>"Name",enableColumnFilter:!1}),l.accessor(c=>c.supplier.domain,{id:"domain",header:()=>"Domain",enableColumnFilter:!1})]}),l.accessor("syncedFromSupplyWisdom",{header:()=>"Synced From Supply Wisdom?",cell:c=>$(R,{props:{value:c.getValue()}}),enableColumnFilter:!1}),l.accessor("syncedFromCyberOne",{header:()=>"Synced From CyberOne?",cell:c=>$(R,{props:{value:c.getValue()}}),enableColumnFilter:!1})];return{instance:X(m,i)}};C.components=Object.assign({AppTanStackTable:K},C.components);var Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AppTanStackTable",{attrs:{table:e.instance}})},ee=[];const F={};var se=W(C,Z,ee,!1,ne,null,null,null);function ne(e){for(let t in F)this[t]=F[t]}const te=function(){return se.exports}(),O={};O.props={accountId:{key:"accountId",required:!0,type:String},vrmSync:{key:"vrmSync",required:!0,type:null},assets:{key:"assets",required:!0,type:Array},supplyWisdomAssets:{key:"supplyWisdomAssets",required:!0,type:Array}};O.setup=(e,t)=>{const n=e,m=a(()=>n.accountId),l=a(()=>{const s=n.supplyWisdomAssets.filter(o=>o.webSiteUrl).filter(o=>o.target);return x(s,g)}),i=a(()=>l.value.map(s=>T(s.webSiteUrl))),_=a(()=>l.value.map(s=>({id:s.id,name:s.name,domain:T(s.webSiteUrl)}))),c=a(()=>{const s=n.assets.filter(o=>o.domain);return x(s,k)}),b=a(()=>c.value.map(s=>T(s.domain))),v=a(()=>c.value.map(s=>({id:s.referenceId,name:s.name,domain:T(s.domain)}))),I=a(()=>[...v.value,..._.value]),p=a(()=>I.value.map(s=>{var o,y;return{supplier:{cyberOneId:(o=v.value.find(S=>S.id===s.id))==null?void 0:o.id,supplyWisdomId:(y=_.value.find(S=>S.id===s.id))==null?void 0:y.id,name:s.name,domain:s.domain},syncedFromCyberOne:b.value.includes(s.domain),syncedFromSupplyWisdom:i.value.includes(s.domain),toBeSynced:b.value.includes(s.domain)&&i.value.includes(s.domain)}})),f=a(()=>{const s=[];return p.value.forEach(o=>{if(o.toBeSynced){const{supplyWisdomId:y,cyberOneId:S}=o.supplier;y&&S&&s.push({target:{oneofKind:"cyberOneAssetId",cyberOneAssetId:S},source:{oneofKind:"supplyWisdomAssetId",supplyWisdomAssetId:y}})}}),s}),r=M(),u=L.create(m);async function d(){const s={syncType:D.SyncType.SUPPLY_WISDOM_TO_CYBER_ONE,entries:f.value},o=await u.mutateAsync(s);if(o){const y=o.response.syncId;r.success(`Sync ID: ${y}`)}}function g(s){return s!==void 0}function k(s){return s!==void 0}function x(s,o){const y=[];return s.forEach(S=>{o(S)&&y.push(S)}),y}return{rows:p,mappings:f,syncCreate:u,createSync:d}};O.components=Object.assign({VrmSyncStatusDisplay:z,LoadingSpinner:q,SyncSvg:j,BusinessRatingSyncTable:te},O.components);var ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"space-y-6"},[n("div",{staticClass:"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0"},[n("VrmSyncStatusDisplay",{attrs:{header:"Business Rating Sync",sync:e.vrmSync}}),n("BaseButton",{staticClass:"space-x-1",attrs:{disabled:e.mappings.length===0,shape:"rectangle"},on:{click:e.createSync}},[e.syncCreate.isLoading.value?n("LoadingSpinner"):n("SyncSvg",{staticClass:"w-4 xl:w-5"}),n("span",[e._v("Sync")])],1)],1),n("BusinessRatingSyncTable",{attrs:{value:e.rows}})],1)},ce=[];const B={};var re=W(O,ae,ce,!1,oe,null,null,null);function oe(e){for(let t in B)this[t]=B[t]}const le=function(){return re.exports}(),A={};A.props={accountId:{key:"accountId",required:!0,type:String},syncType:{key:"syncType",required:!0,type:null},mappedTarget:{key:"mappedTarget",required:!1,type:String}};A.setup=(e,t)=>{const n=e,m=a(()=>n.accountId),l=P.get(m),i=a(()=>l.data.value),_=U.get(m),c=a(()=>{var p;return(p=_.data.value)==null?void 0:p.mappedAssetId}),b=V.get(m),v=a(()=>b.data.value);return{syncStatus:a(()=>{var p,f,r,u,d,g;return{source:{mappedSource:n.mappedTarget,syncDate:(f=(p=i.value)==null?void 0:p.lastSynced)==null?void 0:f.value,syncedReports:(r=i.value)==null?void 0:r.reportsSynced},target:{mappedTarget:c.value,syncDate:(d=(u=v.value)==null?void 0:u.lastSynced)==null?void 0:d.value,syncedReports:(g=v.value)==null?void 0:g.reportsSynced}}})}};A.components=Object.assign({SyncStatusDisplay:J},A.components);var ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("SyncStatusDisplay",{attrs:{"sync-status":e.syncStatus,"sync-type":e.syncType}})},ie=[];const E={};var pe=W(A,ue,ie,!1,de,null,null,null);function de(e){for(let t in E)this[t]=E[t]}const ye=function(){return pe.exports}(),h={};h.setup=(e,t)=>{const n=N("id"),m=Y.get(n),l=a(()=>{var r;return(r=m.data.value)==null?void 0:r.targetName}),i=L.list(n),_=a(()=>i.data.value?i.data.value.sort((r,u)=>{let d="",g="";return r.lastSynced&&r.lastSynced.value&&u.lastSynced&&u.lastSynced.value&&(d=r.lastSynced.value,g=u.lastSynced.value),d.localeCompare(g)}):[]),c=a(()=>_.value.find(r=>r.syncType===D.SyncType.SUPPLY_WISDOM_TO_CYBER_ONE)),b=G.list(n),v=a(()=>b.data.value||[]),I=H.list(n),p=a(()=>I.data.value||[]),f=a(()=>{var r,u,d;return{syncDate:(u=(r=c.value)==null?void 0:r.lastSynced)==null?void 0:u.value,syncedReports:(d=c.value)==null?void 0:d.numSynced}});return{SyncType:D.SyncType,id:n,mappedTarget:l,supplyWisdomAssets:v,assets:p,sync:f}};h.components=Object.assign({BusinessRatingSyncStatusDisplay:ye,BusinessRatingSyncDisplay:le},h.components);var me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"space-y-6"},[n("BusinessRatingSyncStatusDisplay",{attrs:{"account-id":e.id,"sync-type":e.SyncType.SUPPLY_WISDOM_TO_CYBER_ONE,"mapped-target":e.mappedTarget}}),n("BusinessRatingSyncDisplay",{attrs:{"account-id":e.id,"vrm-sync":e.sync,"supply-wisdom-assets":e.supplyWisdomAssets,assets:e.assets}})],1)},Se=[];const w={};var _e=W(h,me,Se,!1,ve,null,null,null);function ve(e){for(let t in w)this[t]=w[t]}const $e=function(){return _e.exports}();export{$e as default};
