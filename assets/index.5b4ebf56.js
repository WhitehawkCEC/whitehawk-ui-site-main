import{S as st}from"./SiteMainBanner.07fdb98f.js";import{P as O,c as _,n as g,L as nt,h as rt,X as at,H as ot,r as U,w as X,G as N,I as G,d as v,J as ct,K as it,s as lt,z as M}from"./index.70a21152.js";import{F as ut,S as pt,c as J}from"./createOnChangeFn.cbd95929.js";import{u as R}from"./product-comparison.c615dd59.js";import{u as K}from"./createSimpleTable.f34cfc57.js";import{u as q}from"./useCompanyWishlistItems.a2d91f39.js";import{u as dt}from"./useProducts.1c4bfa2a.js";import"./chevron-up.736f4142.js";const x={};x.props={table:{key:"table",required:!0,type:null}};x.setup=(t,s)=>{const e=t;function o(d,p){const c=p.getToggleSortingHandler();c==null||c(d)}const a=_(()=>e.table.getRowModel().rows.length<4);return{toggleSort:o,isVisible:a}};x.components=Object.assign({FlexRender:ut,SortDirectionDisplay:pt,PlusSvg:O},x.components);var mt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"min-w-screen overflow-x-auto"},[e("table",{staticClass:"table w-full divide-y bg-gray-50"},[e("thead",{staticClass:"bg-white shadow-sm"},t._l(t.table.getHeaderGroups(),function(o){return e("tr",{key:o.id,staticClass:"divide-x"},t._l(o.headers,function(a){return e("th",{key:a.id,staticClass:"items-center justify-center bg-white py-2 font-display text-lg font-medium tracking-widest text-gray-500 xl:py-3",attrs:{colspan:a.colSpan,scope:"col"}},[e("button",{staticClass:"flex w-full items-center justify-center space-x-1",attrs:{type:"button"},on:{click:function(d){return t.toggleSort(d,a.column)}}},[e("FlexRender",{attrs:{render:a.column.columnDef.header,props:a.getContext()}}),a.column.getIsSorted()?e("SortDirectionDisplay",{attrs:{value:a.column.getIsSorted()}}):t._e()],1)])}),0)}),0),e("tbody",{staticClass:"divide-y"},[t.table.getRowModel().rows.length>0?t._l(t.table.getRowModel().rows,function(o){return e("tr",{key:o.id},t._l(o.getVisibleCells(),function(a){return e("td",{key:a.id},[e("div",[e("FlexRender",{attrs:{render:a.column.columnDef.cell,props:a.getContext()}})],1)])}),0)}):[e("tr",[e("td",{staticClass:"py-2 px-3 text-center",attrs:{scope:"row",colspan:"5"}},[e("BaseTypography",{staticClass:"w-full text-gray-500",attrs:{variant:"p2",component:"p"}},[t._v(" No data to display ")])],1)])]],2),t.isVisible?e("tfoot",[e("tr",[e("th",{staticClass:"z-50 -mt-px bg-white px-4 py-3 shadow",attrs:{scope:"row",colspan:"5"}},[e("BaseButton",{staticClass:"space-x-1",attrs:{type:"button",action:"secondary",to:"/marketplace/products"}},[e("PlusSvg",{staticClass:"-ml-1 w-4 xl:w-5"}),e("span",[t._v("Product")])],1)],1)])]):t._e()])])},_t=[];const A={};var vt=g(x,mt,_t,!1,ft,null,null,null);function ft(t){for(let s in A)this[s]=A[s]}const Q=function(){return vt.exports}(),F={};F.props={value:{key:"value",required:!0,type:String}};F.setup=(t,s)=>({});var yt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"min-w-fit"},[e("div",{staticClass:"flex w-24 items-center justify-center px-4 xl:w-auto"},[e("ul",{staticClass:"text-left text-gray-600"},[e("li",[e("BaseTypography",{attrs:{variant:"p1"}},[t._v(" "+t._s(t.value)+" ")])],1)])])])},gt=[];const D={};var ht=g(F,yt,gt,!1,xt,null,null,null);function xt(t){for(let s in D)this[s]=D[s]}const S=function(){return ht.exports}(),B={};B.props={value:{key:"value",required:!0,type:Array}};B.setup=(t,s)=>({});var Ct=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"min-w-fit"},[e("div",{staticClass:"mx-auto flex w-48 items-center justify-center px-4 xl:w-auto"},[e("ul",{staticClass:"list-disc text-left text-gray-600"},t._l(t.value,function(o){return e("li",{key:o.id},[e("BaseTypography",{attrs:{variant:"p1"}},[t._v(" "+t._s(o.name)+" ")])],1)}),0)])])},$t=[];const V={};var bt=g(B,Ct,$t,!1,wt,null,null,null);function wt(t){for(let s in V)this[s]=V[s]}const P=function(){return bt.exports}(),C={};C.props={product:{key:"product",required:!0,type:null}};C.setup=(t,s)=>{const e=t;return{productImageUrl:_(()=>`${rt}/products/${e.product.id}/image`)}};C.components=Object.assign({LazyImg:nt},C.components);var St=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.product?e("div",{staticClass:"mx-auto flex max-w-xs flex-col items-center justify-center space-y-2 py-4 text-center"},[e("LazyImg",{staticClass:"h-auto w-24 object-contain object-center",attrs:{src:t.productImageUrl,alt:t.product.name,options:{w:500},"options-placeholder":{w:48}}}),e("BaseLink",{attrs:{to:`/marketplace/products/${t.product.id}`,"display-type":"primary-prime"}},[e("BaseTypography",{attrs:{component:"h2",variant:"h5"}},[t._v(" "+t._s(t.product.name)+" ")])],1),e("BaseLink",{attrs:{to:`/marketplace/manufacturers/${t.product.manufacturer.id}`,"display-type":"primary-prime"}},[e("BaseTypography",{staticClass:"uppercase",attrs:{component:"h3",variant:"overline"}},[t._v(" "+t._s(t.product.manufacturer.name)+" ")])],1)],1):t._e()},Pt=[];const W={};var kt=g(C,St,Pt,!1,jt,null,null,null);function jt(t){for(let s in W)this[s]=W[s]}const It=function(){return kt.exports}(),$={};$.props={product:{key:"product",required:!0,type:null},add:{key:"add",required:!0,type:Function},remove:{key:"remove",required:!0,type:Function}};$.setup=(t,s)=>({});$.components=Object.assign({XSvg:at,ProductComparisonItem:It,PlusSvg:O},$.components);var Tt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"sticky left-0 z-10 -my-px min-w-fit bg-white shadow"},[e("div",{staticClass:"mx-auto w-64 px-4 pt-3 pb-6 xl:w-auto"},[e("div",{staticClass:"flex justify-end"},[e("BaseIcon",{attrs:{type:"button",size:"small",color:"danger",action:"secondary"},on:{click:t.remove}},[e("XSvg",{staticClass:"h-4 w-auto"})],1)],1),e("div",{staticClass:"flex-1"},[e("ProductComparisonItem",{attrs:{product:t.product}})],1),e("div",{staticClass:"flex justify-center"},[e("BaseButton",{staticClass:"space-x-1",attrs:{type:"button"},on:{click:t.add}},[e("PlusSvg",{staticClass:"-ml-1 w-4 xl:w-5"}),e("span",[t._v("Wishlist")])],1)],1)])])},Rt=[];const E={};var Ft=g($,Tt,Rt,!1,Bt,null,null,null);function Bt(t){for(let s in E)this[s]=E[s]}const Y=function(){return Ft.exports}(),b={};b.props={value:{key:"value",required:!0,type:Array}};b.setup=(t,s)=>{const e=t,o=_(()=>e.value),a=R(),d=ot(),p=U();X(()=>d.products,r=>{r&&(p.value=r)},{immediate:!0});const c=J(),m=N(),l=G(),f=[c.accessor(r=>r.name,{id:"product",header:()=>"Product",cell:({row:r})=>v(Y,{props:{product:r.original,async add(){const u=r.original;if(!I(u.id)&&p.value){const i=T(u);p.value.push(i),await d.set(p.value),m.success("Product added to your wishlist.")}else m.error("This product is already on your wishlist.")},async remove(){const u=r.original.id;await a.remove(u),e.value.filter(n=>n.id!==u),o.value.length===0&&l.push("/marketplace/products")}}})}),c.accessor(r=>r.categories,{id:"categories",header:()=>"Categories",cell:r=>v(P,{props:{value:r.getValue()}}),enablePinning:!1}),c.accessor(r=>r.features,{id:"features",header:()=>"Features",cell:r=>v(P,{props:{value:r.getValue()}}),enablePinning:!1}),c.accessor(r=>r.type.name,{id:"type",header:()=>"Type",cell:r=>v(S,{props:{value:r.getValue()}}),enablePinning:!1}),c.accessor("price",{header:()=>"Price Range",cell:r=>v(S,{props:{value:r.getValue()}}),enablePinning:!1})],j=K(o,f);function I(r){var u;return(u=p.value)==null?void 0:u.some(n=>n.id===r)}function T(r){const{id:u,name:n,description:i,manufacturer:y,categories:h}=r;return{id:u,name:n,description:i,manufacturer:y,categories:h}}return{instance:j}};b.components=Object.assign({AppTanStackProductComparisonTable:Q},b.components);var Mt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("AppTanStackProductComparisonTable",{attrs:{table:t.instance}})},qt=[];const z={};var At=g(b,Mt,qt,!1,Dt,null,null,null);function Dt(t){for(let s in z)this[s]=z[s]}const Vt=function(){return At.exports}(),w={};w.props={value:{key:"value",required:!0,type:Array},companyId:{key:"companyId",required:!0,type:String}};w.setup=(t,s)=>{const e=t,o=_(()=>e.companyId),a=_(()=>e.value),d=R(),p=q.list(o),c=U();X(()=>p.data.value,n=>{n&&(c.value=n)},{immediate:!0});const m=J(),l=N(),f=q.update(o),j=G(),I=[m.accessor(n=>n.name,{id:"product",header:()=>"Product",cell:({row:n})=>v(Y,{props:{product:n.original,async add(){const i=n.original;if(!r(i.id)&&c.value){const h=u(i);c.value.push(h),await f.mutateAsync(c.value),l.success("Product added to the company wishlist.")}else l.error("This product is already on your wishlist.")},async remove(){const i=n.original.id;await d.remove(i),e.value.filter(y=>y.id!==i),a.value.length===0&&j.push("/marketplace/products")}}})}),m.accessor(n=>n.categories,{id:"categories",header:()=>"Categories",cell:n=>v(P,{props:{value:n.getValue()}}),enablePinning:!1}),m.accessor(n=>n.features,{id:"features",header:()=>"Features",cell:n=>v(P,{props:{value:n.getValue()}}),enablePinning:!1}),m.accessor(n=>n.type.name,{id:"type",header:()=>"Type",cell:n=>v(S,{props:{value:n.getValue()}}),enablePinning:!1}),m.accessor("price",{header:()=>"Price Range",cell:n=>v(S,{props:{value:n.getValue()}}),enablePinning:!1})],T=K(a,I);function r(n){var i;return(i=c.value)==null?void 0:i.some(y=>y.id===n)}function u(n){const{id:i,name:y,description:h,manufacturer:tt,categories:et}=n;return{id:i,name:y,description:h,manufacturer:tt,categories:et}}return{instance:T}};w.components=Object.assign({AppTanStackProductComparisonTable:Q},w.components);var Wt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("AppTanStackProductComparisonTable",{attrs:{table:t.instance}})},Et=[];const H={};var zt=g(w,Wt,Et,!1,Ht,null,null,null);function Ht(t){for(let s in H)this[s]=H[s]}const Lt=function(){return zt.exports}(),k=lt({layout:"siteMain"});k.setup=(t,s)=>{const e=R(),o=_(()=>e.productIds.map(l=>{const f=_(()=>l);return dt.read(f)})),a=_(()=>{const l=[];return o.value.map(f=>{f.data.value&&l.push(f.data.value)}),l}),d=ct(),p=_(()=>d.loggedIn),c=it(),m=_(()=>{var l;return(l=c.company)==null?void 0:l.id});return{products:a,loggedIn:p,companyId:m}};k.components=Object.assign({SiteMainBanner:st,ProductComparisonTable:Lt,AnonProductComparisonTable:Vt},k.components);var Ot=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",[e("SiteMainBanner"),t.loggedIn&&t.companyId?[e("ProductComparisonTable",{attrs:{value:t.products,"company-id":t.companyId}})]:[e("AnonProductComparisonTable",{attrs:{value:t.products}})]],2)},Ut=[];const L={};var Z=g(k,Ot,Ut,!1,Xt,null,null,null);function Xt(t){for(let s in L)this[s]=L[s]}typeof M=="function"&&M(Z);const ee=function(){return Z.exports}();export{ee as default};
