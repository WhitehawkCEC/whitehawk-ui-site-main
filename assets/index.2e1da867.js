import{bT as S,aK as A,aS as y,n as T,an as $,bS as b,c as C,r as u,bU as I,aF as M}from"./index.e7604061.js";import{B as w}from"./BasicConfirmModal.109a762b.js";import{A as B,T as F}from"./AppTanStackTable.ed2773e2.js";import{I as k}from"./IsoDateTimeDisplay.07c68c03.js";import{c as D}from"./createOnChangeFn.a7ef8ce6.js";import{u as j}from"./createSimpleTable.ac3a7c2d.js";import"./BasicModal.0127a1cf.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.48628321.js";import"./chevron-up.736f4142.js";const l={};l.props={categories:{key:"categories",required:!0,type:Array}};l.setup=(e,a)=>{const t=e,{categories:m}=S(t),r=a.emit,p=A(),n=D(),f=[n.accessor(s=>{var o;return(o=s.id)==null?void 0:o.value},{id:"id",header:()=>"ID",enableColumnFilter:!1}),n.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),n.accessor(s=>{var o;return(o=s.meta)==null?void 0:o.updatedAt},{id:"updatedAt",header:()=>"Last Updated",cell:s=>y(k,{props:{value:s.getValue(),format:"date"}}),enableColumnFilter:!1}),n.accessor("description",{header:()=>"Description",enableColumnFilter:!1}),n.display({id:"actions",header:"Actions",cell:({row:s})=>y(F,{props:{actions:[{id:"edit",action(){var o;p.push(`/admin/products/categories/${(o=s.original.id)==null?void 0:o.value}`)}},{id:"delete",action(){r("delete",s.original)}}]}})})];return{instance:j(m,f)}};l.components=Object.assign({AppTanStackTable:B},l.components);var E=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("AppTanStackTable",{attrs:{table:e.instance}})},R=[];const h={};var V=T(l,E,R,!1,L,null,null,null);function L(e){for(let a in h)this[a]=h[a]}const q=function(){return V.exports}(),d={};d.setup=(e,a)=>{const t=b.list(),m=C(()=>t.data.value?t.data.value.sort((c,i)=>c.name.localeCompare(i.name)):[]),r=u(),p=u("Doing so will affect the following products and bundle sets:"),n=u();function f(c){var i;r.value=c,n.value=(i=c.id)==null?void 0:i.value,_.value=!0}const v=C(()=>{var c;return(c=I.get(n.value).data)==null?void 0:c.value}),s=M(),o=b.delete();async function P(){if(r.value)await o.mutateAsync({category:r.value}),g(),s.success(`Category ${r.value.name} successfully deleted`);else throw new Error("Invalid request.")}const _=u(!1);function g(){_.value=!1}return{categories:m,selected:r,message:p,setPayload:f,affectedItemsGet:v,deleteCategory:P,isModalVisible:_,closeModal:g}};d.components=Object.assign({PlusSvg:$,ProductCategoriesTable:q,BasicConfirmModal:w},d.components);var G=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Product Categories")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"/admin/products/categories/new"}},[t("PlusSvg",{staticClass:"mr-1 w-5 xl:w-5"}),e._v(" Category ")],1)]},proxy:!0},{key:"table",fn:function(){return[t("ProductCategoriesTable",{attrs:{categories:e.categories},on:{delete:e.setPayload}})]},proxy:!0}])}),e.isModalVisible&&e.selected?t("BasicConfirmModal",{attrs:{name:e.selected.name,message:e.message,"items-affected":e.affectedItemsGet,type:"Products"},on:{delete:e.deleteCategory,close:e.closeModal}}):e._e()],1)},H=[];const x={};var N=T(d,G,H,!1,O,null,null,null);function O(e){for(let a in x)this[a]=x[a]}const te=function(){return N.exports}();export{te as default};
