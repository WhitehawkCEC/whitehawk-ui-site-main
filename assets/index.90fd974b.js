import{R as x}from"./arrow-path.24b87f73.js";import{c,aS as I,n as A,L as F,aF as B,cF as D,cG as T,cO as E,cI as L,cJ as k,b$ as w,cP as j,cQ as q,cM as M}from"./index.35989fb8.js";import{A as P}from"./AppTanStackTable.0c64b5b3.js";import{S as O,V,a as N}from"./SyncStatusDisplay.6052bcc5.js";import{c as Y}from"./createOnChangeFn.e6c25a94.js";import{u as G}from"./createSimpleTable.c068d8eb.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.2da4465a.js";import"./check-circle.48e4a9f5.js";import"./chevron-up.736f4142.js";const f={};f.props={value:{key:"value",required:!0,type:Array}};f.setup=(e,n)=>{const s=e,p=c(()=>s.value),l=Y(),i=[l.accessor("toBeSynced",{header:()=>"To Be Synced",cell:o=>I(O,{props:{value:o.getValue()}}),enableColumnFilter:!1}),l.group({id:"supplier",header:()=>"Supplier",columns:[l.accessor(o=>o.supplier.name,{id:"name",header:()=>"Name",enableColumnFilter:!1}),l.accessor(o=>o.supplier.name,{id:"domain",header:()=>"Domain",enableColumnFilter:!1})]}),l.accessor("syncedFromSupplyWisdom",{header:()=>"Synced From Supply Wisdom?",cell:o=>I(O,{props:{value:o.getValue()}}),enableColumnFilter:!1}),l.accessor("syncedFromCyberOne",{header:()=>"Synced From CyberOne?",cell:o=>I(O,{props:{value:o.getValue()}}),enableColumnFilter:!1})];return{instance:G(p,i)}};f.components=Object.assign({AppTanStackTable:P},f.components);var U=function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("AppTanStackTable",{attrs:{table:e.instance}})},H=[];const h={};var K=A(f,U,H,!1,z,null,null,null);function z(e){for(let n in h)this[n]=h[n]}const J=function(){return K.exports}(),g={};g.props={accountId:{key:"accountId",required:!0,type:String},vrmSync:{key:"vrmSync",required:!0,type:null},assets:{key:"assets",required:!0,type:Array},supplyWisdomAssets:{key:"supplyWisdomAssets",required:!0,type:Array}};g.setup=(e,n)=>{const s=e,p=c(()=>s.accountId),l=c(()=>s.supplyWisdomAssets.map(({webSiteUrl:t})=>t)),i=c(()=>s.assets.map(({domain:t})=>t)),m=c(()=>s.assets.map(({referenceId:t,name:a,domain:r})=>{var u;return{supplyWisdomId:(u=s.supplyWisdomAssets.find(d=>d.webSiteUrl===r))==null?void 0:u.id,cyberOneId:t,name:a,domain:r}})),o=c(()=>m.value.map(t=>({supplier:t,syncedFromSupplyWisdom:t.domain?l.value.includes(t.domain):void 0,syncedFromCyberOne:t.domain?i.value.includes(t.domain):void 0,toBeSynced:t.domain?l.value.includes(t.domain)&&i.value.includes(t.domain):void 0}))),S=c(()=>{const t=[];return o.value.forEach(a=>{if(a.toBeSynced){const{supplyWisdomId:r,cyberOneId:u}=a.supplier;r&&t.push({target:{oneofKind:"cyberOneAssetId",cyberOneAssetId:u},source:{oneofKind:"supplyWisdomAssetId",supplyWisdomAssetId:r}})}}),t}),_=B(),v=D.create(p);async function y(){const t={syncType:T.SyncType.SUPPLY_WISDOM_TO_CYBER_ONE,entries:S.value},a=await v.mutateAsync(t);if(a){const r=a.response.syncId;_.success(`Sync ID: ${r}`)}}return{rows:o,mappings:S,syncCreate:v,createSync:y}};g.components=Object.assign({VrmSyncStatusDisplay:V,LoadingSpinner:F,SyncSvg:x,BusinessRatingSyncTable:J},g.components);var Q=function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("section",{staticClass:"space-y-6"},[s("div",{staticClass:"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0"},[s("VrmSyncStatusDisplay",{attrs:{header:"Business Rating Sync",sync:e.vrmSync}}),s("BaseButton",{staticClass:"space-x-1",attrs:{disabled:e.mappings.length===0,shape:"rectangle"},on:{click:e.createSync}},[e.syncCreate.isLoading.value?s("LoadingSpinner"):s("SyncSvg",{staticClass:"w-4 xl:w-5"}),s("span",[e._v("Sync")])],1)],1),s("BusinessRatingSyncTable",{attrs:{value:e.rows}})],1)},X=[];const W={};var Z=A(g,Q,X,!1,ee,null,null,null);function ee(e){for(let n in W)this[n]=W[n]}const se=function(){return Z.exports}(),b={};b.props={accountId:{key:"accountId",required:!0,type:String},syncType:{key:"syncType",required:!0,type:null},mappedTarget:{key:"mappedTarget",required:!1,type:String}};b.setup=(e,n)=>{const s=e,p=c(()=>s.accountId),l=E.get(p),i=c(()=>l.data.value),m=L.get(p),o=c(()=>{var y;return(y=m.data.value)==null?void 0:y.mappedAssetId}),S=k.get(p),_=c(()=>S.data.value);return{syncStatus:c(()=>{var y,t,a,r,u,d;return{source:{mappedSource:s.mappedTarget,syncDate:(t=(y=i.value)==null?void 0:y.lastSynced)==null?void 0:t.value,syncedReports:(a=i.value)==null?void 0:a.reportsSynced},target:{mappedTarget:o.value,syncDate:(u=(r=_.value)==null?void 0:r.lastSynced)==null?void 0:u.value,syncedReports:(d=_.value)==null?void 0:d.reportsSynced}}})}};b.components=Object.assign({SyncStatusDisplay:N},b.components);var te=function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("SyncStatusDisplay",{attrs:{"sync-status":e.syncStatus,"sync-type":e.syncType}})},ne=[];const $={};var ae=A(b,te,ne,!1,ce,null,null,null);function ce(e){for(let n in $)this[n]=$[n]}const oe=function(){return ae.exports}(),C={};C.setup=(e,n)=>{const s=w("id"),p=j.get(s),l=c(()=>{var a;return(a=p.data.value)==null?void 0:a.targetName}),i=D.list(s),m=c(()=>i.data.value?i.data.value.sort((a,r)=>{let u="",d="";return a.lastSynced&&a.lastSynced.value&&r.lastSynced&&r.lastSynced.value&&(u=a.lastSynced.value,d=r.lastSynced.value),u.localeCompare(d)}):[]),o=c(()=>m.value.find(a=>a.syncType===T.SyncType.SUPPLY_WISDOM_TO_CYBER_ONE)),S=q.list(s),_=c(()=>S.data.value||[]),v=M.list(s),y=c(()=>v.data.value||[]),t=c(()=>{var a,r,u;return{syncDate:(r=(a=o.value)==null?void 0:a.lastSynced)==null?void 0:r.value,syncedReports:(u=o.value)==null?void 0:u.numSynced}});return{SyncType:T.SyncType,id:s,mappedTarget:l,supplyWisdomAssets:_,assets:y,sync:t}};C.components=Object.assign({BusinessRatingSyncStatusDisplay:oe,BusinessRatingSyncDisplay:se},C.components);var re=function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("main",{staticClass:"space-y-6"},[s("BusinessRatingSyncStatusDisplay",{attrs:{"account-id":e.id,"sync-type":e.SyncType.SUPPLY_WISDOM_TO_CYBER_ONE,"mapped-target":e.mappedTarget}}),s("BusinessRatingSyncDisplay",{attrs:{"account-id":e.id,"vrm-sync":e.sync,"supply-wisdom-assets":e.supplyWisdomAssets,assets:e.assets}})],1)},le=[];const R={};var ue=A(C,re,le,!1,ie,null,null,null);function ie(e){for(let n in R)this[n]=R[n]}const Ce=function(){return ue.exports}();export{Ce as default};
