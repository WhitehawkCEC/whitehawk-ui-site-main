import{d as _,aS as b,n as h,an as $,c7 as S,aF as A,b as m,c8 as C}from"./index.98c2618d.js";import{B as M}from"./BasicConfirmModal.909b446a.js";import{A as k,T as I}from"./AppTanStackTable.5956ba5c.js";import{I as P}from"./IsoDateTimeDisplay.b65d8e8e.js";import{c as w}from"./createOnChangeFn.04161645.js";import{u as F}from"./createSimpleTable.23d603d9.js";import"./BasicModal.9f3f4ba8.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-up.736f4142.js";const d={};d.props={value:{key:"value",required:!0,type:Array}};d.setup=(e,s)=>{const t=e,r=s.emit,c=_(()=>t.value),a=w(),o=[a.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),a.accessor("bundleSource",{header:()=>"Bundle Source",enableColumnFilter:!1}),a.accessor(n=>{var l;return(l=n.meta)==null?void 0:l.updatedAt},{id:"updatedAt",header:()=>"Last Updated",cell:n=>b(P,{props:{value:n.getValue(),format:"date"}}),enableColumnFilter:!1}),a.display({id:"actions",header:"Actions",cell:({row:n})=>{var l;return b(I,{props:{actions:[{id:"edit",to:`/admin/bundles/sets/${(l=n.original.id)==null?void 0:l.value}`},{id:"delete",action(){n.original&&r("delete",n.original)}}]}})}})];return{instance:F(c,o)}};d.components=Object.assign({AppTanStackTable:k},d.components);var q=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},Q=[];const B={};var V=h(d,q,Q,!1,j,null,null,null);function j(e){for(let s in B)this[s]=B[s]}const D=function(){return V.exports}(),f={};f.setup=(e,s)=>{const t=S.list(),r=S.delete(),c=A(),a=m(),o=m(),v=m("Doing so will affect the following questionnaires:");function n(u){var i;o.value=u,a.value=(i=u.id)==null?void 0:i.value,p.value=!0}const l=_(()=>a.value),x=_(()=>{var u,i;return(i=(u=C.get(l.value).data)==null?void 0:u.value)==null?void 0:i.questionnairePreference}),p=m(!1);async function T(){if(o.value)await r.mutateAsync(o.value),y(),c.success(`Bundle Set ${o.value.name} successfully deleted`);else throw new Error("Invalid request.")}function y(){p.value=!1}return{bundlesQuery:t,selected:o,message:v,setPayload:n,affectedItemsGet:x,isModalVisible:p,deleteBundleSet:T,closeModal:y}};f.components=Object.assign({PlusSvg:$,BundleSetsTable:D,BasicConfirmModal:M},f.components);var E=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Bundle Sets")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"/admin/bundles/sets/new"}},[t("PlusSvg",{staticClass:"-ml-1 w-5"}),t("span",[e._v("Bundle Set")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("BaseVueQuery",{attrs:{query:e.bundlesQuery},scopedSlots:e._u([{key:"success",fn:function(r){var c=r.data;return[t("BundleSetsTable",{attrs:{value:c},on:{delete:e.setPayload}})]}}])})]},proxy:!0}])}),e.isModalVisible&&e.selected?t("BasicConfirmModal",{attrs:{name:e.selected.name,message:e.message,type:"Preference Questionnaires","items-affected":e.affectedItemsGet},on:{delete:e.deleteBundleSet,close:e.closeModal}}):e._e()],1)},L=[];const g={};var G=h(f,E,L,!1,H,null,null,null);function H(e){for(let s in g)this[s]=g[s]}const Y=function(){return G.exports}();export{Y as default};
