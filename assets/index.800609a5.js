import{d as x,aK as g,aS as f,br as $,aP as b,aQ as v,n as I,bs as k,an as B,c8 as y,de as S}from"./index.ff95858c.js";import{A as T,T as A}from"./AppTanStackTable.6266970c.js";import{c as C}from"./createOnChangeFn.432a5177.js";import{F as P}from"./FileSaver.min.d8cf493b.js";import{u as Z}from"./createSimpleTable.24f71490.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.381ee266.js";import"./chevron-up.736f4142.js";const i={};i.props={accountId:{key:"accountId",required:!0,type:String},zipFiles:{key:"zipFiles",required:!0,type:Array}};i.setup=(e,n)=>{const t=e,p=x(()=>t.zipFiles),o=C(),d=g(),l=[o.accessor("request",{header:()=>"File Name",cell:s=>{var a;return(a=s.getValue())==null?void 0:a.fileName},enableColumnFilter:!1}),o.accessor(s=>{var a;return(a=s.request)==null?void 0:a.scorecardIds.length},{id:"reports",header:()=>"Total Reports",enableColumnFilter:!1}),o.accessor(s=>s,{id:"meta",header:()=>"Created At",cell:s=>{var a,c,r;return f($,{props:{value:(r=(c=(a=s.getValue())==null?void 0:a.meta)==null?void 0:c.createdAt)==null?void 0:r.value,format:"date"}})},enableColumnFilter:!1}),o.display({id:"actions",header:"Actions",cell:({row:s})=>f(A,{props:{actions:[{id:"download",async action(){var r,m,_;const a=(m=(r=s.original.request)==null?void 0:r.batchId)==null?void 0:m.value,c=await b(`${v}/companies/${t.accountId}/batch/file/zip/${a}`,{responseType:"blob"});P.exports.saveAs(c.data,((_=s.original.request)==null?void 0:_.fileName)+".zip")}},{id:"delete",async action(){var c,r;const a=(r=(c=s.original.request)==null?void 0:c.batchId)==null?void 0:r.value;confirm("Do you really want to delete this ZIP file?")&&(await b.post(`${v}/companies/${t.accountId}/batch/file/zip/${a}`),d.go)}}]}})})];return{instance:Z(p,l)}};i.components=Object.assign({AppTanStackTable:T},i.components);var q=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("AppTanStackTable",{attrs:{table:e.instance}})},z=[];const h={};var w=I(i,q,z,!1,R,null,null,null);function R(e){for(let n in h)this[n]=h[n]}const j=function(){return w.exports}(),u={};u.setup=(e,n)=>{const t=y("id"),p=y("subscriptionId"),o=S.list(t,p),d=x(()=>{var l;return((l=o==null?void 0:o.data)==null?void 0:l.value)||[]});return{id:t,computedZipFiles:d}};u.components=Object.assign({BackButton:k,PlusSvg:B,BatchZipFilesTable:j},u.components);var D=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("BaseTablePageLayout",{scopedSlots:e._u([{key:"backButton",fn:function(){return[t("BackButton")]},proxy:!0},{key:"overline",fn:function(){return[e._v("Black Kite")]},proxy:!0},{key:"title",fn:function(){return[e._v("ZIP Files")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"new",append:""}},[t("PlusSvg",{staticClass:"-ml-1 w-5"}),t("span",[e._v("ZIP File")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("BatchZipFilesTable",{attrs:{"account-id":e.id,"zip-files":e.computedZipFiles}})]},proxy:!0}])})},E=[];const F={};var N=I(u,D,E,!1,V,null,null,null);function V(e){for(let n in F)this[n]=F[n]}const W=function(){return N.exports}();export{W as default};
