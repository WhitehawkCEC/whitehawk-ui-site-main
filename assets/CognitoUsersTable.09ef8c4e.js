import{al as I,X as j,n as f,c as _,I as q,bJ as M,bx as R,J as V,d as u}from"./index.c995162a.js";import{C as w}from"./CognitoUserStatusDisplay.10cf554a.js";import{U as B}from"./UserGravatarDisplay.7020c060.js";import{A as D,T as L}from"./AppTanStackTable.8ce5ab19.js";import{c as X}from"./createOnChangeFn.d6f04069.js";import{a as H}from"./attributeListToMap.bea9f70d.js";import{u as J}from"./createSimpleTable.73aae5de.js";const p={};p.props={value:{key:"value",required:!0,type:Boolean}};p.setup=(s,a)=>({});p.components=Object.assign({CheckSvg:I,XSvg:j},p.components);var O=function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("div",{staticClass:"pointer-events-none inline-flex shrink-0 rounded-full bg-gray-100 shadow-inner"},[s.value?[n("CheckSvg",{staticClass:"h-auto w-5 text-teal-500"})]:[n("XSvg",{staticClass:"h-auto w-5 text-red-500"})]],2)},z=[];const b={};var G=f(p,O,z,!1,N,null,null,null);function N(s){for(let a in b)this[a]=b[a]}const K=function(){return G.exports}(),v={};v.props={value:{key:"value",required:!0,type:Array}};v.setup=(s,a)=>({});var P=function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ul",{staticClass:"flex max-w-xs flex-wrap space-x-1"},s._l(s.value,function(o,d){return n("li",{key:o.id},[n("BaseLink",{attrs:{to:o.link}},[n("BaseTypography",{attrs:{variant:"p2"}},[s._v(" "+s._s(d+1!==s.value.length?o.name+",":o.name)+" ")])],1)],1)}),0)},Q=[];const y={};var W=f(v,P,Q,!1,Y,null,null,null);function Y(s){for(let a in y)this[a]=y[a]}const Z=function(){return W.exports}(),m={};m.props={users:{key:"users",required:!0,type:Array},companyAccess:{key:"companyAccess",required:!1,type:Array},bulkActions:{key:"bulkActions",required:!1,type:Array}};m.setup=(s,a)=>{const n=s,o=_(()=>{const e=new Map;if(n.companyAccess)for(const{company:t,user:r}of n.companyAccess){const i=r.id,c=e.get(i);c?c.push(t):e.set(i,[t])}for(const t of e.values())t.sort((r,i)=>r.name.localeCompare(i.name));return e}),d=_(()=>n.users.map(({Username:e,Enabled:t,UserStatus:r,Attributes:i})=>{const c=H(i||[]),T=c.sub,F=o.value.get(T)||[],E=g(F);return{username:e||"",enabled:t||!1,userStatus:r,attributes:c,companies:E}}));function g(e){return e.map(t=>({...t,link:`/admin/companies/${encodeURIComponent(t.id)}/`}))}const C=q(),x=M(),S=R(),k=_(()=>{var e;return(e=S.user)==null?void 0:e.id}),A=V(),$=_(()=>A.id),l=X(),U=[l.accessor(e=>e.attributes.email,{id:"email",header:()=>"Email",cell:e=>u(B,{props:{value:e.getValue()}}),enableColumnFilter:!1}),l.accessor(e=>e.attributes.name,{id:"name",header:()=>"Name",enableColumnFilter:!1}),l.accessor("userStatus",{header:()=>"Status",cell:e=>u(w,{props:{value:e.getValue()}}),enableColumnFilter:!1}),l.accessor("companies",{header:()=>"Companies",cell:e=>u(Z,{props:{value:e.getValue()}}),enableColumnFilter:!1}),l.accessor("enabled",{header:()=>"Enabled",cell:e=>u(K,{props:{value:e.getValue()}}),enableColumnFilter:!1}),l.display({id:"actions",header:"Actions",cell:({row:e})=>u(L,{props:{actions:[{id:"edit",action(){C.push(`/admin/users/${e.original.username}`)}},{id:"impersonate",action(){const t=e.original,r={username:t.username,id:t.attributes.sub,email:t.attributes.email,name:t.attributes.name,phone:t.attributes.phone_number};x.set(r)}}].filter(t=>e.original.attributes.sub===$.value||e.original.attributes.sub===k.value?t.id==="edit":t)}})})];return{instance:J(d,U)}};m.components=Object.assign({AppTanStackTable:D},m.components);var ee=function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("AppTanStackTable",{attrs:{table:s.instance,"table-actions":s.bulkActions}})},se=[];const h={};var te=f(m,ee,se,!1,ae,null,null,null);function ae(s){for(let a in h)this[a]=h[a]}const me=function(){return te.exports}();export{me as C};
