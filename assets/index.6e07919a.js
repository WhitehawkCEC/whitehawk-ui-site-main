import{c as l,bm as T,aH as g,aI as k,aJ as $,aT as w,n as v,ao as F,bH as _,aG as j}from"./index.2cafd56c.js";import{A as B,T as H}from"./AppTanStackTable.6db3b074.js";import{c as I}from"./createOnChangeFn.b1b54b6d.js";import{u as D}from"./createSimpleTable.f710d83a.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.0c148b5a.js";import"./chevron-up.736f4142.js";const c={};c.props={value:{key:"value",required:!0,type:Array}};c.setup=(e,t)=>{const n=e,o=t.emit,r=l(()=>n.value),m=T(),p=l(()=>m.companies),b=g(),d=k(),C=l(()=>d.isAdmin),S=l(()=>{var s;return((s=d.email)==null?void 0:s.split("@")[1])=="whitehawk.com"&&C.value}),h=$(),i=I(),A=[i.accessor("id",{header:()=>"ID",enableColumnFilter:!1}),i.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),i.accessor("domain",{header:()=>"Domain",enableColumnFilter:!1}),i.accessor(a=>{var s;return(s=a.industry)==null?void 0:s.name},{id:"industry",header:()=>"Industry",enableColumnFilter:!1}),i.display({id:"actions",header:"Actions",cell:({row:a})=>w(H,{props:{actions:[{id:"edit",action(){h.push(`/admin/companies/${a.original.id}/settings`)}},{id:"view",async action(){await b.setCompanyId(a.original.id)}},{id:"delete",action(){o("delete",a.original.id)}}].filter(s=>p.value.find(x=>x.id===a.original.id)?S?s:s.id==="delete":s.id==="edit")}})})];return{instance:D(r,A)}};c.components=Object.assign({AppTanStackTable:B},c.components);var E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AppTanStackTable",{attrs:{table:e.instance}})},L=[];const f={};var P=v(c,E,L,!1,R,null,null,null);function R(e){for(let t in f)this[t]=f[t]}const U=function(){return P.exports}(),u={};u.setup=(e,t)=>{const n=_.list(),o=j(),r=_.delete();async function m(p){await r.mutateAsync(p),o.success("Successfully deleted company.")}return{companyList:n,deleteCompany:m}};u.components=Object.assign({PlusSvg:F,CompaniesTable:U},u.components);var q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Companies")]},proxy:!0},{key:"button",fn:function(){return[n("BaseButton",{staticClass:"space-x-1",attrs:{to:"/admin/companies/new",type:"button"}},[n("PlusSvg",{staticClass:"w-5"}),n("span",[e._v("Company")])],1)]},proxy:!0},{key:"table",fn:function(){return[n("BaseVueQuery",{attrs:{query:e.companyList},scopedSlots:e._u([{key:"success",fn:function(o){var r=o.data;return[n("CompaniesTable",{attrs:{value:r},on:{delete:e.deleteCompany}})]}}])})]},proxy:!0}])})},M=[];const y={};var N=v(u,q,M,!1,O,null,null,null);function O(e){for(let t in y)this[t]=y[t]}const Y=function(){return N.exports}();export{Y as default};
