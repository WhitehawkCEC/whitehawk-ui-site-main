import{ci as k,ck as z,cl as J,cj as G,d0 as X,cm as Z,cn as W,ai as V,aV as ee,aF as te,cO as ne,at as ie,bU as se,a$ as re,cM as ae,aC as oe,aH as ce,n as K,c2 as P}from"./index.e11bcf0e.js";import{F as ue}from"./FormButton.f947ccaa.js";import{B as le}from"./BlackKiteConfigInput.e18664a2.js";import{c as de}from"./reactivity.esm-bundler.7760aebf.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./ApiKeyInput.0dd8ead2.js";import"./arrow-top-right-on-square.b063d2af.js";import"./ApiKeyValidation.2e365c70.js";import"./ApiKeyDescriptionDisplay.fe18ba11.js";var F={},O={},v={};Object.defineProperty(v,"__esModule",{value:!0});v.AccountSubscriptionProductId=v.AccountSubscriptionId=void 0;const I=k,B=k,H=k,D=k,L=k,C=z,h=J;class pe extends L.MessageType{constructor(){super("whitehawk.proto.resource.v1.AccountSubscriptionId",[{no:1,name:"account_id",kind:"message",T:()=>h.Slug},{no:2,name:"subscription_id",kind:"message",T:()=>h.Slug}])}create(e){const t={};return globalThis.Object.defineProperty(t,D.MESSAGE_TYPE,{enumerable:!1,value:this}),e!==void 0&&(0,H.reflectionMergePartial)(this,t,e),t}internalBinaryRead(e,t,s,a){let c=a!=null?a:this.create(),f=e.pos+t;for(;e.pos<f;){let[d,l]=e.tag();switch(d){case 1:c.accountId=h.Slug.internalBinaryRead(e,e.uint32(),s,c.accountId);break;case 2:c.subscriptionId=h.Slug.internalBinaryRead(e,e.uint32(),s,c.subscriptionId);break;default:let m=s.readUnknownField;if(m==="throw")throw new globalThis.Error(`Unknown field ${d} (wire type ${l}) for ${this.typeName}`);let b=e.skip(l);m!==!1&&(m===!0?B.UnknownFieldHandler.onRead:m)(this.typeName,c,d,l,b)}}return c}internalBinaryWrite(e,t,s){e.accountId&&h.Slug.internalBinaryWrite(e.accountId,t.tag(1,I.WireType.LengthDelimited).fork(),s).join(),e.subscriptionId&&h.Slug.internalBinaryWrite(e.subscriptionId,t.tag(2,I.WireType.LengthDelimited).fork(),s).join();let a=s.writeUnknownFields;return a!==!1&&(a==!0?B.UnknownFieldHandler.onWrite:a)(this.typeName,e,t),t}}v.AccountSubscriptionId=new pe;class fe extends L.MessageType{constructor(){super("whitehawk.proto.resource.v1.AccountSubscriptionProductId",[{no:1,name:"account_id",kind:"message",T:()=>h.Slug},{no:2,name:"subscription_id",kind:"message",T:()=>h.Slug},{no:3,name:"product_id",kind:"message",T:()=>C.Ulid}])}create(e){const t={};return globalThis.Object.defineProperty(t,D.MESSAGE_TYPE,{enumerable:!1,value:this}),e!==void 0&&(0,H.reflectionMergePartial)(this,t,e),t}internalBinaryRead(e,t,s,a){let c=a!=null?a:this.create(),f=e.pos+t;for(;e.pos<f;){let[d,l]=e.tag();switch(d){case 1:c.accountId=h.Slug.internalBinaryRead(e,e.uint32(),s,c.accountId);break;case 2:c.subscriptionId=h.Slug.internalBinaryRead(e,e.uint32(),s,c.subscriptionId);break;case 3:c.productId=C.Ulid.internalBinaryRead(e,e.uint32(),s,c.productId);break;default:let m=s.readUnknownField;if(m==="throw")throw new globalThis.Error(`Unknown field ${d} (wire type ${l}) for ${this.typeName}`);let b=e.skip(l);m!==!1&&(m===!0?B.UnknownFieldHandler.onRead:m)(this.typeName,c,d,l,b)}}return c}internalBinaryWrite(e,t,s){e.accountId&&h.Slug.internalBinaryWrite(e.accountId,t.tag(1,I.WireType.LengthDelimited).fork(),s).join(),e.subscriptionId&&h.Slug.internalBinaryWrite(e.subscriptionId,t.tag(2,I.WireType.LengthDelimited).fork(),s).join(),e.productId&&C.Ulid.internalBinaryWrite(e.productId,t.tag(3,I.WireType.LengthDelimited).fork(),s).join();let a=s.writeUnknownFields;return a!==!1&&(a==!0?B.UnknownFieldHandler.onWrite:a)(this.typeName,e,t),t}}v.AccountSubscriptionProductId=new fe;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Service=i.SetResponse=i.SetRequest=i.GetResponse=i.GetRequest=void 0;const e=G,t=k,s=k,a=k,c=k,f=k,d=X,l=v;class m extends f.MessageType{constructor(){super("whitehawk.proto.internal.client_portal.accounts.id.subscriptions.subscription_id.integrations.black_kite.config.v1.GetRequest",[{no:1,name:"id",kind:"message",T:()=>l.AccountSubscriptionId}])}create(n){const r={};return globalThis.Object.defineProperty(r,c.MESSAGE_TYPE,{enumerable:!1,value:this}),n!==void 0&&(0,a.reflectionMergePartial)(this,r,n),r}internalBinaryRead(n,r,u,o){let p=o!=null?o:this.create(),w=n.pos+r;for(;n.pos<w;){let[_,g]=n.tag();switch(_){case 1:p.id=l.AccountSubscriptionId.internalBinaryRead(n,n.uint32(),u,p.id);break;default:let y=u.readUnknownField;if(y==="throw")throw new globalThis.Error(`Unknown field ${_} (wire type ${g}) for ${this.typeName}`);let S=n.skip(g);y!==!1&&(y===!0?s.UnknownFieldHandler.onRead:y)(this.typeName,p,_,g,S)}}return p}internalBinaryWrite(n,r,u){n.id&&l.AccountSubscriptionId.internalBinaryWrite(n.id,r.tag(1,t.WireType.LengthDelimited).fork(),u).join();let o=u.writeUnknownFields;return o!==!1&&(o==!0?s.UnknownFieldHandler.onWrite:o)(this.typeName,n,r),r}}i.GetRequest=new m;class b extends f.MessageType{constructor(){super("whitehawk.proto.internal.client_portal.accounts.id.subscriptions.subscription_id.integrations.black_kite.config.v1.GetResponse",[{no:1,name:"data",kind:"message",T:()=>d.BlackKiteConfig}])}create(n){const r={};return globalThis.Object.defineProperty(r,c.MESSAGE_TYPE,{enumerable:!1,value:this}),n!==void 0&&(0,a.reflectionMergePartial)(this,r,n),r}internalBinaryRead(n,r,u,o){let p=o!=null?o:this.create(),w=n.pos+r;for(;n.pos<w;){let[_,g]=n.tag();switch(_){case 1:p.data=d.BlackKiteConfig.internalBinaryRead(n,n.uint32(),u,p.data);break;default:let y=u.readUnknownField;if(y==="throw")throw new globalThis.Error(`Unknown field ${_} (wire type ${g}) for ${this.typeName}`);let S=n.skip(g);y!==!1&&(y===!0?s.UnknownFieldHandler.onRead:y)(this.typeName,p,_,g,S)}}return p}internalBinaryWrite(n,r,u){n.data&&d.BlackKiteConfig.internalBinaryWrite(n.data,r.tag(1,t.WireType.LengthDelimited).fork(),u).join();let o=u.writeUnknownFields;return o!==!1&&(o==!0?s.UnknownFieldHandler.onWrite:o)(this.typeName,n,r),r}}i.GetResponse=new b;class Q extends f.MessageType{constructor(){super("whitehawk.proto.internal.client_portal.accounts.id.subscriptions.subscription_id.integrations.black_kite.config.v1.SetRequest",[{no:1,name:"id",kind:"message",T:()=>l.AccountSubscriptionId},{no:2,name:"data",kind:"message",T:()=>d.BlackKiteConfig}])}create(n){const r={};return globalThis.Object.defineProperty(r,c.MESSAGE_TYPE,{enumerable:!1,value:this}),n!==void 0&&(0,a.reflectionMergePartial)(this,r,n),r}internalBinaryRead(n,r,u,o){let p=o!=null?o:this.create(),w=n.pos+r;for(;n.pos<w;){let[_,g]=n.tag();switch(_){case 1:p.id=l.AccountSubscriptionId.internalBinaryRead(n,n.uint32(),u,p.id);break;case 2:p.data=d.BlackKiteConfig.internalBinaryRead(n,n.uint32(),u,p.data);break;default:let y=u.readUnknownField;if(y==="throw")throw new globalThis.Error(`Unknown field ${_} (wire type ${g}) for ${this.typeName}`);let S=n.skip(g);y!==!1&&(y===!0?s.UnknownFieldHandler.onRead:y)(this.typeName,p,_,g,S)}}return p}internalBinaryWrite(n,r,u){n.id&&l.AccountSubscriptionId.internalBinaryWrite(n.id,r.tag(1,t.WireType.LengthDelimited).fork(),u).join(),n.data&&d.BlackKiteConfig.internalBinaryWrite(n.data,r.tag(2,t.WireType.LengthDelimited).fork(),u).join();let o=u.writeUnknownFields;return o!==!1&&(o==!0?s.UnknownFieldHandler.onWrite:o)(this.typeName,n,r),r}}i.SetRequest=new Q;class x extends f.MessageType{constructor(){super("whitehawk.proto.internal.client_portal.accounts.id.subscriptions.subscription_id.integrations.black_kite.config.v1.SetResponse",[])}create(n){const r={};return globalThis.Object.defineProperty(r,c.MESSAGE_TYPE,{enumerable:!1,value:this}),n!==void 0&&(0,a.reflectionMergePartial)(this,r,n),r}internalBinaryRead(n,r,u,o){return o!=null?o:this.create()}internalBinaryWrite(n,r,u){let o=u.writeUnknownFields;return o!==!1&&(o==!0?s.UnknownFieldHandler.onWrite:o)(this.typeName,n,r),r}}i.SetResponse=new x,i.Service=new e.ServiceType("whitehawk.proto.internal.client_portal.accounts.id.subscriptions.subscription_id.integrations.black_kite.config.v1.Service",[{name:"Get",options:{},I:i.GetRequest,O:i.GetResponse},{name:"Set",options:{},I:i.SetRequest,O:i.SetResponse}])})(O);Object.defineProperty(F,"__esModule",{value:!0});var Y=F.ServiceClient=void 0;const U=O,A=G;class ye{constructor(e){this._transport=e,this.typeName=U.Service.typeName,this.methods=U.Service.methods,this.options=U.Service.options}get(e,t){const s=this.methods[0],a=this._transport.mergeOptions(t);return(0,A.stackIntercept)("unary",this._transport,s,a,e)}set(e,t){const s=this.methods[1],a=this._transport.mergeOptions(t);return(0,A.stackIntercept)("unary",this._transport,s,a,e)}}Y=F.ServiceClient=ye;const E=new Y(Z);function M({accountId:i,subscriptionId:e}){return{idArg:de(()=>({accountId:{value:i.value},subscriptionId:{value:e.value}})),queryKey:ne("accounts",i,"subscriptions",e,"integrations","black-kite","config")}}const N={get(i){const{idArg:e,queryKey:t}=M(i),s=W();async function a(){const c=await E.get({id:e.value},s.value),{response:f}=c;return f}return V(t,a)},set(i){const{idArg:e,queryKey:t}=M(i),s=W(),a=ee();async function c(f){return await E.set({id:e.value,data:f},s.value)}return te(c,{onSuccess(){a.invalidateQueries({queryKey:t,exact:!0})}})}},T={};T.props={accountId:{key:"accountId",required:!0,type:String},subscriptionId:{key:"subscriptionId",required:!0,type:String}};T.setup=(i,e)=>{const s=se(i),a=re(ae.create()),c={accountId:s.accountId,subscriptionId:s.subscriptionId},f=N.get(c);oe(()=>f.data.value,b=>{b!=null&&b.data&&(a.value=b.data)},{immediate:!0});const d=ce(),l=N.set(c);async function m(){await l.mutateAsync(a.value),d.success("Successfully updated config.")}return{config:a,configSet:l,submit:m}};T.components=Object.assign({BlackKiteConfigInput:le,FormButton:ue,CheckSvg:ie},T.components);var me=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("section",{staticClass:"space-y-6"},[t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"block p-4",attrs:{variant:"subtitle3"}},[i._v(" Configure Black Kite ")]),t("form",{staticClass:"divide-y",on:{submit:function(s){return s.preventDefault(),i.submit.apply(null,arguments)}}},[t("div",{staticClass:"p-4"},[t("BaseLabel",{staticClass:"space-y-1"},[t("span",[i._v("API Key:")]),t("BlackKiteConfigInput",{model:{value:i.config,callback:function(s){i.config=s},expression:"config"}})],1)],1),t("FormButton",{attrs:{action:"save"}})],1)],1),t("BaseVueQuery",{attrs:{query:i.configSet},scopedSlots:i._u([{key:"success",fn:function(){return[t("CheckSvg",{staticClass:"sr-only"})]},proxy:!0}])})],1)},he=[];const j={};var _e=K(T,me,he,!1,ge,null,null,null);function ge(i){for(let e in j)this[e]=j[e]}const be=function(){return _e.exports}(),R={};R.setup=(i,e)=>{const t=P("id"),s=P("subscriptionId");return{accountId:t,subscriptionId:s}};R.components=Object.assign({IntegrationBlackKiteConfigForm:be},R.components);var ke=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("IntegrationBlackKiteConfigForm",{attrs:{"account-id":i.accountId,"subscription-id":i.subscriptionId}})},ve=[];const q={};var we=K(R,ke,ve,!1,Se,null,null,null);function Se(i){for(let e in q)this[e]=q[e]}const Ae=function(){return we.exports}();export{Ae as default};
