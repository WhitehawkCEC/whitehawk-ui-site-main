import{d as b,aS as F,n as T,an as M,bM as h,aF as S,b as v}from"./index.99dc92dd.js";import{B as $}from"./BasicConfirmModal.85c3db03.js";import{A,T as C}from"./AppTanStackTable.cca98f75.js";import{I as P}from"./IsoDateTimeDisplay.ab1d9042.js";import{c as k}from"./createOnChangeFn.0d2c6175.js";import{u as B}from"./createSimpleTable.56191cce.js";import"./BasicModal.61e041cd.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.0c478e01.js";import"./chevron-up.736f4142.js";const u={};u.props={features:{key:"features",required:!0,type:Array}};u.setup=(e,a)=>{const s=e,p=a.emit,f=b(()=>s.features),i=k(),r=[i.accessor(t=>{var n;return(n=t.id)==null?void 0:n.value},{id:"id",header:()=>"ID",enableColumnFilter:!1}),i.accessor("name",{id:"name",header:()=>"Feature",enableColumnFilter:!1}),i.accessor(t=>{var n;return(n=t.meta)==null?void 0:n.updatedAt},{id:"updatedAt",header:()=>"Last Updated",cell:t=>F(P,{props:{value:t.getValue(),format:"date"}}),enableColumnFilter:!1}),i.display({id:"actions",header:"Actions",cell:({row:t})=>{var n;return F(C,{props:{actions:[{id:"edit",to:`/admin/products/features/${(n=t.original.id)==null?void 0:n.value}`},{id:"delete",action(){if(t.original&&t.original.id){const _=t.original.id.value,l=t.original.name,d=t.original.description;p("delete",{id:{value:_},name:l,description:d})}}}]}})}})];return{instance:B(f,r)}};u.components=Object.assign({AppTanStackTable:A},u.components);var w=function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("AppTanStackTable",{attrs:{table:e.instance}})},I=[];const x={};var V=T(u,w,I,!1,j,null,null,null);function j(e){for(let a in x)this[a]=x[a]}const D=function(){return V.exports}(),m={};m.setup=(e,a)=>{const s=h.list(),p=b(()=>{var o;return((o=s.data.value)==null?void 0:o.productFeatures)||[]}),f=S(),i=h.delete(),r=v(),y=v();function t(o){var c;r.value={productFeature:{...o}},y.value=(c=o==null?void 0:o.id)==null?void 0:c.value,l.value=!0}const n=b(()=>{var o,c;return(c=(o=r==null?void 0:r.value)==null?void 0:o.productFeature)==null?void 0:c.name});async function _(){if(r.value)await i.mutateAsync(r.value),d(),f.success(`Feature ${n.value}successfully deleted`);else throw new Error("Invalid request.")}const l=v(!1);function d(){l.value=!1}return{features:p,setPayload:t,featureName:n,deleteFeature:_,isModalVisible:l,closeModal:d}};m.components=Object.assign({PlusSvg:M,ProductFeaturesTable:D,BasicConfirmModal:$},m.components);var E=function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("section",[s("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Product Features")]},proxy:!0},{key:"button",fn:function(){return[s("BaseButton",{staticClass:"space-x-1",attrs:{to:"/admin/products/features/new"}},[s("PlusSvg",{staticClass:"mr-1 w-5 xl:w-5"}),e._v(" Feature ")],1)]},proxy:!0},{key:"table",fn:function(){return[s("ProductFeaturesTable",{attrs:{features:e.features},on:{delete:e.setPayload}})]},proxy:!0}])}),s("BasicConfirmModal",{directives:[{name:"show",rawName:"v-show",value:e.isModalVisible,expression:"isModalVisible"}],attrs:{name:e.featureName},on:{delete:e.deleteFeature,close:e.closeModal}})],1)},N=[];const g={};var q=T(m,E,N,!1,H,null,null,null);function H(e){for(let a in g)this[a]=g[a]}const X=function(){return q.exports}();export{X as default};
