import{dn as m,c as a,aS as g,n as k,an as w,c7 as T,dp as B}from"./index.ef503185.js";import{A as P,T as A}from"./AppTanStackTable.0cedb5ad.js";import{c as C}from"./createOnChangeFn.2ea319af.js";import{u as E}from"./createSimpleTable.ab7c9f94.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.9484627d.js";import"./chevron-up.736f4142.js";function j(t){switch(t){case m.ProductType.CYBER_RISK:return"Cyber Risk";case m.ProductType.BUSINESS_RISK:return"Business Risk";default:return"N/A"}}const p={};p.props={id:{key:"id",required:!0,type:String},subId:{key:"subId",required:!0,type:String},value:{key:"value",required:!0,type:Array}};p.setup=(t,i)=>{const n=t,l=a(()=>n.id),v=a(()=>n.subId),S=a(()=>n.value),$=a(()=>{const s=[];for(const{products:e}of n.value)s.push(...e);return[...new Set(s.map(e=>e.type))]}),b=a(()=>{var e;const s=new Map;for(const{products:c}of n.value)for(const r of c){const o=(e=r.integration)==null?void 0:e.type;o&&!s.has(o)&&s.set(o,r)}return Array.from(s.values())}),x=a(()=>{var e,c;const s=new Map;for(const r of b.value){const o=(e=r.integration)==null?void 0:e.id,u=r.type,_=(c=r.integration)==null?void 0:c.type,y=[];u===m.ProductType.CYBER_RISK?y.push({id:"view",to:`/admin/companies/${l.value}/subscriptions/${v.value}/integrations/${_}/entities/${o}/cyber-risk`}):u===m.ProductType.BUSINESS_RISK&&y.push({id:"download",action(){}}),o&&s.set(o,y)}return s}),d=C(),R=a(()=>[d.group({id:"supplier",header:()=>"Supplier",columns:[d.accessor(s=>{var e;return(e=s.supplier)==null?void 0:e.name},{id:"name",header:()=>"Name"})]}),...$.value.map(s=>d.group({id:s.toString(),header:()=>s?j(s):s.toString(),columns:b.value.map(e=>{var c;return d.accessor(r=>r.products.find(o=>{var u,_;return((u=o.integration)==null?void 0:u.id)===((_=e.integration)==null?void 0:_.id)}),{id:((c=e.integration)==null?void 0:c.id)||"",header:()=>{var r;return`Rating Service ${(r=e.integration)==null?void 0:r.type}`},cell:r=>{var o;return r.getValue!==void 0?g(A,{props:{actions:(o=e.integration)!=null&&o.id?x.value.get(e.integration.id):[]}}):g("span")},enableColumnFilter:!1})})}))]);return{instance:E(S,R)}};p.components=Object.assign({AppTanStackTable:P},p.components);var K=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("AppTanStackTable",{attrs:{table:t.instance}})},M=[];const h={};var N=k(p,K,M,!1,q,null,null,null);function q(t){for(let i in h)this[i]=h[i]}const F=function(){return N.exports}(),f={};f.setup=(t,i)=>{const n=T("id"),l=T("subscriptionId"),v=B.list(n,l),S=a(()=>v.data.value||[]);return{id:n,subscriptionId:l,suppliers:S}};f.components=Object.assign({PlusSvg:w,SubscriptionSuppliersTable:F},f.components);var O=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("BaseTablePageLayout",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Subscription Suppliers")]},proxy:!0},{key:"button",fn:function(){return[n("BaseButton",{staticClass:"space-x-1",attrs:{to:"./new",append:""}},[n("PlusSvg",{staticClass:"w-5"}),n("span",[t._v("Supplier")])],1)]},proxy:!0},{key:"table",fn:function(){return[n("SubscriptionSuppliersTable",{attrs:{id:t.id,value:t.suppliers,"sub-id":t.subscriptionId}})]},proxy:!0}])})},H=[];const I={};var U=k(f,O,H,!1,V,null,null,null);function V(t){for(let i in I)this[i]=I[i]}const X=function(){return U.exports}();export{X as default};
