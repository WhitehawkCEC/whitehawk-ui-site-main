import{aA as L,n as w,an as q,r as u,d as v,aK as B,aC as f,aJ as $,aH as S,ad as P,aL as E,aM as j,ae as I,al as N,ag as F,aN as U,aO as W,am as x}from"./index.414bc0aa.js";import{c as M,a as O}from"./FormValidation.907ef868.js";const p={};p.props={value:{key:"value",required:!0,type:null}};p.setup=(e,r)=>{const s=e,a=r.emit,i=L(s,a);return{checkEmail:M,checkPassword:O,proxy:i}};var V=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"flex flex-col space-y-4"},[s("BaseLabel",{staticClass:"flex flex-col space-y-1"},[s("span",{staticClass:"block text-sm font-medium leading-5"},[e._v(" Code "),s("span",{staticClass:"text-red-500"},[e._v("*")])]),s("BaseInput",{staticClass:"w-full",attrs:{type:"text",name:"code","aria-required":"true",required:""},model:{value:e.proxy.code,callback:function(a){e.$set(e.proxy,"code",a)},expression:"proxy.code"}})],1),s("BaseLabel",{staticClass:"flex flex-col space-y-1"},[s("span",{staticClass:"block text-sm font-medium leading-5"},[e._v(" Email "),s("span",{staticClass:"text-red-500"},[e._v("*")])]),s("BaseInputWithValidation",{staticClass:"w-full",attrs:{type:"email",name:"email","aria-required":"true",required:"",validator:e.checkEmail},model:{value:e.proxy.email,callback:function(a){e.$set(e.proxy,"email",a)},expression:"proxy.email"}})],1),s("BaseLabel",{staticClass:"flex flex-col space-y-1"},[s("span",{staticClass:"block text-sm font-medium leading-5"},[e._v(" New Password "),s("span",{staticClass:"text-red-500"},[e._v("*")])]),s("BaseInputWithValidation",{staticClass:"w-full",attrs:{type:"password",name:"password","aria-required":"true",required:"",validator:e.checkPassword},model:{value:e.proxy.password,callback:function(a){e.$set(e.proxy,"password",a)},expression:"proxy.password"}})],1),s("BaseLabel",{staticClass:"text-sm"},[s("span",{staticClass:"block text-sm font-medium leading-5"},[e._v(" Confirm New Password "),s("span",{staticClass:"text-red-500"},[e._v("*")])]),s("BaseInput",{staticClass:"w-full",attrs:{type:"password",name:"passwordRepeat","aria-required":"true",required:""},model:{value:e.proxy.passwordRepeat,callback:function(a){e.$set(e.proxy,"passwordRepeat",a)},expression:"proxy.passwordRepeat"}})],1)],1)},z=[];const g={};var A=w(p,V,z,!1,G,null,null,null);function G(e){for(let r in g)this[r]=g[r]}const D=function(){return A.exports}(),l=N({layout:"basic"});l.setup=(e,r)=>{const s=`${F}/main-page-pics/line-waves-md.svg`,a=q(),i=u(),t=v({get(){return i.value||{email:String(a.value.query.email)||"",password:"",passwordRepeat:"",code:""}},set(o){i.value=o}}),d=u(!1),n=u(),h=v(()=>t.value.code&&t.value.email&&t.value.password&&t.value.passwordRepeat&&t.value.password===t.value.passwordRepeat),m=B();f(a,o=>{!o||(t.value={...t.value,email:String(o.query.email)})},{immediate:!0}),f(t,o=>{const c=a.value.path,R=o?{email:o.email}:void 0;m.push({path:c,query:R})});const C=$(),b=S();async function k(){n.value=null,d.value=!0;try{const o=t.value.email.toLocaleLowerCase("us");await U.forgotPasswordSubmit(o,t.value.code,t.value.password),b.success("Your password was successfully changed");const c=await W(o,t.value.password);C.set(c),m.push("/")}catch(o){n.value=o}finally{d.value=!1}}return{backgroundUrl:s,user:t,error:n,isValidForm:h,submit:k}};l.components=Object.assign({WhitehawkLogo:P,GenericError:E,PasswordResetCard:D,ChevronLeftSvg:j,ChevronRightSvg:I},l.components);var H=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("main",{staticClass:"flex min-h-screen flex-col justify-center bg-prime-navy bg-[length:517px] bg-bottom bg-repeat-x py-12 sm:px-6 lg:px-8",style:{backgroundImage:`url(${e.backgroundUrl})`}},[s("div",{staticClass:"container mx-auto flex flex-col space-y-4"},[s("BaseLink",{attrs:{"aria-label":"Link to main page",to:{path:"/"}}},[s("WhitehawkLogo",{staticClass:"mx-auto h-auto w-48 fill-current",attrs:{color:"white"}})],1),s("h1",{staticClass:"text-center font-display text-3xl font-medium leading-9 tracking-tight text-white antialiased sm:text-5xl sm:leading-10"},[e._v(" Client Portal ")]),s("BaseP1",{staticClass:"text-center text-white"},[e._v("Reset your password")])],1),s("div",{staticClass:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},[s("div",{staticClass:"space-y-8 rounded-lg bg-white px-10 py-8 shadow"},[e.error?s("GenericError",{attrs:{error:e.error}}):e._e(),s("form",{staticClass:"flex flex-col space-y-8",on:{submit:function(a){return a.preventDefault(),e.submit.apply(null,arguments)}}},[s("PasswordResetCard",{model:{value:e.user,callback:function(a){e.user=a},expression:"user"}}),s("BaseButton",{attrs:{shape:"rectangle",size:"large","display-type":"info",disabled:!e.isValidForm}},[e._v(" Change password ")])],1),s("div",{staticClass:"flex justify-between"},[s("BaseLink",{staticClass:"group inline-flex items-center",attrs:{"display-type":"primary-prime",to:{path:"/login",query:{email:e.user.email}}}},[s("ChevronLeftSvg",{staticClass:"h-5 w-5 text-prime-indigo group-hover:text-indigo-400 group-focus:text-indigo-400"}),s("span",[e._v("Login")])],1),s("BaseLink",{staticClass:"group inline-flex items-center",attrs:{"display-type":"primary-prime",to:{path:"/password-reset",query:{email:e.user.email}}}},[s("span",[e._v("Request New Code")]),s("ChevronRightSvg",{staticClass:"h-5 w-5 text-prime-indigo group-hover:text-indigo-400 group-focus:text-indigo-400"})],1)],1)],1)])])},J=[];const y={};var _=w(l,H,J,!1,K,null,null,null);function K(e){for(let r in y)this[r]=y[r]}typeof x=="function"&&x(_);const T=function(){return _.exports}();export{T as default};
