import{F as $e}from"./FormButton.8acf51b7.js";import{dn as be,aB as x,d as u,n as m,dp as g,cu as Se,dq as y,b1 as G,ah as ge,aP as he,aQ as Ce,ax as de,cp as Ae,L as Re,bs as Be,c7 as z,c4 as Ee,aF as De,aK as Ie,dr as Ve}from"./index.c629a7f0.js";import{R as qe}from"./arrow-path.24b87f73.js";import{T as je}from"./TransitionExpand.7621d1d1.js";import{d as Oe,b as Fe,c as Te,B as Pe,a as Ne}from"./BundleSolutionInput.bee90787.js";import{l as Qe}from"./lodash.4d4d7309.js";import{t as Ke,a as Me,b as we,c as E,d as Ue}from"./index.6549909a.js";import{C as me}from"./CollapsibleSection.d385cb59.js";import{c as Le,B as Ge,d as Ye}from"./BlackKiteProgressBar.c0f52f45.js";import{T as fe}from"./ToolTip.6f4a51d4.js";import{O as ve}from"./ObjectDisplay.79bdff00.js";import{e as k}from"./attributeValue.ea53a720.js";import{D as Je}from"./DynamicForm.1fba6cd4.js";import{u as ze}from"./useCompanyScorecardTemplates.4526a552.js";import{u as He}from"./useProducts.1a2ef2fc.js";import{u as We}from"./useScorecardTemplates.36223db0.js";import{u as Xe}from"./useBlackKiteEntities.16a80180.js";import{u as Ze}from"./useUsers.d6957cf3.js";import{s as et}from"./index.c2fb44fa.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./GradeLetterDisplay.ce4920e3.js";import"./ratingScoreDescription.3b48b1ea.js";import"./_baseIteratee.d8b71ff3.js";import"./_Uint8Array.e8255d86.js";import"./keys.d30b6ecb.js";import"./_baseIsEqual.3af0be27.js";import"./_arrayMap.dcea68f3.js";import"./index.ebbce841.js";function h(e){return e===void 0?be.BundleSolutionEntry.create():{title:e.title,description:e.description,groups:tt(e.groups)}}function tt(e){return e.map(({category:r,main:t,option:s})=>({category:{id:{value:r.id},name:r.name},main:{id:{value:(t==null?void 0:t.id)||""},name:(t==null?void 0:t.name)||"",description:t==null?void 0:t.description,manufacturer:{id:{value:(t==null?void 0:t.manufacturer.id)||""},name:(t==null?void 0:t.manufacturer.name)||""},categories:H((t==null?void 0:t.categories)||[])},option:{id:{value:(s==null?void 0:s.id)||""},name:(s==null?void 0:s.name)||"",description:s==null?void 0:s.description,manufacturer:{id:{value:(s==null?void 0:s.manufacturer.id)||""},name:(s==null?void 0:s.manufacturer.name)||""},categories:H((s==null?void 0:s.categories)||[])}}))}function H(e){return e.map(({id:r,name:t})=>({id:{value:r},name:t}))}function rt(e){const r=[];for(const t of Object.entries(e)){const[s,n]=t;r.push({domain:Ke(s),domainDisplayValue:n.displayValue,levels:st(n.levels)})}return r}function st(e){const r=[];for(const[t,s]of Object.entries(e))r.push({level:Me(t),averageStarLevel:s.averageStarLevel});return r}const D={};D.props={value:{key:"value",required:!1,type:null},products:{key:"products",required:!0,type:Array},random:{key:"random",required:!0,type:null},performance:{key:"performance",required:!0,type:null}};D.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s),i=u({get(){const{BASIC:c,BALANCED:a,ADVANCED:l}=t.random,[d,b,S]=t.performance.focusAreaOrder;if(d&&b&&S){const p=c[d],v=a[b],$=l[S];if(p&&v&&$)return{BASIC:p,BALANCED:v,ADVANCED:$}}},set(c){c&&(n.value={essential:h(c.BASIC),balanced:h(c.BALANCED),premier:h(c.ADVANCED)})}}),o=u(()=>{const c=[];for(const a of t.products)for(const l of a.categories)c.push(l);return Qe.exports.uniqBy(c,"id").sort((a,l)=>a.name.localeCompare(l.name))});return{bundle:i,productCategories:o}};D.components=Object.assign({BundleSolutionInput:Oe},D.components);var nt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BundleSolutionInput",{attrs:{products:e.products,"product-categories":e.productCategories},model:{value:e.bundle,callback:function(s){e.bundle=s},expression:"bundle"}})},at=[];const W={};var ot=m(D,nt,at,!1,ct,null,null,null);function ct(e){for(let r in W)this[r]=W[r]}const lt=function(){return ot.exports}(),I={};I.props={value:{key:"value",required:!1,type:null},order:{key:"order",required:!1,type:null},performance:{key:"performance",required:!0,type:null}};I.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s),i=u({get(){const[a,l,d]=t.performance.focusAreaOrder;if(a&&l&&d)return[a,l,d]},set(a){if(a){const l=c(a);n.value={first:l[0]||g.RiskVector.UNSPECIFIED,second:l[1]||g.RiskVector.UNSPECIFIED,third:l[2]||g.RiskVector.UNSPECIFIED}}}}),o=u(()=>{var a;return(a=t.order)==null?void 0:a.values.map(l=>we(l))});function c(a){const l=[];for(const d of a)d&&l.push(E(d));return l}return{focusAreas:i,options:o}};I.components=Object.assign({BlackKiteFocusAreasInput:Fe},I.components);var it=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BlackKiteFocusAreasInput",{attrs:{options:e.options||[]},model:{value:e.focusAreas,callback:function(s){e.focusAreas=s},expression:"focusAreas"}})},ut=[];const X={};var pt=m(I,it,ut,!1,dt,null,null,null);function dt(e){for(let r in X)this[r]=X[r]}const mt=function(){return pt.exports}(),V={};V.props={value:{key:"value",required:!1,type:null},performance:{key:"performance",required:!0,type:null}};V.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s);return{riskVectors:u({get(){return t.performance.riskVectors},set(o){const c=[];for(const[a,l]of Object.entries(o))c.push({riskVector:E(a),analysis:l});n.value={values:c}}})}};V.components=Object.assign({CollapsibleSection:me,BlackKiteRiskVectorPerformance:Te},V.components);var ft=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("CollapsibleSection",{scopedSlots:e._u([{key:"title",fn:function(){return[t("BaseTypography",{staticClass:"py-4 pl-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Risk Vector Performance ")])]},proxy:!0},{key:"content",fn:function(){return[t("BlackKiteRiskVectorPerformance",{model:{value:e.riskVectors,callback:function(s){e.riskVectors=s},expression:"riskVectors"}})]},proxy:!0}])})},vt=[];const Z={};var yt=m(V,ft,vt,!1,_t,null,null,null);function _t(e){for(let r in Z)this[r]=Z[r]}const xt=function(){return yt.exports}(),q={};q.props={value:{key:"value",required:!1,type:null},performance:{key:"performance",required:!0,type:null}};q.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s);return{riskVectors:u({get(){return t.performance.riskVectors},set(o){const c=[];for(const[a,l]of Object.entries(o))c.push({riskVector:E(a),analysis:l});n.value={values:c}}})}};q.components=Object.assign({BlackKiteRiskVectorsDisplay:Le},q.components);var kt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"p-4"},[t("BlackKiteRiskVectorsDisplay",{model:{value:e.riskVectors,callback:function(s){e.riskVectors=s},expression:"riskVectors"}})],1)},$t=[];const ee={};var bt=m(q,kt,$t,!1,St,null,null,null);function St(e){for(let r in ee)this[r]=ee[r]}const gt=function(){return bt.exports}(),j={};j.props={value:{key:"value",required:!0,type:null}};j.setup=(e,r)=>{const t=e,s=new Set(["NIST 800-53 R5","CIS CSC-20","CMMC 2.0","NIST 800-171"]),n=u(()=>t.value.entries.map(a=>({StandardCode:o(a.fields.StandardCode)||"",Completeness:c(a.fields.Completeness)||0,Compliance:c(a.fields.Compliance)||0,Confidence:c(a.fields.Confidence)||0}))),i=u(()=>n.value.filter(a=>s.has(a.StandardCode)));function o(a){return(a==null?void 0:a.kind.oneofKind)==="stringValue"?a.kind.stringValue:void 0}function c(a){return(a==null?void 0:a.kind.oneofKind)==="numberValue"?a.kind.numberValue:void 0}return{filtered:i}};j.components=Object.assign({BlackKiteDonut:Ge},j.components);var ht=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ul",{staticClass:"grid items-center justify-center pt-8 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4"},e._l(e.filtered,function(s){return t("li",{key:s.StandardCode,staticClass:"mx-auto"},[t("BlackKiteDonut",{attrs:{value:s}})],1)}),0)},Ct=[];const te={};var At=m(j,ht,Ct,!1,Rt,null,null,null);function Rt(e){for(let r in te)this[r]=te[r]}const Bt=function(){return At.exports}();function B(e){const r=e;return Se.Struct.fromJson(r)}const O={};O.props={value:{key:"value",required:!1,type:null},performance:{key:"performance",required:!0,type:null}};O.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s);return{summary:u({get(){return t.performance.reports.summary},set(o){o&&(n.value={json:B(o)})}})}};O.components=Object.assign({BlackKiteSummaryDescription:Pe,BlackKiteReportSummary:Ne},O.components);var Et=function(){var e=this,r=e.$createElement,t=e._self._c||r;return e.summary?t("div",{staticClass:"flex flex-col divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Summary Report ")]),t("div",{staticClass:"flex flex-col divide-y"},[t("BlackKiteSummaryDescription",{attrs:{score:parseInt(e.summary.GradeOver100),date:e.summary.LastUpdatedAt}}),t("div",{staticClass:"p-4"},[t("BlackKiteReportSummary",{attrs:{summary:e.summary}})],1)],1)],1):e._e()},Dt=[];const re={};var It=m(O,Et,Dt,!1,Vt,null,null,null);function Vt(e){for(let r in re)this[r]=re[r]}const qt=function(){return It.exports}(),F={};F.props={value:{key:"value",required:!1,type:null},performance:{key:"performance",required:!0,type:null}};F.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s);return{risk:u({get(){return t.performance.reports.risk},set(o){o&&(n.value={json:B(o)})}})}};F.components=Object.assign({CollapsibleSection:me,BlackKiteReportRisk:Ye},F.components);var jt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("CollapsibleSection",{scopedSlots:e._u([{key:"title",fn:function(){return[t("BaseTypography",{staticClass:"py-4 pl-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" FAIR Report ")])]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"p-4"},[t("BlackKiteReportRisk",{attrs:{risk:e.risk}})],1)]},proxy:!0}])})},Ot=[];const se={};var Ft=m(F,jt,Ot,!1,Tt,null,null,null);function Tt(e){for(let r in se)this[r]=se[r]}const Pt=function(){return Ft.exports}(),T={};T.props={value:{key:"value",required:!1,type:null},options:{key:"options",required:!0,type:Array}};T.setup=(e,r)=>{const t=e,s=r.emit;return{proxy:x(t,s)}};T.components=Object.assign({ToolTip:fe,ObjectDisplay:ve},T.components);var Nt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BaseLabel",{staticClass:"flex flex-col p-4 lg:grid lg:grid-cols-3 lg:items-center"},[t("div",{staticClass:"flex flex-row items-center space-x-1 after:content-['*'] after:ml-0.5 after:text-red-700"},[t("span",[e._v("Supplier")]),e.value?t("ToolTip",[t("ObjectDisplay",{attrs:{value:e.value}})],1):e._e()],1),t("div",{staticClass:"flex flex-col lg:col-span-2"},[t("BaseSelect",{model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}},e._l(e.options,function(s){return t("option",{key:s.id,domProps:{value:s}},[e._v(" "+e._s(s.name)+" ")])}),0)],1)])},Qt=[];const ne={};var Kt=m(T,Nt,Qt,!1,Mt,null,null,null);function Mt(e){for(let r in ne)this[r]=ne[r]}const wt=function(){return Kt.exports}(),P={};P.props={value:{key:"value",required:!1,type:null},entities:{key:"entities",required:!0,type:Array}};P.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s),i=u(()=>t.entities.map(o=>({id:o.CompanyId,name:o.CompanyName})).sort((o,c)=>o.name.localeCompare(c.name))||[]);return{proxy:n,options:i}};P.components=Object.assign({SupplierEntryInput:wt},P.components);var Ut=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("SupplierEntryInput",{attrs:{options:e.options},model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}})},Lt=[];const ae={};var Gt=m(P,Ut,Lt,!1,Yt,null,null,null);function Yt(e){for(let r in ae)this[r]=ae[r]}const Jt=function(){return Gt.exports}(),N={};N.props={value:{key:"value",required:!1,type:null},users:{key:"users",required:!0,type:Array}};N.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s),i=u(()=>t.users.map(o=>({id:{value:k(o,"sub")},name:k(o,"name")||"",title:k(o,"custom:title")||"",email:k(o,"email"),phone:k(o,"phone_number")||""})).sort((o,c)=>o.email.localeCompare(c.email)));return{proxy:n,options:i}};N.components=Object.assign({ToolTip:fe,ObjectDisplay:ve},N.components);var zt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BaseLabel",{staticClass:"flex flex-col p-4 lg:grid lg:grid-cols-3 lg:items-center"},[t("div",{staticClass:"flex flex-row items-center space-x-1 after:content-['*'] after:ml-0.5 after:text-red-700"},[t("span",[e._v("Analyst")]),e.value?t("ToolTip",[t("ObjectDisplay",{attrs:{value:e.value}})],1):e._e()],1),t("BaseSelect",{staticClass:"lg:col-span-2",attrs:{required:""},model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}},e._l(e.options,function(s,n){return t("option",{key:n,domProps:{value:s}},[e._v(" "+e._s(s.email)+" ")])}),0)],1)},Ht=[];const oe={};var Wt=m(N,zt,Ht,!1,Xt,null,null,null);function Xt(e){for(let r in oe)this[r]=oe[r]}const Zt=function(){return Wt.exports}(),Q={};Q.props={value:{key:"value",required:!1,type:null}};Q.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s),i=u(()=>new Date().getFullYear()),o=u(()=>new Array(10).fill(i.value).map((d,b)=>({value:i.value-5+b}))),c=u(()=>[{text:"In Progress",value:y.State.IN_PROGRESS},{text:"Products Needed",value:y.State.PRODUCTS_NEEDED},{text:"Ready for QA",value:y.State.READY_FOR_QA},{text:"Delivered",value:y.State.DELIVERED},{text:"Complete",value:y.State.COMPLETE}]),a=u(()=>[{text:"Q1",value:y.Quarter.Q1},{text:"Q2",value:y.Quarter.Q2},{text:"Q3",value:y.Quarter.Q3},{text:"Q4",value:y.Quarter.Q4},{text:"Other",value:y.Quarter.OTHER}]),l=[{name:"state",label:"State",component:{is:G,attrs:{required:!0,options:c.value}}},{name:"year",label:"Year",component:{is:G,attrs:{required:!0,options:o.value}}},{name:"quarter",label:"Quarter",component:{is:G,attrs:{required:!0,options:a.value}}}];return{proxy:n,schema:l}};Q.components=Object.assign({DynamicForm:Je},Q.components);var er=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("DynamicForm",{attrs:{schema:e.schema},model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}})},tr=[];const ce={};var rr=m(Q,er,tr,!1,sr,null,null,null);function sr(e){for(let r in ce)this[r]=ce[r]}const nr=function(){return rr.exports}(),ar={get(){return ge(["random-bundle-solution"],()=>he.get(`${Ce}/random-bundle-solution`).then(e=>e.data))}},K={};K.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:null},users:{key:"users",required:!0,type:Array},entities:{key:"entities",required:!0,type:Array},products:{key:"products",required:!0,type:Array}};K.setup=(e,r)=>{const t=e,s=r.emit,n=de(t,s),i=u(()=>{var v,$;const p=[];return(v=n.value.supplier)!=null&&v.id||p.push("Select a supplier"),(($=n.value.status)==null?void 0:$.state)===y.State.DELIVERED&&p.push('The status of this scorecard has already been marked as "Delivered."'),{allowed:p.length===0,reasons:p}}),o=u(()=>t.id),c=u({get(){var p,v;return(v=(p=t.value)==null?void 0:p.supplier)==null?void 0:v.id},set(p){p&&n.value.supplier&&(n.value.supplier.id=p)}}),a=Ae.get(o,c),l=u(()=>a.data.value),d=ar.get(),b=u(()=>d.data.value);function S(){if(a.data.value&&d.data.value){const{cmmcAnalysis:p,focusAreaOrder:v,ratingScoreDetails:$,reports:C,riskVectors:U}=a.data.value,{BASIC:L,BALANCED:_,ADVANCED:f}=d.data.value,[ye,_e,xe]=v,A=[];for(const R of v)A.push(E(R));const J=[];for(const[R,ke]of Object.entries(U))J.push({riskVector:E(R),analysis:ke});n.value.cmmcAnalysis={entries:rt(p)},n.value.reports={summary:{json:B(C.summary)},risk:{json:B(C.risk)},compliance:{entries:C.compliance.map(R=>B(R))}},n.value.ratingScore={description:$.description||""},n.value.riskVectors={values:J},n.value.focusAreaOrder={values:A},n.value.focusAreas={first:A[0]||g.RiskVector.UNSPECIFIED,second:A[1]||g.RiskVector.UNSPECIFIED,third:A[2]||g.RiskVector.UNSPECIFIED},n.value.bundle={essential:h(L[ye||""]),balanced:h(_[_e||""]),premier:h(f[xe||""])},s("update-data")}}return{proxy:n,canUpdateData:i,performance:l,random:b,updateData:S}};K.components=Object.assign({AnalystInput:Zt,SupplierInput:Jt,RefreshSvg:qe,TransitionExpand:je,SummaryReport:qt,SummaryRiskReport:Pt,RiskVectorAnalysisOverview:gt,FocusAreas:mt,RiskVectorAnalysis:xt,BundleSolution:lt,SummaryComplianceReportDisplay:Bt,StatusInput:nr},K.components);var or=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("section",{staticClass:"flex flex-col divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Analyst Information ")]),t("AnalystInput",{attrs:{users:e.users},model:{value:e.proxy.analyst,callback:function(s){e.$set(e.proxy,"analyst",s)},expression:"proxy.analyst"}}),t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Supplier Information ")]),t("SupplierInput",{attrs:{entities:e.entities},model:{value:e.proxy.supplier,callback:function(s){e.$set(e.proxy,"supplier",s)},expression:"proxy.supplier"}}),t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Update Data ")]),e.canUpdateData.allowed?t("div",{staticClass:"p-4"},[t("BaseButton",{staticClass:"w-full space-x-2 lg:w-auto",attrs:{type:"button",disabled:!e.canUpdateData.allowed},on:{click:e.updateData}},[t("RefreshSvg",{staticClass:"-ml-1 w-4 xl:w-5"}),t("span",[e._v("Update")])],1)],1):t("div",[t("BaseAlert",{staticClass:"shadow-none rounded-none",attrs:{type:"warn"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Update Unavailable")]},proxy:!0},{key:"message",fn:function(){return[t("ul",{staticClass:"flex list-inside list-disc flex-col space-y-1"},e._l(e.canUpdateData.reasons,function(s){return t("li",{key:s},[e._v(" "+e._s(s)+" ")])}),0)]},proxy:!0}],null,!1,4159848379)})],1),t("TransitionExpand",[e.performance&&e.random?t("div",{staticClass:"divide-y"},[e.proxy.reports?[t("SummaryReport",{attrs:{"v-model":e.proxy.reports.summary,performance:e.performance}}),t("SummaryRiskReport",{attrs:{"v-model":e.proxy.reports.risk,performance:e.performance}})]:e._e(),e.proxy.focusAreaOrder?t("div",{staticClass:"grid divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Recommended Focus Areas ")]),t("div",{staticClass:"flex flex-col divide-y lg:grid lg:grid-cols-2 lg:divide-x lg:divide-y-0 xl:grid-cols-3"},[t("RiskVectorAnalysisOverview",{attrs:{performance:e.performance},model:{value:e.proxy.riskVectors,callback:function(s){e.$set(e.proxy,"riskVectors",s)},expression:"proxy.riskVectors"}}),t("FocusAreas",{attrs:{order:e.proxy.focusAreaOrder,performance:e.performance},model:{value:e.proxy.focusAreas,callback:function(s){e.$set(e.proxy,"focusAreas",s)},expression:"proxy.focusAreas"}})],1)],1):e._e(),e.proxy.riskVectors?[t("RiskVectorAnalysis",{attrs:{performance:e.performance},model:{value:e.proxy.riskVectors,callback:function(s){e.$set(e.proxy,"riskVectors",s)},expression:"proxy.riskVectors"}})]:e._e(),e.proxy.bundle?[t("BundleSolution",{attrs:{products:e.products,random:e.random,performance:e.performance},model:{value:e.proxy.bundle,callback:function(s){e.$set(e.proxy,"bundle",s)},expression:"proxy.bundle"}})]:e._e(),e.proxy.reports&&e.proxy.reports.compliance?[t("div",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Compliance ")]),t("SummaryComplianceReportDisplay",{attrs:{value:e.proxy.reports.compliance}})],1)]:e._e()],2):e._e()]),t("StatusInput",{model:{value:e.proxy.status,callback:function(s){e.$set(e.proxy,"status",s)},expression:"proxy.status"}})],1)},cr=[];const le={};var lr=m(K,or,cr,!1,ir,null,null,null);function ir(e){for(let r in le)this[r]=le[r]}const ur=function(){return lr.exports}(),Y={};Y.props={value:{key:"value",required:!1,type:null,default:void 0},templates:{key:"templates",required:!0,type:Array}};Y.setup=(e,r)=>{const t=e,s=r.emit,n=x(t,s),i=u(()=>t.templates.map(({key:o})=>({value:o.split("/")[1]||""})));return{proxy:n,options:i}};var pr=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BaseLabel",{staticClass:"flex flex-col p-4 lg:grid lg:grid-cols-3 lg:items-center"},[t("span",{staticClass:"after:content-['*'] after:ml-0.5 after:text-red-700"},[e._v(" Template ")]),t("BaseSelect",{staticClass:"flex flex-col lg:col-span-2",model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}},e._l(e.options,function(s,n){return t("option",{key:n,domProps:{value:s}},[e._v(" "+e._s(s.value)+" ")])}),0)],1)},dr=[];const ie={};var mr=m(Y,pr,dr,!1,fr,null,null,null);function fr(e){for(let r in ie)this[r]=ie[r]}const vr=function(){return mr.exports}(),M={};M.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:null},users:{key:"users",required:!0,type:Array},entities:{key:"entities",required:!0,type:Array},products:{key:"products",required:!0,type:Array},templates:{key:"templates",required:!0,type:Array}};M.setup=(e,r)=>{const t=e,s=r.emit;return{proxy:de(t,s)}};M.components=Object.assign({TemplateInput:vr,DataInput:ur},M.components);var yr=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"flex flex-col divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Scorecard Template ")]),t("TemplateInput",{attrs:{templates:e.templates},model:{value:e.proxy.template,callback:function(s){e.$set(e.proxy,"template",s)},expression:"proxy.template"}}),t("DataInput",{attrs:{id:e.id,users:e.users,entities:e.entities,products:e.products},model:{value:e.proxy.data,callback:function(s){e.$set(e.proxy,"data",s)},expression:"proxy.data"}})],1)},_r=[];const ue={};var xr=m(M,yr,_r,!1,kr,null,null,null);function kr(e){for(let r in ue)this[r]=ue[r]}const $r=function(){return xr.exports}(),w={};w.setup=(e,r)=>{const t=z("id"),s=z("subscriptionId"),n=[He.list(),We.list(),Xe.list(t)],i=Ze.list(),o=Ee.read(t),c=ze.get(t),a=u(()=>{if(o.data.value){const{id:_,name:f}=o.data.value;return{id:_,name:f}}}),l=u(()=>{var _;return(_=i.data.value)==null?void 0:_.map(f=>({id:{value:k(f,"sub")},name:k(f,"name")||"",title:k(f,"custom:title")||"",email:k(f,"email"),phone:k(f,"phone_number")||""})).find(f=>f.email==="consultingservices@whitehawk.com")}),d=new Date,b=d.getUTCFullYear(),S=`Q${Math.ceil((d.getMonth()+1)/4)}`,p=et(u(()=>{var _;return{template:{value:((_=c.data.value)==null?void 0:_.split("/")[1])||""},data:{buyer:{company:a.value},analyst:l.value,status:{state:y.State.IN_PROGRESS,year:b,quarter:Ue(S)}}}})),v=u(()=>Boolean(i.data.value&&o.data.value)),$=De(),C=Ie(),U=Ve.create(t,s);async function L(){if(p.value){const _={scorecardInput:{oneofKind:"bk",bk:p.value}},{response:f}=await U.mutateAsync(_);f.scorecardId&&($.success("Successfully created scorecard."),C.push(`/admin/companies/${t.value}/subscriptions/integrations/2/${s.value}/scorecards/in-depth/${f.scorecardId.value}`))}}return{accountId:t,queries:n,users:i,scorecard:p,ready:v,createScorecard:L}};w.components=Object.assign({LoadingSpinner:Re,BackButton:Be,ScorecardInput:$r,FormButton:$e},w.components);var br=function(){var e=this,r=e.$createElement,t=e._self._c||r;return e.ready?t("section",{staticClass:"space-y-6"},[t("div",{staticClass:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-4"},[t("BackButton"),t("BaseTypography",{attrs:{variant:"h5",component:"h2"}},[e._v(" Create Scorecard ")])],1),t("BaseSimpleCard",[t("form",{staticClass:"divide-y",on:{submit:function(s){return s.preventDefault(),e.createScorecard.apply(null,arguments)}}},[t("BaseVueQueries",{attrs:{queries:e.queries},scopedSlots:e._u([{key:"success",fn:function(s){var n=s[0],i=s[1],o=s[2];return[t("ScorecardInput",{attrs:{id:e.accountId,users:e.users.data.value||[],entities:o,products:n,templates:i},model:{value:e.scorecard,callback:function(c){e.scorecard=c},expression:"scorecard"}})]}}])}),t("FormButton",{attrs:{action:"create"}})],1)])],1):t("LoadingSpinner")},Sr=[];const pe={};var gr=m(w,br,Sr,!1,hr,null,null,null);function hr(e){for(let r in pe)this[r]=pe[r]}const es=function(){return gr.exports}();export{es as default};
