import{T as P}from"./trash.78f57a7a.js";import{an as g,c7 as h,b as d,az as x,aK as S,aF as B,d as b,n as w}from"./index.970e895a.js";import{P as F,u as T,a as R,b as k}from"./ProductInput.95a02742.js";import{u as q}from"./useManufacturers.81c00df5.js";import{u as I}from"./useManufacturerProducts.c9ffa592.js";import"./DynamicForm.d8a461ce.js";const u={};u.setup=(e,o)=>{const t=h("id"),a=[T.list(),R.list(),k.list()],r=d(),n=q.read(t),c=d();x(()=>n.data.value,s=>{if(s){const{id:l,name:C}=s;c.value={id:l,name:C}}},{immediate:!0});const i=S(),m=B(),f=I.create(t);async function v(){if(r.value&&c.value){const s={...r.value,manufacturer:c.value};await f.mutateAsync(s)&&(m.success("Successfully created new product."),i.push(`/admin/manufacturers/${encodeURIComponent(t.value)}/products`))}}const _=b(()=>{const s=r.value;return Boolean(s&&s.name&&s.type&&s.description&&s.features&&s.categories&&s.price)});function y(){r.value=void 0}return{queries:a,product:r,createProduct:v,isValidForm:_,clear:y}};u.components=Object.assign({ProductInput:F,PlusSvg:g,TrashSvg:P},u.components);var M=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("section",[t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{variant:"h6",component:"h3"}},[e._v(" Add Product ")]),t("form",{staticClass:"divide-y",on:{submit:function(a){return a.preventDefault(),e.createProduct.apply(null,arguments)}}},[t("BaseVueQueries",{attrs:{queries:e.queries},scopedSlots:e._u([{key:"success",fn:function(a){var r=a[0],n=a[1],c=a[2];return[t("ProductInput",{attrs:{types:r,categories:c,features:n},model:{value:e.product,callback:function(i){e.product=i},expression:"product"}})]}}])}),t("div",{staticClass:"flex p-4"},[t("div",{staticClass:"pr-2 file:md:inline-flex"},[t("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{disabled:!e.isValidForm}},[t("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),t("span",[e._v("Create")])],1)],1),t("BaseButton",{staticClass:"space-x-1",attrs:{action:"secondary","display-type":"danger"},on:{click:e.clear}},[t("TrashSvg",{staticClass:"w-5"}),t("span",[e._v("Clear")])],1)],1)],1)],1)],1)},j=[];const p={};var z=w(u,M,j,!1,A,null,null,null);function A(e){for(let o in p)this[o]=p[o]}const N=function(){return z.exports}();export{N as default};
