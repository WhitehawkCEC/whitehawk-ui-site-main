import{aq as k,c1 as S,c7 as w,ca as B,d as i,cb as I,c9 as R,aJ as C,n as D}from"./index.fe49c200.js";import{S as q,P as A}from"./SubscriptionOverviewDisplay.46cc93ba.js";import{a as L}from"./SubscriptionProductsTable.13ed6442.js";import"./AppVDateRangePicker.fa5b31e4.js";import"./index.5b0eb428.js";import"./index.be3bf73b.js";import"./IsoDateTimeDisplay.3a5f9779.js";import"./index.410e0dca.js";import"./index.f7a3ba27.js";import"./index.87e44ac4.js";import"./DateRangeDisplay.20e41d49.js";import"./AppTanStackTable.5f451b2a.js";import"./createOnChangeFn.1838eef0.js";import"./chevron-up.736f4142.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.570b9319.js";import"./createSimpleTable.d293fdff.js";const a={};a.setup=(s,r)=>{const t=S("id"),e=S("subscriptionId"),o=w.read(t,e),l=B.list(t,e),m=i(()=>l.data.value||[]),v=I(),x=i(()=>v.pinnedProductIds),f=i(()=>{var n;return((n=o.data.value)==null?void 0:n.features)||R.SubscriptionFeatures.create()}),c=C(),h=i(()=>{var _,b;const n=new Map;for(const p of m.value){const u=((b=(_=p.product)==null?void 0:_.id)==null?void 0:b.value)||"",g=[{id:"view",action(){f.value.hasGroups?c.push(`/admin/companies/${t.value}/subscriptions/${e.value}/products/${u}/groups`):c.push(`/admin/companies/${t.value}/subscriptions/${e.value}/products/${u}`)}},{id:"edit",action(){c.push(`/admin/companies/${t.value}/subscriptions/${e.value}/products/${u}/settings`)}},{id:"pinProduct",action(){v.setPinned(u)}}].filter(d=>{var y,P;return((P=(y=p.product)==null?void 0:y.id)==null?void 0:P.value)&&x.value.includes(p.product.id.value)||f.value.hasGroups?d.id!=="pinProduct":d});n.set(u,g)}return n});return{id:t,subscriptionId:e,subscriptionRead:o,productsList:l,products:m,actions:h}};a.components=Object.assign({SubscriptionOverviewDisplay:q,PinnedProductsDisplay:A,PlusSvg:k,SubscriptionProductsTable:L},a.components);var O=function(){var s=this,r=s.$createElement,t=s._self._c||r;return t("section",{staticClass:"space-y-6"},[t("BaseVueQuery",{attrs:{query:s.subscriptionRead},scopedSlots:s._u([{key:"success",fn:function(e){var o=e.data.status;return[o?t("SubscriptionOverviewDisplay",{attrs:{status:o}}):s._e()]}}])}),t("PinnedProductsDisplay",{attrs:{"company-id":s.id,"sub-id":s.subscriptionId,products:s.products}}),t("BaseTablePageLayout",{scopedSlots:s._u([{key:"title",fn:function(){return[s._v("Subscription Products")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"./new",append:""}},[t("PlusSvg",{staticClass:"w-5"}),t("span",[s._v("Product")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("BaseVueQuery",{attrs:{query:s.productsList},scopedSlots:s._u([{key:"success",fn:function(e){var o=e.data;return[t("SubscriptionProductsTable",{attrs:{value:o,"mapped-actions":s.actions}})]}}])})]},proxy:!0}])})],1)},T=[];const $={};var j=D(a,O,T,!1,F,null,null,null);function F(s){for(let r in $)this[r]=$[r]}const ot=function(){return j.exports}();export{ot as default};
