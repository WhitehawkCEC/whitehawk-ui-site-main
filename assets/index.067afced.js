import{F as O}from"./FormButton.105c370d.js";import{b1 as $,d as u,n as m,aB as b,d8 as B,cq as C,bP as A,bs as j,ca as h,ck as F,aF as w,aK as N}from"./index.5987d026.js";import{D as U}from"./DynamicForm.33bee6e9.js";import{A as L}from"./ApiTokenInput.eae1840f.js";import{u as M}from"./useBitsightCompanies.2bb242f6.js";import{A as G}from"./ApiKeyInput.60d68974.js";import{D as Q}from"./DateRangeInput.26a95692.js";import{D as Y}from"./DateRangeDisplay.19a3fae0.js";import{u as z}from"./useAccountSubscriptionValidity.9f6355be.js";import{s as W}from"./index.69b58fd2.js";import{a as H}from"./index.2b6a4d93.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./arrow-top-right-on-square.b063d2af.js";import"./ApiKeyDescriptionDisplay.8196378e.js";import"./ApiKeyValidation.fd6346e3.js";import"./index.70e781b9.js";import"./index.186584a4.js";import"./index.7a54c9f6.js";import"./index.87e44ac4.js";import"./index.a102599e.js";import"./index.1a4c010f.js";import"./IsoDateTimeDisplay.c6671bd0.js";import"./index.75c5ee63.js";const d={};d.props={value:{key:"value",required:!1,type:null},id:{key:"id",required:!0,type:String}};d.setup=(e,n)=>{const t=e,s=n.emit,o=u({get(){var l;return(l=t.value)==null?void 0:l.value},set(l){s("input",l?{value:l}:void 0)}}),r=u(()=>t.id),c=M.list(r),a=u(()=>c.data.value?c.data.value.map(l=>({text:l.data.shortname,value:l.data.guid})).sort((l,i)=>l.text.localeCompare(i.text)):[]);return{proxy:o,companies:a}};d.components=Object.assign({SimpleSelect:$},d.components);var J=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("SimpleSelect",{attrs:{options:e.companies},model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}})},X=[];const I={};var Z=m(d,J,X,!1,V,null,null,null);function V(e){for(let n in I)this[n]=I[n]}const ee=function(){return Z.exports}(),y={};y.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:null}};y.setup=(e,n)=>{const t=e,s=n.emit,o=b(t,s),r=u({get(){var a;return(a=t.value)==null?void 0:a.apiToken},set(a){a&&(o.value.apiToken=a)}}),c=u({get(){var a;return((a=t.value)==null?void 0:a.mappedEntityId.oneofKind)==="value"?t.value.mappedEntityId.value:void 0},set(a){o.value.mappedEntityId=a?{oneofKind:"value",value:a}:{oneofKind:void 0}}});return{proxy:o,apiToken:r,mappedEntityId:c}};y.components=Object.assign({ApiTokenInput:L,UuidInput:ee},y.components);var te=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"flex flex-col space-y-6"},[t("BaseLabel",[t("span",[e._v("API Token")]),t("ApiTokenInput",{staticClass:"w-full",model:{value:e.apiToken,callback:function(s){e.apiToken=s},expression:"apiToken"}})],1),t("BaseLabel",[t("span",{staticClass:"block"},[e._v("Mapped Entity ID")]),t("UuidInput",{staticClass:"w-full lg:max-w-sm",attrs:{id:e.id},model:{value:e.mappedEntityId,callback:function(s){e.mappedEntityId=s},expression:"mappedEntityId"}})],1),t("BaseLabel",[t("span",{staticClass:"block"},[e._v("Domain")]),t("BaseInput",{staticClass:"w-full lg:max-w-sm",model:{value:e.proxy.domain,callback:function(s){e.$set(e.proxy,"domain",s)},expression:"proxy.domain"}})],1)],1)},ne=[];const S={};var se=m(y,te,ne,!1,ae,null,null,null);function ae(e){for(let n in S)this[n]=S[n]}const ie=function(){return se.exports}(),f={};f.props={value:{key:"value",required:!1,type:null}};f.setup=(e,n)=>{const t=e,s=n.emit,o=b(t,s),r=[{text:" ",value:B.ScanProfileType.UNSPECIFIED},{text:"Continuous 60-day",value:B.ScanProfileType.CONTINUOUS_60_DAY},{text:"Continuous Annual",value:B.ScanProfileType.CONTINUOUS_ANNUAL}];return{proxy:o,options:r}};f.components=Object.assign({SimpleSelect:$},f.components);var oe=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("SimpleSelect",{staticClass:"w-full",attrs:{options:e.options},model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}})},re=[];const K={};var ce=m(f,oe,re,!1,le,null,null,null);function le(e){for(let n in K)this[n]=K[n]}const ue=function(){return ce.exports}(),_={};_.props={value:{key:"value",required:!1,type:null}};_.setup=(e,n)=>{const t=e,s=n.emit,o=b(t,s),r=u({get(){var a;return(a=t.value)==null?void 0:a.apiKey},set(a){a&&(o.value.apiKey=a)}}),c=u({get(){var a;return(a=t.value)==null?void 0:a.licenseType},set(a){a&&(o.value.licenseType=a)}});return{apiKey:r,licenseType:c}};_.components=Object.assign({ApiKeyInput:G,ScanProfileTypeInput:ue},_.components);var pe=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"flex flex-col space-y-6"},[t("BaseLabel",[t("span",[e._v("API Key")]),t("ApiKeyInput",{staticClass:"w-full",model:{value:e.apiKey,callback:function(s){e.apiKey=s},expression:"apiKey"}})],1),t("BaseLabel",[t("span",[e._v("License Type")]),t("ScanProfileTypeInput",{staticClass:"w-full lg:max-w-xs",model:{value:e.licenseType,callback:function(s){e.licenseType=s},expression:"licenseType"}})],1)],1)},me=[];const T={};var ve=m(_,pe,me,!1,de,null,null,null);function de(e){for(let n in T)this[n]=T[n]}const ye=function(){return ve.exports}(),k={};k.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:null}};k.setup=(e,n)=>{const t=e,s=n.emit,o=b(t,s),r=u({get(){var i;return(i=t.value)==null?void 0:i.value.oneofKind},set(i){if(i==="cyberRiskRatingBk")o.value={value:{oneofKind:"cyberRiskRatingBk",cyberRiskRatingBk:C.CyberRiskRatingBlackKiteConfig.create()}};else if(i==="cyberRiskRatingBs")o.value={value:{oneofKind:"cyberRiskRatingBs",cyberRiskRatingBs:C.CyberRiskRatingBitsightConfig.create()}};else throw new Error(`Unhandled case: ${i}`)}}),c=u({get(){var p;const i=(p=t.value)==null?void 0:p.value;if((i==null?void 0:i.oneofKind)==="cyberRiskRatingBk")return i.cyberRiskRatingBk},set(i){i?o.value={value:{oneofKind:"cyberRiskRatingBk",cyberRiskRatingBk:i}}:o.value={value:{oneofKind:void 0}}}}),a=u({get(){var p;const i=(p=t.value)==null?void 0:p.value;if((i==null?void 0:i.oneofKind)==="cyberRiskRatingBs")return i.cyberRiskRatingBs},set(i){i?o.value={value:{oneofKind:"cyberRiskRatingBs",cyberRiskRatingBs:i}}:o.value={value:{oneofKind:void 0}}}});return{type:r,blackKite:c,bitsight:a,typeOptions:[{text:"Cyber Risk (Black Kite)",value:"cyberRiskRatingBk"},{text:"Cyber Risk (BitSight)",value:"cyberRiskRatingBs"}]}};k.components=Object.assign({SimpleSelect:$,CyberRiskRatingBlackKiteConfigInput:ye,CyberRiskRatingBitsightConfigInput:ie},k.components);var fe=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"space-y-6"},[t("BaseLabel",[t("span",[e._v("Type")]),t("SimpleSelect",{staticClass:"w-full lg:max-w-sm",attrs:{options:e.typeOptions},model:{value:e.type,callback:function(s){e.type=s},expression:"type"}})],1),e.type==="cyberRiskRatingBk"?[t("CyberRiskRatingBlackKiteConfigInput",{model:{value:e.blackKite,callback:function(s){e.blackKite=s},expression:"blackKite"}})]:e.type==="cyberRiskRatingBs"?[t("CyberRiskRatingBitsightConfigInput",{attrs:{id:e.id},model:{value:e.bitsight,callback:function(s){e.bitsight=s},expression:"bitsight"}})]:e._e()],2)},_e=[];const q={};var ke=m(k,fe,_e,!1,ge,null,null,null);function ge(e){for(let n in q)this[n]=q[n]}const be=function(){return ke.exports}(),g={};g.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!0,type:null}};g.setup=(e,n)=>{const t=e,s=n.emit,o=b(t,s),r=u(()=>t.id),c=[{name:"name",label:"Name",component:{is:A,attrs:{required:!0,class:"w-full lg:max-w-sm"}}},{name:"validity",label:"Validity",component:{is:Q,attrs:{required:!0}}},{name:"config",label:"Config",component:{is:be,attrs:{required:!0,id:r.value}}}];return{proxy:o,schema:c}};g.components=Object.assign({DynamicForm:U},g.components);var Re=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("DynamicForm",{attrs:{schema:e.schema},model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}})},xe=[];const D={};var Be=m(g,Re,xe,!1,Ce,null,null,null);function Ce(e){for(let n in D)this[n]=D[n]}const $e=function(){return Be.exports}(),x={};x.setup=(e,n)=>{const t=h("id"),s=h("subscriptionId"),o=new Date,r=H(o,1),c=z.get(t,s),a=W(u(()=>{var v,R;return{name:"",config:{value:{oneofKind:"cyberRiskRatingBk",cyberRiskRatingBk:C.CyberRiskRatingBlackKiteConfig.create()}},validity:{start:{value:o.toISOString()},end:{value:((R=(v=c.data.value)==null?void 0:v.end)==null?void 0:R.value)||r.toISOString()}}}})),l=F.create(t,s),i=w(),p=N();async function P(){if(a.value){const{response:v}=await l.mutateAsync(a.value);if(i.success("Created product"),v&&v.productId){const R=v.productId.value;p.push({path:`../${R}/settings`,append:!0})}}}return{id:t,validityGet:c,createRequest:a,submit:P}};x.components=Object.assign({BackButton:j,DateRangeDisplay:Y,SubscriptionProductPartialCreateRequestInput:$e,FormButton:O},x.components);var he=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("section",{staticClass:"space-y-6"},[t("BackButton",{attrs:{link:".."}}),t("BaseSimpleCard",{staticClass:"divide-y"},[t("div",{staticClass:"flex flex-col p-4"},[t("BaseVueQuery",{attrs:{query:e.validityGet},scopedSlots:e._u([{key:"success",fn:function(s){var o=s.data;return[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"overline"}},[t("DateRangeDisplay",{attrs:{value:o}})],1)]}}])}),t("BaseTypography",{attrs:{variant:"subtitle3"}},[e._v(" Create Subscription Product ")])],1),t("form",{staticClass:"divide-y",on:{submit:function(s){return s.preventDefault(),e.submit.apply(null,arguments)}}},[t("SubscriptionProductPartialCreateRequestInput",{attrs:{id:e.id},model:{value:e.createRequest,callback:function(s){e.createRequest=s},expression:"createRequest"}}),t("FormButton",{attrs:{action:"create"}})],1)])],1)},Ie=[];const E={};var Se=m(x,he,Ie,!1,Ke,null,null,null);function Ke(e){for(let n in E)this[n]=E[n]}const et=function(){return Se.exports}();export{et as default};
