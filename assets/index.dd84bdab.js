import{bt as F,cC as I,n as u,r as O,a_ as E,c as i,bl as H,b0 as L,bK as N,aY as V,cy as W,bs as Y,bo as G,c8 as C}from"./index.7b071a07.js";import"./chartjs-adapter-date-fns.esm.c0cd075a.js";import{C as M,B as z,d as K,b as U,P as J,S as Q,p as X}from"./chart.c54a61e9.js";import{T as Z}from"./ToolTip.a077e2c4.js";import{G as tt}from"./GradeLetterDisplay.562b9a2a.js";import{t as et}from"./index.ebbce841.js";import{u as S}from"./usePeratonRiskAnalytics.e9ab5cdd.js";import"./index.35a91218.js";import"./index.db425731.js";import"./index.a29f592d.js";import"./index.7a54c9f6.js";import"./index.87e44ac4.js";import"./index.9227a697.js";import"./index.2d9575b3.js";import"./index.0d8c12e2.js";import"./index.8319a6b9.js";import"./index.6282862e.js";const v={};v.props={link:{key:"link",required:!0,type:String},company:{key:"company",required:!0,type:null}};v.setup=(t,a)=>({});v.components=Object.assign({BackButton:F,BarChartSvg:I},v.components);var at=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"flex flex-col space-y-6 lg:flex-row lg:items-center lg:space-x-4 lg:space-y-0"},[e("BackButton",{attrs:{link:t.link}}),e("div",{staticClass:"flex items-center space-x-2"},[e("div",{staticClass:"shrink-0 rounded-full p-2 bg-gray-700"},[e("BarChartSvg",{staticClass:"h-auto w-6 text-white"})],1),e("div",{staticClass:"flex flex-col -space-y-1"},[e("BaseTypography",{staticClass:"uppercase text-gray-500",attrs:{variant:"overline"}},[t._v(" Subscription Supplier ")]),e("BaseTypography",{attrs:{variant:"h5",component:"h2"}},[t._v(" "+t._s(t.company.name)+" ")])],1)])],1)},st=[];const w={};var rt=u(v,at,st,!1,nt,null,null,null);function nt(t){for(let a in w)this[a]=w[a]}const it=function(){return rt.exports}();M.register(z,K,U,J,Q,X);const $=V({inheritAttrs:!1});$.props={bar:{key:"bar",required:!0,type:Array},plotPoint:{key:"plotPoint",required:!0,type:Object},width:{key:"width",required:!1,type:Number},height:{key:"height",required:!1,type:Number},options:{key:"options",required:!0,type:Object}};$.setup=(t,a)=>{const e=t,s=a.emit,n=O(),p=E(),m=i(()=>({width:e.width?`${e.width}px`:"100%",height:e.height?`${e.height}px`:"100%"})),o=i(()=>({datasets:[{type:"bar",label:"Total Companies",data:e.bar,order:2},{type:"scatter",label:"My Company Risk",data:[e.plotPoint],order:1}]})),k=i(()=>({responsive:!0,datasets:{bar:{borderWidth:0,borderRadius:8,barPercentage:1,categoryPercentage:1,backgroundColor:["rgba(191, 219, 254, 0.9)","rgba(147, 197, 253, 0.9)","rgba(96, 165, 250, 0.9)","rgba(59, 130, 246, 0.9)","rgba(37, 99, 235, 0.9)","rgba(29, 78, 216, 0.9)","rgba(30, 64, 175, 0.9)","rgba(30, 58, 138, 0.9)","rgba(30, 58, 138, 0.9)","rgba(30, 58, 138, 0.9)"],hoverBackgroundColor:["rgba(191, 219, 254, 0.6)","rgba(147, 197, 253, 0.6)","rgba(96, 165, 250, 0.6)","rgba(59, 130, 246, 0.6)","rgba(37, 99, 235, 0.6)","rgba(29, 78, 216, 0.6)","rgba(30, 64, 175, 0.6)","rgba(30, 58, 138, 0.6)","rgba(30, 58, 138, 0.6)","rgba(30, 58, 138, 0.6)"]},scatter:{pointStyle:"crossRot",pointRadius:7,borderWidth:3,borderCapStyle:"round",borderColor:"rgba(134, 210, 221,1)",backgroundColor:"rgba(134, 210, 221,1)",pointHitRadius:7,pointHoverRadius:8,hoverBorderWidth:3}},scales:{xAxis:{type:"linear",min:0,max:1,offset:!1,grid:{offset:!1},ticks:{stepSize:.1},title:{display:!0,text:"Risk"}},yAxis:{min:0,max:Math.max(...e.bar.map(({y:r})=>r))+1,title:{display:!0,text:"Companies"},ticks:{precision:0}}},plugins:{legend:{display:!1},tooltip:{xAlign:"center",yAlign:"center",backgroundColor:"white",borderColor:"#d1d5db",borderWidth:1,titleColor:"#111827",bodyColor:"#6b7280",cornerRadius:10,padding:10,callbacks:{title:r=>{var y,d;if(!r.length)return"";const c=((y=r[0])==null?void 0:y.parsed.x)||0;if(((d=r[0])==null?void 0:d.dataset.type)==="scatter")return"My Company";const l=c?c-.05:0,h=c?c+.0499:0;return`Risk Range: ${l.toFixed(4)} - ${h.toFixed(4)}`},label:r=>{const c=r.dataIndex,l=r.dataset.data[c];return r.dataset.type==="scatter"?`Risk: ${l==null?void 0:l.x.toFixed(4)}`:`${r.dataset.label}: ${l==null?void 0:l.y}`||""}}}},animation:{onComplete:()=>{n.value&&s("animation-complete",n.value)}},...e.options}));return H(()=>{L(()=>{const r=n.value;!r||(p.value=new M(r,{type:"bar",data:o.value,options:k.value}))})}),N(()=>{var r;(r=p.value)==null||r.destroy()}),{canvas:n,parentStyle:m}};var ot=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"relative",style:t.parentStyle},[e("canvas",t._b({ref:"canvas",attrs:{role:"img","aria-label":"Ratings Over Time chart"}},"canvas",t.$attrs,!1))])},lt=[];const B={};var ct=u($,ot,lt,!1,pt,null,null,null);function pt(t){for(let a in B)this[a]=B[a]}const ut=function(){return ct.exports}(),_={};_.props={value:{key:"value",required:!0,type:Array}};_.setup=(t,a)=>({toCurrency:et});_.components=Object.assign({ToolTip:Z,GradeLetterDisplay:tt},_.components);var dt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("dl",{staticClass:"grid gap-2"},t._l(t.value,function(s,n){return e("div",{key:s.id.value,staticClass:"grid gap-2 items-start lg:grid-cols-3 lg:items-end"},[e("dt",{staticClass:"flex flex-row items-center space-x-2 lg:col-span-1"},[s.description?e("ToolTip",[t._v(t._s(s.description))]):t._e(),e("BaseTypography",{staticClass:"text-gray-600",attrs:{variant:"p1"}},[t._v(" "+t._s(s.name)+" ")])],1),e("dd",{staticClass:"flex flex-row justify-between items-center ml-2 lg:flex-col lg:items-center"},[e("BaseTypography",{staticClass:"text-gray-500",class:n!==0?"lg:hidden":"",attrs:{variant:"p2"}},[t._v(" Company Value: ")]),e("div",[s.name!=="Total Debt"?[e("GradeLetterDisplay",{attrs:{grade:s.score}})]:[e("BaseTypography",{staticClass:"text-gray-700",attrs:{variant:"p1"}},[t._v(" "+t._s(t.toCurrency(s.score))+" ")])]],2)],1),e("dd",{staticClass:"flex flex-row justify-between items-center ml-2 lg:flex-col lg:items-center"},[e("BaseTypography",{staticClass:"text-gray-500",class:n!==0?"lg:hidden":"",attrs:{variant:"p2"}},[t._v(" Portfolio Mean: ")]),e("div",[s.name!=="Total Debt"?[e("GradeLetterDisplay",{attrs:{grade:s.score}})]:[e("BaseTypography",{staticClass:"text-gray-700",attrs:{variant:"p1"}},[t._v(" "+t._s(t.toCurrency(s.average))+" ")])]],2)],1)])}),0)},mt=[];const A={};var yt=u(_,dt,mt,!1,vt,null,null,null);function vt(t){for(let a in A)this[a]=A[a]}const _t=function(){return yt.exports}(),R={};R.props={score:{key:"score",required:!0,type:Number},maxScore:{key:"maxScore",required:!0,type:Number}};R.setup=(t,a)=>{const e=t,s=i(()=>200-e.score/e.maxScore*200),n=i(()=>`gradient-${Math.random()}`),p=i(()=>e.score>=91?"#10b981":e.score>=81?"#3b83f6":e.score>=71?"#fde68a":e.score>=61?"#ed8936":"#ef4444");return{fill:s,gradientId:n,displayColor:p}};var ft=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("svg",{attrs:{viewBox:"0 0 90 80",preserveAspectRatio:"none"}},[e("defs",[e("linearGradient",{attrs:{id:`${t.gradientId}`,x1:"15%",y1:"100%",x2:"80%",y2:"100%"}},[e("stop",{attrs:{offset:"0%","stop-color":`${t.displayColor}`}}),e("stop",{attrs:{offset:"100%","stop-color":`${t.displayColor}`}})],1)],1),e("path",{staticClass:"stroke-current text-gray-200 shadow-inner",attrs:{d:"M20,75 a40,40,0,1,1,50,0",fill:"none","stroke-linecap":"round","stroke-width":"3"}}),e("path",{staticClass:"filling transition duration-300",style:`--fill: ${t.fill}`,attrs:{d:"M20,75 a40,40,0,1,1,50,0",fill:"none",stroke:`url(#${t.gradientId})`,"stroke-dasharray":"200","stroke-dashoffset":"200","stroke-linecap":"round","stroke-width":"3"}})])},gt=[];const P={};var xt=u(R,ft,gt,!1,ht,"0b704612",null,null);function ht(t){for(let a in P)this[a]=P[a]}const bt=function(){return xt.exports}(),f={};f.props={score:{key:"score",required:!0,type:Number},date:{key:"date",required:!0,type:String}};f.setup=(t,a)=>({});f.components=Object.assign({DotsSquare:W,PeratonArcProgressBar:bt,DateIsoStringDisplay:Y},f.components);var kt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"relative mx-auto flex max-w-xs flex-col items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-blue-100 via-white to-white px-4 py-8 shadow-md sm:max-w-sm sm:rounded-3xl xl:max-w-none xl:p-12"},[e("div",{staticClass:"absolute top-full left-full -translate-y-1/3 -translate-x-1/3 rotate-45 transform xl:-translate-y-1/2"},[e("DotsSquare",{attrs:{color:"blue"}})],1),e("div",{staticClass:"relative w-44 sm:w-56"},[e("PeratonArcProgressBar",{attrs:{score:t.score,"max-score":1}})],1),e("div",{staticClass:"absolute flex flex-col items-center space-y-2"},[e("BaseTypography",{attrs:{variant:"h2"}},[t._v(t._s(t.score.toFixed(4)))]),t.date?e("div",{staticClass:"flex flex-col text-center space-y-1"},[e("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"overline"}},[t._v(" Last updated: ")]),e("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"overline"}},[e("DateIsoStringDisplay",{attrs:{value:t.date,format:"date"}})],1)],1):t._e()],1)])},Ct=[];const T={};var $t=u(f,kt,Ct,!1,Rt,null,null,null);function Rt(t){for(let a in T)this[a]=T[a]}const St=function(){return $t.exports}();function wt(t){return t>=.91?"Your company falls into the 91-100 range meaning its relative security effectiveness is high, having a strong security performance and low risk.":t>=.81?"Your company falls into the 81-90 range meaning its relative security effectiveness is high, having a strong security performance and low risk.":t>=.71?"Your company falls into the 71-80 range meaning its relative security effectiveness is fair, having an average security performance and medium risk.":t>=.61?"Your company falls into the 61-70 range meaning its relative security effectiveness is fair, having an average security performance and medium risk.":"Your company falls into the 0 - 60 range meaning its relative security effectiveness is moderate to low, having a weak security performance and high risk."}const g={};g.props={score:{key:"score",required:!0,type:Number},date:{key:"date",required:!0,type:String}};g.setup=(t,a)=>{const e=t;return{ratingScoreDescription:i(()=>wt(e.score))}};g.components=Object.assign({WaveForm:G,PeratonScoreDisplay:St},g.components);var Bt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"relative flex flex-col items-center justify-center xl:grid xl:grid-cols-12"},[e("div",{staticClass:"absolute top-36 w-full opacity-25 sm:top-40 xl:hidden"},[e("WaveForm")],1),e("div",{staticClass:"relative -mb-36 xl:col-span-4 xl:col-start-1 xl:row-start-1 xl:mb-0"},[e("div",{staticClass:"px-6 md:px-8 lg:px-4 xl:pl-0"},[e("PeratonScoreDisplay",{attrs:{score:t.score,date:t.date}})],1)]),e("BaseSimpleCard",{staticClass:"pt-32 xl:col-span-10 xl:col-start-3 xl:row-start-1 xl:h-fit xl:p-0"},[e("div",{staticClass:"grid items-center gap-6 px-6 py-10 sm:p-8 xl:grid-cols-10 xl:gap-0 xl:p-6"},[e("div",{staticClass:"grid gap-5 text-center xl:text-left xl:col-span-8 xl:col-start-3"},[e("BaseTypography",{staticClass:"text-prime-navy",attrs:{component:"h3",variant:"h5"}},[t._v(" Risk Analytics ")]),e("BaseTypography",{staticClass:"text-gray-600",attrs:{component:"p",variant:"p1"}},[t._v(" Risk Analytics are a measure of your company\u2019s relative security effectiveness. "+t._s(t.ratingScoreDescription)+" ")])],1)])])],1)},At=[];const D={};var Pt=u(g,Bt,At,!1,Tt,null,null,null);function Tt(t){for(let a in D)this[a]=D[a]}const Dt=function(){return Pt.exports}(),x={};x.props={value:{key:"value",required:!0,type:null},riskAnalytics:{key:"riskAnalytics",required:!0,type:Array}};x.setup=(t,a)=>{const e=t,s=[{min:0,max:.0999},{min:.1,max:.1999},{min:.2,max:.2999},{min:.3,max:.3999},{min:.4,max:.4999},{min:.5,max:.5999},{min:.6,max:.6999},{min:.7,max:.7999},{min:.8,max:.8999},{min:.9,max:.9999},{min:1,max:1.0999}],n=i(()=>{const o=new Map,k=e.riskAnalytics.map(r=>r.populationRisk.overallRisk);for(const r of s){const{min:c,max:l}=r,h=c,y=[];for(const d of k)d>=c&&d<=l&&y.push(d);o.has(h)||o.set(h,y.length)}return o}),p=i(()=>[...s.map(({min:o})=>({x:o+.05,y:n.value.get(o)||0}))]),m=i(()=>({x:e.value.populationRisk.overallRisk,y:.5}));return{bar:p,plotPoint:m}};x.components=Object.assign({PeratonSummaryOverview:Dt,PeratonRiskScoreHistogram:ut,PeratonRiskVectorsDisplay:_t},x.components);var jt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.value?e("section",{staticClass:"space-y-10"},[e("PeratonSummaryOverview",{attrs:{score:t.value.populationRisk.overallRisk,date:t.value.meta.updatedAt?t.value.meta.updatedAt.value:""}}),e("div",{staticClass:"space-y-2"},[e("BaseTypography",{staticClass:"text-prime-navy",attrs:{component:"h3",variant:"h6"}},[t._v(" Risk Histogram ")]),e("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p2"}},[t._v(" Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")]),e("BaseSimpleCard",{staticClass:"p-4 sm:px-6 sm:py-5"},[e("PeratonRiskScoreHistogram",{attrs:{bar:t.bar,"plot-point":t.plotPoint,height:384,options:{maintainAspectRatio:!1,devicePixelRatio:1}}})],1)],1),e("div",{staticClass:"space-y-2"},[e("BaseTypography",{staticClass:"text-prime-navy",attrs:{component:"h3",variant:"h6"}},[t._v(" Risk Vector Analysis ")]),e("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p2"}},[t._v(" Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")]),e("BaseSimpleCard",{staticClass:"p-4 sm:px-6 sm:py-5"},[e("PeratonRiskVectorsDisplay",{attrs:{value:t.value.populationRisk.riskVectors}})],1)],1)],1):t._e()},qt=[];const j={};var Mt=u(x,jt,qt,!1,Ft,null,null,null);function Ft(t){for(let a in j)this[a]=j[a]}const It=function(){return Mt.exports}(),b={};b.setup=(t,a)=>{const e=C("id"),s=C("subscriptionId"),n=C("companyId"),p=S.list(e),m=S.read(e,n),o=i(()=>`/admin/companies/${e.value}/subscriptions/${s.value}/suppliers`);return{riskAnalytics:p,riskAnalysis:m,link:o}};b.components=Object.assign({CompanyIdHeader:it,PeratonRiskAnalyticsDisplay:It},b.components);var Ot=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.riskAnalysis?e("section",{staticClass:"space-y-6"},[e("CompanyIdHeader",{attrs:{company:t.riskAnalysis.company,link:t.link}}),e("PeratonRiskAnalyticsDisplay",{attrs:{value:t.riskAnalysis,"risk-analytics":t.riskAnalytics}})],1):t._e()},Et=[];const q={};var Ht=u(b,Ot,Et,!1,Lt,null,null,null);function Lt(t){for(let a in q)this[a]=q[a]}const ne=function(){return Ht.exports}();export{ne as default};
