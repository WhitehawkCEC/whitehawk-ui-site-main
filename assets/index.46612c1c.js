import{aS as M,aC as S,af as j,aO as b,aP as x,br as q,aN as N,n as C,c as v,aE as D,aR as $,bV as Q,am as E,r as h}from"./index.aa055da4.js";import{B as I}from"./BasicConfirmModal.98e10c93.js";import{A as R,T as O}from"./AppTanStackTable.326e328a.js";import{c as L}from"./createOnChangeFn.a32f6620.js";import{u as z}from"./useProducts.8924146c.js";import{u as H}from"./createSimpleTable.a77c586a.js";import{u as F}from"./useManufacturers.55e367a5.js";import"./BasicModal.df103521.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.1d0b379d.js";import"./chevron-up.736f4142.js";const w={create(){const e=M();return S(a=>b.post(`${x}/featured-manufacturers`,a).then(t=>t.data),{onSuccess(){e.invalidateQueries(["manufacturers"],{exact:!0})}})},delete(){const e=M();return S(a=>b.delete(`${x}/featured-manufacturers/${a}`).then(t=>t.data),{onSuccess(){e.invalidateQueries(["manufacturers"],{exact:!0})}})},list(){return j(["featured-manufacturers"],()=>b.get(`${x}/featured-manufacturers`).then(e=>e.data))}},l={};l.props={value:{key:"value",required:!1,type:String},remove:{key:"remove",required:!0,type:Function}};l.setup=(e,a)=>({});l.components=Object.assign({DateIsoStringDisplay:q,XSvg:N},l.components);var U=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.value?t("div",{staticClass:"flex items-center space-x-1"},[t("DateIsoStringDisplay",{staticClass:"inline-flex items-center rounded bg-indigo-100 px-2 py-0.5 text-xs font-medium uppercase leading-4 tracking-widest text-indigo-800",attrs:{value:e.value,format:"date"}}),t("BaseIcon",{attrs:{color:"danger",size:"small",action:"secondary"},on:{click:e.remove}},[t("XSvg",{staticClass:"w-3"})],1)],1):e._e()},X=[];const k={};var G=C(l,U,X,!1,J,null,null,null);function J(e){for(let a in k)this[a]=k[a]}const K=function(){return G.exports}(),d={};d.props={manufacturers:{key:"manufacturers",required:!0,type:Array}};d.setup=(e,a)=>{const t=e,u=a.emit,o=v(()=>t.manufacturers.map(s=>{const{id:r,name:_,url:P,featured:V}=s;return{id:r,name:_,url:P,featured:V,productCount:c(r)}}));function c(s){const r=[];return i.value.map(_=>{_.manufacturer.id===s&&r.push(_)}),r.length}const f=z.list(),i=v(()=>f.data.value||[]),m=D(),g=w.create(),p=w.delete(),n=L(),A=[n.accessor("id",{header:()=>"ID",enableColumnFilter:!1}),n.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),n.accessor("url",{header:()=>"URL",enableColumnFilter:!1}),n.accessor(s=>s.featured,{id:"featured",header:()=>"Featured",cell:s=>$(K,{props:{value:s.getValue(),async remove(){await p.mutateAsync(s.row.original.id)&&m.success("Featured removed successfully.")}}}),enableColumnFilter:!1}),n.accessor(s=>s.productCount,{id:"productCount",header:()=>"Product Count",enableColumnFilter:!1}),n.display({id:"actions",header:"Actions",cell:({row:s})=>$(O,{props:{actions:[{id:"view",to:`/admin/manufacturers/${s.original.id}/products`},{id:"edit",to:`/admin/manufacturers/${s.original.id}`},{id:"delete",action(){u("delete",s.original)},isDisabled:v(()=>s.original.productCount>0)},{id:"setFeatured",async action(){await g.mutateAsync({id:s.original.id,name:s.original.name})&&m.success("Successfully featured manufacturer.")},isDisabled:v(()=>s.original.featured!==void 0)}]}})})];return{instance:H(o,A)}};d.components=Object.assign({AppTanStackTable:R},d.components);var W=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("AppTanStackTable",{attrs:{table:e.instance}})},Y=[];const T={};var Z=C(d,W,Y,!1,ee,null,null,null);function ee(e){for(let a in T)this[a]=T[a]}const te=function(){return Z.exports}(),y={};y.setup=(e,a)=>{const t=F.list(),u=D(),o=F.delete(),c=h(""),f=h(""),i=h(!1);function m(n){c.value=n.id,f.value=n.name,i.value=!0}async function g(){c?(await o.mutateAsync(c.value),p(),u.success("Successfully deleted manufacturer.")):u.error("Something went wrong.")}function p(){i.value=!1}return{manufacturers:t,manufacturerName:f,isModalVisible:i,toggleModal:m,deleteManufacturer:g,closeModal:p}};y.components=Object.assign({BaseTablePageLayout:Q,PlusSvg:E,ManufacturersTable:te,BasicConfirmModal:I},y.components);var ae=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Manufacturers")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{to:"/admin/manufacturers/new"}},[t("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),t("span",[e._v("Manufacturer")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("BaseVueQuery",{attrs:{query:e.manufacturers},scopedSlots:e._u([{key:"success",fn:function(u){var o=u.data;return[t("ManufacturersTable",{attrs:{manufacturers:o},on:{delete:e.toggleModal}})]}}])})]},proxy:!0}])}),t("BasicConfirmModal",{directives:[{name:"show",rawName:"v-show",value:e.isModalVisible,expression:"isModalVisible"}],attrs:{name:e.manufacturerName},on:{delete:e.deleteManufacturer,close:e.closeModal}})],1)},se=[];const B={};var ne=C(y,ae,se,!1,re,null,null,null);function re(e){for(let a in B)this[a]=B[a]}const ge=function(){return ne.exports}();export{ge as default};
