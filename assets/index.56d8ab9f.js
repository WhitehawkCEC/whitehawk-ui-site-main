import{d as p,aF as A,aS as o,br as u,n as y,an as T,c7 as V}from"./index.679e6820.js";import{A as q,T as R}from"./AppTanStackTable.afbda706.js";import{c as k}from"./createOnChangeFn.252bfbab.js";import{u as v}from"./useScheduledBatches.5575ae44.js";import{u as B}from"./createSimpleTable.03b4e3d2.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.74c8c979.js";import"./chevron-up.736f4142.js";const l={};l.props={id:{key:"id",required:!0,type:String},batches:{key:"batches",required:!0,type:Array}};l.setup=(t,s)=>{const a=t,c=p(()=>a.id),d=p(()=>{var e;return(e=a.batches)==null?void 0:e.map(f=>{const{id:C,type:D,company:x,frequency:$,range:h,batchResultId:F,meta:r}=f;return{id:C,type:D,company:x.name,batchResultId:F,frequency:$,quarter:f.quarter,startDate:h.start,endDate:h.end,createdDate:r==null?void 0:r.createdAt,updatedDate:r==null?void 0:r.updatedAt}})}),m=A(),g=v.delete(c),n=k(),S=[n.accessor("company",{header:()=>"Company",enableColumnFilter:!1}),n.accessor("type",{header:()=>"Report Type",enableColumnFilter:!1}),n.accessor("startDate",{header:()=>"Start Date",cell:e=>{if(e.getValue())return o(u,{props:{value:e.getValue(),format:"date"}})},enableColumnFilter:!1}),n.accessor("endDate",{header:()=>"End Date",cell:e=>{if(e.getValue())return o(u,{props:{value:e.getValue(),format:"date"}})},enableColumnFilter:!1}),n.accessor("frequency",{header:()=>"Frequency",enableColumnFilter:!1}),n.accessor("quarter",{header:()=>"Quarter",enableColumnFilter:!1}),n.accessor("createdDate",{header:()=>"Created At",cell:e=>{if(e.getValue())return o(u,{props:{value:e.getValue(),format:"date"}})},enableColumnFilter:!1}),n.accessor("updatedDate",{header:()=>"Last Updated",cell:e=>{if(e.getValue())return o(u,{props:{value:e.getValue(),format:"date"}})},enableColumnFilter:!1}),n.display({id:"actions",header:"Actions",cell:({row:e})=>o(R,{props:{actions:[{id:"view",to:`/admin/companies/${encodeURIComponent(a.id)}/scorecards/batch/scheduler/${e.original.batchResultId}/status`,isDisabled:p(()=>e.original.batchResultId===null)},{id:"edit",to:`/admin/companies/${encodeURIComponent(a.id)}/scorecards/batch/scheduler/${e.original.id}`},{id:"archive",async action(){e.original&&(await g.mutateAsync(e.original.id),m.success("Archived batch successfully")),m.error("Something went wrong")}}]}})})];return{instance:B(d,S)}};l.components=Object.assign({AppTanStackTable:q},l.components);var w=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("AppTanStackTable",{attrs:{table:t.instance}})},I=[];const _={};var j=y(l,w,I,!1,E,null,null,null);function E(t){for(let s in _)this[s]=_[s]}const P=function(){return j.exports}(),i={};i.setup=(t,s)=>{const a=V("id"),c=v.list(a);return{id:a,batches:c}};i.components=Object.assign({PlusSvg:T,BatchScheduleTable:P},i.components);var U=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("BaseTablePageLayout",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Scheduled Batches")]},proxy:!0},{key:"button",fn:function(){return[a("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{to:`/admin/companies/${t.id}/scorecards/batch/scheduler/new`}},[a("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),a("span",[t._v("New Schedule")])],1)]},proxy:!0},{key:"table",fn:function(){return[a("BaseVueQuery",{attrs:{query:t.batches},scopedSlots:t._u([{key:"success",fn:function(c){var d=c.data;return[a("BatchScheduleTable",{attrs:{id:t.id,batches:d}})]}}])})]},proxy:!0}])})},H=[];const b={};var L=y(i,U,H,!1,M,null,null,null);function M(t){for(let s in b)this[s]=b[s]}const Y=function(){return L.exports}();export{Y as default};
