import{F as $}from"./FormButton.bbe28fb9.js";import{ar as b,br as K,c as r,am as h,aC as I,n as m,ay as B,c1 as S,cR as y,d0 as A,d1 as E,aF as w}from"./index.afd2ddcd.js";import{A as T}from"./ApiKeyInput.6f6be579.js";import{s as D}from"./index.253716ca.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./arrow-top-right-on-square.b063d2af.js";import"./ApiKeyValidation.5934eb27.js";import"./ApiKeyDescriptionDisplay.8f832033.js";var j=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},e.$listeners),[t("path",{attrs:{"fill-rule":"evenodd",d:"m5.965 4.904 9.131 9.131a6.5 6.5 0 0 0-9.131-9.131zm8.07 10.192L4.904 5.965a6.5 6.5 0 0 0 9.131 9.131zM4.343 4.343a8 8 0 1 1 11.314 11.314A8 8 0 0 1 4.343 4.343z","clip-rule":"evenodd"}})])};const M={render:j},o={};o.props={accessToken:{key:"accessToken",required:!1,type:String}};o.setup=(e,a)=>{const t=e,n=r(()=>h.get(`${I}https://app.blackkitetech.com/api/v2/status`,{headers:{authorization:`Bearer ${t.accessToken}`}}));function c(i){return new Date(i).toISOString()}return{validityCheck:n,formatDate:c}};o.components=Object.assign({CheckSvg:b,DateIsoStringDisplay:K,NoSvg:M},o.components);var F=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.accessToken!==void 0?t("BasePromise",{attrs:{promise:e.validityCheck},scopedSlots:e._u([{key:"success",fn:function(n){var c=n.result.data.ExpirationDateOfClientCredential;return[t("span",{staticClass:"inline-flex items-center space-x-1"},[t("CheckSvg",{staticClass:"-ml-1 h-auto w-4 shrink-0 text-green-600"}),c?t("BaseTypography",{staticClass:"text-green-600",attrs:{variant:"p3"}},[e._v(" Expires At: "),t("DateIsoStringDisplay",{attrs:{value:e.formatDate(c),format:"date"}})],1):e._e()],1)]}},{key:"error",fn:function(){return[t("span",{staticClass:"inline-flex items-center space-x-1"},[t("NoSvg",{staticClass:"-ml-1 h-auto w-4 shrink-0 text-red-600"}),t("BaseTypography",{staticClass:"text-red-600",attrs:{variant:"p3"}},[e._v(" Invalid Credentials ")])],1)]},proxy:!0}],null,!1,1295110825)}):e._e()},O=[];const g={};var R=m(o,F,O,!1,L,null,null,null);function L(e){for(let a in g)this[a]=g[a]}const q=function(){return R.exports}(),l={};l.props={id:{key:"id",required:!0,type:String},secret:{key:"secret",required:!0,type:String}};l.setup=(e,a)=>{const t=e;return{accessToken:r(()=>h.post(`${I}https://app.blackkitetech.com/api/v2/oauth/token`,{grant_type:"client_credentials",client_id:t.id,client_secret:t.secret}))}};l.components=Object.assign({ApiKeyValidationV2:q},l.components);var z=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("BasePromise",{attrs:{promise:e.accessToken},scopedSlots:e._u([{key:"success",fn:function(n){var c=n.result.data.access_token;return[t("ApiKeyValidationV2",{attrs:{"access-token":c}})]}}])})},P=[];const k={};var N=m(l,z,P,!1,G,null,null,null);function G(e){for(let a in k)this[a]=k[a]}const U=function(){return N.exports}(),u={};u.props={value:{key:"value",required:!1,type:null},ecosystems:{key:"ecosystems",required:!0,type:Array}};u.setup=(e,a)=>{const t=e,n=a.emit,c=B(t,n),i=r({get(){var v;const s=(v=t.value)==null?void 0:v.apiKeyMaybe;if((s==null?void 0:s.oneofKind)==="apiKey")return s.apiKey},set(s){s?c.value.apiKeyMaybe={oneofKind:"apiKey",apiKey:s}:c.value.apiKeyMaybe={oneofKind:void 0}}}),d=r({get(){var s;return(s=t.value)==null?void 0:s.mappedEcosystemId},set(s){s&&(c.value.mappedEcosystemId=s)}}),_=r({get(){var s;return(s=t.value)==null?void 0:s.clientId},set(s){s&&(c.value.clientId=s)}}),f=r({get(){var s;return(s=t.value)==null?void 0:s.secret},set(s){s&&(c.value.secret=s)}});return{apiKey:i,mappedEcosystemId:d,clientId:_,secret:f}};u.components=Object.assign({ApiKeyInput:T,ApiAccessToken:U},u.components);var W=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"space-y-8"},[t("BaseLabel",{staticClass:"space-y-1"},[t("span",[e._v("API Key:")]),t("ApiKeyInput",{model:{value:e.apiKey,callback:function(n){e.apiKey=n},expression:"apiKey"}})],1),t("BaseLabel",{staticClass:"space-y-1"},[t("span",[e._v("Mapped Ecosystem:")]),t("BaseInput",{staticClass:"w-full",model:{value:e.mappedEcosystemId,callback:function(n){e.mappedEcosystemId=n},expression:"mappedEcosystemId"}})],1),t("BaseLabel",{staticClass:"space-y-1"},[t("div",{staticClass:"flex flex-col space-y-1 sm:flex-row sm:items-center sm:justify-between sm:space-y-0"},[t("span",[e._v("Client ID:")]),e.clientId&&e.secret?t("ApiAccessToken",{attrs:{id:e.clientId,secret:e.secret}}):e._e()],1),t("BaseInput",{staticClass:"w-full",model:{value:e.clientId,callback:function(n){e.clientId=n},expression:"clientId"}})],1),t("BaseLabel",{staticClass:"space-y-1"},[t("div",{staticClass:"flex flex-col space-y-1 sm:flex-row sm:items-center sm:justify-between sm:space-y-0"},[t("span",[e._v("Client Secret:")]),e.clientId&&e.secret?t("ApiAccessToken",{attrs:{id:e.clientId,secret:e.secret}}):e._e()],1),t("BaseInput",{staticClass:"w-full",model:{value:e.secret,callback:function(n){e.secret=n},expression:"secret"}})],1)],1)},H=[];const x={};var J=m(u,W,H,!1,Q,null,null,null);function Q(e){for(let a in x)this[a]=x[a]}const V=function(){return J.exports}(),p={};p.setup=(e,a)=>{const t=S("id"),n=y.get(t),c=D(r(()=>n.data.value||A.create())),i=E.list(t),d=r(()=>i.data.value||[]),_=w(),f=y.set(t);async function s(){await f.mutateAsync(c.value),_.success("Successfully updated config.")}return{config:c,ecosystems:d,submit:s}};p.components=Object.assign({BlackKiteConfigInput:V,FormButton:$},p.components);var X=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"block p-4",attrs:{variant:"subtitle3"}},[e._v(" Configure Black Kite ")]),t("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),e.submit.apply(null,arguments)}}},[t("div",{staticClass:"p-4"},[t("BlackKiteConfigInput",{attrs:{ecosystems:e.ecosystems},model:{value:e.config,callback:function(n){e.config=n},expression:"config"}})],1),t("FormButton",{attrs:{action:"save"}})],1)],1)},Y=[];const C={};var Z=m(p,X,Y,!1,ee,null,null,null);function ee(e){for(let a in C)this[a]=C[a]}const ue=function(){return Z.exports}();export{ue as default};
