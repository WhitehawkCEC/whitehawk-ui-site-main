import{S}from"./arrow-down-on-square.6f2806b6.js";import{D as B}from"./trash.687d612e.js";import{B as k}from"./BackButton.c144020d.js";import{D}from"./DynamicForm.53c2ea98.js";import{Z as b,n as i,V as w,i as R,bG as _,r as U,w as A,I as E,G as j}from"./index.b06362ff.js";import{u}from"./useCompanyAccess.8b742bfe.js";import"./chevron-left.0808b01b.js";const p={};p.props={value:{key:"value",required:!0,type:null}};p.setup=(e,s)=>{const t=e,a=s.emit;return{proxy:b(t,a),fields:[{label:"ID",name:"id"},{label:"Name",name:"name"}]}};var M=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"space-y-4"},e._l(e.fields,function(a){return t("BaseLabel",{key:a.label,staticClass:"grid gap-1 pt-4 sm:pt-0"},[t("span",{staticClass:"block text-xs font-medium leading-5 text-gray-700"},[e._v(" "+e._s(a.label)+" ")]),t("BaseInput",{staticClass:"w-full text-sm font-medium leading-5 text-gray-700",attrs:{"aria-readonly":"true",readonly:""},model:{value:e.proxy[a.name],callback:function(n){e.$set(e.proxy,a.name,n)},expression:"proxy[field.name]"}})],1)}),1)},F=[];const v={};var q=i(p,M,F,!1,P,null,null,null);function P(e){for(let s in v)this[s]=v[s]}const T=function(){return q.exports}(),m={};m.props={value:{key:"value",required:!0,type:null}};m.setup=(e,s)=>{const t=e,a=s.emit;return{proxy:b(t,a),fields:[{label:"ID",name:"id"},{label:"Email",name:"email"}]}};var N=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"space-y-4"},e._l(e.fields,function(a){return t("BaseLabel",{key:a.label,staticClass:"grid gap-1 pt-4 sm:pt-0"},[t("span",{staticClass:"block text-xs font-medium leading-5 text-gray-700"},[e._v(" "+e._s(a.label)+" ")]),t("BaseInput",{staticClass:"w-full text-sm font-medium leading-5 text-gray-700",attrs:{"aria-readonly":"true",readonly:""},model:{value:e.proxy[a.name],callback:function(n){e.$set(e.proxy,a.name,n)},expression:"proxy[field.name]"}})],1)}),1)},O=[];const f={};var G=i(m,N,O,!1,L,null,null,null);function L(e){for(let s in f)this[s]=f[s]}const W=function(){return G.exports}(),r={};r.props={value:{key:"value",required:!1,type:null}};r.setup=(e,s)=>{const t=e,a=s.emit,n=w(t,a),c=[{name:"user",label:"User",component:{is:W}},{name:"company",label:"Company",component:{is:T}},{name:"permission",label:"Permission",component:{is:R,attrs:{required:!0,options:[{text:"",value:void 0},...[{text:"Read",value:"READ"},{text:"Write",value:"WRITE"},{text:"Admin",value:"ADMIN"}]]}}}];return{proxy:n,schema:c}};r.components=Object.assign({DynamicForm:D},r.components);var z=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("DynamicForm",{attrs:{schema:e.schema},model:{value:e.proxy,callback:function(a){e.proxy=a},expression:"proxy"}})},Q=[];const y={};var Z=i(r,z,Q,!1,H,null,null,null);function H(e){for(let s in y)this[s]=y[s]}const J=function(){return Z.exports}(),l={};l.setup=(e,s)=>{const t=_("id"),a=_("userId"),n=u.read(t,a),o=U();A(()=>n.data.value,d=>{d&&(o.value=d)},{immediate:!0});const c=E(),C=j(),$=u.update(t,a);async function g(){if(o.value)await $.mutateAsync(o.value),C.success("Saved"),c.push(`/admin/companies/${encodeURIComponent(t.value)}/members`);else throw new Error("Invalid request.")}const h=u.delete();async function I(){await h.mutateAsync({id:t.value,userId:a.value}),c.push(`/admin/companies/${encodeURIComponent(t.value)}/members`)}return{access:o,save:g,deleteMe:I}};l.components=Object.assign({BackButton:k,UserCompanyAccessInput:J,UpdateSvg:S,TrashSvg:B},l.components);var K=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"space-y-6"},[t("BackButton"),t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{variant:"subtitle3",component:"h2"}},[e._v(" Update Permission ")]),t("form",{staticClass:"divide-y",on:{submit:function(a){return a.preventDefault(),e.save.apply(null,arguments)}}},[t("UserCompanyAccessInput",{model:{value:e.access,callback:function(a){e.access=a},expression:"access"}}),t("div",{staticClass:"flex flex-col space-y-2 p-4 md:flex-row md:space-x-2 md:space-y-0"},[t("BaseButton",{staticClass:"space-x-2"},[t("UpdateSvg",{staticClass:"w-4 xl:w-5"}),t("span",[e._v("Update")])],1),t("BaseButton",{staticClass:"space-x-2",attrs:{type:"button",action:"secondary","display-type":"danger"},on:{click:e.deleteMe}},[t("TrashSvg",{staticClass:"w-4 xl:w-5"}),t("span",[e._v("Delete")])],1)],1)],1)],1)],1)},V=[];const x={};var X=i(l,K,V,!1,Y,null,null,null);function Y(e){for(let s in x)this[s]=x[s]}const ce=function(){return X.exports}();export{ce as default};
