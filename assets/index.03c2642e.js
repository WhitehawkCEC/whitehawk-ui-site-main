import{S as B,F as k}from"./ScorecardBatchSuccessFailBadge.b70b9e01.js";import{d as i,aS as v,n as x,bs as $,c7 as _,b as y,aK as C,aP as F,aQ as N}from"./index.72697340.js";import{A as T,T as q}from"./AppTanStackTable.44f28bde.js";import{c as A}from"./createOnChangeFn.f7298a8d.js";import{u as w}from"./createSimpleTable.6fbe9120.js";import{u as R}from"./useBatchScorecards.2874a82f.js";import{d as E}from"./FormValidation.a5e2f641.js";import{s as S}from"./index.bf3a49ea.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.3f1b888e.js";import"./chevron-up.736f4142.js";const l={};l.props={id:{key:"id",required:!0,type:String},subId:{key:"subId",required:!0,type:String},batches:{key:"batches",required:!0,type:Array},bitsightCompanies:{key:"bitsightCompanies",required:!0,type:Array}};l.setup=(e,s)=>{const t=e,c=i(()=>t.id),u=i(()=>t.subId),p=i(()=>t.bitsightCompanies.map(a=>{var m;return{id:a.id,supplier:a.name,state:t.batches.some(o=>o.supplierId===a.id)?"Success":"Failed",scorecardId:(m=t.batches.find(o=>o.supplierId===a.id))==null?void 0:m.scorecardId}})),r=A(),d=[r.accessor("id",{header:()=>"Supplier ID",enableColumnFilter:!1}),r.accessor("supplier",{header:()=>"Supplier Name",enableColumnFilter:!1}),r.accessor("state",{header:()=>"Scorecard State",cell:a=>v(B,{props:{value:a.getValue()}}),enableColumnFilter:!1}),r.display({id:"actions",header:"Actions",cell:({row:a})=>v(q,{props:{actions:[{id:"edit",to:`/admin/companies/${c.value}/subscriptions/${u.value}/integrations/1/scorecards/in-depth/${a.original.scorecardId}`}]}})})];return{instance:w(p,d)}};l.components=Object.assign({AppTanStackTable:T},l.components);var j=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},D=[];const g={};var P=x(l,j,D,!1,L,null,null,null);function L(e){for(let s in g)this[s]=g[s]}const V=function(){return P.exports}(),f={};f.setup=(e,s)=>{const t=_("id"),c=_("subscriptionId"),u=_("batchId"),p=y(""),r=y(!1),d=R.read(t,u),b=S(i(()=>{var n;return((n=d.data.value)==null?void 0:n.scorecardIds)||[]})),a=S(i(()=>{var n;return((n=d.data.value)==null?void 0:n.batchRequest.supplierInfos)||[]})),m=C();async function o(){const n=b.value.map(h=>({scorecardId:h.scorecardId,supplierName:h.supplierName,batchId:u.value}));r.value=!0;try{await F.post(`${N}/companies/${t.value}/batch/scorecards`,{fileName:`${p.value}`,supplierScorecardInfos:n})}finally{r.value=!1}m.push(`/admin/companies/${t.value}/subscriptions/${c.value}/integrations/1/scorecards/zip-files`)}return{checkZipFileExtension:E,id:t,subscriptionId:c,fileName:p,batches:b,companies:a,convert:o}};f.components=Object.assign({BackButton:$,FolderDownloadSvg:k,BatchScorecardStatusTable:V},f.components);var Z=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.batches&&e.companies?t("BaseTablePageLayout",{scopedSlots:e._u([{key:"backButton",fn:function(){return[t("BackButton")]},proxy:!0},{key:"overline",fn:function(){return[e._v("Bitsight")]},proxy:!0},{key:"title",fn:function(){return[e._v("Batch Scorecard")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-2",attrs:{disabled:!e.fileName},on:{click:e.convert}},[t("FolderDownloadSvg",{staticClass:"-ml-1 w-5"}),t("span",[e._v("ZIP Batch")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("div",{staticClass:"space-y-6"},[t("BatchScorecardStatusTable",{attrs:{id:e.id,"sub-id":e.subscriptionId,batches:e.batches,"bitsight-companies":e.companies}}),t("BaseSimpleCard",[t("BaseLabel",{staticClass:"flex flex-col p-4 lg:grid lg:grid-cols-3 lg:items-center"},[t("span",{staticClass:"after:content-['*']` after:text-red-700"},[e._v(" File Name: ")]),t("div",{staticClass:"flex flex-col lg:col-span-2"},[t("BaseInputWithValidation",{attrs:{type:"text",required:"","aria-required":"true",validator:e.checkZipFileExtension},model:{value:e.fileName,callback:function(c){e.fileName=c},expression:"fileName"}})],1)])],1)],1)]},proxy:!0}],null,!1,895858146)}):e._e()},z=[];const I={};var H=x(f,Z,z,!1,M,null,null,null);function M(e){for(let s in I)this[s]=I[s]}const se=function(){return H.exports}();export{se as default};
