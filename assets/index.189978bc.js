import{ax as L,n as w,ad as q,aI as B,aJ as $,ae as S,al as P,b as u,d as v,aK as E,az as x,aH as I,aF as j,ag as F,aL as N,aM as U,ak as f}from"./index.adc8478a.js";import{c as W,a as z}from"./FormValidation.a5e2f641.js";const p={};p.props={value:{key:"value",required:!0,type:null}};p.setup=(e,r)=>{const s=e,a=r.emit,l=L(s,a);return{checkEmail:W,checkPassword:z,proxy:l}};var M=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"flex flex-col space-y-4"},[s("BaseLabel",{staticClass:"flex flex-col space-y-1"},[s("span",{staticClass:"block text-sm font-medium leading-5"},[e._v(" Code "),s("span",{staticClass:"text-red-500"},[e._v("*")])]),s("BaseInput",{staticClass:"w-full",attrs:{type:"text",name:"code","aria-required":"true",required:""},model:{value:e.proxy.code,callback:function(a){e.$set(e.proxy,"code",a)},expression:"proxy.code"}})],1),s("BaseLabel",{staticClass:"flex flex-col space-y-1"},[s("span",{staticClass:"block text-sm font-medium leading-5"},[e._v(" Email "),s("span",{staticClass:"text-red-500"},[e._v("*")])]),s("BaseInputWithValidation",{staticClass:"w-full",attrs:{type:"email",name:"email","aria-required":"true",required:"",validator:e.checkEmail},model:{value:e.proxy.email,callback:function(a){e.$set(e.proxy,"email",a)},expression:"proxy.email"}})],1),s("BaseLabel",{staticClass:"flex flex-col space-y-1"},[s("span",{staticClass:"block text-sm font-medium leading-5"},[e._v(" New Password "),s("span",{staticClass:"text-red-500"},[e._v("*")])]),s("BaseInputWithValidation",{staticClass:"w-full",attrs:{type:"password",name:"password","aria-required":"true",required:"",validator:e.checkPassword},model:{value:e.proxy.password,callback:function(a){e.$set(e.proxy,"password",a)},expression:"proxy.password"}})],1),s("BaseLabel",{staticClass:"text-sm"},[s("span",{staticClass:"block text-sm font-medium leading-5"},[e._v(" Confirm New Password "),s("span",{staticClass:"text-red-500"},[e._v("*")])]),s("BaseInput",{staticClass:"w-full",attrs:{type:"password",name:"passwordRepeat","aria-required":"true",required:""},model:{value:e.proxy.passwordRepeat,callback:function(a){e.$set(e.proxy,"passwordRepeat",a)},expression:"proxy.passwordRepeat"}})],1)],1)},V=[];const g={};var G=w(p,M,V,!1,O,null,null,null);function O(e){for(let r in g)this[r]=g[r]}const A=function(){return G.exports}(),i={};i.setup=(e,r)=>{const s=`${F}/main-page-pics/line-waves-md.svg`,a=P(),l=u(),t=v({get(){return l.value||{email:String(a.value.query.email)||"",password:"",passwordRepeat:"",code:""}},set(o){l.value=o}}),d=u(!1),n=u(),h=v(()=>t.value.code&&t.value.email&&t.value.password&&t.value.passwordRepeat&&t.value.password===t.value.passwordRepeat),m=E();x(a,o=>{!o||(t.value={...t.value,email:String(o.query.email)})},{immediate:!0}),x(t,o=>{const c=a.value.path,R=o?{email:o.email}:void 0;m.push({path:c,query:R})});const C=I(),b=j();async function k(){n.value=null,d.value=!0;try{const o=t.value.email.toLocaleLowerCase("us");await N.forgotPasswordSubmit(o,t.value.code,t.value.password),b.success("Your password was successfully changed");const c=await U(o,t.value.password);C.set(c),m.push("/")}catch(o){n.value=o}finally{d.value=!1}}return{backgroundUrl:s,user:t,error:n,isValidForm:h,submit:k}};i.components=Object.assign({WhitehawkLogo:q,GenericError:B,PasswordResetCard:A,ChevronLeftSvg:$,ChevronRightSvg:S},i.components);var D=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("main",{staticClass:"flex min-h-screen flex-col justify-center bg-prime-navy bg-[length:517px] bg-bottom bg-repeat-x py-12 sm:px-6 lg:px-8",style:{backgroundImage:`url(${e.backgroundUrl})`}},[s("div",{staticClass:"container mx-auto flex flex-col space-y-4"},[s("BaseLink",{attrs:{"aria-label":"Link to main page",to:{path:"/"}}},[s("WhitehawkLogo",{staticClass:"mx-auto h-auto w-48 fill-current",attrs:{color:"white"}})],1),s("h1",{staticClass:"text-center font-display text-3xl font-medium leading-9 tracking-tight text-white antialiased sm:text-5xl sm:leading-10"},[e._v(" Client Portal ")]),s("BaseP1",{staticClass:"text-center text-white"},[e._v("Reset your password")])],1),s("div",{staticClass:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},[s("div",{staticClass:"space-y-8 rounded-lg bg-white px-10 py-8 shadow"},[e.error?s("GenericError",{attrs:{error:e.error}}):e._e(),s("form",{staticClass:"flex flex-col space-y-8",on:{submit:function(a){return a.preventDefault(),e.submit.apply(null,arguments)}}},[s("PasswordResetCard",{model:{value:e.user,callback:function(a){e.user=a},expression:"user"}}),s("BaseButton",{attrs:{shape:"rectangle",size:"large","display-type":"info",disabled:!e.isValidForm}},[e._v(" Change password ")])],1),s("div",{staticClass:"flex justify-between"},[s("BaseLink",{staticClass:"group inline-flex items-center",attrs:{"display-type":"primary-prime",to:{path:"/login",query:{email:e.user.email}}}},[s("ChevronLeftSvg",{staticClass:"h-5 w-5 text-prime-indigo group-hover:text-indigo-400 group-focus:text-indigo-400"}),s("span",[e._v("Login")])],1),s("BaseLink",{staticClass:"group inline-flex items-center",attrs:{"display-type":"primary-prime",to:{path:"/password-reset",query:{email:e.user.email}}}},[s("span",[e._v("Request New Code")]),s("ChevronRightSvg",{staticClass:"h-5 w-5 text-prime-indigo group-hover:text-indigo-400 group-focus:text-indigo-400"})],1)],1)],1)])])},H=[];const y={};var _=w(i,D,H,!1,J,null,null,null);function J(e){for(let r in y)this[r]=y[r]}typeof f=="function"&&f(_);const Q=function(){return _.exports}();export{Q as default};
