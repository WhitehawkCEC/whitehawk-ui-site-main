import{bT as A,aR as g,n as x,am as S,bS as y,c as b,r as d,bU as $,aE as I}from"./index.51b0c596.js";import{B as M}from"./BasicConfirmModal.2650b474.js";import{A as w,T as B}from"./AppTanStackTable.d32037bb.js";import{I as k}from"./IsoDateTimeDisplay.af3cb7ee.js";import{c as D}from"./createOnChangeFn.d944a6bd.js";import{u as E}from"./createSimpleTable.8d368f3e.js";import"./BasicModal.1dcab3fa.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.8857036a.js";import"./chevron-up.736f4142.js";const l={};l.props={categories:{key:"categories",required:!0,type:Array}};l.setup=(e,a)=>{const t=e,{categories:p}=A(t),n=a.emit,c=D(),i=[c.accessor(s=>{var o;return(o=s.id)==null?void 0:o.value},{id:"id",header:()=>"ID",enableColumnFilter:!1}),c.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),c.accessor(s=>{var o;return(o=s.meta)==null?void 0:o.updatedAt},{id:"updatedAt",header:()=>"Last Updated",cell:s=>g(k,{props:{value:s.getValue(),format:"date"}}),enableColumnFilter:!1}),c.display({id:"actions",header:"Actions",cell:({row:s})=>{var o;return g(B,{props:{actions:[{id:"edit",to:`/admin/products/categories/${(o=s.original.id)==null?void 0:o.value}`},{id:"delete",action(){n("delete",s.original)}}]}})}})];return{instance:E(p,i)}};l.components=Object.assign({AppTanStackTable:w},l.components);var F=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("AppTanStackTable",{attrs:{table:e.instance}})},j=[];const C={};var R=x(l,F,j,!1,V,null,null,null);function V(e){for(let a in C)this[a]=C[a]}const L=function(){return R.exports}(),m={};m.setup=(e,a)=>{const t=y.list(),p=b(()=>t.data.value?t.data.value.sort((r,u)=>r.name.localeCompare(u.name)):[]),n=d(),c=d("Doing so will affect the following products and bundle sets:"),i=d();function _(r){var u;n.value=r,i.value=(u=r.id)==null?void 0:u.value,f.value=!0}const s=b(()=>{var r;return(r=$.get(i.value).data)==null?void 0:r.value}),o=I(),T=y.delete();async function P(){if(n.value)await T.mutateAsync({category:n.value}),v(),o.success(`Category ${n.value.name} successfully deleted`);else throw new Error("Invalid request.")}const f=d(!1);function v(){f.value=!1}return{categories:p,selected:n,message:c,setPayload:_,affectedItemsGet:s,deleteCategory:P,isModalVisible:f,closeModal:v}};m.components=Object.assign({PlusSvg:S,ProductCategoriesTable:L,BasicConfirmModal:M},m.components);var q=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Product Categories")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"/admin/products/categories/new"}},[t("PlusSvg",{staticClass:"mr-1 w-5 xl:w-5"}),e._v(" Category ")],1)]},proxy:!0},{key:"table",fn:function(){return[t("ProductCategoriesTable",{attrs:{categories:e.categories},on:{delete:e.setPayload}})]},proxy:!0}])}),e.isModalVisible&&e.selected?t("BasicConfirmModal",{attrs:{name:e.selected.name,message:e.message,"items-affected":e.affectedItemsGet,type:"Products"},on:{delete:e.deleteCategory,close:e.closeModal}}):e._e()],1)},G=[];const h={};var H=x(m,q,G,!1,N,null,null,null);function N(e){for(let a in h)this[a]=h[a]}const ee=function(){return H.exports}();export{ee as default};
