import{S as $}from"./arrow-down-on-square.6f2806b6.js";import{D as C}from"./trash.687d612e.js";import{F as M}from"./FileInput.c005aa34.js";import{c as v,G as g,n as x,h as b,bG as B,r as A,w as F,I as U}from"./index.915cb62f.js";import{u as m}from"./useManufacturerFiles.add9c1e7.js";import{M as j}from"./ManufacturerInput.c38cd9df.js";import{I as R}from"./ImageInput.dbe7baee.js";import{u as h}from"./useManufacturers.57744057.js";import"./document-plus.04e3d5d0.js";import"./DynamicForm.3e341623.js";import"./cloneDeep.1f5373f4.js";import"./_Uint8Array.672acca5.js";import"./keys.9efd985f.js";import"./_baseAssignValue.29328ab7.js";import"./_copyArray.56331c81.js";import"./FormValidation.535989ec.js";import"./BasicModal.4139bcb6.js";const f={};f.props={manufacturerId:{key:"manufacturerId",required:!0,type:String}};f.setup=(e,a)=>{const t=e,s=v(()=>t.manufacturerId),u=m.read(s,"datasheet"),r=v({get(){if(u.data.value)return`${s.value}-datasheet.pdf`},set(n){if(n)return`${s.value}-${n}`}}),c=g(),i=m.update(s,"datasheet");async function l(n){const d=new FormData;r.value=`${n.name}${n.type}`,d.append("data",n,r.value),(await i.mutateAsync(d)).status===204&&c.success("Successfully udpated datasheet.")}const p=m.delete(s,"datasheet");async function o(){window.confirm("Are you sure you want to delete this datasheet?")&&await p.mutateAsync()==="Deleted file."&&(c.success("Successfully deleted datasheet."),r.value="")}return{selectedDatasheet:r,updateDatasheet:l,deleteDatasheet:o}};f.components=Object.assign({FileInput:M},f.components);var L=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{variant:"subtitle3",component:"h3"}},[e._v(" Datasheet ")]),t("FileInput",{attrs:{"existing-file":e.selectedDatasheet,"btn-text":"Change Datasheet",accept:".pdf"},on:{"update-file":e.updateDatasheet,"remove-file":e.deleteDatasheet}})],1)},k=[];const I={};var T=x(f,L,k,!1,E,null,null,null);function E(e){for(let a in I)this[a]=I[a]}const O=function(){return T.exports}(),_={};_.props={manufacturerId:{key:"manufacturerId",required:!0,type:String}};_.setup=(e,a)=>{const t=e,s=v(()=>t.manufacturerId),u=v(()=>`${b}/manufacturers/${encodeURIComponent(s.value)}/files/image`),r=g(),c=m.update(s,"image");async function i(o,n){const d=new FormData;d.append("data",o),(await c.mutateAsync(d)).status===204&&(n(),r.success("Successfully updated logo."))}const l=m.delete(s,"image");async function p(o){confirm("Are you sure you want to delete this image?")&&await l.mutateAsync()==="Deleted file."&&(o(),r.success("Logo deleted."))}return{imageUrl:u,updateImage:i,deleteImage:p}};_.components=Object.assign({ImageInput:R},_.components);var q=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{variant:"subtitle3",component:"h3"}},[e._v(" Logo ")]),t("ImageInput",{attrs:{url:e.imageUrl,"btn-text":"Change Logo"},on:{"update-image":e.updateImage,"remove-image":e.deleteImage}})],1)},G=[];const w={};var z=x(_,q,G,!1,N,null,null,null);function N(e){for(let a in w)this[a]=w[a]}const P=function(){return z.exports}(),y={};y.setup=(e,a)=>{const t=B("id"),s=h.read(t),u=A();F(()=>s.data.value,n=>{n&&(u.value=n)},{immediate:!0});const r=U(),c=g(),i=h.update(t);async function l(){u.value&&await i.mutateAsync(u.value)&&c.success("Successfully updated manufacturer.")}const p=h.delete(t);async function o(){confirm("Are you sure you want to delete this manufacturer? This action deletes all products associated with this manufacturer.")&&(await p.mutateAsync(),c.success("Successfully deleted manufacturer."),r.push("/admin/manufacturers"))}return{id:t,manufacturer:u,updateManufacturer:l,deleteManufacturer:o}};y.components=Object.assign({ManufacturerLogoInput:P,ManufacturerDatasheetInput:O,ManufacturerInput:j,SaveSvg:$,DeleteSvg:C},y.components);var Q=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("main",{staticClass:"flex flex-col space-y-8"},[t("div",{staticClass:"space-y-8 xl:grid xl:grid-cols-2 xl:gap-x-8 xl:space-y-0"},[t("ManufacturerLogoInput",{attrs:{"manufacturer-id":e.id}}),t("ManufacturerDatasheetInput",{attrs:{"manufacturer-id":e.id}})],1),t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{variant:"subtitle3",component:"h3"}},[e._v(" Attributes ")]),t("form",{staticClass:"divide-y",on:{submit:function(s){return s.preventDefault(),e.updateManufacturer.apply(null,arguments)}}},[t("ManufacturerInput",{attrs:{"is-id-readonly":!0},model:{value:e.manufacturer,callback:function(s){e.manufacturer=s},expression:"manufacturer"}}),t("div",{staticClass:"flex flex-col space-y-2 p-4 md:flex-row md:space-y-0 md:space-x-2"},[t("BaseButton",{staticClass:"w-full space-x-2 md:w-auto"},[t("SaveSvg",{staticClass:"h-auto w-4 xl:w-5"}),t("span",[e._v("Save")])],1),t("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{"display-type":"danger",action:"secondary"},on:{click:function(s){return s.preventDefault(),e.deleteManufacturer.apply(null,arguments)}}},[t("DeleteSvg",{staticClass:"h-auto w-4 xl:w-5"}),t("span",[e._v("Delete")])],1)],1)],1)],1)],1)},H=[];const D={};var J=x(y,Q,H,!1,K,null,null,null);function K(e){for(let a in D)this[a]=D[a]}const de=function(){return J.exports}();export{de as default};
