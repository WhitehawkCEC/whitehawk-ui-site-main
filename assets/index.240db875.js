import{F as be}from"./FormButton.690e9024.js";import{df as he,aB as x,d as u,n as d,dg as C,dh as _,b1 as z,ah as ge,aP as Ce,aQ as Ae,ax as ye,cp as Re,L as Ee,bs as Ie,c7 as Z,c4 as Be,aF as De,aK as qe,di as Ve}from"./index.af41d81c.js";import{S as Oe}from"./arrow-path.5187a52b.js";import{T as je}from"./TransitionExpand.b4db13df.js";import{d as Fe,C as Te,b as Ne,c as Pe,B as Me,a as Qe}from"./ComplianceSummaryInput.dfdc26f5.js";import{l as Ue}from"./lodash.49aab9ec.js";import{t as Ke,a as Le,b as we,c as I,d as Ge}from"./index.59639c4d.js";import{C as _e}from"./CollapsibleSection.e1433ddf.js";import{c as Ye,d as Je}from"./BlackKiteProgressBar.b45ce6d8.js";import{T as xe}from"./ToolTip.b7085243.js";import{O as ke}from"./ObjectDisplay.f2373408.js";import{e as k}from"./attributeValue.ea53a720.js";import{D as ze}from"./DynamicForm.eb690c91.js";import{u as He}from"./useCompanyScorecardTemplates.1a38cdeb.js";import{u as We}from"./useProducts.8ccaed2c.js";import{u as Xe}from"./useScorecardTemplates.4ef8d0fc.js";import{u as Ze}from"./useBlackKiteEntities.47b0fb81.js";import{u as et}from"./useUsers.6701282e.js";import{s as tt}from"./index.8a6fcf91.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./GradeLetterDisplay.b4cbb8ee.js";import"./ratingScoreDescription.3b48b1ea.js";import"./_baseIteratee.72819aff.js";import"./_Uint8Array.cf4761c5.js";import"./keys.9657a1bb.js";import"./_baseIsEqual.412d7ff6.js";import"./_arrayMap.dcea68f3.js";import"./index.ebbce841.js";function A(e){return e===void 0?he.BundleSolutionEntry.create():{title:e.title,description:e.description,groups:rt(e.groups)}}function rt(e){return e.map(({category:r,main:t,option:s})=>({category:{id:{value:r.id},name:r.name},main:{id:{value:(t==null?void 0:t.id)||""},name:(t==null?void 0:t.name)||"",description:t==null?void 0:t.description,manufacturer:{id:{value:(t==null?void 0:t.manufacturer.id)||""},name:(t==null?void 0:t.manufacturer.name)||""},categories:ee((t==null?void 0:t.categories)||[])},option:{id:{value:(s==null?void 0:s.id)||""},name:(s==null?void 0:s.name)||"",description:s==null?void 0:s.description,manufacturer:{id:{value:(s==null?void 0:s.manufacturer.id)||""},name:(s==null?void 0:s.manufacturer.name)||""},categories:ee((s==null?void 0:s.categories)||[])}}))}function ee(e){return e.map(({id:r,name:t})=>({id:{value:r},name:t}))}function st(e){const r=[];for(const t of Object.values(e))r.push({domain:Ke(t.displayValue),domainDisplayValue:t.displayValue,levels:at(t.levels)});return r}function at(e){const r=[];for(const[t,s]of Object.entries(e))r.push({level:Le(t),averageStarLevel:s.averageStarLevel});return r}const B={};B.props={value:{key:"value",required:!1,type:null},products:{key:"products",required:!0,type:Array},random:{key:"random",required:!0,type:null},performance:{key:"performance",required:!0,type:null}};B.setup=(e,r)=>{const t=e,s=r.emit,a=x(t,s),i=u({get(){const{BASIC:o,BALANCED:c,ADVANCED:l}=t.random,[m,$,b]=t.performance.focusAreaOrder;if(m&&$&&b){const p=o[m],v=c[$],S=l[b];if(p&&v&&S)return{BASIC:p,BALANCED:v,ADVANCED:S}}},set(o){o&&(a.value={essential:A(o.BASIC),balanced:A(o.BALANCED),premier:A(o.ADVANCED)})}}),n=u(()=>{const o=[];for(const c of t.products)for(const l of c.categories)o.push(l);return Ue.exports.uniqBy(o,"id").sort((c,l)=>c.name.localeCompare(l.name))});return{bundle:i,productCategories:n}};B.components=Object.assign({BundleSolutionInput:Fe},B.components);var nt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BundleSolutionInput",{attrs:{products:e.products,"product-categories":e.productCategories},model:{value:e.bundle,callback:function(s){e.bundle=s},expression:"bundle"}})},ot=[];const te={};var ct=d(B,nt,ot,!1,lt,null,null,null);function lt(e){for(let r in te)this[r]=te[r]}const it=function(){return ct.exports}(),D={};D.props={value:{key:"value",required:!0,type:null},performance:{key:"performance",required:!0,type:null}};D.setup=(e,r)=>{const t=["NIST 800-53 R5","CIS CSC-20","CMMC 2.0","NIST 800-171"],s=e,a=r.emit,i=x(s,a);return{compliance:u({get(){if(s.performance){const{compliance:o}=s.performance.reports,c={};for(const l of o){const{StandardCode:m}=l;t.includes(m)&&(c[m]={report:l})}return c}},set(o){o&&(i.value=o)}})}};D.components=Object.assign({ComplianceSummaryInput:Te},D.components);var ut=function(){var e=this,r=e.$createElement,t=e._self._c||r;return e.compliance?t("div",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Compliance ")]),t("ComplianceSummaryInput",{model:{value:e.compliance,callback:function(s){e.compliance=s},expression:"compliance"}})],1):e._e()},pt=[];const re={};var mt=d(D,ut,pt,!1,dt,null,null,null);function dt(e){for(let r in re)this[r]=re[r]}const ft=function(){return mt.exports}(),q={};q.props={value:{key:"value",required:!1,type:null},order:{key:"order",required:!1,type:null},performance:{key:"performance",required:!0,type:null}};q.setup=(e,r)=>{const t=e,s=r.emit,a=x(t,s),i=u({get(){const[c,l,m]=t.performance.focusAreaOrder;if(c&&l&&m)return[c,l,m]},set(c){if(c){const l=o(c);a.value={first:l[0]||C.RiskVector.UNSPECIFIED,second:l[1]||C.RiskVector.UNSPECIFIED,third:l[2]||C.RiskVector.UNSPECIFIED}}}}),n=u(()=>{var c;return(c=t.order)==null?void 0:c.values.map(l=>we(l))});function o(c){const l=[];for(const m of c)m&&l.push(I(m));return l}return{focusAreas:i,options:n}};q.components=Object.assign({BlackKiteFocusAreasInput:Ne},q.components);var vt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BlackKiteFocusAreasInput",{attrs:{options:e.options||[]},model:{value:e.focusAreas,callback:function(s){e.focusAreas=s},expression:"focusAreas"}})},yt=[];const se={};var _t=d(q,vt,yt,!1,xt,null,null,null);function xt(e){for(let r in se)this[r]=se[r]}const kt=function(){return _t.exports}(),V={};V.props={value:{key:"value",required:!1,type:null},performance:{key:"performance",required:!0,type:null}};V.setup=(e,r)=>{const t=e,s=r.emit,a=x(t,s);return{riskVectors:u({get(){return t.performance.riskVectors},set(n){const o=[];for(const[c,l]of Object.entries(n))o.push({riskVector:I(c),analysis:l});a.value={values:o}}})}};V.components=Object.assign({CollapsibleSection:_e,BlackKiteRiskVectorPerformance:Pe},V.components);var St=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("CollapsibleSection",{scopedSlots:e._u([{key:"title",fn:function(){return[t("BaseTypography",{staticClass:"py-4 pl-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Risk Vector Performance ")])]},proxy:!0},{key:"content",fn:function(){return[t("BlackKiteRiskVectorPerformance",{model:{value:e.riskVectors,callback:function(s){e.riskVectors=s},expression:"riskVectors"}})]},proxy:!0}])})},$t=[];const ae={};var bt=d(V,St,$t,!1,ht,null,null,null);function ht(e){for(let r in ae)this[r]=ae[r]}const gt=function(){return bt.exports}(),O={};O.props={value:{key:"value",required:!1,type:null},performance:{key:"performance",required:!0,type:null}};O.setup=(e,r)=>{const t=e,s=r.emit,a=x(t,s);return{riskVectors:u({get(){return t.performance.riskVectors},set(n){const o=[];for(const[c,l]of Object.entries(n))o.push({riskVector:I(c),analysis:l});a.value={values:o}}})}};O.components=Object.assign({BlackKiteRiskVectorsDisplay:Ye},O.components);var Ct=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"p-4"},[t("BlackKiteRiskVectorsDisplay",{model:{value:e.riskVectors,callback:function(s){e.riskVectors=s},expression:"riskVectors"}})],1)},At=[];const ne={};var Rt=d(O,Ct,At,!1,Et,null,null,null);function Et(e){for(let r in ne)this[r]=ne[r]}const It=function(){return Rt.exports}();function E(e){return JSON.parse(JSON.stringify(e))}const j={};j.props={value:{key:"value",required:!1,type:null},performance:{key:"performance",required:!0,type:null}};j.setup=(e,r)=>{const t=e,s=r.emit,a=x(t,s);return{summary:u({get(){return t.performance.reports.summary},set(n){n&&(a.value={json:E(n)})}})}};j.components=Object.assign({BlackKiteSummaryDescription:Me,BlackKiteReportSummary:Qe},j.components);var Bt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return e.summary?t("div",{staticClass:"flex flex-col divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Summary Report ")]),t("div",{staticClass:"flex flex-col divide-y"},[t("BlackKiteSummaryDescription",{attrs:{score:parseInt(e.summary.GradeOver100),date:e.summary.LastUpdatedAt}}),t("div",{staticClass:"p-4"},[t("BlackKiteReportSummary",{attrs:{summary:e.summary}})],1)],1)],1):e._e()},Dt=[];const oe={};var qt=d(j,Bt,Dt,!1,Vt,null,null,null);function Vt(e){for(let r in oe)this[r]=oe[r]}const Ot=function(){return qt.exports}(),F={};F.props={value:{key:"value",required:!1,type:null},performance:{key:"performance",required:!0,type:null}};F.setup=(e,r)=>{const t=e,s=r.emit,a=x(t,s);return{risk:u({get(){return t.performance.reports.risk},set(n){n&&(a.value={json:E(n)})}})}};F.components=Object.assign({CollapsibleSection:_e,BlackKiteReportRisk:Je},F.components);var jt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("CollapsibleSection",{scopedSlots:e._u([{key:"title",fn:function(){return[t("BaseTypography",{staticClass:"py-4 pl-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" FAIR Report ")])]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"p-4"},[t("BlackKiteReportRisk",{attrs:{risk:e.risk}})],1)]},proxy:!0}])})},Ft=[];const ce={};var Tt=d(F,jt,Ft,!1,Nt,null,null,null);function Nt(e){for(let r in ce)this[r]=ce[r]}const Pt=function(){return Tt.exports}(),T={};T.props={value:{key:"value",required:!1,type:null},options:{key:"options",required:!0,type:Array}};T.setup=(e,r)=>{const t=e,s=r.emit;return{proxy:x(t,s)}};T.components=Object.assign({ToolTip:xe,ObjectDisplay:ke},T.components);var Mt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BaseLabel",{staticClass:"flex flex-col p-4 lg:grid lg:grid-cols-3 lg:items-center"},[t("div",{staticClass:"flex flex-row items-center space-x-1 after:content-['*'] after:ml-0.5 after:text-red-700"},[t("span",[e._v("Supplier")]),e.value?t("ToolTip",[t("ObjectDisplay",{attrs:{value:e.value}})],1):e._e()],1),t("div",{staticClass:"flex flex-col lg:col-span-2"},[t("BaseSelect",{model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}},e._l(e.options,function(s){return t("option",{key:s.id,domProps:{value:s}},[e._v(" "+e._s(s.name)+" ")])}),0)],1)])},Qt=[];const le={};var Ut=d(T,Mt,Qt,!1,Kt,null,null,null);function Kt(e){for(let r in le)this[r]=le[r]}const Lt=function(){return Ut.exports}(),N={};N.props={value:{key:"value",required:!1,type:null},entities:{key:"entities",required:!0,type:Array}};N.setup=(e,r)=>{const t=e,s=r.emit,a=x(t,s),i=u(()=>t.entities.map(n=>({id:n.CompanyId,name:n.CompanyName})).sort((n,o)=>n.name.localeCompare(o.name))||[]);return{proxy:a,options:i}};N.components=Object.assign({SupplierEntryInput:Lt},N.components);var wt=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("SupplierEntryInput",{attrs:{options:e.options},model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}})},Gt=[];const ie={};var Yt=d(N,wt,Gt,!1,Jt,null,null,null);function Jt(e){for(let r in ie)this[r]=ie[r]}const zt=function(){return Yt.exports}(),P={};P.props={value:{key:"value",required:!1,type:null},users:{key:"users",required:!0,type:Array}};P.setup=(e,r)=>{const t=e,s=r.emit,a=x(t,s),i=u(()=>t.users.map(n=>({id:{value:k(n,"sub")},name:k(n,"name")||"",title:k(n,"custom:title")||"",email:k(n,"email"),phone:k(n,"phone_number")||""})).sort((n,o)=>n.email.localeCompare(o.email)));return{proxy:a,options:i}};P.components=Object.assign({ToolTip:xe,ObjectDisplay:ke},P.components);var Ht=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BaseLabel",{staticClass:"flex flex-col p-4 lg:grid lg:grid-cols-3 lg:items-center"},[t("div",{staticClass:"flex flex-row items-center space-x-1 after:content-['*'] after:ml-0.5 after:text-red-700"},[t("span",[e._v("Analyst")]),e.value?t("ToolTip",[t("ObjectDisplay",{attrs:{value:e.value}})],1):e._e()],1),t("BaseSelect",{staticClass:"lg:col-span-2",attrs:{required:""},model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}},e._l(e.options,function(s,a){return t("option",{key:a,domProps:{value:s}},[e._v(" "+e._s(s.email)+" ")])}),0)],1)},Wt=[];const ue={};var Xt=d(P,Ht,Wt,!1,Zt,null,null,null);function Zt(e){for(let r in ue)this[r]=ue[r]}const er=function(){return Xt.exports}(),M={};M.props={value:{key:"value",required:!1,type:null}};M.setup=(e,r)=>{const t=e,s=r.emit,a=x(t,s),i=u(()=>new Date().getFullYear()),n=u(()=>new Array(10).fill(i.value).map((m,$)=>({value:i.value-5+$}))),o=u(()=>[{text:"In Progress",value:_.State.IN_PROGRESS},{text:"Products Needed",value:_.State.PRODUCTS_NEEDED},{text:"Ready for QA",value:_.State.READY_FOR_QA},{text:"Delivered",value:_.State.DELIVERED},{text:"Complete",value:_.State.COMPLETE}]),c=u(()=>[{text:"Q1",value:_.Quarter.Q1},{text:"Q2",value:_.Quarter.Q2},{text:"Q3",value:_.Quarter.Q3},{text:"Q4",value:_.Quarter.Q4},{text:"Other",value:_.Quarter.OTHER}]),l=[{name:"state",label:"State",component:{is:z,attrs:{required:!0,options:o.value}}},{name:"year",label:"Year",component:{is:z,attrs:{required:!0,options:n.value}}},{name:"quarter",label:"Quarter",component:{is:z,attrs:{required:!0,options:c.value}}}];return{proxy:a,schema:l}};M.components=Object.assign({DynamicForm:ze},M.components);var tr=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("DynamicForm",{attrs:{schema:e.schema},model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}})},rr=[];const pe={};var sr=d(M,tr,rr,!1,ar,null,null,null);function ar(e){for(let r in pe)this[r]=pe[r]}const nr=function(){return sr.exports}(),or={get(){return ge(["random-bundle-solution"],()=>Ce.get(`${Ae}/random-bundle-solution`).then(e=>e.data))}},Q={};Q.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:null},users:{key:"users",required:!0,type:Array},entities:{key:"entities",required:!0,type:Array},products:{key:"products",required:!0,type:Array}};Q.setup=(e,r)=>{const t=e,s=r.emit,a=ye(t,s),i=u(()=>{var v,S;const p=[];return(v=a.value.supplier)!=null&&v.id||p.push("Select a supplier"),((S=a.value.status)==null?void 0:S.state)===_.State.DELIVERED&&p.push('The status of this scorecard has already been marked as "Delivered."'),{allowed:p.length===0,reasons:p}}),n=u(()=>t.id),o=u({get(){var p,v;return(v=(p=t.value)==null?void 0:p.supplier)==null?void 0:v.id},set(p){p&&a.value.supplier&&(a.value.supplier.id=p)}}),c=Re.get(n,o),l=u(()=>c.data.value),m=or.get(),$=u(()=>m.data.value);function b(){if(c.data.value&&m.data.value){const{cmmcAnalysis:p,focusAreaOrder:v,ratingScoreDetails:S,reports:h,riskVectors:G}=c.data.value,{BASIC:Y,BALANCED:y,ADVANCED:f}=m.data.value,[J,K,Se]=v,R=[];for(const g of v)R.push(I(g));const $e=["NIST 800-53 R5","CIS CSC-20","CMMC 2.0","NIST 800-171"],W={};for(const g of h.compliance){const{StandardCode:L}=g;$e.includes(L)&&(W[L]={report:g})}const X=[];for(const[g,L]of Object.entries(G))X.push({riskVector:I(g),analysis:L});a.value.cmmcAnalysis={entries:st(p)},a.value.reports={summary:{json:E(h.summary)},risk:{json:E(h.risk)},compliance:{json:E(h.compliance)}},a.value.ratingScore={description:S.description||""},a.value.riskVectors={values:X},a.value.focusAreaOrder={values:R},a.value.focusAreas={first:R[0]||C.RiskVector.UNSPECIFIED,second:R[1]||C.RiskVector.UNSPECIFIED,third:R[2]||C.RiskVector.UNSPECIFIED},a.value.compliance=W,a.value.bundle={essential:A(Y[J||""]),balanced:A(y[K||""]),premier:A(f[Se||""])},s("update-data")}}return{proxy:a,canUpdateData:i,performance:l,random:$,updateData:b}};Q.components=Object.assign({AnalystInput:er,SupplierInput:zt,RefreshSvg:Oe,TransitionExpand:je,SummaryReport:Ot,SummaryRiskReport:Pt,RiskVectorAnalysisOverview:It,FocusAreas:kt,RiskVectorAnalysis:gt,BundleSolution:it,ComplianceSummaryV2:ft,StatusInput:nr},Q.components);var cr=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("section",{staticClass:"flex flex-col divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Analyst Information ")]),t("AnalystInput",{attrs:{users:e.users},model:{value:e.proxy.analyst,callback:function(s){e.$set(e.proxy,"analyst",s)},expression:"proxy.analyst"}}),t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Supplier Information ")]),t("SupplierInput",{attrs:{entities:e.entities},model:{value:e.proxy.supplier,callback:function(s){e.$set(e.proxy,"supplier",s)},expression:"proxy.supplier"}}),t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Update Data ")]),e.canUpdateData.allowed?t("div",{staticClass:"p-4"},[t("BaseButton",{staticClass:"w-full space-x-2 lg:w-auto",attrs:{type:"button",disabled:!e.canUpdateData.allowed},on:{click:e.updateData}},[t("RefreshSvg",{staticClass:"-ml-1 w-4 xl:w-5"}),t("span",[e._v("Update")])],1)],1):t("div",[t("BaseAlert",{staticClass:"shadow-none rounded-none",attrs:{type:"warn"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Update Unavailable")]},proxy:!0},{key:"message",fn:function(){return[t("ul",{staticClass:"flex list-inside list-disc flex-col space-y-1"},e._l(e.canUpdateData.reasons,function(s){return t("li",{key:s},[e._v(" "+e._s(s)+" ")])}),0)]},proxy:!0}],null,!1,4159848379)})],1),t("TransitionExpand",[e.performance&&e.random?t("div",{staticClass:"divide-y"},[e.proxy.reports?[t("SummaryReport",{attrs:{"v-model":e.proxy.reports.summary,performance:e.performance}}),t("SummaryRiskReport",{attrs:{"v-model":e.proxy.reports.risk,performance:e.performance}})]:e._e(),e.proxy.focusAreaOrder?t("div",{staticClass:"grid divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Recommended Focus Areas ")]),t("div",{staticClass:"flex flex-col divide-y lg:grid lg:grid-cols-2 lg:divide-x lg:divide-y-0 xl:grid-cols-3"},[t("RiskVectorAnalysisOverview",{attrs:{performance:e.performance},model:{value:e.proxy.riskVectors,callback:function(s){e.$set(e.proxy,"riskVectors",s)},expression:"proxy.riskVectors"}}),t("FocusAreas",{attrs:{order:e.proxy.focusAreaOrder,performance:e.performance},model:{value:e.proxy.focusAreas,callback:function(s){e.$set(e.proxy,"focusAreas",s)},expression:"proxy.focusAreas"}})],1)],1):e._e(),e.proxy.riskVectors?[t("RiskVectorAnalysis",{attrs:{performance:e.performance},model:{value:e.proxy.riskVectors,callback:function(s){e.$set(e.proxy,"riskVectors",s)},expression:"proxy.riskVectors"}})]:e._e(),e.proxy.bundle?[t("BundleSolution",{attrs:{products:e.products,random:e.random,performance:e.performance},model:{value:e.proxy.bundle,callback:function(s){e.$set(e.proxy,"bundle",s)},expression:"proxy.bundle"}})]:e._e(),e.proxy.compliance?[t("ComplianceSummaryV2",{attrs:{performance:e.performance},model:{value:e.proxy.compliance,callback:function(s){e.$set(e.proxy,"compliance",s)},expression:"proxy.compliance"}})]:e._e()],2):e._e()]),t("StatusInput",{model:{value:e.proxy.status,callback:function(s){e.$set(e.proxy,"status",s)},expression:"proxy.status"}})],1)},lr=[];const me={};var ir=d(Q,cr,lr,!1,ur,null,null,null);function ur(e){for(let r in me)this[r]=me[r]}const pr=function(){return ir.exports}(),H={};H.props={value:{key:"value",required:!1,type:null,default:void 0},templates:{key:"templates",required:!0,type:Array}};H.setup=(e,r)=>{const t=e,s=r.emit,a=x(t,s),i=u(()=>t.templates.map(({key:n})=>({value:n.split("/")[1]||""})));return{proxy:a,options:i}};var mr=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BaseLabel",{staticClass:"flex flex-col p-4 lg:grid lg:grid-cols-3 lg:items-center"},[t("span",{staticClass:"after:content-['*'] after:ml-0.5 after:text-red-700"},[e._v(" Template ")]),t("BaseSelect",{staticClass:"flex flex-col lg:col-span-2",model:{value:e.proxy,callback:function(s){e.proxy=s},expression:"proxy"}},e._l(e.options,function(s,a){return t("option",{key:a,domProps:{value:s}},[e._v(" "+e._s(s.value)+" ")])}),0)],1)},dr=[];const de={};var fr=d(H,mr,dr,!1,vr,null,null,null);function vr(e){for(let r in de)this[r]=de[r]}const yr=function(){return fr.exports}(),U={};U.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:null},users:{key:"users",required:!0,type:Array},entities:{key:"entities",required:!0,type:Array},products:{key:"products",required:!0,type:Array},templates:{key:"templates",required:!0,type:Array}};U.setup=(e,r)=>{const t=e,s=r.emit;return{proxy:ye(t,s)}};U.components=Object.assign({TemplateInput:yr,DataInput:pr},U.components);var _r=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"flex flex-col divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Scorecard Template ")]),t("TemplateInput",{attrs:{templates:e.templates},model:{value:e.proxy.template,callback:function(s){e.$set(e.proxy,"template",s)},expression:"proxy.template"}}),t("DataInput",{attrs:{id:e.id,users:e.users,entities:e.entities,products:e.products},model:{value:e.proxy.data,callback:function(s){e.$set(e.proxy,"data",s)},expression:"proxy.data"}})],1)},xr=[];const fe={};var kr=d(U,_r,xr,!1,Sr,null,null,null);function Sr(e){for(let r in fe)this[r]=fe[r]}const $r=function(){return kr.exports}(),w={};w.setup=(e,r)=>{const t=Z("id"),s=Z("subscriptionId"),a=[We.list(),Xe.list(),Ze.list(t)],i=et.list(),n=Be.read(t),o=He.get(t),c=u(()=>{if(n.data.value){const{id:y,name:f}=n.data.value;return{company:y,name:f}}}),l=u(()=>{var y;return(y=i.data.value)==null?void 0:y.map(f=>({id:{value:k(f,"sub")},name:k(f,"name")||"",title:k(f,"custom:title")||"",email:k(f,"email"),phone:k(f,"phone_number")||""})).find(f=>f.email==="consultingservices@whitehawk.com")}),m=new Date,$=m.getUTCFullYear(),b=`Q${Math.ceil((m.getMonth()+1)/4)}`,p=tt(u(()=>{var y;return{template:{value:((y=o.data.value)==null?void 0:y.split("/")[1])||""},data:{buyer:{company:c.value},analyst:l.value,status:{state:_.State.IN_PROGRESS,year:$,quarter:Ge(b)}}}})),v=u(()=>Boolean(i.data.value&&n.data.value)),S=De(),h=qe(),G=Ve.create(t,s);async function Y(){var y,f;if(p.value){const J={scorecardInput:{oneofKind:"bk",bk:p.value}},{response:K}=await G.mutateAsync(J);K.scorecardId&&(S.success("Successfully created scorecard."),h.push(`/admin/companies/${t.value}/subscriptions/${s.value}/integrations/2/entities/${(f=(y=p.value.data)==null?void 0:y.supplier)==null?void 0:f.id}/scorecards/in-depth/${K.scorecardId}`))}}return{accountId:t,queries:a,users:i,scorecard:p,ready:v,createScorecard:Y}};w.components=Object.assign({LoadingSpinner:Ee,BackButton:Ie,ScorecardInput:$r,FormButton:be},w.components);var br=function(){var e=this,r=e.$createElement,t=e._self._c||r;return e.ready?t("section",{staticClass:"space-y-6"},[t("div",{staticClass:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-4"},[t("BackButton"),t("BaseTypography",{attrs:{variant:"h5",component:"h2"}},[e._v(" Create Scorecard ")])],1),t("BaseSimpleCard",[t("form",{staticClass:"divide-y",on:{submit:function(s){return s.preventDefault(),e.createScorecard.apply(null,arguments)}}},[t("BaseVueQueries",{attrs:{queries:e.queries},scopedSlots:e._u([{key:"success",fn:function(s){var a=s[0],i=s[1],n=s[2];return[t("ScorecardInput",{attrs:{id:e.accountId,users:e.users.data.value||[],entities:n,products:a,templates:i},model:{value:e.scorecard,callback:function(o){e.scorecard=o},expression:"scorecard"}})]}}])}),t("FormButton",{attrs:{action:"create","is-valid-form":!1}})],1)])],1):t("LoadingSpinner")},hr=[];const ve={};var gr=d(w,br,hr,!1,Cr,null,null,null);function Cr(e){for(let r in ve)this[r]=ve[r]}const ts=function(){return gr.exports}();export{ts as default};
