import{D as T}from"./document-plus.04e3d5d0.js";import{T as w}from"./trash.78f57a7a.js";import{aD as A,aP as E,aQ as $,b0 as D,ao as R,ay as O,bR as I,r as d,bl as k,c as q,aF as L,n as v,b$ as M}from"./index.37713f0a.js";import{u as m,P as N}from"./ProductQuoteTable.69521289.js";import"./arrow-down-tray.5bfa5b2e.js";import"./AppVueGoodTable.8af0e276.js";import"./FileSaver.min.0da55363.js";const j={update(){return A(t=>E.put(`${$}/productQuote/${t.quoteId}/file`,t.file,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>a.data))}},n={};n.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!1,type:null}};n.setup=(t,a)=>{const e=t,s=a.emit,o=O(e,s),{id:y}=I(e),c=d(),f=k(),_=q(()=>{var r;return((r=f.user)==null?void 0:r.id)||""}),x=[{text:"New",value:"NEW"},{text:"In Progress",value:"IN_PROGRESS"},{text:"Complete",value:"COMPLETE"},{text:"Canceled",value:"CANCELED"}],C=[{text:"Marketplace",value:"MARKETPLACE"},{text:"In-Depth Scorecard",value:"SCORECARD_INDEPTH"},{text:"Snapshot Scorecard",value:"SCORECARD_SNAPSHOT"},{text:"Batch",value:"BATCH"},{text:"Portfolio",value:"PORTFOLIO"}];function g(r){const l=r.currentTarget;l.files&&l.files[0]&&(c.value=l.files[0])}const S=m.create();async function b(){const r=await S.mutateAsync({status:o.value.status,type:o.value.type,title:o.value.title.trim(),companyId:y.value,employeeId:_.value});r&&r.id&&await Q(r.id)}const h=L(),P=j.update();async function Q(r){if(c.value){const l=new FormData;l.append("file",c.value,c.value.name);const F={quoteId:r,file:l};await P.mutateAsync(F)&&h.success("Successfully added product quote.")}else throw new Error("Invalid request.")}function B(){o.value.title="",o.value.status="",o.value.type="",c.value=void 0}return{proxy:o,selectedFile:c,status:x,type:C,selectFile:g,addCompanyQuote:b,clearForm:B}};n.components=Object.assign({SimpleSelect:D,DocumentAddSvg:T,PlusSvg:R,TrashSvg:w},n.components);var U=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("form",{staticClass:"grid divide-y",attrs:{enctype:"multipart/form-data"},on:{submit:function(s){s.preventDefault()}}},[e("BaseLabel",{staticClass:"grid items-center p-4 lg:grid-cols-2"},[t._v(" Type "),e("SimpleSelect",{staticClass:"w-full",attrs:{options:t.type,required:""},model:{value:t.proxy.type,callback:function(s){t.$set(t.proxy,"type",s)},expression:"proxy.type"}})],1),e("BaseLabel",{staticClass:"grid items-center p-4 lg:grid-cols-2"},[t._v(" Status "),e("SimpleSelect",{staticClass:"w-full",attrs:{options:t.status,required:""},model:{value:t.proxy.status,callback:function(s){t.$set(t.proxy,"status",s)},expression:"proxy.status"}})],1),e("BaseLabel",{staticClass:"grid items-center p-4 lg:grid-cols-2"},[t._v(" Title "),e("BaseInput",{staticClass:"w-full",attrs:{type:"text"},model:{value:t.proxy.title,callback:function(s){t.$set(t.proxy,"title",s)},expression:"proxy.title"}})],1),e("BaseLabel",{staticClass:"group grid cursor-pointer items-center p-4 lg:grid-cols-2"},[t._v(" Select File "),e("div",{staticClass:"flex flex-col justify-center space-y-2 rounded-md border border-dashed border-gray-300 bg-white px-6 pt-5 pb-6"},[e("DocumentAddSvg",{staticClass:"mx-auto h-12 w-12 fill-current text-gray-300 group-hover:text-blue-500"}),e("div",{staticClass:"self-center text-center"},[e("input",{staticClass:"hidden",attrs:{type:"file",accept:".docx, .pdf, .csv, .zip"},on:{change:t.selectFile}}),t.selectedFile?e("span",[t._v(t._s(t.selectedFile.name))]):t._e(),e("p",{staticClass:"text-xs text-gray-500"},[t._v(" (PDF, DOCX, CSV or Zip up to 100MB) ")])])],1)]),e("div",{staticClass:"space-y-2 p-4 lg:space-y-0 lg:space-x-2"},[e("BaseButton",{staticClass:"space-x-2",attrs:{type:"button"},on:{click:t.addCompanyQuote}},[e("PlusSvg",{staticClass:"w-4 xl:w-5"}),e("span",[t._v("Add")])],1),e("BaseButton",{staticClass:"space-x-2",attrs:{type:"button",action:"secondary","display-type":"danger"},on:{click:t.clearForm}},[e("TrashSvg",{staticClass:"w-4 xl:w-5"}),e("span",[t._v("Clear")])],1)],1)],1)},H=[];const u={};var z=v(n,U,H,!1,V,null,null,null);function V(t){for(let a in u)this[a]=u[a]}const G=function(){return z.exports}(),i={};i.setup=(t,a)=>{const e=M("id"),s=m.list(e),o=d();return{id:e,productQuotesQuery:s,productQuote:o}};i.components=Object.assign({ProductQuoteTable:N,ProductQuoteForm:G},i.components);var K=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"space-y-6"},[e("BaseSimpleCard",{staticClass:"divide-y"},[e("BaseTypography",{staticClass:"p-4",attrs:{component:"h2",variant:"subtitle3"}},[t._v(" Product Quote ")]),e("BaseVueQuery",{attrs:{query:t.productQuotesQuery},scopedSlots:t._u([{key:"success",fn:function(s){var o=s.data;return[e("ProductQuoteTable",{attrs:{"purchase-history":o}})]}}])})],1),e("BaseSimpleCard",{staticClass:"divide-y"},[e("BaseTypography",{staticClass:"p-4",attrs:{component:"h2",variant:"subtitle3"}},[t._v(" Add Quote ")]),e("ProductQuoteForm",{attrs:{id:t.id},model:{value:t.productQuote,callback:function(s){t.productQuote=s},expression:"productQuote"}})],1)],1)},W=[];const p={};var X=v(i,K,W,!1,Z,null,null,null);function Z(t){for(let a in p)this[a]=p[a]}const ct=function(){return X.exports}();export{ct as default};
