import{bQ as T,n as m,aC as R,b0 as g,ai as k,aT as E,aE as $,aP as d,aQ as y,L as I,bZ as w,r as A,d as F,aJ as M}from"./index.bacda359.js";import{T as D}from"./ToolTip.ac411983.js";import{A as O}from"./AppTanStackTable.7380eeac.js";import{c as V}from"./createOnChangeFn.5d8c9f61.js";import{u as q}from"./createSimpleTable.e4bcaf6e.js";import{D as N}from"./DynamicForm.dad360a3.js";import{S as P}from"./StatusInput.16bb966b.js";import"./exclamation-triangle.54812a62.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.b65af9a5.js";import"./chevron-up.736f4142.js";const i={};i.props={matches:{key:"matches",required:!0,type:Array}};i.setup=(e,a)=>{const t=e,{matches:n}=T(t),s=V(),c=[s.accessor(r=>r.cyberOne.id,{id:"id",header:()=>"ID",enableColumnFilter:!1}),s.accessor(r=>r.cyberOne.name,{id:"name",header:()=>"Name",enableColumnFilter:!1}),s.accessor(r=>r.cyberOne.domain,{id:"domain",header:()=>"Domain",enableColumnFilter:!1}),s.accessor(r=>r.supplier.name,{id:"supplier",header:()=>"Supplier",enableColumnFilter:!1})];return{instance:q(n,c)}};i.components=Object.assign({AppTanStackTable:O},i.components);var B=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("AppTanStackTable",{attrs:{table:e.instance}})},G=[];const v={};var H=m(i,B,G,!1,L,null,null,null);function L(e){for(let a in v)this[a]=v[a]}const Q=function(){return H.exports}();var p=(e=>(e.RATING_SERVICE_1="RATING_SERVICE_1",e.RATING_SERVICE_2="RATING_SERVICE_2",e))(p||{});const u={};u.props={value:{key:"value",required:!1,type:null},matches:{key:"matches",required:!0,type:Array}};u.setup=(e,a)=>{const t=e,n=a.emit,s=R(t,n),c=[{name:"ratingService",label:"Report Type",component:{is:g,attrs:{required:!0,options:[{text:"Rating Service 1",value:p.RATING_SERVICE_1},{text:"Rating Service 2",value:p.RATING_SERVICE_2}]}}},{name:"status",label:"Status",component:{is:P,attrs:{required:!0}}}];return{proxy:s,schema:c}};u.components=Object.assign({DynamicForm:N},u.components);var j=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("DynamicForm",{attrs:{schema:e.schema},model:{value:e.proxy,callback:function(n){e.proxy=n},expression:"proxy"}})},W=[];const h={};var U=m(u,j,W,!1,z,null,null,null);function z(e){for(let a in h)this[a]=h[a]}const J=function(){return U.exports}(),f={get(e){return k(["companies",e,"cyber-one","matched-pairs","whitehawk"],()=>d.get(`${y}/companies/${e.value}/cyber-one/matched-pairs-whitehawk`).then(a=>a.data))},update(e){const a=E();return $(t=>d.post(`${y}/companies/${e.value}/cyber-one/matched-pairs-whitehawk/sync`,t).then(n=>n.data),{onSuccess(){a.invalidateQueries(["companies",e,"cyber-one","matched-pairs","whitehawk"],{exact:!0})}})}},l={};l.setup=(e,a)=>{const t=w("id"),n=f.get(t),s=A(),c=F({get(){if(s.value)return s.value;const o=new Date,x=o.getFullYear(),C=`Q${Math.ceil((o.getMonth()+1)/4)}`;return{id:t.value,matchedPair:n.data.value||[],status:{state:"COMPLETE",year:x,quarter:C},ratingService:"RATING_SERVICE_2"}},set(o){o&&(s.value=o)}}),_=M(),r=f.update(t);async function b(){c.value&&(await r.mutateAsync(c.value)).data&&_.push("../")}return{matches:n,sync:c,syncUpdate:r,upload:b}};l.components=Object.assign({WhiteHawkMatchedPairsTable:Q,ToolTip:D,WhiteHawkSyncInput:J,LoadingSpinner:I},l.components);var Y=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("main",{staticClass:"space-y-6"},[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"overline",fn:function(){return[e._v("VRM Dashboard")]},proxy:!0},{key:"title",fn:function(){return[e._v("Scorecard Sync")]},proxy:!0},{key:"table",fn:function(){return[t("WhiteHawkMatchedPairsTable",{attrs:{matches:e.matches.data.value||[]}})]},proxy:!0}])}),t("BaseSimpleCard",{staticClass:"divide-y"},[t("div",{staticClass:"flex items-center space-y-1 space-x-1 p-4"},[t("BaseTypography",{attrs:{variant:"subtitle3",component:"h2"}},[e._v(" Sync Scorecard Assets ")]),t("ToolTip",[e._v(" This will sync the documents for the assets listed above to CyberOne. ")])],1),t("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),e.upload.apply(null,arguments)}}},[t("BaseVueQuery",{attrs:{query:e.matches},scopedSlots:e._u([{key:"success",fn:function(n){var s=n.data;return[t("WhiteHawkSyncInput",{attrs:{matches:s},model:{value:e.sync,callback:function(c){e.sync=c},expression:"sync"}})]}}])}),t("div",{staticClass:"p-4"},[t("BaseButton",{attrs:{disabled:e.syncUpdate.isLoading.value}},[e.syncUpdate.isLoading.value?t("LoadingSpinner"):t("span",[e._v("Sync")])],1)],1)],1)])],1)},Z=[];const S={};var K=m(l,Y,Z,!1,X,null,null,null);function X(e){for(let a in S)this[a]=S[a]}const _e=function(){return K.exports}();export{_e as default};
