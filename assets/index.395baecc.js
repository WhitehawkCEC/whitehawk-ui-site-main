import{A as $,T}from"./AppTanStackTable.942ad654.js";import{S as j}from"./StarLevelDisplay.0a077b81.js";import{c as F}from"./createOnChangeFn.dde3ae66.js";import{d as o,aS as w,n as C,cB as A,aQ as I,c8 as h,b as B,az as D}from"./index.5fed33d2.js";import{u as O}from"./createSimpleTable.6945b0ab.js";import{T as q}from"./TodosChart.7401354a.js";import{g as k,s as E}from"./sortBy.5198aef6.js";import{u as R}from"./BarChart.ebe2c0b8.js";import{K as L}from"./KnownStandardCodes.dc74bde0.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.bc238895.js";import"./keys.a388ac69.js";import"./chevron-up.736f4142.js";import"./TabbedPanel.4b97a7b2.js";import"./_baseAssignValue.f5ffb241.js";import"./_Uint8Array.28761899.js";import"./_baseIteratee.6f59366c.js";import"./_baseIsEqual.874e16bd.js";import"./_arrayMap.dcea68f3.js";import"./chart.c54a61e9.js";const f={};f.props={id:{key:"id",required:!0,type:String},frameworkId:{key:"frameworkId",required:!0,type:String},controls:{key:"controls",required:!0,type:Object}};f.setup=(e,r)=>{const t=e,s=o(()=>t.id),m=o(()=>t.frameworkId),i=o(()=>{const a=[];for(const[l,c]of Object.entries(t.controls))a.push({id:n(l),name:l,numControls:c.length,averageStarLevel:p(c)});return a});function n(a){return a.split(" ").join("-").toLocaleLowerCase()}function p(a){let l=0,c=0;return a.forEach(({StarLevel:d})=>{d!==0&&(l+=d,c++)}),l/c}const u=F(),v=[u.accessor("name",{header:()=>"Area",enableColumnFilter:!1}),u.accessor("numControls",{header:()=>"Total # Controls",enableColumnFilter:!1}),u.accessor("averageStarLevel",{header:()=>"Average Star Level",cell:a=>w(j,{props:{id:a.row.original.id,value:a.getValue()}}),enableColumnFilter:!1}),u.display({id:"actions",header:"Actions",cell:({row:a})=>w(T,{props:{actions:[{id:"view",to:`/client/companies/${s.value}/journey/cyber-maturity-roadmap/${m.value}/${a.original.id}`}]}})})];return{instance:O(i,v)}};f.components=Object.assign({AppTanStackTable:$},f.components);var M=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("AppTanStackTable",{attrs:{table:e.instance}})},N=[];const b={};var U=C(f,M,N,!1,Q,null,null,null);function Q(e){for(let r in b)this[r]=b[r]}const z=function(){return U.exports}(),_={};_.props={value:{key:"value",required:!0,type:null}};_.setup=(e,r)=>{const t=e,s=o(()=>{const i=new Map;for(const[n,p]of Object.entries(t.value))(n==="StandardCode"||n==="Completeness"||n==="Compliance"||n==="Confidence")&&i.set(n,p);return Object.fromEntries(i)});return{imageUrl:o(()=>{const i=new URLSearchParams(s.value);return`${I}/generated-images/black-kite/summary-compliance-entry?${i}`})}};_.components=Object.assign({DotsSquare:A},_.components);var V=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"relative max-w-fit overflow-hidden rounded-2xl bg-gradient-to-br from-blue-100 via-white to-white px-8 pt-8 shadow lg:max-h-72"},[t("div",{staticClass:"absolute top-full left-full -translate-y-1/3 -translate-x-1/3 rotate-45 transform xl:-translate-y-1/2"},[t("DotsSquare",{attrs:{color:"blue"}})],1),t("img",{staticClass:"relative h-64 w-64",attrs:{src:e.imageUrl,alt:e.value.StandardCode}})])},H=[];const x={};var K=C(_,V,H,!1,P,null,null,null);function P(e){for(let r in x)this[r]=x[r]}const W=function(){return K.exports}(),G={read(e){return o(()=>{const r=L.find(t=>t.frameworkId===e.value);if(r)return r.data})}},y={};y.setup=(e,r)=>{const t=h("id"),s=h("frameworkId"),m=G.read(s),i=o(()=>{if(m.value)return k(m.value.Controls,"AreaName")}),n=o(()=>s.value==="cis-csc-20"),p=B(),u=["basic","foundational","organizational"],v=R.list(t),g=o(()=>v.data.value||[]),a=o(()=>{const l=E(g.value,"order");return k(l,"category")});return D(a,l=>{p.value=u.reduce((c,d)=>(c[d]=l[d]||[],c),{})},{immediate:!0}),{id:t,frameworkId:s,framework:m,mappedControls:i,isCis:n,maturity:p,maturityCategories:u,maturityQuery:v}};y.components=Object.assign({FrameworkSummaryDonut:W,ComplianceFrameworkTable:z,TodosChart:q},y.components);var J=function(){var e=this,r=e.$createElement,t=e._self._c||r;return e.framework?t("div",{staticClass:"flex flex-col space-y-8"},[t("div",{staticClass:"-space-y-2"},[t("BaseTypography",{staticClass:"uppercase text-gray-500",attrs:{variant:"overline"}},[e._v(" "+e._s(e.framework.StandardCode)+" ")]),t("BaseTypography",{attrs:{component:"h2",variant:"h5"}},[e._v(" "+e._s(e.framework.StandardFullName)+" ")])],1),t("div",{staticClass:"flex flex-col space-y-8 lg:flex-row lg:space-y-0 lg:space-x-8"},[t("FrameworkSummaryDonut",{attrs:{value:e.framework}}),t("BaseTypography",{staticClass:"flex-1 text-gray-500",attrs:{component:"p",variant:"p1"}},[e._v(" "+e._s(e.framework.StandardDescription)+" ")])],1),e.mappedControls?t("ComplianceFrameworkTable",{attrs:{id:e.id,"framework-id":e.frameworkId,controls:e.mappedControls}}):e._e(),e.isCis?t("BaseSimpleCard",[t("BaseVueQuery",{attrs:{query:e.maturityQuery},scopedSlots:e._u([{key:"success",fn:function(){return[e.maturity?t("TodosChart",{attrs:{"company-id":e.id,categories:e.maturityCategories},model:{value:e.maturity,callback:function(s){e.maturity=s},expression:"maturity"}}):e._e()]},proxy:!0}],null,!1,3916945308)})],1):e._e()],1):e._e()},X=[];const S={};var Y=C(y,J,X,!1,Z,null,null,null);function Z(e){for(let r in S)this[r]=S[r]}const we=function(){return Y.exports}();export{we as default};
