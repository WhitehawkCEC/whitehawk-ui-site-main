import{dm as f,c as a,aI as B,aS as T,n as k,ao as P,c3 as h,dn as A}from"./index.3c5d9360.js";import{A as C,T as E}from"./AppTanStackTable.cc1d883c.js";import{c as j}from"./createOnChangeFn.3a3b3da6.js";import{u as K}from"./createSimpleTable.d835659e.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.4aa169e4.js";import"./chevron-up.736f4142.js";function M(e){switch(e){case f.ProductType.CYBER_RISK:return"Cyber Risk";case f.ProductType.BUSINESS_RISK:return"Business Risk";default:return"N/A"}}const d={};d.props={id:{key:"id",required:!0,type:String},subId:{key:"subId",required:!0,type:String},value:{key:"value",required:!0,type:Array}};d.setup=(e,i)=>{const n=e,c=a(()=>n.id),_=a(()=>n.subId),S=a(()=>n.value),R=a(()=>{const s=[];for(const{products:t}of n.value)s.push(...t);return[...new Set(s.map(t=>t.type))]}),b=a(()=>{var t;const s=new Map;for(const{products:u}of n.value)for(const r of u){const o=(t=r.integration)==null?void 0:t.type;o&&!s.has(o)&&s.set(o,r)}return Array.from(s.values())}),g=B(),x=a(()=>{var t,u;const s=new Map;for(const r of b.value){const o=(t=r.integration)==null?void 0:t.id,p=r.type,l=(u=r.integration)==null?void 0:u.type,y=[];p===f.ProductType.CYBER_RISK?y.push({id:"view",action(){g.push(`/admin/companies/${c.value}/subscriptions/${_.value}/integrations/${l}/entities/${o}/cyber-risk`)}}):p===f.ProductType.BUSINESS_RISK&&y.push({id:"download",action(){g.push(`/admin/companies/${c.value}/subscriptions/${_.value}/integrations/${l}/entities/${o}/cyber-risk`)}}),o&&s.set(o,y)}return s}),m=j(),w=a(()=>[m.group({id:"supplier",header:()=>"Supplier",columns:[m.accessor(s=>{var t;return(t=s.supplier)==null?void 0:t.name},{id:"name",header:()=>"Name"})]}),...R.value.map(s=>m.group({id:s.toString(),header:()=>s?M(s):s.toString(),columns:b.value.map(t=>{var u;return m.accessor(r=>r.products.find(o=>{var p,l;return((p=o.integration)==null?void 0:p.id)===((l=t.integration)==null?void 0:l.id)}),{id:((u=t.integration)==null?void 0:u.id)||"",header:()=>{var r;return`Rating Service ${(r=t.integration)==null?void 0:r.type}`},cell:r=>{var o;return r.getValue!==void 0?T(E,{props:{actions:(o=t.integration)!=null&&o.id?x.value.get(t.integration.id):[]}}):T("span")},enableColumnFilter:!1})})}))]);return{instance:K(S,w)}};d.components=Object.assign({AppTanStackTable:C},d.components);var N=function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("AppTanStackTable",{attrs:{table:e.instance}})},q=[];const $={};var F=k(d,N,q,!1,O,null,null,null);function O(e){for(let i in $)this[i]=$[i]}const H=function(){return F.exports}(),v={};v.setup=(e,i)=>{const n=h("id"),c=h("subscriptionId"),_=A.list(n,c),S=a(()=>_.data.value||[]);return{id:n,subscriptionId:c,suppliers:S}};v.components=Object.assign({PlusSvg:P,SubscriptionSuppliersTable:H},v.components);var U=function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Subscription Suppliers")]},proxy:!0},{key:"button",fn:function(){return[n("BaseButton",{staticClass:"space-x-1",attrs:{to:"./new",append:""}},[n("PlusSvg",{staticClass:"w-5"}),n("span",[e._v("Supplier")])],1)]},proxy:!0},{key:"table",fn:function(){return[n("SubscriptionSuppliersTable",{attrs:{id:e.id,value:e.suppliers,"sub-id":e.subscriptionId}})]},proxy:!0}])})},V=[];const I={};var Y=k(v,U,V,!1,z,null,null,null);function z(e){for(let i in I)this[i]=I[i]}const ee=function(){return Y.exports}();export{ee as default};
