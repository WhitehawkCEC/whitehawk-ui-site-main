import{F as x}from"./FormButton.f84218a0.js";import{ag as k,aT as g,aD as h,aP as l,aQ as m,aB as B,c as d,b1 as y,n as b,bt as $,c8 as q,bH as C,r as M,az as O,aK as F}from"./index.8e466733.js";import{D as I}from"./DynamicForm.4d908363.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";const v={get(e){async function a(){const{data:t}=await l.get(`${m}/companies/${e.value}/black-kite/mapped-entity`);return t}return k(["companies",e,"black-kite","mapped-entity"],a,{retry:!1})},set(e){const a=g();return h(t=>l.put(`${m}/companies/${e.value}/black-kite/mapped-entity`,t).then(n=>n.data),{onSuccess(){a.invalidateQueries(["companies",e,"black-kite","mapped-entity"],{exact:!0})}})}},S={get(e){return k(["companies",e,"black-kite","mapped-entity-entry-options"],()=>l.get(`${m}/companies/${e.value}/black-kite/mapped-entity-entry-options`).then(a=>a.data))}},p={};p.props={value:{key:"value",required:!1,type:null},targetIsReadOnly:{key:"targetIsReadOnly",required:!1,type:Boolean},companies:{key:"companies",required:!0,type:Array},providerOptions:{key:"providerOptions",required:!0,type:Array}};p.setup=(e,a)=>{const t=e,n=a.emit,o=B(t,n),r=d(()=>t.companies.filter(s=>s.status==="ACTIVE").map(({id:s})=>({accountId:s}))),i=d(()=>[{name:"consumer",label:"Consumer",component:{is:y,attrs:{required:!0,options:r.value.map(s=>({text:s.accountId,value:s}))}}},{name:"provider",label:"Black Kite Entity",component:{is:y,attrs:{required:!0,options:t.providerOptions.map(s=>({text:s.data.name,value:s}))}}}]);return{proxy:o,schema:i}};p.components=Object.assign({DynamicForm:I},p.components);var D=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("DynamicForm",{attrs:{schema:e.schema},model:{value:e.proxy,callback:function(n){e.proxy=n},expression:"proxy"}})},Q=[];const _={};var R=b(p,D,Q,!1,j,null,null,null);function j(e){for(let a in _)this[a]=_[a]}const A=function(){return R.exports}(),u={};u.setup=(e,a)=>{const t=q("id"),n=[C.list(),S.get(t)],o=v.get(t),r=M();O(()=>o.data.value,c=>{c&&(r.value=c)},{immediate:!0});const i=F(),s=v.set(t);async function E(){if(r.value){const c=r.value;await s.mutateAsync(c),i.push(`/admin/companies/${t.value}/cyber-risk-rating/rating-service-2/mapped-entity`)}}return{queries:n,mappedEntity:r,updateMappedEntity:E}};u.components=Object.assign({BackButton:$,MappedEntityInput:A,FormButton:x},u.components);var K=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"space-y-6"},[t("BackButton"),t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h2",variant:"subtitle3"}},[e._v(" Update Mapped Entity ")]),t("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),e.updateMappedEntity.apply(null,arguments)}}},[t("BaseVueQueries",{attrs:{queries:e.queries},scopedSlots:e._u([{key:"success",fn:function(n){var o=n[0],r=n[1];return[t("MappedEntityInput",{attrs:{companies:o,"provider-options":r},model:{value:e.mappedEntity,callback:function(i){e.mappedEntity=i},expression:"mappedEntity"}})]}}])}),t("FormButton",{attrs:{action:"update"}})],1)],1)],1)},P=[];const f={};var T=b(u,K,P,!1,U,null,null,null);function U(e){for(let a in f)this[a]=f[a]}const J=function(){return T.exports}();export{J as default};
