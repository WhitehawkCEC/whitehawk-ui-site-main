import{aq as E,aO as q,n as v,c as u,b6 as j,bm as D,aH as I,aS as p}from"./index.ef503185.js";import{C as M}from"./CognitoUserStatusDisplay.46b690cb.js";import{U as V}from"./UserGravatarDisplay.097a1609.js";import{A as w,T as B}from"./AppTanStackTable.0cedb5ad.js";import{c as R}from"./createOnChangeFn.2ea319af.js";import{a as H}from"./attributeListToMap.bea9f70d.js";import{u as L}from"./createSimpleTable.ab7c9f94.js";const m={};m.props={value:{key:"value",required:!0,type:Boolean}};m.setup=(s,t)=>({});m.components=Object.assign({CheckSvg:E,XSvg:q},m.components);var O=function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"pointer-events-none inline-flex shrink-0 rounded-full bg-gray-100 shadow-inner"},[s.value?[n("CheckSvg",{staticClass:"h-auto w-5 text-teal-500"})]:[n("XSvg",{staticClass:"h-auto w-5 text-red-500"})]],2)},X=[];const b={};var z=v(m,O,X,!1,G,null,null,null);function G(s){for(let t in b)this[t]=b[t]}const N=function(){return z.exports}(),f={};f.props={value:{key:"value",required:!0,type:Array}};f.setup=(s,t)=>({});var J=function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ul",{staticClass:"flex max-w-xs flex-wrap space-x-1"},s._l(s.value,function(o,d){return n("li",{key:o.id},[n("BaseLink",{attrs:{to:o.link}},[n("BaseTypography",{attrs:{variant:"p2"}},[s._v(" "+s._s(d+1!==s.value.length?o.name+",":o.name)+" ")])],1)],1)}),0)},K=[];const y={};var P=v(f,J,K,!1,Q,null,null,null);function Q(s){for(let t in y)this[t]=y[t]}const W=function(){return P.exports}(),_={};_.props={users:{key:"users",required:!0,type:Array},companyAccess:{key:"companyAccess",required:!1,type:Array},bulkActions:{key:"bulkActions",required:!1,type:Array}};_.setup=(s,t)=>{const n=s,o=u(()=>{const e=new Map;if(n.companyAccess)for(const{company:a,user:r}of n.companyAccess){const i=r.id,c=e.get(i);c?c.push(a):e.set(i,[a])}for(const a of e.values())a.sort((r,i)=>r.name.localeCompare(i.name));return e}),d=u(()=>n.users.map(({Username:e,Enabled:a,UserStatus:r,Attributes:i})=>{const c=H(i||[]),U=c.sub,T=o.value.get(U)||[],F=g(T);return{username:e||"",enabled:a||!1,userStatus:r,attributes:c,companies:F}}));function g(e){return e.map(a=>({...a,link:`/admin/companies/${encodeURIComponent(a.id)}/`}))}const C=j(),S=D(),k=u(()=>{var e;return(e=S.user)==null?void 0:e.id}),x=I(),A=u(()=>x.id),l=R(),$=[l.accessor(e=>e.attributes.email,{id:"email",header:()=>"Email",cell:e=>p(V,{props:{value:e.getValue()}}),enableColumnFilter:!1}),l.accessor(e=>e.attributes.name,{id:"name",header:()=>"Name",enableColumnFilter:!1}),l.accessor("userStatus",{header:()=>"Status",cell:e=>p(M,{props:{value:e.getValue()}}),enableColumnFilter:!1}),l.accessor("companies",{header:()=>"Companies",cell:e=>p(W,{props:{value:e.getValue()}}),enableColumnFilter:!1}),l.accessor("enabled",{header:()=>"Enabled",cell:e=>p(N,{props:{value:e.getValue()}}),enableColumnFilter:!1}),l.display({id:"actions",header:"Actions",cell:({row:e})=>p(B,{props:{actions:[{id:"edit",to:`/admin/users/${e.original.username}`},{id:"impersonate",action(){const a=e.original,r={username:a.username,id:a.attributes.sub,email:a.attributes.email,name:a.attributes.name,phone:a.attributes.phone_number};C.set(r)},isDisabled:u(()=>e.original.attributes.sub===A.value||e.original.attributes.sub===k.value)}]}})})];return{instance:L(d,$)}};_.components=Object.assign({AppTanStackTable:w},_.components);var Y=function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("AppTanStackTable",{attrs:{table:s.instance,"table-actions":s.bulkActions}})},Z=[];const h={};var ee=v(_,Y,Z,!1,se,null,null,null);function se(s){for(let t in h)this[t]=h[t]}const ue=function(){return ee.exports}();export{ue as C};
