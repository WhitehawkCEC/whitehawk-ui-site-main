import{c as u,I as $,d as m,n as y,P as S,bH as _}from"./index.fe9d2f8c.js";import{A as x,T as q}from"./AppTanStackTable.4927e420.js";import{I as f}from"./IsoDateTimeDisplay.595f4918.js";import{c as A}from"./createOnChangeFn.d25aa2df.js";import{u as B}from"./createSimpleTable.83dce080.js";import{u as C}from"./useAccountSubscriptionProductLicenseBatches.b24f3da8.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.13190e23.js";import"./chevron-up.736f4142.js";import"./message_pb.6614592e.js";const l={};l.props={companyId:{key:"companyId",required:!0,type:String},subId:{key:"subId",required:!0,type:String},prodId:{key:"prodId",required:!0,type:String},value:{key:"value",required:!0,type:Array},hasPermissions:{key:"hasPermissions",required:!1,type:Boolean,default:!0}};l.setup=(n,r)=>{const s=n,i=u(()=>s.companyId),c=u(()=>s.subId),d=u(()=>s.prodId),h=u(()=>s.value),T=u(()=>s.hasPermissions?`/admin/companies/${i.value}/subscriptions/${c.value}/products/${d.value}`:`/client/companies/${i.value}/subscriptions/${c.value}/products/${d.value}`),I=$(),o=A(),g=u(()=>[o.accessor(t=>{var e;return(e=t.validity)==null?void 0:e.start},{id:"startDate",header:()=>"Start Date",cell:t=>m(f,{props:{value:t.getValue()}}),enableColumnFilter:!1}),o.accessor(t=>{var e;return(e=t.validity)==null?void 0:e.end},{id:"endDate",header:()=>"End Date",cell:t=>m(f,{props:{value:t.getValue()}}),enableColumnFilter:!1}),o.group({id:"oneTimeLicenses",header:()=>"One Time Licenses",columns:[o.accessor(t=>{var e,a;return(a=(e=t.counts)==null?void 0:e.oneTime)==null?void 0:a.quantity},{id:"oneTimeTotal",header:()=>"Total",enableColumnFilter:!1}),o.accessor(t=>{var e,a;return(a=(e=t.counts)==null?void 0:e.oneTime)==null?void 0:a.quantity},{id:"oneTimeAvailable",header:()=>"Available",enableColumnFilter:!1}),o.accessor(t=>{var e,a;return(a=(e=t.counts)==null?void 0:e.oneTime)==null?void 0:a.quantity},{id:"oneTimeUsed",header:()=>"Used",enableColumnFilter:!1})],enableGrouping:!0}),o.group({id:"annualLicenses",header:()=>"Annual Licenses",columns:[o.accessor(t=>{var e,a;return(a=(e=t.counts)==null?void 0:e.annual)==null?void 0:a.quantity},{id:"annualTotal",header:()=>"Total",enableColumnFilter:!1}),o.accessor(t=>{var e,a;return(a=(e=t.counts)==null?void 0:e.annual)==null?void 0:a.quantity},{id:"annualAvailable",header:()=>"Available",enableColumnFilter:!1}),o.accessor(t=>{var e,a;return(a=(e=t.counts)==null?void 0:e.annual)==null?void 0:a.quantity},{id:"annualUsed",header:()=>"Used",enableColumnFilter:!1})],enableGrouping:!0}),o.display({id:"actions",header:"Actions",cell:({row:t})=>m(q,{props:{actions:[{id:"edit",action(){var e;I.push(`${T.value}/license-batches/${(e=t.original.id)==null?void 0:e.value}`)}}].filter(e=>s.hasPermissions?e:e.id!=="edit")}})})]);return{instance:B(h,g.value)}};l.components=Object.assign({AppTanStackTable:x},l.components);var L=function(){var n=this,r=n.$createElement,s=n._self._c||r;return s("AppTanStackTable",{attrs:{table:n.instance}})},k=[];const v={};var P=y(l,L,k,!1,F,null,null,null);function F(n){for(let r in v)this[r]=v[r]}const U=function(){return P.exports}(),p={};p.setup=(n,r)=>{const s=_("id"),i=_("subscriptionId"),c=_("productId"),d=C.list(s,i,c);return{id:s,subscriptionId:i,productId:c,licenseBatchList:d}};p.components=Object.assign({PlusSvg:S,LicenseBatchUsageTable:U},p.components);var D=function(){var n=this,r=n.$createElement,s=n._self._c||r;return s("BaseTablePageLayout",{scopedSlots:n._u([{key:"title",fn:function(){return[n._v("License Batch Usage")]},proxy:!0},{key:"button",fn:function(){return[s("BaseButton",{staticClass:"space-x-2",attrs:{append:"",to:"new"}},[s("PlusSvg",{staticClass:"h-4 w-4"}),s("span",[n._v("License Batch")])],1)]},proxy:!0},{key:"table",fn:function(){return[s("BaseVueQuery",{attrs:{query:n.licenseBatchList},scopedSlots:n._u([{key:"success",fn:function(i){var c=i.data;return[s("LicenseBatchUsageTable",{attrs:{"company-id":n.id,"sub-id":n.subscriptionId,"prod-id":n.productId,value:c}})]}}])})]},proxy:!0}])})},j=[];const b={};var E=y(p,D,j,!1,R,null,null,null);function R(n){for(let r in b)this[r]=b[r]}const X=function(){return E.exports}();export{X as default};
