import{F as $}from"./FormButton.8b5775bd.js";import{B as b}from"./BackButton.adbd2e56.js";import{D as h}from"./DynamicForm.2e4a1588.js";import{ah as k,aS as B,aD as g,aO as m,aP as l,aB as q,c as d,a$ as y,n as x,bY as C,bC as O,r as M,aA as S,aI as F}from"./index.e8125a1f.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./chevron-left.0808b01b.js";const v={get(e){async function a(){const{data:t}=await m.get(`${l}/companies/${e.value}/black-kite/mapped-entity`);return t}return k(["companies",e,"black-kite","mapped-entity"],a,{retry:!1})},update(e){const a=B();return g(t=>m.put(`${l}/companies/${e.value}/black-kite/mapped-entity`,t).then(n=>n.data),{onSuccess(){a.invalidateQueries(["companies",e,"black-kite","mapped-entity"],{exact:!0})}})}},I={get(e){return k(["companies",e,"black-kite","mapped-entity-entry-options"],()=>m.get(`${l}/companies/${e.value}/black-kite/mapped-entity-entry-options`).then(a=>a.data))}},p={};p.props={value:{key:"value",required:!1,type:null},targetIsReadOnly:{key:"targetIsReadOnly",required:!1,type:Boolean},companies:{key:"companies",required:!0,type:Array},providerOptions:{key:"providerOptions",required:!0,type:Array}};p.setup=(e,a)=>{const t=e,n=a.emit,o=q(t,n),r=d(()=>t.companies.map(({id:s})=>({accountId:s}))),i=d(()=>[{name:"consumer",label:"Consumer",component:{is:y,attrs:{required:!0,options:r.value.map(s=>({text:s.accountId,value:s}))}}},{name:"provider",label:"Black Kite Entity",component:{is:y,attrs:{required:!0,options:t.providerOptions.map(s=>({text:s.data.name,value:s}))}}}]);return{proxy:o,schema:i}};p.components=Object.assign({DynamicForm:h},p.components);var D=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("DynamicForm",{attrs:{schema:e.schema},model:{value:e.proxy,callback:function(n){e.proxy=n},expression:"proxy"}})},R=[];const _={};var Q=x(p,D,R,!1,j,null,null,null);function j(e){for(let a in _)this[a]=_[a]}const A=function(){return Q.exports}(),u={};u.setup=(e,a)=>{const t=C("id"),n=[O.list(),I.get(t)],o=v.get(t),r=M();S(()=>o.data.value,c=>{c&&(r.value=c)},{immediate:!0});const i=F(),s=v.update(t);async function E(){if(r.value){const c=r.value;await s.mutateAsync(c),i.push(`/admin/companies/${t.value}/rating-service-2/mapped-entity`)}}return{id:t,queries:n,mappedEntity:r,updateMappedEntity:E}};u.components=Object.assign({BackButton:b,MappedEntityInput:A,FormButton:$},u.components);var K=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"space-y-6"},[t("BackButton",{attrs:{link:`/admin/companies/${e.id}/rating-service-2/access`}}),t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h2",variant:"subtitle3"}},[e._v(" Update Mapped Entity ")]),t("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),e.updateMappedEntity.apply(null,arguments)}}},[t("BaseVueQueries",{attrs:{queries:e.queries},scopedSlots:e._u([{key:"success",fn:function(n){var o=n[0],r=n[1];return[t("MappedEntityInput",{attrs:{companies:o,"provider-options":r},model:{value:e.mappedEntity,callback:function(i){e.mappedEntity=i},expression:"mappedEntity"}})]}}])}),t("FormButton",{attrs:{action:"update"}})],1)],1)],1)},P=[];const f={};var U=x(u,K,P,!1,w,null,null,null);function w(e){for(let a in f)this[a]=f[a]}const N=function(){return U.exports}();export{N as default};
