import{E as B}from"./exclamation-triangle.54812a62.js";import{T as P}from"./trash.78f57a7a.js";import{n as v,d as _,aJ as k,aT as p,aq as A,c1 as R,cG as E,r as m,aG as j}from"./index.fe4a1600.js";import{B as F}from"./BasicModal.a6abc80d.js";import{A as I,R as N}from"./RowSelectionInput.7e1b5216.js";import{A as q,T as V}from"./AppTanStackTable.cb2c6540.js";import{c as D}from"./createOnChangeFn.72ed5fb8.js";import{u as z}from"./createSimpleTable.cdf94e2f.js";import{u as h}from"./useManufacturerProducts.40c56674.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.b4a8878c.js";import"./chevron-up.736f4142.js";var G=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("svg",{staticClass:"h-6 w-6",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M3.75 12a.75.75 0 01.75-.75h15a.75.75 0 010 1.5h-15a.75.75 0 01-.75-.75z","clip-rule":"evenodd"}})])},H=[];const O={},x={};var Q=v(O,G,H,!1,W,null,null,null);function W(t){for(let s in x)this[s]=x[s]}const J=function(){return Q.exports}(),u={};u.props={id:{key:"id",required:!0,type:String},products:{key:"products",required:!0,type:Array}};u.setup=(t,s)=>{const e=t,r=s.emit,n=_(()=>e.products),c=k(),a=D(),l=[a.display({id:"select",header:({table:o})=>p(I,{props:{table:o}}),cell:({row:o})=>p(N,{props:{row:o}})}),a.accessor("id",{header:()=>"Id",enableColumnFilter:!0}),a.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),a.accessor(o=>o.type.name,{id:"type",header:()=>"Type",enableColumnFilter:!1}),a.display({id:"actions",header:"Actions",cell:({row:o})=>p(V,{props:{actions:[{id:"view",action(){c.push(`/admin/manufacturers/${e.id}/products/${o.original.id}`)}},{id:"delete",action(){r("delete",o.original)}}]}})})];return{instance:z(n,l)}};u.components=Object.assign({AppTanStackTable:q},u.components);var L=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("AppTanStackTable",{attrs:{table:t.instance}})},K=[];const w={};var U=v(u,L,K,!1,X,null,null,null);function X(t){for(let s in w)this[s]=w[s]}const Y=function(){return U.exports}(),d={};d.setup=(t,s)=>{const e=R("id"),r=h.list(e),n=E.get(e),c=m(),a=m(),l=m(!1),f=_(()=>{var i;return(i=n==null?void 0:n.data)==null?void 0:i.value});function o(i){const{id:$,name:M}=i;c.value=$,a.value=M,l.value=!0}const b=h.delete(e,c),S=j(),C=_(()=>a.value?a.value:"");async function T(){if(c)await b.mutateAsync(),y(),S.success(`Successfully deleted ${C.value} product.`);else throw new Error("Invalid request.")}function y(){l.value=!1}return{id:e,productsQuery:r,productName:a,isModalVisible:l,totalProducts:f,setPayload:o,deleteProduct:T,closeModal:y}};d.components=Object.assign({PlusSvg:A,MinusSvg:J,ManufacturerProductsTable:Y,BasicModal:F,WarningSvg:B,TrashSvg:P},d.components);var Z=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",[t._v(" "+t._s(t.productName)+" "),e("BaseTablePageLayout",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Products")]},proxy:!0},{key:"button",fn:function(){return[e("div",{staticClass:"flex space-x-4"},[e("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{to:`/admin/manufacturers/${t.id}/products/new`}},[e("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),e("span",[t._v("Product")])],1),e("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{"display-type":"danger",action:"secondary",disabled:!0}},[e("MinusSvg",{staticClass:"h-auto w-4 xl:w-5"}),e("span",[t._v("Products")])],1)],1)]},proxy:!0},{key:"table",fn:function(){return[e("BaseVueQuery",{attrs:{query:t.productsQuery},scopedSlots:t._u([{key:"success",fn:function(r){var n=r.data;return[e("ManufacturerProductsTable",{attrs:{id:t.id,products:n},on:{delete:t.setPayload}})]}}])})]},proxy:!0}])}),e("BasicModal",{directives:[{name:"show",rawName:"v-show",value:t.isModalVisible,expression:"isModalVisible"}],on:{close:t.closeModal},scopedSlots:t._u([{key:"body",fn:function(){return[e("div",{staticClass:"flex flex-col items-center justify-center space-y-8 px-5"},[e("BaseIcon",{staticClass:"mx-auto max-w-min lg:mx-0 lg:max-w-none",attrs:{color:"danger",shape:"round"}},[e("WarningSvg",{staticClass:"h-auto w-5"})],1),e("BaseTypography",{staticClass:"text-gray-500",attrs:{component:"h2",variant:"subtitle3"}},[t._v(" Are you sure you want to delete "),e("span",{staticClass:"text-red-500"},[t._v(t._s(t.productName))]),t._v(" product? "),t.totalProducts===1?e("BaseTypography",{staticClass:"text-gray-500",attrs:{component:"h2",variant:"subtitle3"}},[e("span",{staticClass:"text-red-500"},[t._v(t._s(t.id))]),t._v(" manufacturer will be without single product. ")]):t._e()],1),e("div",{staticClass:"py-4"},[e("BaseButton",{attrs:{"display-type":"danger",action:"secondary"},on:{click:t.deleteProduct}},[e("TrashSvg",{staticClass:"h-auto w-4 xl:w-5"}),e("span",[t._v("Delete")])],1)],1)],1)]},proxy:!0}])})],1)},tt=[];const g={};var et=v(d,Z,tt,!1,st,null,null,null);function st(t){for(let s in g)this[s]=g[s]}const vt=function(){return et.exports}();export{vt as default};
