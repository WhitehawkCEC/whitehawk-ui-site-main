import{R as F}from"./arrow-path.24b87f73.js";import{c as o,aS as A,n as I,L as B,aF as E,cF as x,cG as h,cO as k,cI as L,cJ as w,b$ as j,cP as q,cQ as M,cM as P}from"./index.56aaec41.js";import{A as V}from"./AppTanStackTable.9cdb1a41.js";import{S as T,V as N,a as G}from"./SyncStatusDisplay.7de2e857.js";import{c as U}from"./createOnChangeFn.ae1a472d.js";import{u as Y}from"./createSimpleTable.a725eed3.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.f9805d91.js";import"./check-circle.48e4a9f5.js";import"./chevron-up.736f4142.js";const f={};f.props={value:{key:"value",required:!0,type:Array}};f.setup=(e,n)=>{const s=e,y=o(()=>s.value),l=U(),i=[l.accessor("toBeSynced",{header:()=>"To Be Synced",cell:c=>A(T,{props:{value:c.getValue()}}),enableColumnFilter:!1}),l.group({id:"supplier",header:()=>"Supplier",columns:[l.accessor(c=>c.supplier.name,{id:"name",header:()=>"Name",enableColumnFilter:!1}),l.accessor(c=>c.supplier.name,{id:"domain",header:()=>"Domain",enableColumnFilter:!1})]}),l.accessor("syncedFromSupplyWisdom",{header:()=>"Synced From Supply Wisdom?",cell:c=>A(T,{props:{value:c.getValue()}}),enableColumnFilter:!1}),l.accessor("syncedFromCyberOne",{header:()=>"Synced From CyberOne?",cell:c=>A(T,{props:{value:c.getValue()}}),enableColumnFilter:!1})];return{instance:Y(y,i)}};f.components=Object.assign({AppTanStackTable:V},f.components);var H=function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("AppTanStackTable",{attrs:{table:e.instance}})},K=[];const $={};var z=I(f,H,K,!1,J,null,null,null);function J(e){for(let n in $)this[n]=$[n]}const Q=function(){return z.exports}(),g={};g.props={accountId:{key:"accountId",required:!0,type:String},vrmSync:{key:"vrmSync",required:!0,type:null},assets:{key:"assets",required:!0,type:Array},supplyWisdomAssets:{key:"supplyWisdomAssets",required:!0,type:Array}};g.setup=(e,n)=>{const s=e,y=o(()=>s.accountId),l=o(()=>s.supplyWisdomAssets.map(({webSiteUrl:t})=>t)),i=o(()=>s.assets.map(({domain:t})=>t)),m=o(()=>s.assets.map(({referenceId:t,name:u,domain:a})=>{var r;return{supplyWisdomId:(r=s.supplyWisdomAssets.find(p=>p.webSiteUrl===a))==null?void 0:r.id,cyberOneId:t,name:u,domain:a}})),c=o(()=>m.value.map(t=>({supplier:t,syncedFromSupplyWisdom:t.domain?l.value.includes(t.domain):void 0,syncedFromCyberOne:t.domain?i.value.includes(t.domain):void 0,toBeSynced:t.domain?l.value.includes(t.domain)&&i.value.includes(t.domain):void 0}))),S=o(()=>{const t=[];return c.value.forEach(u=>{if(u.toBeSynced){const{supplyWisdomId:a,cyberOneId:r}=u.supplier;a&&t.push({target:{oneofKind:"cyberOneAssetId",cyberOneAssetId:r},source:{oneofKind:"supplyWisdomAssetId",supplyWisdomAssetId:a}})}}),t}),_=E(),v=x.create(y);async function d(){const t={syncType:h.SyncType.SUPPLY_WISDOM_TO_CYBER_ONE,entries:S.value},u=await v.mutateAsync(t);if(u){const a=u.response.syncId;_.success(`Sync ID: ${a}`)}}return{rows:c,mappings:S,syncCreate:v,createSync:d}};g.components=Object.assign({VrmSyncStatusDisplay:N,LoadingSpinner:B,SyncSvg:F,BusinessRatingSyncTable:Q},g.components);var X=function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("section",{staticClass:"space-y-6"},[s("div",{staticClass:"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0"},[s("VrmSyncStatusDisplay",{attrs:{header:"Business Rating Sync",sync:e.vrmSync}}),s("BaseButton",{staticClass:"space-x-1",attrs:{disabled:e.mappings.length===0,shape:"rectangle"},on:{click:e.createSync}},[e.syncCreate.isLoading.value?s("LoadingSpinner"):s("SyncSvg",{staticClass:"w-4 xl:w-5"}),s("span",[e._v("Sync")])],1)],1),s("BusinessRatingSyncTable",{attrs:{value:e.rows}})],1)},Z=[];const W={};var ee=I(g,X,Z,!1,se,null,null,null);function se(e){for(let n in W)this[n]=W[n]}const te=function(){return ee.exports}(),b={};b.props={accountId:{key:"accountId",required:!0,type:String},syncType:{key:"syncType",required:!0,type:null},mappedTarget:{key:"mappedTarget",required:!1,type:String}};b.setup=(e,n)=>{const s=e,y=o(()=>s.accountId),l=k.get(y),i=o(()=>l.data.value),m=L.get(y),c=o(()=>{var d;return(d=m.data.value)==null?void 0:d.mappedAssetId}),S=w.get(y),_=o(()=>S.data.value);return{syncStatus:o(()=>{var d,t,u,a,r,p;return{source:{mappedSource:s.mappedTarget,syncDate:(t=(d=i.value)==null?void 0:d.lastSynced)==null?void 0:t.value,syncedReports:(u=i.value)==null?void 0:u.reportsSynced},target:{mappedTarget:c.value,syncDate:(r=(a=_.value)==null?void 0:a.lastSynced)==null?void 0:r.value,syncedReports:(p=_.value)==null?void 0:p.reportsSynced}}})}};b.components=Object.assign({SyncStatusDisplay:G},b.components);var ne=function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("SyncStatusDisplay",{attrs:{"sync-status":e.syncStatus,"sync-type":e.syncType}})},ae=[];const D={};var ce=I(b,ne,ae,!1,oe,null,null,null);function oe(e){for(let n in D)this[n]=D[n]}const re=function(){return ce.exports}(),C={};C.setup=(e,n)=>{const s=j("id"),y=q.get(s),l=o(()=>{var a;return(a=y.data.value)==null?void 0:a.targetName}),i=x.list(s),m=o(()=>i.data.value?i.data.value.sort((a,r)=>{let p="",O="";return a.lastSynced&&a.lastSynced.value&&r.lastSynced&&r.lastSynced.value&&(p=a.lastSynced.value,O=r.lastSynced.value),p.localeCompare(O)}):[]),c=o(()=>m.value.find(a=>a.syncType===h.SyncType.SUPPLY_WISDOM_TO_CYBER_ONE)),S=M.list(s),_=o(()=>S.data.value||[]),v=P.list(s),d=o(()=>v.data.value||[]),t=o(()=>{var a,r,p;return{syncDate:(r=(a=c.value)==null?void 0:a.lastSynced)==null?void 0:r.value,syncedReports:(p=c.value)==null?void 0:p.numSynced}}),u=o(()=>c.value?c.value.syncType:h.SyncType.UNSPECIFIED);return{id:s,mappedTarget:l,supplyWisdomAssets:_,assets:d,sync:t,syncType:u}};C.components=Object.assign({BusinessRatingSyncStatusDisplay:re,BusinessRatingSyncDisplay:te},C.components);var le=function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("main",{staticClass:"space-y-6"},[s("BusinessRatingSyncStatusDisplay",{attrs:{"account-id":e.id,"sync-type":e.syncType,"mapped-target":e.mappedTarget}}),s("BusinessRatingSyncDisplay",{attrs:{"account-id":e.id,"vrm-sync":e.sync,"supply-wisdom-assets":e.supplyWisdomAssets,assets:e.assets}})],1)},ue=[];const R={};var ie=I(C,le,ue,!1,pe,null,null,null);function pe(e){for(let n in R)this[n]=R[n]}const Ie=function(){return ie.exports}();export{Ie as default};
