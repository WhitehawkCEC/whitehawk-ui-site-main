import{F as h}from"./FormButton.21628beb.js";import{aB as k,c as v,bN as x,n as _,bt as C,c0 as m,cf as B,c9 as D,aF as I,aI as q}from"./index.a5d95c10.js";import{D as $}from"./DynamicForm.9abebbae.js";import{S as P}from"./SubscriptionProductConfigInput.923a241a.js";import{D as F}from"./DateRangeInput.0a1cf5bf.js";import{D as w}from"./DateRangeDisplay.33f27fd4.js";import{u as j}from"./useAccountSubscriptionValidity.98307fc0.js";import{s as O}from"./index.bab799c9.js";import{a as A}from"./index.ff0a8fd8.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./ApiTokenInput.39faadb4.js";import"./arrow-top-right-on-square.b063d2af.js";import"./ApiKeyDescriptionDisplay.8c53fc63.js";import"./useBitsightCompanies.f0916f3b.js";import"./ApiKeyInput.18576d6b.js";import"./ApiKeyValidation.558053bc.js";import"./useBlackKiteEntities.b41f07a0.js";import"./index.8dc6a68e.js";import"./index.d8c77ff9.js";import"./index.7a54c9f6.js";import"./index.87e44ac4.js";import"./index.4ab0840f.js";import"./index.a751ac09.js";import"./IsoDateTimeDisplay.f162f50e.js";import"./index.5666a40e.js";const n={};n.props={id:{key:"id",required:!0,type:String},value:{key:"value",required:!0,type:null}};n.setup=(t,a)=>{const e=t,s=a.emit,r=k(e,s),p=v(()=>e.id),i=[{name:"name",label:"Name",component:{is:x,attrs:{required:!0,class:"w-full lg:max-w-sm"}}},{name:"validity",label:"Validity",component:{is:F,attrs:{required:!0}}},{name:"config",label:"Config",component:{is:P,attrs:{required:!0,id:p.value}}}];return{proxy:r,schema:i}};n.components=Object.assign({DynamicForm:$},n.components);var N=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("DynamicForm",{attrs:{schema:t.schema},model:{value:t.proxy,callback:function(s){t.proxy=s},expression:"proxy"}})},V=[];const d={};var E=_(n,N,V,!1,G,null,null,null);function G(t){for(let a in d)this[a]=d[a]}const K=function(){return E.exports}(),u={};u.setup=(t,a)=>{const e=m("id"),s=m("subscriptionId"),r=new Date,p=A(r,1),i=j.get(e,s),l=O(v(()=>{var o,c;return{name:"",config:{value:{oneofKind:"cyberRiskRatingBk",cyberRiskRatingBk:B.CyberRiskRatingBlackKiteConfig.create()}},validity:{start:{value:r.toISOString()},end:{value:((c=(o=i.data.value)==null?void 0:o.end)==null?void 0:c.value)||p.toISOString()}}}})),y=D.create(e,s),b=I(),g=q();async function R(){var o;if(l.value){const c=await y.mutateAsync(l.value);b.success("Created product");const S=((o=c.response.productId)==null?void 0:o.value)||"";g.push({path:`../${S}`,append:!0})}}return{id:e,subscriptionId:s,validityGet:i,createRequest:l,submit:R}};u.components=Object.assign({BackButton:C,DateRangeDisplay:w,SubscriptionProductPartialCreateRequestInput:K,FormButton:h},u.components);var M=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"space-y-6"},[e("BackButton",{attrs:{link:`/admin/companies/${t.id}/subscriptions/${t.subscriptionId}/products`}}),e("BaseSimpleCard",{staticClass:"divide-y overflow-hidden"},[e("BaseTypography",{staticClass:"block p-4",attrs:{variant:"subtitle3"}},[t._v(" Create Subscription Product ")]),e("div",{staticClass:"p-4"},[e("BaseVueQuery",{attrs:{query:t.validityGet},scopedSlots:t._u([{key:"success",fn:function(s){var r=s.data;return[e("DateRangeDisplay",{attrs:{value:r}})]}}])})],1),e("form",{staticClass:"divide-y",on:{submit:function(s){return s.preventDefault(),t.submit.apply(null,arguments)}}},[e("SubscriptionProductPartialCreateRequestInput",{attrs:{id:t.id},model:{value:t.createRequest,callback:function(s){t.createRequest=s},expression:"createRequest"}}),e("FormButton",{attrs:{action:"create"}})],1)],1)],1)},z=[];const f={};var Q=_(u,M,z,!1,T,null,null,null);function T(t){for(let a in f)this[a]=f[a]}const bt=function(){return Q.exports}();export{bt as default};
