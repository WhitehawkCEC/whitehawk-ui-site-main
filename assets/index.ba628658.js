import{U as R}from"./arrow-down-on-square.bf61cdc5.js";import{T as U}from"./trash.78f57a7a.js";import{ai as T,aR as E,aS as O,aD as M,n as m,aA as J,c2 as W,r as x,bJ as p,aC as C,aK as z,aH as H,cu as S,aI as K,d as l,aJ as L}from"./index.9ca2001c.js";import{C as N,u as G}from"./CompanyInput.e38187d4.js";import{c as V}from"./cloneDeep.2c3ead96.js";import"./DynamicForm.bf497f65.js";import"./AddressClaimInput.d96c50a8.js";import"./index.b3f46940.js";import"./FormValidation.907ef868.js";import"./_Uint8Array.a8376c42.js";import"./keys.de6f5ed8.js";import"./_baseAssignValue.88dbe96f.js";import"./_copyArray.56331c81.js";const X={list(){return T(["company-features"],()=>E.get(`${O}/company-features`).then(e=>e.data))}},y={};y.props={value:{key:"value",required:!1,type:Array},options:{key:"options",required:!0,type:Array}};y.setup=(e,a)=>{const t=e,s=a.emit;return{proxy:M(t,s)}};var Y=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",{staticClass:"grid gap-4 lg:grid-cols-2 xl:grid-cols-3"},e._l(e.options,function(s){return t("BaseLabel",{key:s.id,staticClass:"flex items-center space-x-1"},[t("BaseInput",{attrs:{type:"checkbox",value:s,disabled:!0},model:{value:e.proxy,callback:function(n){e.proxy=n},expression:"proxy"}}),t("span",[e._v(e._s(s.display))])],1)}),1)},Z=[];const h={};var ee=m(y,Y,Z,!1,te,null,null,null);function te(e){for(let a in h)this[a]=h[a]}const se=function(){return ee.exports}(),i={};i.props={value:{key:"value",required:!1,type:null},options:{key:"options",required:!0,type:Array}};i.setup=(e,a)=>{const t=e,s=a.emit;return{proxy:J(t,s)}};i.components=Object.assign({FeaturesInput:se},i.components);var ae=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("FeaturesInput",{staticClass:"p-4",attrs:{options:e.options},model:{value:e.proxy.features,callback:function(s){e.$set(e.proxy,"features",s)},expression:"proxy.features"}})},ne=[];const b={};var oe=m(i,ae,ne,!1,re,null,null,null);function re(e){for(let a in b)this[a]=b[a]}const ie=function(){return oe.exports}(),u={};u.setup=(e,a)=>{const t=W("id"),s=x(),n=p.read(t),r=G.list();C(()=>n.data.value,o=>{o&&(s.value=V(o))},{immediate:!0});const g=z(),d=H(),$=p.update(t);async function k(){s.value&&(await $.mutateAsync(s.value),d.success("Saved"))}const B=p.delete(t);async function A(){await B.mutateAsync(),g.push("/companies")}const c=x(),w=X.list(),I=S.read(t),P=K(),v=l(()=>P.company);C(()=>I.data.value,o=>{o&&v.value&&(c.value={company:v.value,features:o.features})},{immediate:!0});const Q=S.update(t);async function D(){c.value&&(await Q.mutateAsync(c.value),d.success("Saved"))}const f=L(),j=l(()=>f.isAdmin),q=l(()=>{var _;return((_=f.email)==null?void 0:_.split("@")[1])=="whitehawk.com"&&j.value});return{company:s,industriesQuery:r,updateCompany:k,deleteCompany:A,companyFeatures:c,featuresQuery:w,saveFeatures:D,isWhitehawkAdmin:q,enableFeaturePermission:!1}};u.components=Object.assign({CompanyInput:N,SaveSvg:R,TrashSvg:U,CompanyFeaturesPermissionInput:ie},u.components);var ce=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",{staticClass:"space-y-6"},[t("ClientOnly",[t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h3",variant:"subtitle3"}},[e._v(" Attributes ")]),t("form",{staticClass:"flex flex-col divide-y",on:{submit:function(s){return s.preventDefault(),e.updateCompany.apply(null,arguments)}}},[t("BaseVueQuery",{attrs:{query:e.industriesQuery},scopedSlots:e._u([{key:"success",fn:function(s){var n=s.data;return[t("CompanyInput",{attrs:{industries:n,"is-readonly":!0},model:{value:e.company,callback:function(r){e.company=r},expression:"company"}})]}}])}),t("div",{staticClass:"flex flex-col space-y-2 p-4 md:flex-row md:items-center md:space-x-2 md:space-y-0"},[t("BaseButton",{staticClass:"space-x-2"},[t("SaveSvg",{staticClass:"w-5"}),t("span",[e._v("Save")])],1),e.isWhitehawkAdmin?t("BaseButton",{staticClass:"space-x-2",attrs:{type:"button",action:"secondary","display-type":"danger"},on:{click:e.deleteCompany}},[t("TrashSvg",{staticClass:"w-5"}),t("span",[e._v("Delete")])],1):e._e()],1)],1)],1),t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{component:"h2",variant:"subtitle3"}},[e._v(" Edit Permissions ")]),t("form",{staticClass:"divide-y",on:{submit:function(s){return s.preventDefault(),e.saveFeatures.apply(null,arguments)}}},[t("BaseVueQuery",{attrs:{query:e.featuresQuery},scopedSlots:e._u([{key:"success",fn:function(s){var n=s.data;return[t("CompanyFeaturesPermissionInput",{attrs:{options:n},model:{value:e.companyFeatures,callback:function(r){e.companyFeatures=r},expression:"companyFeatures"}})]}}])}),e.enableFeaturePermission?t("div",{staticClass:"p-4"},[t("BaseButton",{staticClass:"space-x-2"},[t("SaveSvg",{staticClass:"w-5"}),t("span",[e._v("Save")])],1)],1):e._e()],1)],1)],1)],1)},ue=[];const F={};var pe=m(u,ce,ue,!1,le,null,null,null);function le(e){for(let a in F)this[a]=F[a]}const ke=function(){return pe.exports}();export{ke as default};
