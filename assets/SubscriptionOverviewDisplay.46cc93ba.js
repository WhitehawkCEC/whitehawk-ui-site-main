import{S as E}from"./SubscriptionProductsTable.13ed6442.js";import{ap as m,bG as f,d as l,cb as B,cf as P,n as D,ab as b}from"./index.fe49c200.js";import{A as O}from"./AppVDateRangePicker.fa5b31e4.js";import{t as u}from"./index.5b0eb428.js";import{i as N}from"./index.be3bf73b.js";import{I as A}from"./IsoDateTimeDisplay.3a5f9779.js";import{c as L,d as j}from"./index.410e0dca.js";function q(e,a){m(2,arguments);var t=u(e);if(isNaN(Number(t)))return NaN;var r=t.getTime(),s;a==null?s=[]:typeof a.forEach=="function"?s=a:s=Array.prototype.slice.call(a);var n,o;return s.forEach(function(d,c){var p=u(d);if(isNaN(Number(p))){n=NaN,o=NaN;return}var i=Math.abs(r-p.getTime());(n==null||i<Number(o))&&(n=c,o=i)}),n}function $(e,a){var t;m(1,arguments);var r=e||{},s=u(r.start),n=u(r.end),o=n.getTime();if(!(s.getTime()<=o))throw new RangeError("Invalid interval");var d=[],c=s;c.setHours(0,0,0,0);var p=Number((t=a==null?void 0:a.step)!==null&&t!==void 0?t:1);if(p<1||isNaN(p))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=o;)d.push(u(c)),c.setDate(c.getDate()+p),c.setHours(0,0,0,0);return d}function F(e){m(1,arguments);var a=e||{},t=u(a.start),r=u(a.end),s=r.getTime(),n=[];if(!(t.getTime()<=s))throw new RangeError("Invalid interval");var o=t;for(o.setHours(0,0,0,0),o.setDate(1);o.getTime()<=s;)n.push(u(o)),o.setMonth(o.getMonth()+1);return n}function H(e){m(1,arguments);var a=u(e),t=a.getFullYear(),r=a.getMonth(),s=new Date(0);return s.setFullYear(t,r+1,0),s.setHours(0,0,0,0),s.getDate()}function Y(e,a){m(2,arguments);var t=u(e),r=f(a),s=t.getFullYear(),n=t.getDate(),o=new Date(0);o.setFullYear(s,r,15),o.setHours(0,0,0,0);var d=H(o);return t.setMonth(r,Math.min(n,d)),t}function x(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?x=function(t){return typeof t}:x=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(e)}function w(e,a){if(m(2,arguments),x(a)!=="object"||a===null)throw new RangeError("values parameter must be an object");var t=u(e);return isNaN(t.getTime())?new Date(NaN):(a.year!=null&&t.setFullYear(a.year),a.month!=null&&(t=Y(t,a.month)),a.date!=null&&t.setDate(f(a.date)),a.hours!=null&&t.setHours(f(a.hours)),a.minutes!=null&&t.setMinutes(f(a.minutes)),a.seconds!=null&&t.setSeconds(f(a.seconds)),a.milliseconds!=null&&t.setMilliseconds(f(a.milliseconds)),t)}const _={};_.props={companyId:{key:"companyId",required:!0,type:String},subId:{key:"subId",required:!0,type:String},products:{key:"products",required:!0,type:Array}};_.setup=(e,a)=>{const t=e,r=l(()=>t.companyId),s=l(()=>t.subId),n=B(),o=l(()=>n.pinnedProductIds),d=l(()=>{const c=[];return t.products.filter(i=>{var v,C;return((C=(v=i.product)==null?void 0:v.id)==null?void 0:C.value)&&o.value.includes(i.product.id.value)?c.push(i):P.SubscriptionProductWithConfigType.create()}),c.sort((i,v)=>i.product&&v.product?i.product.name.localeCompare(v.product.name):-1)||[]});return{id:r,subscriptionId:s,pinnedProducts:d}};_.components=Object.assign({SubscriptionProductCard:E},_.components);var z=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.pinnedProducts.length>0?t("div",{staticClass:"space-y-2"},[t("BaseTypography",{staticClass:"uppercase text-gray-600",attrs:{variant:"overline"}},[e._v(" Pinned Products ")]),t("ul",{staticClass:"grid grid-cols-1 gap-4 sm:gap-6 lg:grid-cols-2 2xl:grid-cols-3"},e._l(e.pinnedProducts,function(r,s){return t("li",{key:s},[t("SubscriptionProductCard",{attrs:{id:e.id,"subscription-id":e.subscriptionId,product:r}})],1)}),0)],1):e._e()},V=[];const I={};var W=D(_,z,V,!1,G,null,null,null);function G(e){for(let a in I)this[a]=I[a]}const bt=function(){return W.exports}();var U=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"}},e.$listeners),[t("path",{attrs:{"fill-rule":"evenodd",d:"M16.72 7.72a.75.75 0 0 1 1.06 0l3.75 3.75a.75.75 0 0 1 0 1.06l-3.75 3.75a.75.75 0 1 1-1.06-1.06l2.47-2.47H3a.75.75 0 0 1 0-1.5h16.19l-2.47-2.47a.75.75 0 0 1 0-1.06z","clip-rule":"evenodd"}})])};const J={render:U},y={};y.props={value:{key:"value",required:!0,type:null}};y.setup=(e,a)=>{const t=e,r=new Date,s=l(()=>{const{start:p,end:i}=t.value;if(p&&i)return{start:p.value,end:i.value}}),n=l(()=>{if(s.value)return{start:b(s.value.start),end:b(s.value.end)}}),o=l(()=>n.value?{start:n.value.start.toLocaleDateString(),end:n.value.end.toLocaleDateString()}:void 0),d=l(()=>n.value?F(n.value).length-1:0),c=l(()=>n.value?N(r,n.value):!1);return{dateRange:s,interval:n,formattedDateRange:o,totalMonths:d,isInRange:c}};y.components=Object.assign({ArrowSvg:J,AppVDateRangePicker:O},y.components);var K=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.dateRange?t("BaseSimpleCard",{staticClass:"space-y-6 p-4 sm:p-6"},[t("div",{staticClass:"space-y-2 sm:grid sm:items-center sm:gap-4 sm:space-y-0 lg:grid-cols-11 lg:gap-0 lg:gap-y-6"},[t("div",{staticClass:"lg:col-span-5"},[t("BaseLabel",[t("span",[e._v("Start Date")]),e.formattedDateRange?t("BaseInput",{staticClass:"w-full",attrs:{readonly:""},model:{value:e.formattedDateRange.start,callback:function(r){e.$set(e.formattedDateRange,"start",r)},expression:"formattedDateRange.start"}}):e._e()],1)],1),t("ArrowSvg",{staticClass:"hidden w-5 shrink-0 text-gray-500 lg:col-span-1 lg:flex lg:place-self-center lg:pt-4"}),t("div",{staticClass:"lg:col-span-5"},[t("BaseLabel",[t("span",[e._v("End Date")]),e.formattedDateRange?t("BaseInput",{staticClass:"w-full",attrs:{readonly:""},model:{value:e.formattedDateRange.end,callback:function(r){e.$set(e.formattedDateRange,"end",r)},expression:"formattedDateRange.end"}}):e._e()],1)],1)],1),e.dateRange?t("div",[t("ClientOnly",[t("AppVDateRangePicker",{staticClass:"pointer-events-none",attrs:{"model-value":e.interval,step:e.totalMonths,"is-range":"","is-expanded":"",color:e.isInRange?"blue":"red","min-date":e.dateRange.start,"max-date":e.dateRange.end}})],1)],1):e._e()]):e._e()},Q=[];const R={};var X=D(y,K,Q,!1,Z,null,null,null);function Z(e){for(let a in R)this[a]=R[a]}const tt=function(){return X.exports}(),S={};S.props={currentDay:{key:"currentDay",required:!0,type:Number},totalDays:{key:"totalDays",required:!0,type:Number}};S.setup=(e,a)=>{const t=e,r=l(()=>t.currentDay!==-1?20-t.currentDay/t.totalDays*20:0),s=l(()=>`gradient-${Math.random()}`);return{fill:r,gradientId:s}};var et=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",{attrs:{viewBox:"0 0 100 70",preserveAspectRatio:"none"}},[t("defs",[t("linearGradient",{attrs:{id:`${e.gradientId}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%"}},[t("stop",{attrs:{offset:"0%","stop-color":"#22c55e"}}),t("stop",{attrs:{offset:"50%","stop-color":"#eab308"}}),t("stop",{attrs:{offset:"100%","stop-color":"#ef4444"}})],1),t("mask",{attrs:{id:"mask",maskUnits:"userSpaceOnUse"}},[t("path",{staticClass:"fill-transparent stroke-current stroke-[20] text-white",attrs:{d:"M10,20 a40,40,0,0,0,80,0","stroke-dasharray":"9, .8"}})])],1),t("path",{staticClass:"fill-transparent stroke-current stroke-[20] text-gray-200",attrs:{d:"M10,20 a40,40,0,0,0,80,0","stroke-dasharray":"9, .8"}}),t("path",{staticClass:"filling fill-transparent stroke-[20]",style:`--fill: ${e.fill}`,attrs:{mask:"url(#mask)",d:"M10,20 a40,40,0,0,0,80,0",stroke:`url(#${e.gradientId})`,"stroke-dasharray":"20","stroke-dashoffset":"20",pathLength:"20"}})])},at=[];const k={};var st=D(S,et,at,!1,rt,"c86ee660",null,null);function rt(e){for(let a in k)this[a]=k[a]}const nt=function(){return st.exports}(),g={};g.props={status:{key:"status",required:!0,type:null}};g.setup=(e,a)=>{const t=e,r=w(new Date,{hours:0,minutes:0,seconds:0,milliseconds:0}),s=l(()=>{if(t.status&&t.status.validity&&t.status.validity.start&&t.status.validity.end){const i=u(b(t.status.validity.start.value)),v=w(i,{hours:0,minutes:0,seconds:0,milliseconds:0});return{start:L(r,v)===0?r:i,end:u(b(t.status.validity.end.value))}}}),n=l(()=>{if(s.value&&N(r,s.value)){const i=$(s.value),v=q(r,i);return v!==void 0&&v===0?v+1:v}}),o=l(()=>s.value?$(s.value).length:-1),d=l(()=>n.value?o.value-n.value:-1),c=l(()=>s.value?j(r,s.value.end):-1),p=l(()=>{if(n.value){const i=n.value/o.value*100;return i>=66?"text-red-500":i>=33?"text-yellow-500":"text-green-500"}return"text-red-500"});return{currentDayIndex:n,totalDays:o,daysLeft:d,daysOver:c,textColor:p}};g.components=Object.assign({ElapsedTimeSvg:nt,IsoDateTimeDisplay:A},g.components);var ot=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("BaseSimpleCard",{staticClass:"flex flex-col items-center justify-center space-y-4 bg-gradient-to-tl from-blue-100 via-white to-white p-4 sm:p-6"},[t("div",{staticClass:"relative flex flex-col items-center justify-center"},[t("div",{staticClass:"relative z-10 w-52 lg:w-56"},[t("ElapsedTimeSvg",{attrs:{"current-day":e.currentDayIndex||-1,"total-days":e.totalDays}})],1),t("div",{staticClass:"absolute top-0 z-10 flex flex-col items-center"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" "+e._s(e.daysLeft>0?"Ends in":"Subscription Ended")+" ")]),t("BaseTypography",{class:e.textColor,attrs:{variant:"h2"}},[e._v(" "+e._s(e.daysLeft>0?e.daysLeft:e.daysOver)+" ")]),t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" "+e._s(e.daysLeft>0?"Days":"Days Ago")+" ")])],1)]),e.status.validity&&e.status.validity.end?t("div",{staticClass:"flex flex-col text-center"},[t("BaseTypography",{staticClass:"text-blue-500",attrs:{variant:"overline"}},[e._v(" Subscription Renewal: ")]),t("BaseTypography",{staticClass:"text-blue-500",attrs:{variant:"overline"}},[t("IsoDateTimeDisplay",{attrs:{value:e.status.validity.end,format:"date"}})],1)],1):e._e(),e.daysLeft<=30?t("div",[t("BaseButton",{attrs:{type:"button"}},[e._v("Request Subscription")])],1):e._e()])},it=[];const M={};var lt=D(g,ot,it,!1,ct,null,null,null);function ct(e){for(let a in M)this[a]=M[a]}const ut=function(){return lt.exports}(),h={};h.props={status:{key:"status",required:!0,type:null}};h.setup=(e,a)=>({});h.components=Object.assign({SubscriptionValidityCta:ut,SubscriptionCalendarDisplay:tt},h.components);var dt=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",{staticClass:"grid gap-6 xl:grid-cols-3"},[t("SubscriptionValidityCta",{attrs:{status:e.status}}),e.status.validity?t("SubscriptionCalendarDisplay",{staticClass:"xl:col-span-2",attrs:{value:e.status.validity}}):e._e()],1)},pt=[];const T={};var vt=D(h,dt,pt,!1,ft,null,null,null);function ft(e){for(let a in T)this[a]=T[a]}const St=function(){return vt.exports}();export{bt as P,St as S};
