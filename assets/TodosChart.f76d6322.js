import{b2 as O,az as I,r as x,d as y,n as j}from"./index.a891a3b2.js";import{T as q}from"./MaturityTodo.ef878a8f.js";import{B as N,u as f}from"./BarChart.c52c4705.js";import{_ as $}from"./_baseOrderBy.c76dca18.js";import{i as P}from"./keys.e5272bd7.js";var z=$,T=P;function M(e,o,t,a){return e==null?[]:(T(o)||(o=o==null?[]:[o]),t=a?void 0:t,T(t)||(t=t==null?[]:[t]),z(e,o,t))}var R=M;const i={};i.props={value:{key:"value",required:!0,type:Object},companyId:{key:"companyId",required:!0,type:String},categories:{key:"categories",required:!0,type:null},canAddNotes:{key:"canAddNotes",required:!1,type:Boolean,default:!0}};i.setup=(e,o)=>{const t=e,a=o.emit,n=I(t,a),c=x(""),l=x(t.categories[0]),m=y(()=>n.value[l.value]||[]),p=y(()=>R(m.value,"order")),g=y(()=>Math.max(...m.value.map(s=>s.order?s.order:0),0)),C=f.create();async function b(s){const u={companyId:t.companyId,category:l.value,todoText:s,itemComplete:!1,order:g.value+1,readOnly:!1,createdAt:new Date().toISOString()},r=await C.mutateAsync(u),d=l.value in n.value?[n.value[l.value],r]:[r];d.sort((A,S)=>A.todoText.localeCompare(S.todoText)),n.value[l.value]=d,v()}function v(){c.value=""}const w=f.update();async function B(s){await w.mutateAsync(s)}const h=f.delete();async function k(s){const u=p.value[s];if(u){const{status:d}=await h.mutateAsync(u);if(d===204)return}const r=[...p.value];r.splice(s,1),n.value[l.value]=r}return{todoText:c,category:l,sortedSelectedCategory:p,addTodo:b,clearTodoText:v,updateTodo:B,deleteTodo:k}};i.components=Object.assign({BarChart:N,TabbedPanel:q,TrashSvg:O},i.components);var D=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("section",{staticClass:"flex flex-col divide-y overflow-y-auto 2xl:grid 2xl:grid-cols-2 2xl:divide-y-0 2xl:divide-x"},[t("div",{staticClass:"h-72 p-4 lg:mx-auto lg:w-full lg:max-w-xl 2xl:h-full 2xl:w-full 2xl:max-w-none"},[t("BarChart",{attrs:{value:e.value,options:{maintainAspectRatio:!1,devicePixelRatio:1}}})],1),t("div",{staticClass:"flex flex-col justify-between divide-y"},[t("TabbedPanel",{attrs:{tabs:e.categories},scopedSlots:e._u([{key:"content",fn:function(){return[t("ul",e._l(e.sortedSelectedCategory,function(a,n){return t("li",{key:n},[t("BaseLabel",{staticClass:"flex items-center space-x-2"},[t("BaseInput",{staticClass:"inline-block",attrs:{disabled:!e.canAddNotes,type:"checkbox"},on:{change:function(c){return e.updateTodo(a)}},model:{value:a.itemComplete,callback:function(c){e.$set(a,"itemComplete",c)},expression:"todo.itemComplete"}}),e.canAddNotes?t("BaseIcon",{attrs:{color:"danger",action:"secondary",size:"small",shape:"square",type:"button"},on:{click:function(c){return e.deleteTodo(n)}}},[t("TrashSvg",{staticClass:"h-5 w-5"})],1):e._e(),t("BaseTypography",{attrs:{variant:"p2"}},[e._v(" "+e._s(a.todoText)+" ")])],1)],1)}),0)]},proxy:!0}]),model:{value:e.category,callback:function(a){e.category=a},expression:"category"}}),e.canAddNotes?t("div",{staticClass:"space-y-2 p-4"},[t("BaseTextarea",{staticClass:"w-full",attrs:{rows:"1"},model:{value:e.todoText,callback:function(a){e.todoText=a},expression:"todoText"}}),t("div",{staticClass:"flex flex-col space-y-2 md:flex-row md:space-y-0 md:space-x-2"},[t("BaseButton",{staticClass:"w-full md:w-auto",attrs:{type:"button"},on:{click:function(a){return e.addTodo(e.todoText)}}},[e._v(" Add ")]),t("BaseButton",{staticClass:"w-full md:w-auto",attrs:{type:"button",action:"secondary","display-type":"danger"},on:{click:e.clearTodoText}},[e._v(" Cancel ")])],1)],1):e._e()],1)])},E=[];const _={};var F=j(i,D,E,!1,L,null,null,null);function L(e){for(let o in _)this[o]=_[o]}const U=function(){return F.exports}();export{U as T};
