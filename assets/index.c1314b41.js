import{F as I}from"./FormButton.8b6cc313.js";import{D as B}from"./DateRangeInput.6499f793.js";import{bS as F,aZ as h,cc as U,aB as C,aJ as R,aG as $,n as x,b$ as f,c5 as b,d as D}from"./index.5d16a547.js";import{u as y}from"./useAccountSubscriptionValidity.de8de3b8.js";import{S as j}from"./SubscriptionPartialUpdateRequestInput.33ac8b44.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./index.77c3e3f9.js";import"./index.9ee596c8.js";import"./index.7a54c9f6.js";import"./index.87e44ac4.js";import"./index.d6e62d4d.js";import"./index.8109ddc3.js";import"./SlugInput.b001c9ed.js";import"./FormValidation.907ef868.js";import"./index.7a318e1c.js";import"./DynamicForm.7a2c0843.js";const o={};o.props={id:{key:"id",required:!0,type:String},subscriptionId:{key:"subscriptionId",required:!0,type:String}};o.setup=(t,e)=>{const s=t,{id:i,subscriptionId:r}=F(s),n=h(U.DateRange.create()),p=y.get(i,r);C(()=>p.data.value,a=>{a&&(n.value=a)},{immediate:!0});const l=R(),d=$(),c=y.update(i,r);async function m(){await c.mutateAsync({value:n.value}),d.success("Successfully updated subscription validity."),l.push(`/admin/companies/${i.value}/subscriptions`)}return{validity:n,submit:m}};o.components=Object.assign({DateRangeInput:B,FormButton:I},o.components);var k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"divide-y",on:{submit:function(i){return i.preventDefault(),t.submit.apply(null,arguments)}}},[s("div",{staticClass:"p-4"},[s("BaseLabel",{staticClass:"grid grid-cols-1 gap-1 sm:grid-cols-3 sm:items-center sm:gap-4"},[s("span",[t._v("Validity")]),s("DateRangeInput",{staticClass:"sm:col-span-2",model:{value:t.validity,callback:function(i){t.validity=i},expression:"validity"}})],1)],1),s("FormButton",{attrs:{action:"update"}})],1)},q=[];const S={};var A=x(o,k,q,!1,P,null,null,null);function P(t){for(let e in S)this[e]=S[e]}const V=function(){return A.exports}(),u={};u.setup=(t,e)=>{const s=f("id"),i=f("subscriptionId"),r=b.read(s,i),n=h();C(()=>r.data.value,a=>{a&&(n.value={accountId:a.accountId,subscriptionId:a.subscriptionId,name:a.name})},{immediate:!0});const p=D(()=>{var v,_;const a=n.value;return Boolean(a&&((v=a.subscriptionId)==null?void 0:v.value)&&a.name&&((_=a.accountId)==null?void 0:_.value))}),l=R(),d=b.update(s,i),c=$();async function m(){if(n.value){const{response:a}=await d.mutateAsync(n.value);a?(c.success("Successfully updated subscription."),l.push(`/admin/companies/${s.value}/subscriptions`)):c.error("Something went wrong.")}}return{id:s,subscriptionId:i,update:n,isValid:p,updateSubscription:m}};u.components=Object.assign({SubscriptionPartialUpdateRequestInput:j,FormButton:I,UpdateSubscriptionValidityForm:V},u.components);var w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"space-y-6"},[s("BaseSimpleCard",{staticClass:"divide-y"},[s("BaseTypography",{staticClass:"p-4",attrs:{component:"h4",variant:"subtitle3"}},[t._v(" Update Subscription Name ")]),s("form",{staticClass:"divide-y",on:{submit:function(i){return i.preventDefault(),t.updateSubscription.apply(null,arguments)}}},[t.update?s("SubscriptionPartialUpdateRequestInput",{model:{value:t.update,callback:function(i){t.update=i},expression:"update"}}):t._e(),s("FormButton",{attrs:{action:"update","is-valid-form":t.isValid}})],1)],1),s("BaseSimpleCard",{staticClass:"divide-y"},[s("BaseTypography",{staticClass:"p-4",attrs:{component:"h4",variant:"subtitle3"}},[t._v(" Update Subscription Validity ")]),s("UpdateSubscriptionValidityForm",{attrs:{id:t.id,"subscription-id":t.subscriptionId}})],1)],1)},E=[];const g={};var G=x(u,w,E,!1,M,null,null,null);function M(t){for(let e in g)this[e]=g[e]}const et=function(){return G.exports}();export{et as default};
