import{S as B}from"./arrow-down-on-square.6f2806b6.js";import{D as Q}from"./trash.687d612e.js";import{I as A}from"./ImageInput.dbe7baee.js";import{f as q,u as C,e as I,g,h as m,c as S,G as D,n as b,bG as x,r as M,w as U,I as R}from"./index.915cb62f.js";import{P as j,u as k,a as F,b as L}from"./ProductInput.ed981f1a.js";import{u as _}from"./useManufacturerProducts.c3fd9a38.js";import"./BasicModal.4139bcb6.js";import"./DynamicForm.3e341623.js";const w={read(e){return q(["products",e,"image"],()=>g.get(`${m}/products/${e.value}/image`).then(s=>s.data),{retry:!1})},update(e){const s=C();return I(t=>g.put(`${m}/products/${e.value}/image`,t,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>a),{onSuccess(){s.invalidateQueries(["products",e]),s.invalidateQueries(["products",e,"image"])}})},delete(e){const s=C();return I(()=>g.delete(`${m}/products/${e.value}/image`).then(t=>t),{onSuccess(){s.invalidateQueries(["products",e]),s.invalidateQueries(["products",e,"image"])}})}},p={};p.props={productId:{key:"productId",required:!0,type:String}};p.setup=(e,s)=>{const t=e,a=S(()=>t.productId),u=S(()=>`${m}/products/${encodeURIComponent(a.value)}/image`),r=D(),o=w.update(a);async function n(c,l){const d=new FormData;d.append("data",c),(await o.mutateAsync(d)).status===204&&(l(),r.success("Successfully updated logo."))}const v=w.delete(a);async function y(c){confirm("Are you sure you want to remove this image?")&&(await v.mutateAsync()).status===204&&(c(),r.success("Successfully deleted logo."))}return{imageUrl:u,updateImage:n,removeImage:y}};p.components=Object.assign({ImageInput:A},p.components);var T=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{variant:"subtitle3",component:"h3"}},[e._v(" Product Logo ")]),t("ImageInput",{attrs:{url:e.imageUrl,"btn-text":"Change Logo"},on:{"update-image":e.updateImage,"remove-image":e.removeImage}})],1)},E=[];const P={};var G=b(p,T,E,!1,O,null,null,null);function O(e){for(let s in P)this[s]=P[s]}const z=function(){return G.exports}(),f={};f.setup=(e,s)=>{const t=x("id"),a=x("productId"),u=[k.list(),F.list(),L.list()],r=_.read(t,a),o=M();U(()=>r.data.value,i=>{i&&(o.value=i)},{immediate:!0});const n=R(),v=D(),y=_.update(t,a);async function c(){o.value&&await y.mutateAsync(o.value)&&v.success("Successfully updated product.")}const l=_.delete(t,a);async function d(){var h;confirm("Are you sure you want to delete the product "+((h=o.value)==null?void 0:h.name)+"?")&&(await l.mutateAsync(),n.push(`/admin/manufacturers/${t.value}/products`))}return{id:t,queries:u,product:o,updateProduct:c,deleteProduct:d}};f.components=Object.assign({ManufacturerProductLogoInput:z,ProductInput:j,SaveSvg:B,DeleteSvg:Q},f.components);var N=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",{staticClass:"space-y-8"},[t("ManufacturerProductLogoInput",{attrs:{"product-id":e.id}}),t("BaseSimpleCard",{staticClass:"divide-y"},[t("BaseTypography",{staticClass:"p-4",attrs:{variant:"subtitle3",component:"h3"}},[e._v(" Product Attributes ")]),t("form",{staticClass:"divide-y",on:{submit:function(a){return a.preventDefault(),e.updateProduct.apply(null,arguments)}}},[t("BaseVueQueries",{attrs:{queries:e.queries},scopedSlots:e._u([{key:"success",fn:function(a){var u=a[0],r=a[1],o=a[2];return[t("ProductInput",{attrs:{"is-id-readonly":!0,types:u,features:r,categories:o},model:{value:e.product,callback:function(n){e.product=n},expression:"product"}})]}}])}),t("div",{staticClass:"flex flex-col space-y-2 p-4 md:flex-row md:space-y-0 md:space-x-2"},[t("BaseButton",{staticClass:"w-full space-x-2 md:w-auto"},[t("SaveSvg",{staticClass:"h-auto w-4 xl:w-5"}),t("span",[e._v("Save")])],1),t("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{"display-type":"danger",action:"secondary"},on:{click:function(a){return a.preventDefault(),e.deleteProduct.apply(null,arguments)}}},[t("DeleteSvg",{staticClass:"h-auto w-4 xl:w-5"}),t("span",[e._v("Delete")])],1)],1)],1)],1)],1)},H=[];const $={};var J=b(f,N,H,!1,K,null,null,null);function K(e){for(let s in $)this[s]=$[s]}const ae=function(){return J.exports}();export{ae as default};
