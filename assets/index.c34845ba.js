import{r as V,u as se,a as ae,b as R,c as ie,d as j,e as ee,s as te,_ as Ae,f as Be,g as Ie,h as we,R as ke,i as Te,j as Se,Q as Qe,v as Re,k as je}from"./QuestionnaireSidebar.c7d95043.js";import{aj as U,c as r,cy as X,r as ne,aA as z,n as A,cv as Ce,bo as Ue,ac as We,cm as M,cj as Ee,co as De,c5 as oe,cz as Fe,cA as Me,b$ as Ne,cB as le,cC as Pe,bK as Oe,L as Le,ak as ce}from"./index.2dae3719.js";import{a as He}from"./index.ebbce841.js";import{T as Ge}from"./ToolTip.afe0a5ae.js";import{P as Je}from"./ProgressBar.d69dcbb3.js";import{s as Ye}from"./index.689e3674.js";import"./keys.9927a065.js";import"./_Uint8Array.cf66e185.js";import"./_baseIteratee.d3fd56a0.js";import"./_baseIsEqual.47b865a3.js";import"./_arrayMap.dcea68f3.js";import"./_isIterateeCall.8e8b3620.js";import"./_baseAssignValue.c1708b9b.js";import"./_baseUniq.8ea4109f.js";import"./_baseEach.a2166610.js";import"./cloneDeep.e00f8ebc.js";import"./_copyArray.56331c81.js";import"./isEqual.59871c9c.js";import"./values.62805879.js";const Xe=U({props:{...V()},setup(e){const s=se(ae(e)),t=R(),c=r(()=>t.data),p=r(()=>t.currentQuestion),f=r(()=>{var l;return(l=p.value)==null?void 0:l.questionType}),y=r(()=>f.value==="TEXTAREA"),v=r(()=>f.value==="CHECKBOX"),g=r(()=>{const l="questions.";return parseInt(e.path.substring(e.path.indexOf(l)+l.length))}),T=r(()=>t.takenId),S=X.list(T),k=r(()=>S.data.value||[]);t.setAnswers(k.value);const d=r(()=>k.value.find(l=>{var m,w,B;return((m=l.questionId)==null?void 0:m.value)===((B=(w=p.value)==null?void 0:w.id)==null?void 0:B.value)})),C=r(()=>{var l,m;return Array.isArray(d.value)?[...new Set(...d.value.map(w=>w.answerId.value))]:(m=(l=d.value)==null?void 0:l.answerId)==null?void 0:m.value}),n=r({get(){return C.value},set(l){var w,B,W,Q,E,D,F;if(!l){Array.isArray(d.value)||(B=(w=d.value)==null?void 0:w.questionAnswerId)!=null&&B.value&&_((Q=(W=d.value)==null?void 0:W.questionAnswerId)==null?void 0:Q.value);return}if(Array.isArray(l)&&Array.isArray(d.value)&&!l[0]){for(const $ of d.value)(E=$.questionAnswerId)!=null&&E.value&&_((D=$.questionAnswerId)==null?void 0:D.value);return}const m=d.value;if(typeof l!="string")for(const $ of l){if(d.value&&Array.isArray(d.value))for(const I of d.value)I.answerId&&I.questionAnswerId&&(l.includes(I.answerId.value)||_(I.questionAnswerId.value));if(Array.isArray(l)){if(!Array.isArray(m))m!=null&&m.answerId&&(m.answerId.value=$,h(m));else if(Array.isArray(C.value)&&!C.value.includes($)){const I=Y($);I&&a(I)}}return}if(!Array.isArray(m))((F=m==null?void 0:m.answerId)==null?void 0:F.value)&&typeof l=="string"&&(m.answerId.value=l,h(m));else if(typeof l=="string"){const $=Y(l);$&&a($)}}}),i=ne(),o=r({get(){var l;if(i.value)return i.value;if(!Array.isArray(d.value))return(l=d.value)==null?void 0:l.answerText},set(l){l&&(i.value=l)}}),u=X.create();async function a(l){await u.mutateAsync(l)}const b=X.update();async function h(l){await b.mutateAsync(l)}const x=X.delete();async function _(l){await x.mutateAsync(l)}function q(l){var m,w,B;return(B=(w=(m=p.value)==null?void 0:m.answerSet)==null?void 0:w.answers)==null?void 0:B.find(W=>{var Q;return((Q=W.id)==null?void 0:Q.value)===l})}const Y=function(l){var Q,E,D,F,$,I;if(!c.value||!T.value)return;let m;l!=null&&(m=q(l));const w=((Q=m==null?void 0:m.id)==null?void 0:Q.value)||((D=(E=p.value)==null?void 0:E.id)==null?void 0:D.value),B=(m==null?void 0:m.riskScore)||0;return{responseId:{value:T.value},questionnaireId:{value:((F=c.value.id)==null?void 0:F.value)||""},questionId:{value:((I=($=p.value)==null?void 0:$.id)==null?void 0:I.value)||""},answerId:{value:w||""},riskScore:B,answerText:o.value||""}};return z(()=>o.value,l=>{const m=d.value;if(m&&l)if(!Array.isArray(m))m.answerText=l,h(m);else if(m[0])for(const w of m)w.answerText=l,h(w);else{const w=Y(void 0);w&&a(w)}else{const w=Y(void 0);w&&a(w)}},{deep:!0,immediate:!0}),z(()=>S.data.value,l=>{l&&t.setAnswers(l)},{deep:!0,immediate:!0}),{...s,selected:n,inputChanges:i,currentQuestion:p,currentAnswer:d,isTextarea:y,isMultiselect:v,currentQuestionIndex:g,questionType:f,questionnaire:c,currentAnswerIds:C}},methods:{composePaths:ie,createDefaultValue:j,addButtonClick(){this.addItem(this.control.path,j(this.control.schema))()}}}),ze={renderer:Xe,tester:ee(1e3,te("answers"))},Ke=U({components:{ControlWrapper:Ae},props:{...V()},setup(e){return Be(Ie(e))}}),Ze={renderer:Ke,tester:ee(1e3,te("text"))},Ve=U({props:{questionIndex:{required:!0,type:Number,default:0},totalQuestions:{required:!0,type:Number,default:0}}});var et=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("BaseSimpleCard",{staticClass:"p-5 space-y-6"},[t("div",{staticClass:"flex justify-end"},[t("BaseOverline",{staticClass:"uppercase text-gray-500"},[e._v(" Question "+e._s(e.questionIndex+1)+" of "+e._s(e.totalQuestions)+" ")])],1),e._t("default")],2)},tt=[];const ue={};var nt=A(Ve,et,tt,!1,st,null,null,null);function st(e){for(let s in ue)this[s]=ue[s]}const at=function(){return nt.exports}(),it=U({components:{QuestionListElement:at,DispatchRenderer:we},props:{...V()},setup(e){const s=se(ae(e)),t=R(),c=r(()=>t.data),p=r({get(){return t.questionIndex},set(k){t.setQuestionIndex(k)}}),f=r({get(){return t.sectionIndex},set(k){t.setSectionIndex(k)}}),y=r(()=>{var k,d;return((d=(k=c.value)==null?void 0:k.sections)==null?void 0:d.length)||0}),v=r(()=>f.value>0),g=r(()=>f.value<y.value-1),T=r(()=>{var k,d,C;if(v.value)return((C=(d=(k=c.value)==null?void 0:k.sections)==null?void 0:d[f.value-1])==null?void 0:C.questions.length)||0});function S(){T.value&&(p.value=T.value-1,f.value--)}return{...s,data:c,questionIndex:p,prevQuestionCount:T,sectionIndex:f,sectionCount:y,hasPrevSection:v,hasNextSection:g,toEndOfPrevSection:S}},computed:{arraySchema(){return ke.schema(this.control.rootSchema,this.control.uischema.scope,this.control.rootSchema)},detailUiSchema(){const e=Te(this.control.uischemas,this.control.schema,this.control.uischema.scope,this.control.path,"Group",this.control.uischema,this.control.rootSchema);if(Se(this.control.path))e.type="VerticalLayout";else{const s=e;s.label=this.control.label}return e}},methods:{composePaths:ie,createDefaultValue:j,addButtonClick(){this.addItem(this.control.path,j(this.control.schema))()}}}),rt={renderer:it,tester:ee(1e3,te("questions"))},N={};N.props={title:{key:"title",required:!0,type:String}};N.setup=(e,s)=>({});N.components=Object.assign({DotsSquare:Ce},N.components);var ot=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",{staticClass:"relative flex h-28 w-full flex-col items-center justify-center overflow-hidden bg-gradient-to-bl from-prime-navy via-blue-900 to-prime-navy"},[t("div",{staticClass:"absolute bottom-full right-full translate-y-3/4 translate-x-3/4 rotate-45 transform"},[t("DotsSquare",{attrs:{color:"navy"}})],1),t("div",{staticClass:"absolute top-full left-full -translate-y-3/4 -translate-x-3/4 rotate-45 transform"},[t("DotsSquare",{attrs:{color:"navy"}})],1),t("div",{staticClass:"relative px-4 sm:px-0 max-w-sm sm:max-w-xl lg:max-w-2xl xl:max-w-4xl"},[t("BaseTypography",{staticClass:"text-center text-white",attrs:{component:"h1",variant:"h3"}},[e._v(" "+e._s(e.title)+" ")])],1)])},lt=[];const de={};var ct=A(N,ot,lt,!1,ut,null,null,null);function ut(e){for(let s in de)this[s]=de[s]}const dt=function(){return ct.exports}(),re={};re.props={score:{key:"score",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};re.setup=(e,s)=>{const t=e,c=r(()=>200-t.score/t.max*200),p=r(()=>`gradient-${Math.random()}`),f=r(()=>t.score>=740?"#10b981":t.score>=640?"#fde68a":"#ef4444");return{fill:c,gradientId:p,displayColor:f}};var pt=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("svg",{attrs:{viewBox:"0 0 90 80",preserveAspectRatio:"none"}},[t("defs",[t("linearGradient",{attrs:{id:`${e.gradientId}`,x1:"15%",y1:"100%",x2:"80%",y2:"100%"}},[t("stop",{attrs:{offset:"0%","stop-color":`${e.displayColor}`}}),t("stop",{attrs:{offset:"100%","stop-color":`${e.displayColor}`}})],1)],1),t("path",{staticClass:"stroke-current text-gray-200 shadow-inner",attrs:{d:"M20,75 a40,40,0,1,1,50,0",fill:"none","stroke-linecap":"round","stroke-width":"3"}}),t("path",{staticClass:"filling transition duration-300",style:`--fill: ${e.fill}`,attrs:{d:"M20,75 a40,40,0,1,1,50,0",fill:"none",stroke:`url(#${e.gradientId})`,"stroke-dasharray":"200","stroke-dashoffset":"200","stroke-linecap":"round","stroke-width":"3"}})])},mt=[];const pe={};var vt=A(re,pt,mt,!1,ft,"e9b6ad54",null,null);function ft(e){for(let s in pe)this[s]=pe[s]}const _t=function(){return vt.exports}(),P={};P.props={score:{key:"score",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};P.setup=(e,s)=>{const t=e,c=r(()=>Math.round(t.score*100/t.max));return{toPercentage:He,percentage:c}};P.components=Object.assign({QuestionnaireProgressBar:_t},P.components);var yt=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"relative flex items-center justify-center"},[t("div",{staticClass:"absolute flex items-center"},[t("BaseTypography",{staticClass:"text-blue-800",attrs:{variant:"h2"}},[e._v(" "+e._s(e.toPercentage(e.percentage))+" ")])],1),t("div",{staticClass:"relative w-44 sm:w-56"},[t("QuestionnaireProgressBar",{attrs:{score:e.score,max:e.max}})],1)])},ht=[];const me={};var gt=A(P,yt,ht,!1,xt,null,null,null);function xt(e){for(let s in me)this[s]=me[s]}const be=function(){return gt.exports}(),O={};O.props={score:{key:"score",required:!0,type:Number},max:{key:"max",required:!0,type:Number}};O.setup=(e,s)=>({});O.components=Object.assign({DotsSquare:Ce,QuestionnaireProgressBarText:be},O.components);var wt=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"relative mx-auto flex max-w-xs flex-col items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-blue-100 via-white to-white px-4 py-8 shadow-md sm:max-w-sm sm:rounded-3xl xl:max-w-none xl:p-12"},[t("div",{staticClass:"absolute top-full left-full -translate-y-1/3 -translate-x-1/3 rotate-45 transform xl:-translate-y-1/2"},[t("DotsSquare",{attrs:{color:"blue"}})],1),t("QuestionnaireProgressBarText",{attrs:{score:e.score,max:e.max}})],1)},kt=[];const ve={};var Tt=A(O,wt,kt,!1,St,null,null,null);function St(e){for(let s in ve)this[s]=ve[s]}const Ct=function(){return Tt.exports}(),L={};L.props={value:{key:"value",required:!0,type:null}};L.setup=(e,s)=>({});L.components=Object.assign({WaveForm:Ue,QuestionnaireScoreDisplay:Ct},L.components);var bt=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"relative flex flex-col items-center justify-center lg:grid lg:grid-cols-12"},[t("div",{staticClass:"absolute top-36 w-full opacity-25 sm:top-40 lg:hidden"},[t("WaveForm")],1),t("div",{staticClass:"relative -mb-36 lg:col-span-4 lg:col-start-1 lg:row-start-1 lg:mb-0"},[t("div",{staticClass:"px-6 md:px-8 lg:px-4 lg:pl-0"},[t("QuestionnaireScoreDisplay",{attrs:{score:e.value.score,max:e.value.max}})],1)]),t("BaseSimpleCard",{staticClass:"pt-32 lg:col-span-10 lg:col-start-3 lg:row-start-1 lg:h-fit lg:p-0"},[t("div",{staticClass:"grid items-center gap-5 px-6 py-10 sm:p-8 lg:grid-cols-10 lg:col-start-3 lg:gap-0 lg:p-6 text-center lg:text-left"},[t("div",{staticClass:"grid gap-5 lg:col-span-10 lg:col-start-3"},[t("BaseTypography",{staticClass:"text-prime-navy",attrs:{component:"h2",variant:"h5"}},[e._v(" "+e._s(e.value.title)+" ")]),t("BaseTypography",{staticClass:"text-gray-600",attrs:{component:"p",variant:"p1"}},[e._v(" "+e._s(e.value.description)+" ")])],1)])])],1)},$t=[];const fe={};var qt=A(L,bt,$t,!1,At,null,null,null);function At(e){for(let s in fe)this[s]=fe[s]}const Bt=function(){return qt.exports}(),H={};H.props={question:{key:"question",required:!0,type:null},index:{key:"index",required:!0,type:Number}};H.setup=(e,s)=>{const t=e,c=r(()=>{var T;return(T=t.question.id)==null?void 0:T.value}),p=R(),f=r(()=>c.value?p.questionScore(c.value):0),y=r(()=>{var S;const T=(S=t.question.answerSet)==null?void 0:S.answers.find(k=>{var d;return((d=k.id)==null?void 0:d.value)===c.value});if(T)return T.value}),v=r(()=>Boolean(f.value||y.value)),g=r(()=>v.value?{type:"info",text:y.value}:{type:"warn",text:"This question has not been answered yet."});return{score:f,text:y,toolTipInfo:g}};H.components=Object.assign({ToolTip:Ge},H.components);var It=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex items-center justify-between"},[t("div",{staticClass:"flex items-center space-x-4"},[t("BaseLink",{attrs:{"display-type":"primary-prime",to:"#"}},[e._v(" "+e._s(`Question ${e.index+1}`)+" ")]),t("ToolTip",{attrs:{type:e.toolTipInfo.type}},[e._v(" "+e._s(e.toolTipInfo.text)+" ")])],1),t("div",[e.question.questionType!=="TEXTAREA"?t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" "+e._s(`Score: ${e.score}`)+" ")]):t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" "+e._s(`Response: ${e.text}`)+" ")])],1)])},Qt=[];const _e={};var Rt=A(H,It,Qt,!1,jt,null,null,null);function jt(e){for(let s in _e)this[s]=_e[s]}const Ut=function(){return Rt.exports}(),G={};G.props={section:{key:"section",required:!0,type:null}};G.setup=(e,s)=>{const t=e,c=r(()=>{var g;return(g=t.section.id)==null?void 0:g.value}),p=R(),f=r(()=>c.value&&p.sectionTotal(c.value)||0),y=r(()=>c.value&&p.sectionMax(c.value)||0),v=r(()=>t.section.questions);return{total:f,max:y,questions:v}};G.components=Object.assign({QuestionnaireProgressBarText:be,QuestionOverview:Ut},G.components);var Wt=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex flex-col space-y-2"},[t("BaseTypography",{staticClass:"text-prime-navy",attrs:{variant:"h6"}},[e._v(" "+e._s(e.section.name)+" ")]),t("BaseSimpleCard",[t("ul",{staticClass:"divide-y"},[t("div",{staticClass:"p-4"},[t("QuestionnaireProgressBarText",{attrs:{score:e.total,max:e.max}})],1),e._l(e.questions,function(c,p){return t("li",{key:p,staticClass:"p-4"},[t("QuestionOverview",{attrs:{question:c,index:p}})],1)})],2)])],1)},Et=[];const ye={};var Dt=A(G,Wt,Et,!1,Ft,null,null,null);function Ft(e){for(let s in ye)this[s]=ye[s]}const Mt=function(){return Dt.exports}(),J={};J.props={section:{key:"section",required:!0,type:null},isExpanded:{key:"isExpanded",required:!0,type:Boolean}};J.setup=(e,s)=>{const t=e,c=r(()=>{var v;return(v=t.section.id)==null?void 0:v.value}),p=R(),f=r(()=>{if(c.value)return p.sectionTotal(c.value)}),y=r(()=>{if(c.value)return p.sectionMax(c.value)});return{total:f,max:y}};J.components=Object.assign({ChevronRightSvg:We},J.components);var Nt=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"space-y-2"},[t("div",{staticClass:"flex flex-col items-start lg:flex-row lg:justify-between lg:items-center"},[t("BaseTypography",{staticClass:"text-prime-navy",attrs:{variant:"h6"}},[e._v(" "+e._s(e.section.name)+" ")]),t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"overline"}},[e._v(" "+e._s(e.section.questions.length)+" questions ")])],1),t("BaseSimpleCard",{staticClass:"flex justify-between items-center p-4 md:py-6"},[t("div",{staticClass:"flex-1 grid gap-4 sm:grid-cols-2 sm:gap-6"},[t("div",{staticClass:"flex flex-col items-center"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" Total Score ")]),t("BaseTypography",{staticClass:"text-prime-indigo",attrs:{variant:"h2"}},[e._v(" "+e._s(e.total)+" ")])],1),t("div",{staticClass:"flex flex-col items-center"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{variant:"p1"}},[e._v(" Max Score ")]),t("BaseTypography",{staticClass:"text-prime-indigo",attrs:{variant:"h2"}},[e._v(" "+e._s(e.max)+" ")])],1)]),t("ChevronRightSvg",{staticClass:"shrink-0 h-5 w-5 text-gray-400",attrs:{"aria-hidden":"true"}})],1)],1)},Pt=[];const he={};var Ot=A(J,Nt,Pt,!1,Lt,null,null,null);function Lt(e){for(let s in he)this[s]=he[s]}const Ht=function(){return Ot.exports}(),K={};K.setup=(e,s)=>{const t=R(),c=r(()=>t.data),p=r(()=>({title:"Total Score / Overview",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Veritatis saepe ullam laborum accusantium itaque, enim commodinumquam incidunt, id autem pariatur sit ut qui libero eos amet molestias inventore ab.",score:t.riskScoreTotal,max:t.riskScoreMax})),f=r(()=>{var d;return(d=c.value)==null?void 0:d.sections}),y=r({get(){return t.sectionIndex},set(d){t.setSectionIndex(d)}}),v=r(()=>t.currentSection),g=ne(!1);function T(d){y.value===d?g.value=!g.value:g.value=!0,y.value=d}const S=ne(!1);function k(d){const C=d.currentTarget,i=d.srcElement.offsetHeight,o=C.scrollTop,a=C.scrollHeight-o;if(a===i){S.value=!0;return}else if(a===o){S.value=!1;return}S.value=!1}return{overview:p,sections:f,selectedSection:v,isExpanded:g,expandSection:T,atBottom:S,handleScroll:k}};K.components=Object.assign({QuestionnaireSummaryOverview:Bt,SectionOverview:Ht,SectionDetails:Mt},K.components);var Gt=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",{staticClass:"space-y-5 py-5"},[t("QuestionnaireSummaryOverview",{attrs:{value:e.overview}}),t("div",{staticClass:"relative grid grid-cols-12 gap-4"},[t("div",{staticClass:"h-120 space-y-4 overflow-y-scroll",class:[{"fade-bottom":!e.atBottom},e.isExpanded?"col-span-4":"col-span-12"],on:{scroll:function(c){return e.handleScroll(c)}}},e._l(e.sections,function(c,p){return t("div",{key:p},[t("button",{staticClass:"w-full",attrs:{type:"button"},on:{click:function(f){return e.expandSection(p)}}},[t("SectionOverview",{attrs:{section:c,"is-expanded":e.isExpanded}})],1)])}),0),e.isExpanded?t("div",{staticClass:"col-span-8"},[e.selectedSection?t("SectionDetails",{attrs:{section:e.selectedSection}}):e._e()],1):e._e()])],1)},Jt=[];const ge={};var Yt=A(K,Gt,Jt,!1,Xt,"45f0c18c",null,null);function Xt(e){for(let s in ge)this[s]=ge[s]}const zt=function(){return Yt.exports}(),Kt=U({components:{QuestionnaireSidebar:Qe,QuestionnaireBanner:dt,DispatchRenderer:we,QuestionnaireReview:zt,ProgressBar:Je},props:{...V()},setup(e){const s=se(ae(e)),t=R(),c=r(()=>t.sectionIndex),p=r(()=>{var g;return((g=t.currentSection)==null?void 0:g.name)||""}),f=r(()=>t.answers.length),y=r(()=>t.totalQuestions),v=r(()=>t.atResults);return{...s,sectionIndex:c,sectionName:p,totalAnswers:f,totalQuestions:y,isAtResults:v}},computed:{noData(){return!this.control.data||this.control.data.length===0},arraySchema(){return ke.schema(this.control.rootSchema,this.control.uischema.scope,this.control.rootSchema)},detailUiSchema(){const e=Te(this.control.uischemas,this.control.schema,this.control.uischema.scope,this.control.path,"Group",this.control.uischema,this.control.rootSchema);if(Se(this.control.path))e.type="VerticalLayout";else{const s=e;s.label=this.control.label}return e},allSections(){return this.control.data.map(e=>e.name)}},methods:{composePaths:ie,createDefaultValue:j,addButtonClick(){this.addItem(this.control.path,j(this.control.schema))()}}}),Zt={renderer:Kt,tester:ee(1e3,te("sections"))};var $e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CustomAnswers=e.CustomAnswerSet=e.CustomQuestion=e.CustomQuestionSection=e.CustomQuestionnaire=void 0;const s=M,t=M,c=M,p=M,f=M,y=Ee,v=De;class g extends f.MessageType{constructor(){super("whitehawk.proto.custom_questionnaire.v1.CustomQuestionnaire",[{no:1,name:"id",kind:"message",T:()=>v.Ulid},{no:2,name:"industry",kind:"scalar",T:9},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"sections",kind:"message",repeat:1,T:()=>e.CustomQuestionSection},{no:5,name:"created_at",kind:"message",T:()=>y.IsoDateTime},{no:6,name:"updated_at",kind:"message",T:()=>y.IsoDateTime}])}create(n){const i={industry:"",name:"",sections:[]};return globalThis.Object.defineProperty(i,p.MESSAGE_TYPE,{enumerable:!1,value:this}),n!==void 0&&(0,c.reflectionMergePartial)(this,i,n),i}internalBinaryRead(n,i,o,u){let a=u!=null?u:this.create(),b=n.pos+i;for(;n.pos<b;){let[h,x]=n.tag();switch(h){case 1:a.id=v.Ulid.internalBinaryRead(n,n.uint32(),o,a.id);break;case 2:a.industry=n.string();break;case 3:a.name=n.string();break;case 4:a.sections.push(e.CustomQuestionSection.internalBinaryRead(n,n.uint32(),o));break;case 5:a.createdAt=y.IsoDateTime.internalBinaryRead(n,n.uint32(),o,a.createdAt);break;case 6:a.updatedAt=y.IsoDateTime.internalBinaryRead(n,n.uint32(),o,a.updatedAt);break;default:let _=o.readUnknownField;if(_==="throw")throw new globalThis.Error(`Unknown field ${h} (wire type ${x}) for ${this.typeName}`);let q=n.skip(x);_!==!1&&(_===!0?t.UnknownFieldHandler.onRead:_)(this.typeName,a,h,x,q)}}return a}internalBinaryWrite(n,i,o){n.id&&v.Ulid.internalBinaryWrite(n.id,i.tag(1,s.WireType.LengthDelimited).fork(),o).join(),n.industry!==""&&i.tag(2,s.WireType.LengthDelimited).string(n.industry),n.name!==""&&i.tag(3,s.WireType.LengthDelimited).string(n.name);for(let a=0;a<n.sections.length;a++)e.CustomQuestionSection.internalBinaryWrite(n.sections[a],i.tag(4,s.WireType.LengthDelimited).fork(),o).join();n.createdAt&&y.IsoDateTime.internalBinaryWrite(n.createdAt,i.tag(5,s.WireType.LengthDelimited).fork(),o).join(),n.updatedAt&&y.IsoDateTime.internalBinaryWrite(n.updatedAt,i.tag(6,s.WireType.LengthDelimited).fork(),o).join();let u=o.writeUnknownFields;return u!==!1&&(u==!0?t.UnknownFieldHandler.onWrite:u)(this.typeName,n,i),i}}e.CustomQuestionnaire=new g;class T extends f.MessageType{constructor(){super("whitehawk.proto.custom_questionnaire.v1.CustomQuestionSection",[{no:1,name:"id",kind:"message",T:()=>v.Ulid},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"questions",kind:"message",repeat:1,T:()=>e.CustomQuestion}])}create(n){const i={name:"",questions:[]};return globalThis.Object.defineProperty(i,p.MESSAGE_TYPE,{enumerable:!1,value:this}),n!==void 0&&(0,c.reflectionMergePartial)(this,i,n),i}internalBinaryRead(n,i,o,u){let a=u!=null?u:this.create(),b=n.pos+i;for(;n.pos<b;){let[h,x]=n.tag();switch(h){case 1:a.id=v.Ulid.internalBinaryRead(n,n.uint32(),o,a.id);break;case 2:a.name=n.string();break;case 3:a.questions.push(e.CustomQuestion.internalBinaryRead(n,n.uint32(),o));break;default:let _=o.readUnknownField;if(_==="throw")throw new globalThis.Error(`Unknown field ${h} (wire type ${x}) for ${this.typeName}`);let q=n.skip(x);_!==!1&&(_===!0?t.UnknownFieldHandler.onRead:_)(this.typeName,a,h,x,q)}}return a}internalBinaryWrite(n,i,o){n.id&&v.Ulid.internalBinaryWrite(n.id,i.tag(1,s.WireType.LengthDelimited).fork(),o).join(),n.name!==""&&i.tag(2,s.WireType.LengthDelimited).string(n.name);for(let a=0;a<n.questions.length;a++)e.CustomQuestion.internalBinaryWrite(n.questions[a],i.tag(3,s.WireType.LengthDelimited).fork(),o).join();let u=o.writeUnknownFields;return u!==!1&&(u==!0?t.UnknownFieldHandler.onWrite:u)(this.typeName,n,i),i}}e.CustomQuestionSection=new T;class S extends f.MessageType{constructor(){super("whitehawk.proto.custom_questionnaire.v1.CustomQuestion",[{no:1,name:"id",kind:"message",T:()=>v.Ulid},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"required",kind:"scalar",T:8},{no:4,name:"question_type",kind:"scalar",T:9},{no:5,name:"answer_set",kind:"message",T:()=>e.CustomAnswerSet}])}create(n){const i={text:"",required:!1,questionType:""};return globalThis.Object.defineProperty(i,p.MESSAGE_TYPE,{enumerable:!1,value:this}),n!==void 0&&(0,c.reflectionMergePartial)(this,i,n),i}internalBinaryRead(n,i,o,u){let a=u!=null?u:this.create(),b=n.pos+i;for(;n.pos<b;){let[h,x]=n.tag();switch(h){case 1:a.id=v.Ulid.internalBinaryRead(n,n.uint32(),o,a.id);break;case 2:a.text=n.string();break;case 3:a.required=n.bool();break;case 4:a.questionType=n.string();break;case 5:a.answerSet=e.CustomAnswerSet.internalBinaryRead(n,n.uint32(),o,a.answerSet);break;default:let _=o.readUnknownField;if(_==="throw")throw new globalThis.Error(`Unknown field ${h} (wire type ${x}) for ${this.typeName}`);let q=n.skip(x);_!==!1&&(_===!0?t.UnknownFieldHandler.onRead:_)(this.typeName,a,h,x,q)}}return a}internalBinaryWrite(n,i,o){n.id&&v.Ulid.internalBinaryWrite(n.id,i.tag(1,s.WireType.LengthDelimited).fork(),o).join(),n.text!==""&&i.tag(2,s.WireType.LengthDelimited).string(n.text),n.required!==!1&&i.tag(3,s.WireType.Varint).bool(n.required),n.questionType!==""&&i.tag(4,s.WireType.LengthDelimited).string(n.questionType),n.answerSet&&e.CustomAnswerSet.internalBinaryWrite(n.answerSet,i.tag(5,s.WireType.LengthDelimited).fork(),o).join();let u=o.writeUnknownFields;return u!==!1&&(u==!0?t.UnknownFieldHandler.onWrite:u)(this.typeName,n,i),i}}e.CustomQuestion=new S;class k extends f.MessageType{constructor(){super("whitehawk.proto.custom_questionnaire.v1.CustomAnswerSet",[{no:1,name:"id",kind:"message",T:()=>v.Ulid},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"answers",kind:"message",repeat:1,T:()=>e.CustomAnswers}])}create(n){const i={name:"",answers:[]};return globalThis.Object.defineProperty(i,p.MESSAGE_TYPE,{enumerable:!1,value:this}),n!==void 0&&(0,c.reflectionMergePartial)(this,i,n),i}internalBinaryRead(n,i,o,u){let a=u!=null?u:this.create(),b=n.pos+i;for(;n.pos<b;){let[h,x]=n.tag();switch(h){case 1:a.id=v.Ulid.internalBinaryRead(n,n.uint32(),o,a.id);break;case 2:a.name=n.string();break;case 3:a.answers.push(e.CustomAnswers.internalBinaryRead(n,n.uint32(),o));break;default:let _=o.readUnknownField;if(_==="throw")throw new globalThis.Error(`Unknown field ${h} (wire type ${x}) for ${this.typeName}`);let q=n.skip(x);_!==!1&&(_===!0?t.UnknownFieldHandler.onRead:_)(this.typeName,a,h,x,q)}}return a}internalBinaryWrite(n,i,o){n.id&&v.Ulid.internalBinaryWrite(n.id,i.tag(1,s.WireType.LengthDelimited).fork(),o).join(),n.name!==""&&i.tag(2,s.WireType.LengthDelimited).string(n.name);for(let a=0;a<n.answers.length;a++)e.CustomAnswers.internalBinaryWrite(n.answers[a],i.tag(3,s.WireType.LengthDelimited).fork(),o).join();let u=o.writeUnknownFields;return u!==!1&&(u==!0?t.UnknownFieldHandler.onWrite:u)(this.typeName,n,i),i}}e.CustomAnswerSet=new k;class d extends f.MessageType{constructor(){super("whitehawk.proto.custom_questionnaire.v1.CustomAnswers",[{no:1,name:"id",kind:"message",T:()=>v.Ulid},{no:2,name:"label",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"risk_score",kind:"scalar",T:5}])}create(n){const i={label:"",value:"",riskScore:0};return globalThis.Object.defineProperty(i,p.MESSAGE_TYPE,{enumerable:!1,value:this}),n!==void 0&&(0,c.reflectionMergePartial)(this,i,n),i}internalBinaryRead(n,i,o,u){let a=u!=null?u:this.create(),b=n.pos+i;for(;n.pos<b;){let[h,x]=n.tag();switch(h){case 1:a.id=v.Ulid.internalBinaryRead(n,n.uint32(),o,a.id);break;case 2:a.label=n.string();break;case 3:a.value=n.string();break;case 4:a.riskScore=n.int32();break;default:let _=o.readUnknownField;if(_==="throw")throw new globalThis.Error(`Unknown field ${h} (wire type ${x}) for ${this.typeName}`);let q=n.skip(x);_!==!1&&(_===!0?t.UnknownFieldHandler.onRead:_)(this.typeName,a,h,x,q)}}return a}internalBinaryWrite(n,i,o){n.id&&v.Ulid.internalBinaryWrite(n.id,i.tag(1,s.WireType.LengthDelimited).fork(),o).join(),n.label!==""&&i.tag(2,s.WireType.LengthDelimited).string(n.label),n.value!==""&&i.tag(3,s.WireType.LengthDelimited).string(n.value),n.riskScore!==0&&i.tag(4,s.WireType.Varint).int32(n.riskScore);let u=o.writeUnknownFields;return u!==!1&&(u==!0?t.UnknownFieldHandler.onWrite:u)(this.typeName,n,i),i}}e.CustomAnswers=new d})($e);const Z=U({layout:"siteMain"});Z.setup=(e,s)=>{const t=oe("id"),c=oe("questionnaireId"),p=r(()=>[...Re,ze,rt,Ze,Zt]),f=Fe.get(),y=r(()=>{var a;if((a=f.data.value)!=null&&a.displayUischema)return JSON.parse(f.data.value.displayUischema)}),v=Me.get(),g=r(()=>v.data.value?JSON.parse(v.data.value.displaySchema):""),T=Ne.read(c),S=r(()=>T.data.value||$e.CustomQuestionnaire.create()),k=le.read(c),d=Ye(r(()=>k.data.value||Pe.create())),C=r(()=>Boolean(y.value&&g.value&&S.value)),n=R();async function i(){await n.setSchema(g.value),await n.setData(S.value),d.value.id?await n.setTakenId(d.value.id.value):await u({accountId:{value:t.value},questionnaireId:{value:c.value}})}i();const o=le.create();async function u(a){const{response:b}=await o.mutateAsync(a);b.taken&&b.taken.id&&(d.value.id=b.taken.id)}return z(()=>S.value,async a=>{a&&await n.setData(a)},{immediate:!0}),z(()=>d.value,async a=>{a&&a.id&&await n.setTakenId(a.id.value)},{immediate:!0}),Oe(()=>{n.clearSchema(),n.clearData(),n.clearAnswers()}),{renderers:p,uiSchema:y,schema:g,questionnaire:S,ready:C}};Z.components=Object.assign({LoadingSpinner:Le,JsonForms:je},Z.components);var Vt=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.ready?t("JsonForms",{attrs:{data:e.questionnaire,renderers:e.renderers,schema:e.schema,uischema:e.uiSchema}}):t("LoadingSpinner")},en=[];const xe={};var qe=A(Z,Vt,en,!1,tn,null,null,null);function tn(e){for(let s in xe)this[s]=xe[s]}typeof ce=="function"&&ce(qe);const kn=function(){return qe.exports}();export{kn as default};
