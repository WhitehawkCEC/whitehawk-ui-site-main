import{F as I}from"./FormButton.fa9724ff.js";import{S as $}from"./SubscriptionIdHeader.fb90251c.js";import{D as F}from"./DateRangeInput.827d1e46.js";import{a5 as U,v as h,cc as D,w as C,I as R,G as x,n as B,bG as f,c5 as b,c as k}from"./index.915cb62f.js";import{u as y}from"./useAccountSubscriptionValidity.1fd53a17.js";import{S as q}from"./SubscriptionPartialUpdateRequestInput.e3f1a667.js";import"./arrow-down-on-square.6f2806b6.js";import"./trash.687d612e.js";import"./BackButton.916ad099.js";import"./chevron-left.0808b01b.js";import"./index.dce9972f.js";import"./index.a8825346.js";import"./index.a65ac4cd.js";import"./index.7a54c9f6.js";import"./index.87e44ac4.js";import"./index.dc0e16e4.js";import"./index.426780ec.js";import"./SlugInput.cf383a53.js";import"./FormValidation.535989ec.js";import"./index.acd90eed.js";import"./DynamicForm.3e341623.js";const r={};r.props={id:{key:"id",required:!0,type:String},subscriptionId:{key:"subscriptionId",required:!0,type:String}};r.setup=(t,a)=>{const s=t,{id:i,subscriptionId:o}=U(s),n=h(D.DateRange.create()),p=y.get(i,o);C(()=>p.data.value,e=>{e&&(n.value=e)},{immediate:!0});const d=R(),l=x(),c=y.update(i,o);async function m(){await c.mutateAsync({value:n.value}),l.success("Successfully updated subscription validity."),d.push(`/admin/companies/${i.value}/subscriptions`)}return{validity:n,submit:m}};r.components=Object.assign({DateRangeInput:F,FormButton:I},r.components);var j=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("form",{staticClass:"divide-y",on:{submit:function(i){return i.preventDefault(),t.submit.apply(null,arguments)}}},[s("div",{staticClass:"p-4"},[s("BaseLabel",{staticClass:"grid grid-cols-1 gap-1 sm:grid-cols-3 sm:items-center sm:gap-4"},[s("span",[t._v("Validity")]),s("DateRangeInput",{staticClass:"sm:col-span-2",model:{value:t.validity,callback:function(i){t.validity=i},expression:"validity"}})],1)],1),s("FormButton",{attrs:{action:"update"}})],1)},A=[];const S={};var V=B(r,j,A,!1,w,null,null,null);function w(t){for(let a in S)this[a]=S[a]}const G=function(){return V.exports}(),u={};u.setup=(t,a)=>{const s=f("id"),i=f("subscriptionId"),o=b.read(s,i),n=h();C(()=>o.data.value,e=>{e&&(n.value={accountId:e.accountId,subscriptionId:e.subscriptionId,name:e.name})},{immediate:!0});const p=k(()=>{var v,_;const e=n.value;return Boolean(e&&((v=e.subscriptionId)==null?void 0:v.value)&&e.name&&((_=e.accountId)==null?void 0:_.value))}),d=R(),l=b.update(s,i),c=x();async function m(){if(n.value){const{response:e}=await l.mutateAsync(n.value);e?(c.success("Successfully updated subscription."),d.push(`/admin/companies/${s.value}/subscriptions`)):c.error("Something went wrong.")}}return{id:s,subscriptionId:i,subscriptionQuery:o,update:n,isValid:p,updateSubscription:m}};u.components=Object.assign({SubscriptionIdHeader:$,SubscriptionPartialUpdateRequestInput:q,FormButton:I,UpdateSubscriptionValidityForm:G},u.components);var P=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("section",{staticClass:"space-y-6"},[s("BaseVueQuery",{attrs:{query:t.subscriptionQuery},scopedSlots:t._u([{key:"success",fn:function(i){var o=i.data;return[s("SubscriptionIdHeader",{attrs:{id:t.id,subscription:o}})]}}])}),s("BaseSimpleCard",{staticClass:"divide-y"},[s("BaseTypography",{staticClass:"p-4",attrs:{component:"h4",variant:"subtitle3"}},[t._v(" Update Subscription Name ")]),s("form",{staticClass:"divide-y",on:{submit:function(i){return i.preventDefault(),t.updateSubscription.apply(null,arguments)}}},[t.update?s("SubscriptionPartialUpdateRequestInput",{model:{value:t.update,callback:function(i){t.update=i},expression:"update"}}):t._e(),s("FormButton",{attrs:{action:"update","is-valid-form":t.isValid}})],1)],1),s("BaseSimpleCard",{staticClass:"divide-y"},[s("BaseTypography",{staticClass:"p-4",attrs:{component:"h4",variant:"subtitle3"}},[t._v(" Update Subscription Validity ")]),s("UpdateSubscriptionValidityForm",{attrs:{id:t.id,"subscription-id":t.subscriptionId}})],1)],1)},Q=[];const g={};var E=B(u,P,Q,!1,H,null,null,null);function H(t){for(let a in g)this[a]=g[a]}const ut=function(){return E.exports}();export{ut as default};
