import{bs as I,L,c7 as b,du as R,b as T,bG as B,d as l,dn as y,aK as D,n as Q}from"./index.2f8188b0.js";import{B as M}from"./BatchScorecardInputV3.cd875572.js";import{u as V}from"./useCompanyScorecardTemplates.e1591bed.js";import{u as $}from"./useScorecardTemplates.99da024a.js";import{u as A}from"./useBlackKiteEntities.75411a62.js";import{u as K}from"./useUsers.00c4ddd3.js";import{e as o}from"./attributeValue.ea53a720.js";import{s as O}from"./index.1d4f58d9.js";import{t as P}from"./index.c4eb7f93.js";import"./StatusInput.2404b25f.js";import"./ToolTip.1922acbf.js";import"./ObjectDisplay.4d97f7bf.js";import"./DynamicForm.5939ce11.js";const m={};m.setup=(e,c)=>{const t=b("id"),n=b("subscriptionId"),p=R.create(t,n),d=T(!1),v=[B.list(),A.list(t),$.list()],f=V.get(t),_=K.list(),g=l(()=>{var r;return(r=_.data.value)==null?void 0:r.map(s=>({id:{value:o(s,"sub")},name:o(s,"name")||"",title:o(s,"custom:title")||"",email:o(s,"email"),phone:o(s,"phone_number")||""})).find(s=>s.email==="consultingservices@whitehawk.com")}),h=B.read(t),S=l(()=>{if(h.data.value)return{id:{value:h.data.value.id},name:h.data.value.name}}),a=O(l(()=>{var i;const r=new Date,s=r.getUTCFullYear(),u=`Q${Math.ceil((r.getMonth()+1)/4)}`;return{id:t,company:S.value,analyst:g.value,template:((i=f.data.value)==null?void 0:i.split("/")[1])||"",status:{state:y.State.IN_PROGRESS,year:s,quarter:P(u)},includeCmmc:!0,entities:[]}})),x=l(()=>a.value?!(a.value.entities.length>0&&a.value.analyst&&a.value.company&&a.value.status&&a.value.template):!0),k=D();async function w(){var r,s,u,i;if(a.value){const q={company:a.value.company,analyst:(r=a.value)==null?void 0:r.analyst,status:{year:2023,quarter:y.Quarter.Q1,state:y.State.COMPLETE},includeCmmc:(s=a.value)==null?void 0:s.includeCmmc,template:a.value.template,entities:(u=a.value)==null?void 0:u.entities},{response:E}=await p.mutateAsync(q);(i=E.batchId)!=null&&i.value&&k.push(`/admin/companies/${t.value}/subscriptions/${n.value}/integrations/2/scorecards/batch`)}}return{isLoading:d,queries:v,users:_,batch:a,isDisabled:x,createBatch:w}};m.components=Object.assign({BackButton:I,BatchScorecardInputV3:M,LoadingSpinner:L},m.components);var j=function(){var e=this,c=e.$createElement,t=e._self._c||c;return t("div",{staticClass:"space-y-6"},[t("div",{staticClass:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-4"},[t("BackButton"),t("div",{staticClass:"flex flex-col -space-y-1"},[t("BaseTypography",{staticClass:"uppercase text-gray-500",attrs:{variant:"overline"}},[e._v(" Black Kite ")]),t("BaseTypography",{attrs:{variant:"h5",component:"h2"}},[e._v(" Batch Scorecard ")])],1)],1),t("BaseSimpleCard",[t("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),e.createBatch.apply(null,arguments)}}},[t("BaseVueQueries",{attrs:{queries:e.queries},scopedSlots:e._u([{key:"success",fn:function(n){var p=n[0],d=n[1],v=n[2];return[t("BatchScorecardInputV3",{attrs:{users:e.users.data.value||[],companies:p,entities:d,templates:v},model:{value:e.batch,callback:function(f){e.batch=f},expression:"batch"}})]}}])}),t("div",{staticClass:"p-4"},[t("BaseButton",{attrs:{disabled:e.isDisabled}},[e.isLoading?t("LoadingSpinner"):t("span",[e._v("Create Batch")])],1)],1)],1)])],1)},F=[];const C={};var G=Q(m,j,F,!1,U,null,null,null);function U(e){for(let c in C)this[c]=C[c]}const rt=function(){return G.exports}();export{rt as default};
