import{L as Q}from"./LicenseTypeMapQuantitiesInput.709be049.js";import{d as u,cS as T,cP as C,r as I,cI as x,aB as $,cJ as k,n as q,b_ as y}from"./index.181068a8.js";import{u as M,L as A}from"./LicenseBatchUsageDisplay.2c4ceb88.js";import"./index.e3aec016.js";import"./DynamicForm.fc38fbfd.js";import"./calendar.aad8910e.js";import"./identification.8410fcc9.js";import"./AggregateLicenseDisplay.0943c27f.js";import"./DateRangeDisplay.6164c365.js";import"./IsoDateTimeDisplay.18727b4c.js";import"./message_pb.0d67cb9f.js";const d={};d.props={accountId:{key:"accountId",required:!0,type:String},groupId:{key:"groupId",required:!0,type:String},groupBatchId:{key:"groupBatchId",required:!0,type:String}};d.setup=(t,a)=>{const e=t,s=u(()=>e.accountId),r=u(()=>e.groupId),o=u(()=>e.groupBatchId),_=T.create(s,r,o),i=C.read(s,r,o),p=u(()=>{var n,c;return(c=(n=i.data.value)==null?void 0:n.value)==null?void 0:c.accountBatchId}),g=u(()=>{var n,c,l;return(l=(c=(n=i.data.value)==null?void 0:n.value)==null?void 0:c.usage)==null?void 0:l.counts}),v=I(x.LicenseTypeMapQuantities.create()),h=I(!1);$(()=>g.value,n=>{var c,l;!n||h.value||(v.value={annual:((c=n.annual)==null?void 0:c.quantity)||0,oneTime:((l=n.oneTime)==null?void 0:l.quantity)||0},h.value=!0)},{immediate:!0});const f=M(g,v),L=u(()=>({accountBatchId:p.value||k.create(),quantitiesDiff:f.value})),S=u(()=>p.value&&(f.value.annual!==0||f.value.oneTime!==0));async function D(){await _.mutateAsync(L.value)}return{currentState:i,quantitiesDesired:v,canSubmit:S,submit:D}};d.components=Object.assign({LicenseTypeMapQuantitiesInput:Q},d.components);var j=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("BaseSimpleCard",{staticClass:"divide-y"},[e("BaseTypography",{staticClass:"p-4",attrs:{component:"h2",variant:"subtitle3"}},[t._v(" Edit Quantities ")]),e("form",{staticClass:"divide-y",on:{submit:function(s){return s.preventDefault(),t.submit.apply(null,arguments)}}},[e("BaseVueQuery",{attrs:{query:t.currentState},scopedSlots:t._u([{key:"success",fn:function(){return[e("LicenseTypeMapQuantitiesInput",{model:{value:t.quantitiesDesired,callback:function(s){t.quantitiesDesired=s},expression:"quantitiesDesired"}})]},proxy:!0}])}),e("div",{staticClass:"p-4"},[e("div",{staticClass:"md:inline-flex"},[e("BaseButton",{staticClass:"w-full md:w-auto",attrs:{"display-type":"info",disabled:!t.canSubmit}},[t._v(" Change ")])],1)])],1)],1)},G=[];const B={};var U=q(d,j,G,!1,E,null,null,null);function E(t){for(let a in B)this[a]=B[a]}const F=function(){return U.exports}(),m={};m.setup=(t,a)=>{const e=y("id"),s=y("groupId"),r=y("batchId"),o=C.read(e,s,r),_=u(()=>{var i,p;return((p=(i=o.data.value)==null?void 0:i.value)==null?void 0:p.usage)||x.LicenseBatchUsage.create()});return{id:e,groupId:s,batchId:r,licenseBatch:o,usage:_}};m.components=Object.assign({LicenseBatchUsageDisplay:A,AccountGroupLicenseBatchQuantitiesChange:F},m.components);var R=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",[e("BaseVueQuery",{attrs:{query:t.licenseBatch},scopedSlots:t._u([{key:"success",fn:function(){return[e("div",{staticClass:"flex flex-col space-y-4"},[e("LicenseBatchUsageDisplay",{attrs:{value:t.usage}}),e("AccountGroupLicenseBatchQuantitiesChange",{attrs:{"account-id":t.id,"group-id":t.groupId,"group-batch-id":t.batchId}})],1)]},proxy:!0}])})],1)},w=[];const b={};var O=q(m,R,w,!1,P,null,null,null);function P(t){for(let a in b)this[a]=b[a]}const et=function(){return O.exports}();export{et as default};
