import{d as u,aS as v,n as A,aq as C,bZ as f,c6 as x,aJ as B}from"./index.cbcaea0e.js";import{S as L}from"./SubscriptionProductIdHeader.2804e946.js";import{A as $,T as k}from"./AppTanStackTable.7e213fe3.js";import{I as y}from"./IsoDateTimeDisplay.edcda147.js";import{c as F}from"./createOnChangeFn.3fa2d1be.js";import{u as I}from"./createSimpleTable.1785117a.js";import{u as P}from"./useAccountSubscriptionProductLicenseBatches.ad415533.js";import"./BackButton.ca274c8c.js";import"./chevron-left.0808b01b.js";import"./ToolTip.56588759.js";import"./exclamation-triangle.54812a62.js";import"./DateRangeDisplay.6919626d.js";import"./index.b8c698c2.js";import"./index.753ab764.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.ed14a3f9.js";import"./chevron-up.736f4142.js";import"./message_pb.4db83a18.js";const l={};l.props={value:{key:"value",required:!0,type:Array},mappedActions:{key:"mappedActions",required:!1,type:Map}};l.setup=(s,r)=>{const n=s,c=u(()=>n.value),i=u(()=>n.mappedActions),o=F(),m=u(()=>[o.accessor(t=>{var e;return(e=t.validity)==null?void 0:e.start},{id:"startDate",header:()=>"Start Date",cell:t=>v(y,{props:{value:t.getValue()}}),enableColumnFilter:!1}),o.accessor(t=>{var e;return(e=t.validity)==null?void 0:e.end},{id:"endDate",header:()=>"End Date",cell:t=>v(y,{props:{value:t.getValue()}}),enableColumnFilter:!1}),o.group({id:"oneTimeLicenses",header:()=>"One Time Licenses",columns:[o.accessor(t=>{var e,a;return(a=(e=t.counts)==null?void 0:e.oneTime)==null?void 0:a.quantity},{id:"oneTimeTotal",header:()=>"Total",enableColumnFilter:!1}),o.accessor(t=>{var e,a;return(a=(e=t.counts)==null?void 0:e.oneTime)==null?void 0:a.available},{id:"oneTimeAvailable",header:()=>"Available",enableColumnFilter:!1}),o.accessor(t=>{var e,a;return(a=(e=t.counts)==null?void 0:e.oneTime)==null?void 0:a.used},{id:"oneTimeUsed",header:()=>"Used",enableColumnFilter:!1})],enableGrouping:!0}),o.group({id:"annualLicenses",header:()=>"Annual Licenses",columns:[o.accessor(t=>{var e,a;return(a=(e=t.counts)==null?void 0:e.annual)==null?void 0:a.quantity},{id:"annualTotal",header:()=>"Total",enableColumnFilter:!1}),o.accessor(t=>{var e,a;return(a=(e=t.counts)==null?void 0:e.annual)==null?void 0:a.available},{id:"annualAvailable",header:()=>"Available",enableColumnFilter:!1}),o.accessor(t=>{var e,a;return(a=(e=t.counts)==null?void 0:e.annual)==null?void 0:a.used},{id:"annualUsed",header:()=>"Used",enableColumnFilter:!1})],enableGrouping:!0}),o.display({id:"actions",header:"Actions",cell:({row:t})=>{var e,a,p;return v(k,{props:{actions:(e=t.original.id)!=null&&e.value?(p=i.value)==null?void 0:p.get((a=t.original.id)==null?void 0:a.value):[]}})}})].filter(t=>n.mappedActions?t:t.id!=="actions"));return{instance:I(c,m)}};l.components=Object.assign({AppTanStackTable:$},l.components);var q=function(){var s=this,r=s.$createElement,n=s._self._c||r;return n("AppTanStackTable",{attrs:{table:s.instance}})},U=[];const T={};var D=A(l,q,U,!1,R,null,null,null);function R(s){for(let r in T)this[r]=T[r]}const V=function(){return D.exports}(),d={};d.setup=(s,r)=>{const n=f("id"),c=f("subscriptionId"),i=f("productId"),o=P.list(n,c,i),m=u(()=>o.data.value||[]),_=x.read(n,c,i),b=B(),t=u(()=>{var a;const e=new Map;for(const p of m.value){const h=((a=p.id)==null?void 0:a.value)||"",S=[{id:"edit",action(){b.push(`/admin/companies/${n.value}/subscriptions/${c.value}/products/${i.value}/license-batches/${h}`)}}];e.set(h,S)}return e});return{id:n,subscriptionId:c,licenseBatchList:o,productRead:_,actions:t}};d.components=Object.assign({SubscriptionProductIdHeader:L,PlusSvg:C,LicenseBatchUsageTable:V},d.components);var j=function(){var s=this,r=s.$createElement,n=s._self._c||r;return n("section",{staticClass:"space-y-6"},[n("BaseVueQuery",{attrs:{query:s.productRead},scopedSlots:s._u([{key:"success",fn:function(c){var i=c.data;return[n("SubscriptionProductIdHeader",{attrs:{id:s.id,"subscription-id":s.subscriptionId,value:i}})]}}])}),n("BaseTablePageLayout",{scopedSlots:s._u([{key:"title",fn:function(){return[s._v("License Batch Usage")]},proxy:!0},{key:"button",fn:function(){return[n("BaseButton",{staticClass:"space-x-2",attrs:{append:"",to:"new"}},[n("PlusSvg",{staticClass:"h-4 w-4"}),n("span",[s._v("License Batch")])],1)]},proxy:!0},{key:"table",fn:function(){return[n("BaseVueQuery",{attrs:{query:s.licenseBatchList},scopedSlots:s._u([{key:"success",fn:function(c){var i=c.data;return[n("LicenseBatchUsageTable",{attrs:{value:i,"mapped-actions":s.actions}})]}}])})]},proxy:!0}])})],1)},E=[];const g={};var H=A(d,j,E,!1,M,null,null,null);function M(s){for(let r in g)this[r]=g[r]}const re=function(){return H.exports}();export{re as default};
