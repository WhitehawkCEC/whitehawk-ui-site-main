import{P as f,bG as l,c5 as S,c8 as P,c as i,c9 as g,cq as x,n as C}from"./index.56631f10.js";import{S as I,a as h}from"./SubscriptionProductsTable.d410c389.js";import{S as k}from"./SubscriptionIdHeader.499031d0.js";import"./DateRangeDisplay.5a0cd947.js";import"./IsoDateTimeDisplay.d482ffcd.js";import"./AppTanStackTable.821690a8.js";import"./createOnChangeFn.a00e99d9.js";import"./chevron-up.736f4142.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.d08eead0.js";import"./createSimpleTable.5a8aca6c.js";import"./BackButton.e83339d6.js";import"./index.71a831b6.js";const u={};u.setup=(t,c)=>{const s=l("id"),r=l("subscriptionId"),o=S.read(s,r),a=P.list(s,r),_=i(()=>a.data.value||[]),b=g(),v=i(()=>b.pinnedProductIds),y=i(()=>{const p=[];return _.value.filter(e=>{var n,d;return((d=(n=e.product)==null?void 0:n.id)==null?void 0:d.value)&&v.value.includes(e.product.id.value)?p.push(e):x.SubscriptionProductWithConfigType.create()}),p.sort((e,n)=>e.product&&n.product?e.product.name.localeCompare(n.product.name):-1)||[]});return{id:s,subscriptionId:r,subscriptionQuery:o,productsQuery:a,pinnedProducts:y}};u.components=Object.assign({SubscriptionIdHeader:k,SubscriptionProductCard:I,PlusSvg:f,SubscriptionProductsTable:h},u.components);var B=function(){var t=this,c=t.$createElement,s=t._self._c||c;return s("section",{staticClass:"space-y-6"},[s("BaseVueQuery",{attrs:{query:t.subscriptionQuery},scopedSlots:t._u([{key:"success",fn:function(r){var o=r.data;return[s("SubscriptionIdHeader",{attrs:{id:t.id,subscription:o}})]}}])}),t.pinnedProducts.length>0?s("div",{staticClass:"space-y-2"},[s("BaseTypography",{staticClass:"uppercase text-gray-600",attrs:{variant:"overline"}},[t._v(" Pinned Products ")]),s("ul",{staticClass:"grid grid-cols-1 gap-4 sm:gap-6 lg:grid-cols-2 2xl:grid-cols-3"},t._l(t.pinnedProducts,function(r,o){return s("li",{key:o},[s("SubscriptionProductCard",{attrs:{id:t.id,"subscription-id":t.subscriptionId,product:r}})],1)}),0)],1):t._e(),s("BaseTablePageLayout",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Subscription Products")]},proxy:!0},{key:"button",fn:function(){return[s("BaseButton",{staticClass:"space-x-1",attrs:{to:"./new",append:""}},[s("PlusSvg",{staticClass:"w-5"}),s("span",[t._v("Product")])],1)]},proxy:!0},{key:"table",fn:function(){return[s("BaseVueQuery",{attrs:{query:t.productsQuery},scopedSlots:t._u([{key:"success",fn:function(r){var o=r.data;return[s("SubscriptionProductsTable",{attrs:{id:t.id,"sub-id":t.subscriptionId,value:o}})]}}])})]},proxy:!0}])})],1)},Q=[];const m={};var T=C(u,B,Q,!1,q,null,null,null);function q(t){for(let c in m)this[c]=m[c]}const D=function(){return T.exports}();export{D as default};
