import{aT as $,aE as M,ai as B,aP as v,aQ as y,br as j,aO as D,n as h,bR as O,aJ as Q,aG as E,aS as f,aZ as m,bS as N,aq as V}from"./index.181068a8.js";import{A as z,R as L}from"./RowSelectionInput.3d40d12f.js";import{A as G,T as H}from"./AppTanStackTable.4f5e0374.js";import{u as U,c as X,i as p,r as J,h as Y,g as Z,f as K,e as W,d as ee}from"./createOnChangeFn.651ed8c5.js";import{u as te}from"./useManufacturers.96e65ad7.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.09b447a3.js";import"./chevron-up.736f4142.js";const k={create(){const e=$();return M(t=>v.post(`${y}/featured-manufacturers`,t).then(a=>a.data),{onSuccess(){e.invalidateQueries(["manufacturers"],{exact:!0})}})},delete(){const e=$();return M(t=>v.delete(`${y}/featured-manufacturers/${t}`).then(a=>a.data),{onSuccess(){e.invalidateQueries(["manufacturers"],{exact:!0})}})},list(){return B(["featured-manufacturers"],()=>v.get(`${y}/featured-manufacturers`).then(e=>e.data))}},u={};u.props={value:{key:"value",required:!1,type:String},remove:{key:"remove",required:!0,type:Function}};u.setup=(e,t)=>({});u.components=Object.assign({DateIsoStringDisplay:j,XSvg:D},u.components);var ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.value?a("div",{staticClass:"flex items-center space-x-1"},[a("DateIsoStringDisplay",{staticClass:"inline-flex items-center rounded bg-indigo-100 px-2 py-0.5 text-xs font-medium uppercase leading-4 tracking-widest text-indigo-800",attrs:{value:e.value,format:"date"}}),a("BaseIcon",{attrs:{color:"danger",size:"small",action:"secondary"},on:{click:e.remove}},[a("XSvg",{staticClass:"w-3"})],1)],1):e._e()},ne=[];const A={};var se=h(u,ae,ne,!1,re,null,null,null);function re(e){for(let t in A)this[t]=A[t]}const oe=function(){return se.exports}(),c={};c.props={manufacturers:{key:"manufacturers",required:!0,type:Array}};c.setup=(e,t)=>{const a=e,{manufacturers:_}=O(a),i=Q(),l=E(),S=k.create(),P=k.delete(),r=X(),q=[r.display({id:"select",header:({table:n})=>f(z,{props:{table:n}}),cell:({row:n})=>f(L,{props:{row:n}})}),r.accessor("id",{header:()=>"Id",enableColumnFilter:!1}),r.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),r.accessor("url",{header:()=>"URL",enableColumnFilter:!1}),r.accessor(n=>n.featured,{id:"featured",header:()=>"Featured",cell:n=>f(oe,{props:{value:n.getValue(),async remove(){await P.mutateAsync(n.row.original.id)&&(l.success("Featured removed successfully."),window.location.reload())}}}),enableColumnFilter:!1}),r.display({id:"actions",header:"Actions",cell:({row:n})=>f(H,{props:{actions:[{id:"view",action(){i.push(`/admin/manufacturers/${n.original.id}/products`)}},{id:"edit",action(){i.push(`/admin/manufacturers/${n.original.id}`)}},{id:"setFeatured",async action(){await S.mutateAsync({id:n.original.id,name:n.original.name})&&l.success("Successfully featured manufacturer.")}}].filter(s=>n.original.featured?s.id!=="setFeatured":s)}})})],w=m([]),b=m({pageIndex:0,pageSize:10}),x=m(""),F=m({}),C=U({get data(){return _.value},columns:q,state:{get sorting(){return w.value},get pagination(){return b.value},get globalFilter(){return x.value},get rowSelection(){return F.value}},onSortingChange:p(w),onPaginationChange:p(b),onGlobalFilterChange:p(x),globalFilterFn:(n,s,o,d)=>{const R=J(n.getValue(s),o,{threshold:Y.CONTAINS});return d(R),R.passed},onRowSelectionChange:p(F),getCoreRowModel:Z(),getSortedRowModel:K(),getPaginationRowModel:W(),getFilteredRowModel:ee()});return{instance:C,bulkActions:[{id:"setFeatured",async action(){const n=C.getSelectedRowModel().rows,s=[];if(n.length>0){for(const o of n)if(!o.original.featured){const d=await S.mutateAsync({id:o.original.id,name:o.original.name});d&&s.push(d.id)}l.success(`Successfully Featured ${s.length}/${n.length} Manufacturers(s).`),window.location.reload()}else l.error("You must select a row.")}}]}};c.components=Object.assign({AppTanStackTable:G},c.components);var ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("AppTanStackTable",{attrs:{table:e.instance,"table-actions":e.bulkActions}})},ce=[];const T={};var ie=h(c,ue,ce,!1,le,null,null,null);function le(e){for(let t in T)this[t]=T[t]}const de=function(){return ie.exports}(),g={};g.setup=(e,t)=>({manufacturers:te.list()});g.components=Object.assign({BaseTablePageLayout:N,PlusSvg:V,ManufacturersTable:de},g.components);var fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Manufacturers")]},proxy:!0},{key:"button",fn:function(){return[a("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{to:"/admin/manufacturers/new"}},[a("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),a("span",[e._v("Add Manufacturer")])],1)]},proxy:!0},{key:"table",fn:function(){return[a("BaseVueQuery",{attrs:{query:e.manufacturers},scopedSlots:e._u([{key:"success",fn:function(_){var i=_.data;return[a("ManufacturersTable",{attrs:{manufacturers:i}})]}}])})]},proxy:!0}])})},me=[];const I={};var pe=h(g,fe,me,!1,ge,null,null,null);function ge(e){for(let t in I)this[t]=I[t]}const Re=function(){return pe.exports}();export{Re as default};
