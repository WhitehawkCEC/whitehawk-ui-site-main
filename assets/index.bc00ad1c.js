import{aq as f,bZ as l,c3 as S,c6 as P,d as i,c7 as g,cE as x,n as C}from"./index.f1eeb782.js";import{S as I,a as h}from"./SubscriptionProductsTable.c4d53e7e.js";import{S as k}from"./SubscriptionIdHeader.6e26995c.js";import"./DateRangeDisplay.2c376167.js";import"./IsoDateTimeDisplay.b1ab2436.js";import"./AppTanStackTable.dbd51248.js";import"./createOnChangeFn.2d31f7fd.js";import"./chevron-up.736f4142.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.cc959990.js";import"./createSimpleTable.b52a2545.js";import"./BackButton.7574749d.js";import"./index.3bb05303.js";const u={};u.setup=(t,n)=>{const s=l("id"),r=l("subscriptionId"),o=S.read(s,r),a=P.list(s,r),_=i(()=>a.data.value||[]),b=g(),v=i(()=>b.pinnedProductIds),y=i(()=>{const p=[];return _.value.filter(e=>{var c,d;return((d=(c=e.product)==null?void 0:c.id)==null?void 0:d.value)&&v.value.includes(e.product.id.value)?p.push(e):x.SubscriptionProductWithConfigType.create()}),p.sort((e,c)=>e.product&&c.product?e.product.name.localeCompare(c.product.name):-1)||[]});return{id:s,subscriptionId:r,subscriptionQuery:o,productsQuery:a,pinnedProducts:y}};u.components=Object.assign({SubscriptionIdHeader:k,SubscriptionProductCard:I,PlusSvg:f,SubscriptionProductsTable:h},u.components);var B=function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("section",{staticClass:"space-y-6"},[s("BaseVueQuery",{attrs:{query:t.subscriptionQuery},scopedSlots:t._u([{key:"success",fn:function(r){var o=r.data;return[s("SubscriptionIdHeader",{attrs:{id:t.id,subscription:o}})]}}])}),t.pinnedProducts.length>0?s("div",{staticClass:"space-y-2"},[s("BaseTypography",{staticClass:"uppercase text-gray-600",attrs:{variant:"overline"}},[t._v(" Pinned Products ")]),s("ul",{staticClass:"grid grid-cols-1 gap-4 sm:gap-6 lg:grid-cols-2 2xl:grid-cols-3"},t._l(t.pinnedProducts,function(r,o){return s("li",{key:o},[s("SubscriptionProductCard",{attrs:{id:t.id,"subscription-id":t.subscriptionId,product:r}})],1)}),0)],1):t._e(),s("BaseTablePageLayout",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Subscription Products")]},proxy:!0},{key:"button",fn:function(){return[s("BaseButton",{staticClass:"space-x-1",attrs:{to:"./new",append:""}},[s("PlusSvg",{staticClass:"w-5"}),s("span",[t._v("Product")])],1)]},proxy:!0},{key:"table",fn:function(){return[s("BaseVueQuery",{attrs:{query:t.productsQuery},scopedSlots:t._u([{key:"success",fn:function(r){var o=r.data;return[s("SubscriptionProductsTable",{attrs:{id:t.id,"sub-id":t.subscriptionId,value:o}})]}}])})]},proxy:!0}])})],1)},Q=[];const m={};var T=C(u,B,Q,!1,q,null,null,null);function q(t){for(let n in m)this[n]=m[n]}const D=function(){return T.exports}();export{D as default};
