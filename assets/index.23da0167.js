import{dm as _,c as u,aI as P,aS as b,n as I,ao as w,c1 as g,dn as E}from"./index.73606d18.js";import{A,T as B}from"./AppTanStackTable.765af1dd.js";import{c as C}from"./createOnChangeFn.7bc62d1b.js";import{u as q}from"./createSimpleTable.4d47a249.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.7d96e7d0.js";import"./chevron-up.736f4142.js";function M(e){switch(e){case _.ProductType.CYBER_RISK:return"Cyber Risk";case _.ProductType.BUSINESS_RISK:return"Business Risk";default:return"N/A"}}const p={};p.props={id:{key:"id",required:!0,type:String},subId:{key:"subId",required:!0,type:String},value:{key:"value",required:!0,type:Array}};p.setup=(e,s)=>{const t=e,l=u(()=>t.id),f=u(()=>t.subId),v=u(()=>t.value),S=u(()=>{var r;const n=new Map;for(const{products:a}of t.value)for(const o of a){const i=(r=o.integration)==null?void 0:r.type;i&&!n.has(i)&&n.set(i,o)}return Array.from(n.values())}),x=P(),k=u(()=>{var r,a;const n=new Map;for(const o of S.value){const i=(r=o.integration)==null?void 0:r.id,c=o.type,$=(a=o.integration)==null?void 0:a.type,y=[];if(c===_.ProductType.CYBER_RISK)y.push({id:"view",action(){x.push(`/admin/companies/${l.value}/subscriptions/${f.value}/integrations/${$}/entities/${i}/cyber-risk`)}});else if(c===_.ProductType.BUSINESS_RISK)throw new Error("FIXME: Unhandled exception.");i&&n.set(i,y)}return n}),d=C(),R=u(()=>[d.group({id:"supplier",header:()=>"Supplier",columns:[d.accessor(n=>{var r;return(r=n.supplier)==null?void 0:r.name},{id:"name",header:()=>"Name"})]}),d.group({id:"products",header:()=>"Products",columns:S.value.map(n=>{var r;return d.accessor(a=>a.products.find(o=>{var i,c;return((i=o.integration)==null?void 0:i.id)===((c=n.integration)==null?void 0:c.id)}),{id:((r=n.integration)==null?void 0:r.id)||"",header:()=>M(n.type),cell:a=>{var o;return a.getValue!==void 0?b(B,{props:{actions:(o=n.integration)!=null&&o.id?k.value.get(n.integration.id):[]}}):b("span")},enableColumnFilter:!1})})})]);return{instance:q(v,R)}};p.components=Object.assign({AppTanStackTable:A},p.components);var j=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},F=[];const T={};var K=I(p,j,F,!1,N,null,null,null);function N(e){for(let s in T)this[s]=T[s]}const O=function(){return K.exports}(),m={};m.setup=(e,s)=>{const t=g("id"),l=g("subscriptionId"),f=E.list(t,l),v=u(()=>f.data.value||[]);return{id:t,subscriptionId:l,suppliers:v}};m.components=Object.assign({PlusSvg:w,SubscriptionSuppliersTable:O},m.components);var U=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Subscription Suppliers")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"./new",append:""}},[t("PlusSvg",{staticClass:"w-5"}),t("span",[e._v("Supplier")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("SubscriptionSuppliersTable",{attrs:{id:e.id,value:e.suppliers,"sub-id":e.subscriptionId}})]},proxy:!0}])})},H=[];const h={};var V=I(m,U,H,!1,Y,null,null,null);function Y(e){for(let s in h)this[s]=h[s]}const Z=function(){return V.exports}();export{Z as default};
