import{d as u,n as T,aJ as A,aS as D,aq as j,bK as h,aG as E,r as b}from"./index.1c72befe.js";import{B as I}from"./BasicModal.52332d43.js";import{E as q}from"./exclamation-triangle.54812a62.js";import{A as V,T as N}from"./AppTanStackTable.fe57b438.js";import{I as R}from"./IsoDateTimeDisplay.edc054fa.js";import{c as W}from"./createOnChangeFn.949008db.js";import{u as L}from"./createSimpleTable.8a75ccd9.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.f2188488.js";import"./chevron-up.736f4142.js";const p={};p.props={products:{key:"products",required:!1,type:Array},featureToBeDeleted:{key:"featureToBeDeleted",required:!1,type:String}};p.setup=(e,s)=>{const t=e;return{toggleText:u(()=>{var c;return!!((c=t==null?void 0:t.products)!=null&&c.length)})}};p.components=Object.assign({WarningSvg:q},p.components);var O=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.featureToBeDeleted?t("div",{staticClass:"flex flex-col items-center justify-center space-y-8 px-5"},[t("BaseIcon",{staticClass:"mx-auto max-w-min lg:mx-0 lg:max-w-none",attrs:{color:"danger",shape:"round"}},[t("WarningSvg",{staticClass:"h-auto w-5"})],1),t("BaseTypography",{staticClass:"text-gray-500",attrs:{component:"h2",variant:"subtitle3"}},[e._v(" Are you sure you want to delete "),t("span",{staticClass:"text-red-500"},[e._v(e._s(e.featureToBeDeleted))]),e._v(" feature? "),e.toggleText?t("span",[e._v("These products will be without feature.")]):e._e()]),e.toggleText?t("ul",[t("BaseTypography",{attrs:{component:"h2",variant:"subtitle3"}},[t("BaseTypography",{staticClass:"pb-2 text-center",attrs:{component:"h2",variant:"subtitle3"}},[e._v(" Products: ")]),e._l(e.products,function(l,c){return t("li",{key:c,staticClass:"flex justify-center space-x-2 border border-gray-300 px-4"},[t("BaseTypography",{staticClass:"text-gray-500",attrs:{component:"span",variant:"p1"}},[e._v(" "+e._s(l)+" ")])],1)})],2)],1):e._e()],1):e._e()},H=[];const P={};var z=T(p,O,H,!1,G,null,null,null);function G(e){for(let s in P)this[s]=P[s]}const J=function(){return z.exports}(),f={};f.props={features:{key:"features",required:!0,type:Array}};f.setup=(e,s)=>{const t=e,l=s.emit,c=A(),v=u(()=>t.features),o=W(),m=[o.accessor(a=>{var n;return(n=a.id)==null?void 0:n.value},{id:"id",header:()=>"ID",enableColumnFilter:!1}),o.accessor("name",{id:"name",header:()=>"Feature",enableColumnFilter:!1}),o.accessor(a=>{var n;return(n=a.meta)==null?void 0:n.updatedAt},{id:"updatedAt",header:()=>"Last Updated",cell:a=>D(R,{props:{value:a.getValue(),format:"date"}}),enableColumnFilter:!1}),o.accessor("description",{id:"description",header:()=>"Description",enableColumnFilter:!1}),o.display({id:"actions",header:"Actions",cell:({row:a})=>D(N,{props:{actions:[{id:"edit",action(){var n;c.push(`/admin/products/features/${(n=a.original.id)==null?void 0:n.value}`)}},{id:"delete",action(){if(a.original&&a.original.id){const n=a.original.id.value,y=a.original.name,g=a.original.description;l("delete",{id:{value:n},name:y,description:g})}}}]}})})];return{instance:L(v,m)}};f.components=Object.assign({AppTanStackTable:V},f.components);var K=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},Q=[];const M={};var U=T(f,K,Q,!1,X,null,null,null);function X(e){for(let s in M)this[s]=M[s]}const Y=function(){return U.exports}(),_={};_.setup=(e,s)=>{const t=h.list(),l=u(()=>{var r;return((r=t.data.value)==null?void 0:r.productFeatures)||[]}),c=E(),v=h.delete(),o=b(),m=b();function F(r){var i;o.value={productFeature:{...r}},m.value=(i=r==null?void 0:r.id)==null?void 0:i.value,x.value=!0}const a=u(()=>{var r,i;return(i=(r=o==null?void 0:o.value)==null?void 0:r.productFeature)==null?void 0:i.name}),n=u(()=>h.ListIsolatedProducts(m.value)),y=u(()=>{var C,$,S;const r=(S=($=(C=n.value)==null?void 0:C.data)==null?void 0:$.value)==null?void 0:S.products;return r==null?void 0:r.map(d=>d==null?void 0:d.name).sort((d,w)=>d.localeCompare(w))});async function g(){if(o.value)await v.mutateAsync(o.value),B(),c.success(`Feature ${a.value}successfully deleted`);else throw new Error("Invalid request.")}const x=b(!1);function B(){x.value=!1}return{features:l,setPayload:F,featureToBeDeleted:a,productsWithoutFeature:y,deleteFeature:g,isModalVisible:x,closeModal:B}};_.components=Object.assign({PlusSvg:j,ProductFeaturesTable:Y,BasicModal:I,ProductFeaturesDeletionMessage:J},_.components);var Z=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Product Features")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"/admin/products/features/new"}},[t("PlusSvg",{staticClass:"mr-1 w-5 xl:w-5"}),e._v(" Feature ")],1)]},proxy:!0},{key:"table",fn:function(){return[t("ProductFeaturesTable",{attrs:{features:e.features},on:{delete:e.setPayload}})]},proxy:!0}])}),t("BasicModal",{directives:[{name:"show",rawName:"v-show",value:e.isModalVisible,expression:"isModalVisible"}],on:{close:e.closeModal},scopedSlots:e._u([{key:"body",fn:function(){return[t("div",{staticClass:"flex flex-col space-y-4"},[t("ProductFeaturesDeletionMessage",{attrs:{products:e.productsWithoutFeature,"feature-to-be-deleted":e.featureToBeDeleted}}),t("div",{staticClass:"flex justify-center py-6"},[t("BaseButton",{attrs:{"display-type":"danger",action:"secondary"},on:{click:e.deleteFeature}},[e._v(" Delete Feature ")])],1)],1)]},proxy:!0}])})],1)},ee=[];const k={};var te=T(_,Z,ee,!1,se,null,null,null);function se(e){for(let s in k)this[s]=k[s]}const me=function(){return te.exports}();export{me as default};
