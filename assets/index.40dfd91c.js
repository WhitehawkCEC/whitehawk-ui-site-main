import{ch as E,cg as b,c_ as j,ck as O,cl as C,ag as H,aT as D,aD as L,cM as Q,ar as Y,bS as x,aZ as z,cK as Z,aA as J,aF as X,n as U,c0 as I}from"./index.eb51e492.js";import{F as V}from"./FormButton.b08da99f.js";import{B as ee}from"./BlackKiteConfigInput.d3c479bd.js";import{c as te}from"./reactivity.esm-bundler.7760aebf.js";import{m as ne}from"./message_pb.d6989b80.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./ApiKeyInput.86f444d3.js";import"./arrow-top-right-on-square.b063d2af.js";import"./ApiKeyValidation.f629b474.js";import"./ApiKeyDescriptionDisplay.26426284.js";var T={},G={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Service=t.SetResponse=t.SetRequest=t.GetResponse=t.GetRequest=void 0;const a=E,s=b,r=b,c=b,d=b,m=b,y=j,_=ne;class w extends m.MessageType{constructor(){super("whitehawk.proto.internal.client_portal.accounts.id.subscriptions.subscription_id.integrations.black_kite.config.v1.GetRequest",[{no:1,name:"id",kind:"message",T:()=>_.AccountSubscriptionId}])}create(e){const n={};return globalThis.Object.defineProperty(n,d.MESSAGE_TYPE,{enumerable:!1,value:this}),e!==void 0&&(0,c.reflectionMergePartial)(this,n,e),n}internalBinaryRead(e,n,o,i){let u=i!=null?i:this.create(),g=e.pos+n;for(;e.pos<g;){let[p,f]=e.tag();switch(p){case 1:u.id=_.AccountSubscriptionId.internalBinaryRead(e,e.uint32(),o,u.id);break;default:let l=o.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${p} (wire type ${f}) for ${this.typeName}`);let k=e.skip(f);l!==!1&&(l===!0?r.UnknownFieldHandler.onRead:l)(this.typeName,u,p,f,k)}}return u}internalBinaryWrite(e,n,o){e.id&&_.AccountSubscriptionId.internalBinaryWrite(e.id,n.tag(1,s.WireType.LengthDelimited).fork(),o).join();let i=o.writeUnknownFields;return i!==!1&&(i==!0?r.UnknownFieldHandler.onWrite:i)(this.typeName,e,n),n}}t.GetRequest=new w;class h extends m.MessageType{constructor(){super("whitehawk.proto.internal.client_portal.accounts.id.subscriptions.subscription_id.integrations.black_kite.config.v1.GetResponse",[{no:1,name:"data",kind:"message",T:()=>y.BlackKiteConfig}])}create(e){const n={};return globalThis.Object.defineProperty(n,d.MESSAGE_TYPE,{enumerable:!1,value:this}),e!==void 0&&(0,c.reflectionMergePartial)(this,n,e),n}internalBinaryRead(e,n,o,i){let u=i!=null?i:this.create(),g=e.pos+n;for(;e.pos<g;){let[p,f]=e.tag();switch(p){case 1:u.data=y.BlackKiteConfig.internalBinaryRead(e,e.uint32(),o,u.data);break;default:let l=o.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${p} (wire type ${f}) for ${this.typeName}`);let k=e.skip(f);l!==!1&&(l===!0?r.UnknownFieldHandler.onRead:l)(this.typeName,u,p,f,k)}}return u}internalBinaryWrite(e,n,o){e.data&&y.BlackKiteConfig.internalBinaryWrite(e.data,n.tag(1,s.WireType.LengthDelimited).fork(),o).join();let i=o.writeUnknownFields;return i!==!1&&(i==!0?r.UnknownFieldHandler.onWrite:i)(this.typeName,e,n),n}}t.GetResponse=new h;class P extends m.MessageType{constructor(){super("whitehawk.proto.internal.client_portal.accounts.id.subscriptions.subscription_id.integrations.black_kite.config.v1.SetRequest",[{no:1,name:"id",kind:"message",T:()=>_.AccountSubscriptionId},{no:2,name:"data",kind:"message",T:()=>y.BlackKiteConfig}])}create(e){const n={};return globalThis.Object.defineProperty(n,d.MESSAGE_TYPE,{enumerable:!1,value:this}),e!==void 0&&(0,c.reflectionMergePartial)(this,n,e),n}internalBinaryRead(e,n,o,i){let u=i!=null?i:this.create(),g=e.pos+n;for(;e.pos<g;){let[p,f]=e.tag();switch(p){case 1:u.id=_.AccountSubscriptionId.internalBinaryRead(e,e.uint32(),o,u.id);break;case 2:u.data=y.BlackKiteConfig.internalBinaryRead(e,e.uint32(),o,u.data);break;default:let l=o.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${p} (wire type ${f}) for ${this.typeName}`);let k=e.skip(f);l!==!1&&(l===!0?r.UnknownFieldHandler.onRead:l)(this.typeName,u,p,f,k)}}return u}internalBinaryWrite(e,n,o){e.id&&_.AccountSubscriptionId.internalBinaryWrite(e.id,n.tag(1,s.WireType.LengthDelimited).fork(),o).join(),e.data&&y.BlackKiteConfig.internalBinaryWrite(e.data,n.tag(2,s.WireType.LengthDelimited).fork(),o).join();let i=o.writeUnknownFields;return i!==!1&&(i==!0?r.UnknownFieldHandler.onWrite:i)(this.typeName,e,n),n}}t.SetRequest=new P;class W extends m.MessageType{constructor(){super("whitehawk.proto.internal.client_portal.accounts.id.subscriptions.subscription_id.integrations.black_kite.config.v1.SetResponse",[])}create(e){const n={};return globalThis.Object.defineProperty(n,d.MESSAGE_TYPE,{enumerable:!1,value:this}),e!==void 0&&(0,c.reflectionMergePartial)(this,n,e),n}internalBinaryRead(e,n,o,i){return i!=null?i:this.create()}internalBinaryWrite(e,n,o){let i=o.writeUnknownFields;return i!==!1&&(i==!0?r.UnknownFieldHandler.onWrite:i)(this.typeName,e,n),n}}t.SetResponse=new W,t.Service=new a.ServiceType("whitehawk.proto.internal.client_portal.accounts.id.subscriptions.subscription_id.integrations.black_kite.config.v1.Service",[{name:"Get",options:{},I:t.GetRequest,O:t.GetResponse},{name:"Set",options:{},I:t.SetRequest,O:t.SetResponse}])})(G);Object.defineProperty(T,"__esModule",{value:!0});var N=T.ServiceClient=void 0;const B=G,$=E;class ie{constructor(a){this._transport=a,this.typeName=B.Service.typeName,this.methods=B.Service.methods,this.options=B.Service.options}get(a,s){const r=this.methods[0],c=this._transport.mergeOptions(s);return(0,$.stackIntercept)("unary",this._transport,r,c,a)}set(a,s){const r=this.methods[1],c=this._transport.mergeOptions(s);return(0,$.stackIntercept)("unary",this._transport,r,c,a)}}N=T.ServiceClient=ie;const F=new N(O);function q({accountId:t,subscriptionId:a}){return{idArg:te(()=>({accountId:{value:t.value},subscriptionId:{value:a.value}})),queryKey:Q("accounts",t,"subscriptions",a,"integrations","black-kite","config")}}const K={get(t){const{idArg:a,queryKey:s}=q(t),r=C();async function c(){const d=await F.get({id:a.value},r.value),{response:m}=d;return m}return H(s,c)},set(t){const{idArg:a,queryKey:s}=q(t),r=C(),c=D();async function d(m){return await F.set({id:a.value,data:m},r.value)}return L(d,{onSuccess(){c.invalidateQueries({queryKey:s,exact:!0})}})}},v={};v.props={accountId:{key:"accountId",required:!0,type:String},subscriptionId:{key:"subscriptionId",required:!0,type:String}};v.setup=(t,a)=>{const r=x(t),c=z(Z.create()),d={accountId:r.accountId,subscriptionId:r.subscriptionId},m=K.get(d);J(()=>m.data.value,h=>{h!=null&&h.data&&(c.value=h.data)},{immediate:!0});const y=X(),_=K.set(d);async function w(){await _.mutateAsync(c.value),y.success("Successfully updated config.")}return{config:c,configSet:_,submit:w}};v.components=Object.assign({BlackKiteConfigInput:ee,FormButton:V,CheckSvg:Y},v.components);var se=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("section",{staticClass:"space-y-6"},[s("BaseSimpleCard",{staticClass:"divide-y"},[s("BaseTypography",{staticClass:"block p-4",attrs:{variant:"subtitle3"}},[t._v(" Configure Black Kite ")]),s("form",{staticClass:"divide-y",on:{submit:function(r){return r.preventDefault(),t.submit.apply(null,arguments)}}},[s("div",{staticClass:"p-4"},[s("BaseLabel",{staticClass:"space-y-1"},[s("span",[t._v("API Key:")]),s("BlackKiteConfigInput",{model:{value:t.config,callback:function(r){t.config=r},expression:"config"}})],1)],1),s("FormButton",{attrs:{action:"save"}})],1)],1),s("BaseVueQuery",{attrs:{query:t.configSet},scopedSlots:t._u([{key:"success",fn:function(){return[s("CheckSvg",{staticClass:"sr-only"})]},proxy:!0}])})],1)},ae=[];const M={};var re=U(v,se,ae,!1,oe,null,null,null);function oe(t){for(let a in M)this[a]=M[a]}const ce=function(){return re.exports}(),S={};S.setup=(t,a)=>{const s=I("id"),r=I("subscriptionId");return{accountId:s,subscriptionId:r}};S.components=Object.assign({IntegrationBlackKiteConfigForm:ce},S.components);var ue=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("IntegrationBlackKiteConfigForm",{attrs:{"account-id":t.accountId,"subscription-id":t.subscriptionId}})},le=[];const A={};var de=U(S,ue,le,!1,pe,null,null,null);function pe(t){for(let a in A)this[a]=A[a]}const Re=function(){return de.exports}();export{Re as default};
