import{E as S}from"./exclamation-triangle.54812a62.js";import{aJ as T,d as v,aS as y,n as F,aq as C,bJ as x,aG as B,r as g}from"./index.f35d1876.js";import{B as w}from"./BasicModal.3b0ccc4b.js";import{A,T as $}from"./AppTanStackTable.db60e08c.js";import{I as M}from"./IsoDateTimeDisplay.231cf4b6.js";import{c as P}from"./createOnChangeFn.236c8fb4.js";import{u as k}from"./createSimpleTable.81e15bc8.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.429b416d.js";import"./chevron-up.736f4142.js";const l={};l.props={features:{key:"features",required:!0,type:Array}};l.setup=(e,n)=>{const t=e,u=n.emit,d=T(),p=v(()=>t.features),o=P(),m=[o.accessor(a=>{var s;return(s=a.id)==null?void 0:s.value},{id:"id",header:()=>"ID",enableColumnFilter:!1}),o.accessor("name",{id:"name",header:()=>"Feature",enableColumnFilter:!1}),o.accessor(a=>{var s;return(s=a.meta)==null?void 0:s.updatedAt},{id:"updatedAt",header:()=>"Last Updated",cell:a=>y(M,{props:{value:a.getValue(),format:"date"}}),enableColumnFilter:!1}),o.accessor("description",{id:"description",header:()=>"Description",enableColumnFilter:!1}),o.display({id:"actions",header:"Actions",cell:({row:a})=>y($,{props:{actions:[{id:"edit",action(){var s;d.push(`/admin/products/features/${(s=a.original.id)==null?void 0:s.value}`)}},{id:"delete",action(){if(a.original&&a.original.id){const s=a.original.id.value,i=a.original.name,r=a.original.description;u("delete",{id:{value:s},name:i,description:r})}}}]}})})];return{instance:k(p,m)}};l.components=Object.assign({AppTanStackTable:A},l.components);var D=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("AppTanStackTable",{attrs:{table:e.instance}})},E=[];const b={};var j=F(l,D,E,!1,I,null,null,null);function I(e){for(let n in b)this[n]=b[n]}const V=function(){return j.exports}(),c={};c.setup=(e,n)=>{const t=x.list(),u=v(()=>{var r;return((r=t.data.value)==null?void 0:r.productFeatures)||[]}),d=B(),p=x.delete(),o=g();function m(r){o.value={productFeature:{...r}},s.value=!0}const f=v(()=>{var r,_;return(_=(r=o==null?void 0:o.value)==null?void 0:r.productFeature)==null?void 0:_.name});async function a(){if(o.value)await p.mutateAsync(o.value),i(),d.success(`Feature ${f.value} successfully deleted`);else throw new Error("Invalid request.")}const s=g(!1);function i(){s.value=!1}return{features:u,setPayload:m,featuresToBeDeleted:f,deleteFeature:a,isModalVisible:s,closeModal:i}};c.components=Object.assign({PlusSvg:C,ProductFeaturesTable:V,BasicModal:w,WarningSvg:S},c.components);var q=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("section",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Product Features")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"/admin/products/features/new"}},[t("PlusSvg",{staticClass:"mr-1 w-5 xl:w-5"}),e._v(" Feature ")],1)]},proxy:!0},{key:"table",fn:function(){return[t("ProductFeaturesTable",{attrs:{features:e.features},on:{delete:e.setPayload}})]},proxy:!0}])}),t("BasicModal",{directives:[{name:"show",rawName:"v-show",value:e.isModalVisible,expression:"isModalVisible"}],on:{close:e.closeModal},scopedSlots:e._u([{key:"body",fn:function(){return[t("div",{staticClass:"flex flex-col items-center justify-center space-y-8 px-5 pb-6"},[t("div",{staticClass:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:space-x-4 lg:space-y-0"},[t("BaseIcon",{staticClass:"mx-auto max-w-min lg:mx-0 lg:max-w-none",attrs:{color:"danger",shape:"square"}},[t("WarningSvg",{staticClass:"h-auto w-5"})],1),t("BaseTypography",{attrs:{component:"p",variant:"subtitle1"}},[e._v(" Are you sure you want to delete "),t("span",{staticClass:"text-red-500"},[e._v(e._s(e.featuresToBeDeleted))]),e._v(" feature? ")])],1),t("BaseButton",{attrs:{"display-type":"danger",action:"secondary"},on:{click:e.deleteFeature}},[e._v(" Delete ")])],1)]},proxy:!0}])})],1)},R=[];const h={};var H=F(c,q,R,!1,J,null,null,null);function J(e){for(let n in h)this[n]=h[n]}const Z=function(){return H.exports}();export{Z as default};
