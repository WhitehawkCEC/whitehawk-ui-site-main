import{F as C}from"./FormButton.a9bebb59.js";import{B as S}from"./BackButton.410adfc5.js";import{bM as B,n as d,aZ as h,d as f,b_ as l,cj as k,c7 as I,aG as D,aJ as q}from"./index.a86a1f35.js";import{S as x}from"./SubscriptionProductConfigInput.8b4beddd.js";import{D as w}from"./DateRangeInput.c0824b15.js";import{d as P}from"./index.1d000ce9.js";import{D as $}from"./DateRangeDisplay.00eeee30.js";import{u as F}from"./useAccountSubscriptionValidity.b5ec82a9.js";import{a as j}from"./index.59b40b8c.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./chevron-left.0808b01b.js";import"./ApiKeyDescriptionDisplay.eb5313bc.js";import"./ApiKeyValidation.b4a3be6a.js";import"./index.31ec2c96.js";import"./index.90c071e3.js";import"./index.7a54c9f6.js";import"./index.87e44ac4.js";import"./index.3a3cbd06.js";import"./index.733cfde3.js";import"./DynamicForm.79a7f224.js";import"./IsoDateTimeDisplay.345b6b2e.js";import"./index.ce85ea86.js";const A=[{name:"name",label:"Name",component:{is:B,attrs:{required:!0,class:"w-full lg:max-w-sm"}}},{name:"validity",label:"Validity",component:{is:w,attrs:{required:!0}}},{name:"config",label:"Config",component:{is:x,attrs:{required:!0}}}],G=P(A);let M,O;const p={};var V=d(G,M,O,!1,K,null,null,null);function K(e){for(let s in p)this[s]=p[s]}const N=function(){return V.exports}();function z(e){const s=h();return f({get(){return s.value||e.value},set(t){s.value=t}})}const i={};i.setup=(e,s)=>{const t=l("id"),a=l("subscriptionId"),o=new Date,_=j(o,1),u=F.get(t,a),c=z(f(()=>{var n,r;return{name:"",config:{value:{oneofKind:"cyberRiskRatingBk",cyberRiskRatingBk:k.CyberRiskRatingBlackKiteConfig.create()}},validity:{start:{value:o.toISOString()},end:{value:((r=(n=u.data.value)==null?void 0:n.end)==null?void 0:r.value)||_.toISOString()}}}})),v=I.create(t,a),b=D(),y=q();async function g(){var n;if(c.value){const r=await v.mutateAsync(c.value);b.success("Created product");const R=((n=r.response.productId)==null?void 0:n.value)||"";y.push({path:`../${R}`,append:!0})}}return{id:t,subscriptionId:a,validityGet:u,createRequest:c,submit:g}};i.components=Object.assign({BackButton:S,DateRangeDisplay:$,SubscriptionProductPartialCreateRequestInput:N,FormButton:C},i.components);var E=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",{staticClass:"space-y-6"},[t("BackButton",{attrs:{link:`/admin/companies/${e.id}/subscriptions/${e.subscriptionId}/products`}}),t("BaseSimpleCard",{staticClass:"divide-y overflow-hidden"},[t("BaseTypography",{staticClass:"block p-4",attrs:{variant:"subtitle3"}},[e._v(" Create Subscription Product ")]),t("div",{staticClass:"p-4"},[t("BaseVueQuery",{attrs:{query:e.validityGet},scopedSlots:e._u([{key:"success",fn:function(a){var o=a.data;return[t("DateRangeDisplay",{attrs:{value:o}})]}}])})],1),t("form",{staticClass:"divide-y",on:{submit:function(a){return a.preventDefault(),e.submit.apply(null,arguments)}}},[t("SubscriptionProductPartialCreateRequestInput",{model:{value:e.createRequest,callback:function(a){e.createRequest=a},expression:"createRequest"}}),t("FormButton",{attrs:{action:"create"}})],1)],1)],1)},J=[];const m={};var Q=d(i,E,J,!1,T,null,null,null);function T(e){for(let s in m)this[s]=m[s]}const vt=function(){return Q.exports}();export{vt as default};
