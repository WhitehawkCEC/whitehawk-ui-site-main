import{A as $,T}from"./AppTanStackTable.f9741639.js";import{S as j}from"./StarLevelDisplay.347484ef.js";import{c as F}from"./createOnChangeFn.86eede4a.js";import{c as i,aR as w,n as y,cz as A,aP as D,c7 as h,r as O,ay as B}from"./index.af28e46c.js";import{u as I}from"./createSimpleTable.95ef2de2.js";import{T as R}from"./TodosChart.9a03e890.js";import{g as k,s as q}from"./sortBy.20adb9f6.js";import{u as E}from"./BarChart.8a143505.js";import{K as L}from"./KnownStandardCodes.dc74bde0.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.45287cdd.js";import"./keys.f1065c6e.js";import"./chevron-up.736f4142.js";import"./TabbedPanel.bf55f173.js";import"./_baseOrderBy.47e2e527.js";import"./_arrayMap.dcea68f3.js";import"./_baseIteratee.00736b53.js";import"./_Uint8Array.a2670300.js";import"./_baseIsEqual.af3aec61.js";import"./_baseEach.891d0307.js";import"./_baseAssignValue.0dd815e6.js";import"./_isIterateeCall.7f3c44b5.js";import"./chart.f4078cab.js";const d={};d.props={id:{key:"id",required:!0,type:String},frameworkId:{key:"frameworkId",required:!0,type:String},controls:{key:"controls",required:!0,type:Object}};d.setup=(e,r)=>{const t=e,s=i(()=>{const a=[];for(const[l,c]of Object.entries(t.controls))a.push({id:u(l),name:l,numControls:c.length,averageStarLevel:n(c)});return a});function u(a){return a.split(" ").join("-").toLocaleLowerCase()}function n(a){let l=0,c=0;return a.forEach(({StarLevel:p})=>{p!==0&&(l+=p,c++)}),l/c}const o=F(),m=[o.accessor("name",{header:()=>"Area",enableColumnFilter:!1}),o.accessor("numControls",{header:()=>"Total # Controls",enableColumnFilter:!1}),o.accessor("averageStarLevel",{header:()=>"Average Star Level",cell:a=>w(j,{props:{id:a.row.original.id,value:a.getValue()}}),enableColumnFilter:!1}),o.display({id:"actions",header:"Actions",cell:({row:a})=>w(T,{props:{actions:[{id:"view",to:`/client/companies/${t.id}/journey/cyber-maturity-roadmap/${t.frameworkId}/${a.original.id}`}]}})})];return{instance:I(s,m)}};d.components=Object.assign({AppTanStackTable:$},d.components);var M=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("AppTanStackTable",{attrs:{table:e.instance}})},N=[];const x={};var U=y(d,M,N,!1,z,null,null,null);function z(e){for(let r in x)this[r]=x[r]}const P=function(){return U.exports}(),f={};f.props={value:{key:"value",required:!0,type:null}};f.setup=(e,r)=>{const t=e,s=i(()=>{const n=new Map;for(const[o,m]of Object.entries(t.value))(o==="StandardCode"||o==="Completeness"||o==="Compliance"||o==="Confidence")&&n.set(o,m);return Object.fromEntries(n)});return{imageUrl:i(()=>{const n=new URLSearchParams(s.value);return`${D}/generated-images/black-kite/summary-compliance-entry?${n}`})}};f.components=Object.assign({DotsSquare:A},f.components);var Q=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"relative max-w-fit overflow-hidden rounded-2xl bg-gradient-to-br from-blue-100 via-white to-white px-8 pt-8 shadow lg:max-h-72"},[t("div",{staticClass:"absolute top-full left-full -translate-y-1/3 -translate-x-1/3 rotate-45 transform xl:-translate-y-1/2"},[t("DotsSquare",{attrs:{color:"blue"}})],1),t("img",{staticClass:"relative h-64 w-64",attrs:{src:e.imageUrl,alt:e.value.StandardCode}})])},V=[];const b={};var H=y(f,Q,V,!1,K,null,null,null);function K(e){for(let r in b)this[r]=b[r]}const W=function(){return H.exports}(),G={read(e){return i(()=>{const r=L.find(t=>t.frameworkId===e.value);if(r)return r.data})}},_={};_.setup=(e,r)=>{const t=h("id"),s=h("frameworkId"),u=G.read(s),n=i(()=>{if(u.value)return k(u.value.Controls,"AreaName")}),o=i(()=>s.value==="cis-csc-20"),m=O(),v=["basic","foundational","organizational"],a=E.list(t),l=i(()=>a.data.value||[]),c=i(()=>{const p=q(l.value,"order");return k(p,"category")});return B(c,p=>{m.value=v.reduce((C,g)=>(C[g]=p[g]||[],C),{})},{immediate:!0}),{id:t,frameworkId:s,framework:u,mappedControls:n,isCis:o,maturity:m,maturityCategories:v,maturityQuery:a}};_.components=Object.assign({FrameworkSummaryDonut:W,ComplianceFrameworkTable:P,TodosChart:R},_.components);var J=function(){var e=this,r=e.$createElement,t=e._self._c||r;return e.framework?t("div",{staticClass:"flex flex-col space-y-8"},[t("div",{staticClass:"-space-y-2"},[t("BaseTypography",{staticClass:"uppercase text-gray-500",attrs:{variant:"overline"}},[e._v(" "+e._s(e.framework.StandardCode)+" ")]),t("BaseTypography",{attrs:{component:"h2",variant:"h5"}},[e._v(" "+e._s(e.framework.StandardFullName)+" ")])],1),t("div",{staticClass:"flex flex-col space-y-8 lg:flex-row lg:space-y-0 lg:space-x-8"},[t("FrameworkSummaryDonut",{attrs:{value:e.framework}}),t("BaseTypography",{staticClass:"flex-1 text-gray-500",attrs:{component:"p",variant:"p1"}},[e._v(" "+e._s(e.framework.StandardDescription)+" ")])],1),e.mappedControls?t("ComplianceFrameworkTable",{attrs:{id:e.id,"framework-id":e.frameworkId,controls:e.mappedControls}}):e._e(),e.isCis?t("BaseSimpleCard",[t("BaseVueQuery",{attrs:{query:e.maturityQuery},scopedSlots:e._u([{key:"success",fn:function(){return[e.maturity?t("TodosChart",{attrs:{"company-id":e.id,categories:e.maturityCategories},model:{value:e.maturity,callback:function(s){e.maturity=s},expression:"maturity"}}):e._e()]},proxy:!0}],null,!1,3916945308)})],1):e._e()],1):e._e()},X=[];const S={};var Y=y(_,J,X,!1,Z,null,null,null);function Z(e){for(let r in S)this[r]=S[r]}const xe=function(){return Y.exports}();export{xe as default};
