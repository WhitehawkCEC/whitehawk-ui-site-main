import{F as $}from"./FormButton.86b3d1af.js";import{b0 as T,ay as L,c as o,n as d,cK as F,cU as N,cL as w,aF as h,c5 as g,aZ as A,aA as D,aI as O,cd as K,c7 as P,b$ as E}from"./index.81c86bc2.js";import{s as V}from"./index.fd041a2a.js";import{S as G}from"./SubscriptionPartialUpdateRequestInput.89a670f3.js";import{D as Q}from"./DateRangeInput.ba8a290b.js";import{u as k}from"./useAccountSubscriptionValidity.f0fda288.js";import"./arrow-down-on-square.bf61cdc5.js";import"./trash.78f57a7a.js";import"./SlugInput.8ae30661.js";import"./FormValidation.fcce8505.js";import"./index.9ed08d7d.js";import"./DynamicForm.152cd2b0.js";import"./index.1b168d14.js";import"./index.8d078d9a.js";import"./index.7a54c9f6.js";import"./index.87e44ac4.js";import"./index.a88d24de.js";import"./index.aca5df64.js";const _={};_.props={value:{key:"value",required:!1,type:null},entities:{key:"entities",required:!0,type:Array}};_.setup=(t,e)=>{const s=t,n=e.emit,c=L(s,n),r=o(()=>s.entities.map(({id:i,name:p})=>({text:p,value:i}))),a=o({get(){var i;return(i=s.value)==null?void 0:i.mappedEntityId},set(i){i&&(c.value.mappedEntityId=i)}});return{entityOptions:r,mappedEntityId:a}};_.components=Object.assign({SimpleSelect:T},_.components);var z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("BaseLabel",{staticClass:"space-y-1 p-4"},[s("span",[t._v("Mapped Entity:")]),s("SimpleSelect",{staticClass:"w-full",attrs:{options:t.entityOptions},model:{value:t.mappedEntityId,callback:function(n){t.mappedEntityId=n},expression:"mappedEntityId"}})],1)},W=[];const B={};var Z=d(_,z,W,!1,H,null,null,null);function H(t){for(let e in B)this[e]=B[e]}const J=function(){return Z.exports}(),v={};v.props={accountId:{key:"accountId",required:!0,type:String}};v.setup=(t,e)=>{const s=t,n=o(()=>s.accountId),c=F.get(n),r=V(o(()=>c.data.value||N.create())),a=w.list(n),i=o(()=>a.data.value||[]),p=h(),l=F.set(n);async function m(){await l.mutateAsync(r.value),p.success("Successfully updated config.")}return{config:r,entities:i,submit:m}};v.components=Object.assign({SubscriptionMappedEntityInput:J,FormButton:$},v.components);var X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),t.submit.apply(null,arguments)}}},[s("SubscriptionMappedEntityInput",{attrs:{entities:t.entities},model:{value:t.config,callback:function(n){t.config=n},expression:"config"}}),s("FormButton",{attrs:{action:"update"}})],1)},Y=[];const R={};var tt=d(v,X,Y,!1,st,null,null,null);function st(t){for(let e in R)this[e]=R[e]}const et=function(){return tt.exports}(),f={};f.props={accountId:{key:"accountId",required:!0,type:String},subId:{key:"subId",required:!0,type:String}};f.setup=(t,e)=>{const s=t,n=o(()=>s.accountId),c=o(()=>s.subId),r=g.read(n,c),a=A();D(()=>r.data.value,u=>{u&&(a.value={accountId:u.accountId,subscriptionId:u.subscriptionId,name:u.name})},{immediate:!0});const i=o(()=>{var x,C;const u=a.value;return Boolean(u&&((x=u.subscriptionId)==null?void 0:x.value)&&u.name&&((C=u.accountId)==null?void 0:C.value))}),p=O(),l=h(),m=g.update(n,c);async function I(){if(a.value){const{response:u}=await m.mutateAsync(a.value);u?(l.success("Successfully updated subscription."),p.push(`/admin/companies/${n.value}/subscriptions`)):l.error("Something went wrong.")}}return{update:a,isValid:i,updateSubscription:I}};f.components=Object.assign({SubscriptionPartialUpdateRequestInput:G,FormButton:$},f.components);var nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),t.updateSubscription.apply(null,arguments)}}},[t.update?s("SubscriptionPartialUpdateRequestInput",{model:{value:t.update,callback:function(n){t.update=n},expression:"update"}}):t._e(),s("FormButton",{attrs:{action:"update","is-valid-form":t.isValid}})],1)},it=[];const U={};var at=d(f,nt,it,!1,ot,null,null,null);function ot(t){for(let e in U)this[e]=U[e]}const ct=function(){return at.exports}(),y={};y.props={id:{key:"id",required:!0,type:String},subscriptionId:{key:"subscriptionId",required:!0,type:String}};y.setup=(t,e)=>{const s=t,n=o(()=>s.id),c=o(()=>s.subscriptionId),r=A(K.DateRange.create()),a=k.get(n,c);D(()=>a.data.value,I=>{I&&(r.value=I)},{immediate:!0});const i=O(),p=h(),l=k.update(n,c);async function m(){await l.mutateAsync({value:r.value}),p.success("Successfully updated subscription validity."),i.push(`/admin/companies/${n.value}/subscriptions`)}return{validity:r,submit:m}};y.components=Object.assign({DateRangeInput:Q,FormButton:$},y.components);var rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),t.submit.apply(null,arguments)}}},[s("div",{staticClass:"p-4"},[s("BaseLabel",{staticClass:"grid grid-cols-1 gap-1 sm:grid-cols-3 sm:items-center sm:gap-4"},[s("span",[t._v("Validity")]),s("DateRangeInput",{staticClass:"sm:col-span-2",model:{value:t.validity,callback:function(n){t.validity=n},expression:"validity"}})],1)],1),s("FormButton",{attrs:{action:"update"}})],1)},ut=[];const j={};var pt=d(y,rt,ut,!1,lt,null,null,null);function lt(t){for(let e in j)this[e]=j[e]}const dt=function(){return pt.exports}(),b={};b.props={accountId:{key:"accountId",required:!0,type:String},subId:{key:"subId",required:!0,type:String}};b.setup=(t,e)=>{const s=t,n=o(()=>s.accountId),c=o(()=>s.subId),r=g.read(n,c),a=o(()=>{var i;return(i=r.data.value)==null?void 0:i.type});return{SubscriptionType:P.SubscriptionType,id:n,subscriptionId:c,subscriptionType:a}};b.components=Object.assign({UpdateSubscriptionNameForm:ct,UpdateSubscriptionValidityForm:dt,SubscriptionMappedEntityForm:et},b.components);var mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"space-y-6"},[s("BaseSimpleCard",{staticClass:"divide-y"},[s("BaseTypography",{staticClass:"p-4",attrs:{component:"h4",variant:"subtitle3"}},[t._v(" Update Subscription Name ")]),s("UpdateSubscriptionNameForm",{attrs:{"account-id":t.id,"sub-id":t.subscriptionId}})],1),s("BaseSimpleCard",{staticClass:"divide-y"},[s("BaseTypography",{staticClass:"p-4",attrs:{component:"h4",variant:"subtitle3"}},[t._v(" Update Subscription Validity ")]),s("UpdateSubscriptionValidityForm",{attrs:{id:t.id,"subscription-id":t.subscriptionId}})],1),t.subscriptionType===t.SubscriptionType.INDIVIDUAL?s("BaseSimpleCard",{staticClass:"divide-y"},[s("BaseTypography",{staticClass:"p-4",attrs:{component:"h4",variant:"subtitle3"}},[t._v(" Mapped Entity ")]),s("SubscriptionMappedEntityForm",{attrs:{"account-id":t.id}})],1):t._e()],1)},_t=[];const M={};var vt=d(b,mt,_t,!1,ft,null,null,null);function ft(t){for(let e in M)this[e]=M[e]}const yt=function(){return vt.exports}(),S={};S.setup=(t,e)=>{const s=E("id"),n=E("subscriptionId");return{id:s,subscriptionId:n}};S.components=Object.assign({UpdateSubscriptionForm:yt},S.components);var bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("UpdateSubscriptionForm",{attrs:{"account-id":t.id,"sub-id":t.subscriptionId}})},It=[];const q={};var St=d(S,bt,It,!1,gt,null,null,null);function gt(t){for(let e in q)this[e]=q[e]}const Nt=function(){return St.exports}();export{Nt as default};
