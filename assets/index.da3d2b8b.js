import{bU as $,aS as y,n as x,an as A,bT as b,c as _,r as d,bV as k,aF as I}from"./index.6fa0fa92.js";import{B as M}from"./BasicConfirmModal.b0ed58e6.js";import{A as V,T as w}from"./AppTanStackTable.ac21d95e.js";import{I as B}from"./IsoDateTimeDisplay.46c4a5c0.js";import{c as F}from"./createOnChangeFn.9ebdb9d2.js";import{u as D}from"./createSimpleTable.8790f160.js";import"./BasicModal.0f638362.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.73cd1715.js";import"./chevron-up.736f4142.js";const i={};i.props={categories:{key:"categories",required:!0,type:Array}};i.setup=(e,s)=>{const t=e,{categories:p}=$(t),r=s.emit,l=F(),u=[l.accessor(a=>{var o;return(o=a.id)==null?void 0:o.value},{id:"id",header:()=>"ID",enableColumnFilter:!1}),l.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),l.accessor(a=>{var o;return(o=a.meta)==null?void 0:o.updatedAt},{id:"updatedAt",header:()=>"Last Updated",cell:a=>y(B,{props:{value:a.getValue(),format:"date"}}),enableColumnFilter:!1}),l.display({id:"actions",header:"Actions",cell:({row:a})=>{var o;return y(w,{props:{actions:[{id:"edit",to:`/admin/products/categories/${(o=a.original.id)==null?void 0:o.value}`},{id:"delete",action(){r("delete",a.original)}}]}})}})];return{instance:D(p,u)}};i.components=Object.assign({AppTanStackTable:V},i.components);var j=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},E=[];const C={};var L=x(i,j,E,!1,R,null,null,null);function R(e){for(let s in C)this[s]=C[s]}const q=function(){return L.exports}(),m={};m.setup=(e,s)=>{const t=b.list(),p=_(()=>t.data.value?t.data.value.sort((n,c)=>n.name.localeCompare(c.name)):[]),r=d(),l=d("Doing so will affect the following products and bundle sets:"),u=d();function v(n){var c;r.value=n,u.value=(c=n.id)==null?void 0:c.value,f.value=!0}const a=_(()=>{var n;return(n=k.get(u.value).data)==null?void 0:n.value}),o=_(()=>{var n,c;if(a.value)return((n=a.value.bundleSets)==null?void 0:n.length)>0||((c=a.value.products)==null?void 0:c.length)>0?l.value:""}),T=I(),P=b.delete();async function S(){if(r.value)await P.mutateAsync({category:r.value}),g(),T.success(`Category ${r.value.name} successfully deleted`);else throw new Error("Invalid request.")}const f=d(!1);function g(){f.value=!1}return{categories:p,selected:r,setPayload:v,affectedItemsGet:a,checkValues:o,deleteCategory:S,isModalVisible:f,closeModal:g}};m.components=Object.assign({PlusSvg:A,ProductCategoriesTable:q,BasicConfirmModal:M},m.components);var G=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Product Categories")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"/admin/products/categories/new"}},[t("PlusSvg",{staticClass:"mr-1 w-5 xl:w-5"}),e._v(" Category ")],1)]},proxy:!0},{key:"table",fn:function(){return[t("ProductCategoriesTable",{attrs:{categories:e.categories},on:{delete:e.setPayload}})]},proxy:!0}])}),e.isModalVisible&&e.selected&&e.checkValues?t("BasicConfirmModal",{attrs:{name:e.selected.name,message:`${e.checkValues}`,"items-affected":e.affectedItemsGet,type:"Products"},on:{delete:e.deleteCategory,close:e.closeModal}}):e._e()],1)},H=[];const h={};var N=x(m,G,H,!1,O,null,null,null);function O(e){for(let s in h)this[s]=h[s]}const te=function(){return N.exports}();export{te as default};
