import{c as g,aS as y,n as h,an as T,c6 as b,aF as $,r as m,c7 as A}from"./index.16267a9b.js";import{B as C}from"./BasicConfirmModal.006d5a8a.js";import{A as M,T as k}from"./AppTanStackTable.ceea4c22.js";import{I as P}from"./IsoDateTimeDisplay.ec6519c4.js";import{c as w}from"./createOnChangeFn.142dae36.js";import{u as F}from"./createSimpleTable.017a7ea9.js";import"./BasicModal.b69c59c8.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.ae0a019f.js";import"./chevron-up.736f4142.js";const d={};d.props={value:{key:"value",required:!0,type:Array}};d.setup=(e,s)=>{const t=e,r=s.emit,c=g(()=>t.value),n=w(),o=[n.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),n.accessor("bundleSource",{header:()=>"Bundle Source",enableColumnFilter:!1}),n.accessor(a=>{var l;return(l=a.meta)==null?void 0:l.updatedAt},{id:"updatedAt",header:()=>"Last Updated",cell:a=>y(P,{props:{value:a.getValue(),format:"date"}}),enableColumnFilter:!1}),n.display({id:"actions",header:"Actions",cell:({row:a})=>{var l;return y(k,{props:{actions:[{id:"edit",to:`/admin/bundles/sets/${(l=a.original.id)==null?void 0:l.value}`},{id:"delete",action(){a.original&&r("delete",a.original)}}]}})}})];return{instance:F(c,o)}};d.components=Object.assign({AppTanStackTable:M},d.components);var q=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},I=[];const S={};var Q=h(d,q,I,!1,V,null,null,null);function V(e){for(let s in S)this[s]=S[s]}const j=function(){return Q.exports}(),f={};f.setup=(e,s)=>{const t=b.list(),r=b.delete(),c=$(),n=m(),o=m(),_=m("Doing so will affect the following questionnaires:");function a(u){var i;o.value=u,n.value=(i=u.id)==null?void 0:i.value,p.value=!0}const l=g(()=>{var u,i;return(i=(u=A.get(n==null?void 0:n.value).data)==null?void 0:u.value)==null?void 0:i.questionnairePreference}),p=m(!1);async function x(){if(o.value)await r.mutateAsync(o.value),v(),c.success(`Bundle Set ${o.value.name} successfully deleted`);else throw new Error("Invalid request.")}function v(){p.value=!1}return{bundlesQuery:t,selected:o,message:_,setPayload:a,affectedItemsGet:l,isModalVisible:p,deleteBundleSet:x,closeModal:v}};f.components=Object.assign({PlusSvg:T,BundleSetsTable:j,BasicConfirmModal:C},f.components);var D=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Bundle Sets")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"/admin/bundles/sets/new"}},[t("PlusSvg",{staticClass:"-ml-1 w-5"}),t("span",[e._v("Bundle Set")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("BaseVueQuery",{attrs:{query:e.bundlesQuery},scopedSlots:e._u([{key:"success",fn:function(r){var c=r.data;return[t("BundleSetsTable",{attrs:{value:c},on:{delete:e.setPayload}})]}}])})]},proxy:!0}])}),e.isModalVisible&&e.selected?t("BasicConfirmModal",{attrs:{name:e.selected.name,message:e.message,type:"Preference Questionnaires","items-affected":e.affectedItemsGet},on:{delete:e.deleteBundleSet,close:e.closeModal}}):e._e()],1)},E=[];const B={};var L=h(f,D,E,!1,G,null,null,null);function G(e){for(let s in B)this[s]=B[s]}const Y=function(){return L.exports}();export{Y as default};
