import{f as A,g as k,h,u as D,e as G,c as S,I as E,d as r,a0 as B,n as F,bG as U}from"./index.d7842beb.js";import{A as q,T as K}from"./AppTanStackTable.cd6197a2.js";import{G as o}from"./GradeLetterDisplay.e882f1c2.js";import{c as j}from"./createOnChangeFn.10d3a00c.js";import{u as I}from"./createSimpleTable.fdde5950.js";import{u as Q}from"./useBlackKiteEntities.dd49f8f2.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.011f84e2.js";import"./chevron-up.736f4142.js";const w={list(e){return A(["companies",e,"black-kite","report-summaries"],()=>k.get(`${h}/companies/${e.value}/black-kite/report-summaries`).then(s=>s.data))}},$={create(e){const s=D();return G(()=>k.post(`${h}/companies/${e.value}/black-kite/sync`).then(a=>a.data),{onSuccess(){s.invalidateQueries(["companies",e,"black-kite","sync"],{exact:!0})}})},read(e){return A(["companies",e,"black-kite","sync"],()=>k.get(`${h}/companies/${e.value}/black-kite/sync`).then(s=>s.data))}},l={};l.props={id:{key:"id",required:!0,type:String},entities:{key:"entities",required:!0,type:Array},summaries:{key:"summaries",required:!0,type:Array}};l.setup=(e,s)=>{const a=e,c=S(()=>{const t=[];return a.entities.map(_=>{var d;const{CompanyId:f,DomainName:m,CompanyName:g}=_,p=(d=a.summaries.find(b=>b.data.DomainValue===m))==null?void 0:d.data;p&&t.push({id:f,name:g,domain:m,summary:p})}),t}),i=S(()=>c.value.map(t=>{const{id:_,name:f,domain:m,summary:g}=t,{GradeLetter:p,Reputation:d,Privacy:b,Resiliency:T,Safeguard:R,LastUpdatedAt:V}=g;return{id:_,name:f,domain:m,summary:p,reputation:d.GradeLetter,privacy:b.GradeLetter,resiliency:T.GradeLetter,safeguard:R.GradeLetter,lastUpdated:V}})),u=E(),n=j(),v=[n.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),n.accessor("domain",{header:()=>"Domain",enableColumnFilter:!1}),n.accessor("summary",{header:()=>"Summary",cell:t=>r(o,{props:{value:t.getValue()}}),enableColumnFilter:!1}),n.accessor("reputation",{header:()=>"Reputation",cell:t=>r(o,{props:{value:t.getValue()}}),enableColumnFilter:!1}),n.accessor("privacy",{header:()=>"Privacy",cell:t=>r(o,{props:{value:t.getValue()}}),enableColumnFilter:!1}),n.accessor("resiliency",{header:()=>"Resiliency",cell:t=>r(o,{props:{value:t.getValue()}}),enableColumnFilter:!1}),n.accessor("safeguard",{header:()=>"Safeguard",cell:t=>r(o,{props:{value:t.getValue()}}),enableColumnFilter:!1}),n.accessor("lastUpdated",{header:()=>"LastUpdated",cell:t=>r(B,{props:{value:t.getValue(),format:"date"}}),enableColumnFilter:!1}),n.display({id:"actions",header:"Actions",cell:({row:t})=>r(K,{props:{actions:[{id:"view",action(){u.push(`/admin/companies/${a.id}/rating-service-2/entities/${t.original.id}`)}}]}})})];return{instance:I(i,v)}};l.components=Object.assign({AppTanStackTable:q},l.components);var M=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("AppTanStackTable",{attrs:{table:e.instance}})},N=[];const L={};var P=F(l,M,N,!1,H,null,null,null);function H(e){for(let s in L)this[s]=L[s]}const O=function(){return P.exports}(),y={};y.setup=(e,s)=>{const a=U("id"),c=$.read(a),i=$.create(a),u=Q.list(a),n=w.list(a),v=S(()=>i.isLoading.value||u.isLoading.value||n.isLoading.value);async function C(){await i.mutateAsync()}return{id:a,syncStatus:c,entities:u,summaries:n,isLoading:v,runSync:C}};y.components=Object.assign({DateIsoStringDisplay:B,BlackKiteEntityTable:O},y.components);var z=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("main",{staticClass:"flex flex-col space-y-6"},[a("div",{staticClass:"space-y-1"},[a("BaseButton",{attrs:{shape:"rectangle",type:"button",disabled:e.isLoading},on:{click:e.runSync}},[e._v(" Update ")]),a("BaseVueQuery",{attrs:{query:e.syncStatus},scopedSlots:e._u([{key:"success",fn:function(c){var i=c.data;return[a("BaseTypography",{staticClass:"uppercase text-gray-500",attrs:{variant:"overline"}},[e._v(" Last Updated: "),a("DateIsoStringDisplay",{attrs:{value:i.meta.updatedAt}})],1)]}}])})],1),a("BlackKiteEntityTable",{attrs:{id:e.id,entities:e.entities.data.value||[],summaries:e.summaries.data.value||[]}})],1)},J=[];const x={};var W=F(y,z,J,!1,X,null,null,null);function X(e){for(let s in x)this[s]=x[s]}const oe=function(){return W.exports}();export{oe as default};
