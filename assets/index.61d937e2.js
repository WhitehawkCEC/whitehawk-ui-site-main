import{a6 as g,n as p,W as $,f as C,u as T,e as k,g as d,h as y,B,bH as F,r as M,c as D,I as O}from"./index.2de808b0.js";import{T as R}from"./ToolTip.211fedef.js";import{A as W}from"./AppTanStackTable.ffb632cf.js";import{c as q}from"./createOnChangeFn.4317f30d.js";import{u as w}from"./createSimpleTable.4c9decb4.js";import{D as A}from"./DynamicForm.ede41704.js";import{S as P}from"./StatusInput.14ff22c6.js";import"./exclamation-triangle.54812a62.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.d34a1e0c.js";import"./chevron-up.736f4142.js";const i={};i.props={matches:{key:"matches",required:!0,type:Array}};i.setup=(e,s)=>{const t=e,{matches:n}=g(t),a=q(),o=[a.accessor(r=>r.cyberOne.id,{id:"id",header:()=>"ID",enableColumnFilter:!1}),a.accessor(r=>r.cyberOne.name,{id:"name",header:()=>"Name",enableColumnFilter:!1}),a.accessor(r=>r.cyberOne.domain,{id:"domain",header:()=>"Domain",enableColumnFilter:!1}),a.accessor(r=>r.supplyWisdom.name,{id:"supplyWisdomName",header:()=>"Supply Wisdom",enableColumnFilter:!1})];return{instance:w(n,o)}};i.components=Object.assign({AppTanStackTable:W},i.components);var j=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},L=[];const _={};var E=p(i,j,L,!1,I,null,null,null);function I(e){for(let s in _)this[s]=_[s]}const Q=function(){return E.exports}(),u={};u.props={value:{key:"value",required:!1,type:null},matches:{key:"matches",required:!0,type:Array}};u.setup=(e,s)=>{const t=e,n=s.emit;return{proxy:$(t,n),schema:[{name:"status",label:"Status",component:{is:P,attrs:{required:!0}}}]}};u.components=Object.assign({DynamicForm:A},u.components);var U=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("DynamicForm",{attrs:{schema:e.schema},model:{value:e.proxy,callback:function(n){e.proxy=n},expression:"proxy"}})},H=[];const f={};var N=p(u,U,H,!1,V,null,null,null);function V(e){for(let s in f)this[s]=f[s]}const z=function(){return N.exports}(),v={get(e){return C(["companies",e,"cyber-one","matched-pairs","supply-wisdom"],()=>d.get(`${y}/companies/${e.value}/cyber-one/matched-pairs-supply-wisdom`).then(s=>s.data))},update(e){const s=T();return k(t=>d.post(`${y}/companies/${e.value}/cyber-one/matched-pairs-supply-wisdom/sync`,t).then(n=>n.data),{onSuccess(){s.invalidateQueries(["companies",e,"cyber-one","matched-pairs","supply-wisdom"],{exact:!0})}})}},l={};l.setup=(e,s)=>{const t=F("id"),n=v.get(t),a=M(),o=D({get(){if(a.value)return a.value;const c=new Date,S=c.getFullYear(),x=`Q${Math.ceil((c.getMonth()+1)/4)}`;return{id:t.value,matchedPair:n.data.value||[],status:{state:"COMPLETE",year:S,quarter:x}}},set(c){c&&(a.value=c)}}),m=O(),r=v.update(t);async function b(){o.value&&(await r.mutateAsync(o.value)).data&&m.push("../")}return{matches:n,sync:o,syncUpdate:r,upload:b}};l.components=Object.assign({SupplyWisdomMatchedPairsTable:Q,ToolTip:R,SupplyWisdomSyncInput:z,LoadingSpinner:B},l.components);var Y=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("main",{staticClass:"space-y-6"},[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"overline",fn:function(){return[e._v("VRM Dashboard")]},proxy:!0},{key:"title",fn:function(){return[e._v("Business Rating Sync")]},proxy:!0},{key:"table",fn:function(){return[t("SupplyWisdomMatchedPairsTable",{attrs:{matches:e.matches.data.value||[]}})]},proxy:!0}])}),t("BaseSimpleCard",{staticClass:"divide-y"},[t("div",{staticClass:"flex items-center space-y-1 space-x-1 p-4"},[t("BaseTypography",{attrs:{variant:"subtitle3",component:"h2"}},[e._v(" Sync Business Rating Assets ")]),t("ToolTip",[e._v(" This will sync the documents for the assets listed above to CyberOne. ")])],1),t("form",{staticClass:"divide-y",on:{submit:function(n){return n.preventDefault(),e.upload.apply(null,arguments)}}},[t("BaseVueQuery",{attrs:{query:e.matches},scopedSlots:e._u([{key:"success",fn:function(n){var a=n.data;return[t("SupplyWisdomSyncInput",{attrs:{matches:a},model:{value:e.sync,callback:function(o){e.sync=o},expression:"sync"}})]}}])}),t("div",{staticClass:"p-4"},[t("BaseButton",{attrs:{disabled:e.syncUpdate.isLoading.value}},[e.syncUpdate.isLoading.value?t("LoadingSpinner"):t("span",[e._v("Sync")])],1)],1)],1)])],1)},G=[];const h={};var J=p(l,Y,G,!1,K,null,null,null);function K(e){for(let s in h)this[s]=h[s]}const pe=function(){return J.exports}();export{pe as default};
