import{aq as k,bZ as S,c6 as B,d as a,c7 as I,cE as T,c3 as w,c5 as R,aJ as A,n as Q}from"./index.9e932179.js";import{S as j,a as q}from"./SubscriptionProductsTable.49d867e4.js";import"./DateRangeDisplay.08a52335.js";import"./IsoDateTimeDisplay.3ad0a41d.js";import"./AppTanStackTable.f4f1ba24.js";import"./createOnChangeFn.d6d59161.js";import"./chevron-up.736f4142.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.4501a89f.js";import"./createSimpleTable.a17270bd.js";const p={};p.setup=(s,i)=>{const t=S("id"),e=S("subscriptionId"),c=B.list(t,e),m=a(()=>c.data.value||[]),f=I(),_=a(()=>f.pinnedProductIds),h=a(()=>{const n=[];return m.value.filter(r=>{var o,u;return((u=(o=r.product)==null?void 0:o.id)==null?void 0:u.value)&&_.value.includes(r.product.id.value)?n.push(r):T.SubscriptionProductWithConfigType.create()}),n.sort((r,o)=>r.product&&o.product?r.product.name.localeCompare(o.product.name):-1)||[]}),x=w.read(t,e),b=a(()=>{var n;return((n=x.data.value)==null?void 0:n.features)||R.SubscriptionFeatures.create()}),d=A(),C=a(()=>{var l,r;const n=new Map;for(const o of m.value){const u=((r=(l=o.product)==null?void 0:l.id)==null?void 0:r.value)||"",$=[{id:"view",action(){b.value.hasGroups?d.push(`/admin/companies/${t.value}/subscriptions/${e.value}/products/${u}/groups`):d.push(`/admin/companies/${t.value}/subscriptions/${e.value}/products/${u}`)}},{id:"edit",action(){d.push(`/admin/companies/${t.value}/subscriptions/${e.value}/products/${u}/settings`)}},{id:"pinProduct",action(){f.setPinned(u)}}].filter(v=>{var P,y;return((y=(P=o.product)==null?void 0:P.id)==null?void 0:y.value)&&_.value.includes(o.product.id.value)||b.value.hasGroups?v.id!=="pinProduct":v});n.set(u,$)}return n});return{id:t,subscriptionId:e,productsQuery:c,pinnedProducts:h,actions:C}};p.components=Object.assign({SubscriptionProductCard:j,PlusSvg:k,SubscriptionProductsTable:q},p.components);var E=function(){var s=this,i=s.$createElement,t=s._self._c||i;return t("section",{staticClass:"space-y-6"},[s.pinnedProducts.length>0?t("div",{staticClass:"space-y-2"},[t("BaseTypography",{staticClass:"uppercase text-gray-600",attrs:{variant:"overline"}},[s._v(" Pinned Products ")]),t("ul",{staticClass:"grid grid-cols-1 gap-4 sm:gap-6 lg:grid-cols-2 2xl:grid-cols-3"},s._l(s.pinnedProducts,function(e,c){return t("li",{key:c},[t("SubscriptionProductCard",{attrs:{id:s.id,"subscription-id":s.subscriptionId,product:e}})],1)}),0)],1):s._e(),t("BaseTablePageLayout",{scopedSlots:s._u([{key:"title",fn:function(){return[s._v("Subscription Products")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"space-x-1",attrs:{to:"./new",append:""}},[t("PlusSvg",{staticClass:"w-5"}),t("span",[s._v("Product")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("BaseVueQuery",{attrs:{query:s.productsQuery},scopedSlots:s._u([{key:"success",fn:function(e){var c=e.data;return[t("SubscriptionProductsTable",{attrs:{value:c,"mapped-actions":s.actions}})]}}])})]},proxy:!0}])})],1)},F=[];const g={};var G=Q(p,E,F,!1,M,null,null,null);function M(s){for(let i in g)this[i]=g[i]}const X=function(){return G.exports}();export{X as default};
