import{n as g,bF as j,c as B,b as F,d as v,aF as A,aS as _,bs as D,ca as C}from"./index.c06698c6.js";import{A as E,T as O}from"./AppTanStackTable.cff7974f.js";import{T as L}from"./ToolTip.4b00e8fb.js";import{S as N}from"./StarLevelDisplay.7ae4a59f.js";import{c as R}from"./createOnChangeFn.18916bf6.js";import{u as M}from"./_baseEach.dab6b06a.js";import{u as q}from"./createSimpleTable.275c1552.js";import{l as K}from"./lodash.7d0f962f.js";import{g as V}from"./groupBy.842b1e5d.js";import{K as z}from"./KnownStandardCodes.dc74bde0.js";import"./magnifying-glass.b7cbe8fe.js";import"./keys.bf48ec14.js";import"./chevron-up.736f4142.js";import"./_baseAssignValue.acd4faae.js";import"./_Uint8Array.6c295c15.js";import"./_baseIteratee.f0011905.js";import"./_baseIsEqual.9a5b1bb5.js";import"./_arrayMap.dcea68f3.js";const p={};p.props={value:{key:"value",required:!0,type:String}};p.setup=(e,t)=>({});p.components=Object.assign({ToolTip:L},p.components);var G=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"flex items-center space-x-2"},[o("BaseTypography",{staticClass:"text-gray-500 group-hover:text-blue-500",attrs:{variant:"p2",component:"p"}},[e._v(" "+e._s(e.value)+" ")]),o("ToolTip",[e._v(" Confidence percentages are based on the number of previously saved data points available. ")])],1)},H=[];const $={};var P=g(p,G,H,!1,U,null,null,null);function U(e){for(let t in $)this[t]=$[t]}const W=function(){return P.exports}(),m={};m.props={value:{key:"value",required:!0,type:String}};m.setup=(e,t)=>({isShowing:F(!1)});m.components=Object.assign({TransitionExpand:j,ToggleButton:B},m.components);var J=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"flex max-w-3xl items-end justify-between space-x-2"},[o("TransitionExpand",[o("BaseTypography",{staticClass:"max-w-xs text-gray-500 group-hover:text-blue-500",class:e.isShowing?"max-h-[220rem]":"max-h-6 truncate",attrs:{variant:"p2",component:"p"}},[e._v(" "+e._s(e.value)+" ")])],1),o("ToggleButton",{class:e.isShowing?"rotate-180 transform transition duration-500":"",attrs:{"aria-label":"Toggle description"},model:{value:e.isShowing,callback:function(r){e.isShowing=r},expression:"isShowing"}})],1)},Q=[];const k={};var X=g(m,J,Q,!1,Y,null,null,null);function Y(e){for(let t in k)this[t]=k[t]}const Z=function(){return X.exports}(),d={};d.props={id:{key:"id",required:!0,type:String},controls:{key:"controls",required:!0,type:Array}};d.setup=(e,t)=>{const o=e,r=v(()=>o.id),s=v(()=>o.controls.map(f=>{var S,T;const{ItemCode:l,StarLevel:n,Confidence:h,ItemDescription:b}=f,u=b.split(`
`);return{itemCode:l,starLevel:n,confidence:`${h.toFixed(0)}%`,name:u[1]?(S=u[0])==null?void 0:S.trim():void 0,description:u[1]?u[1].trim()||"":((T=u[0])==null?void 0:T.trim())||""}})),c=A(),i=M.create(),a=R(),x=v(()=>{const f=[a.accessor("itemCode",{header:()=>"Code",enableColumnFilter:!1}),a.accessor(n=>n.name,{id:"name",header:()=>"Name",enableColumnFilter:!1}),a.accessor("description",{header:()=>"Description",cell:n=>_(Z,{props:{value:n.getValue()}}),enableColumnFilter:!1}),a.accessor("starLevel",{header:()=>"Star Level",cell:n=>_(N,{props:{value:n.getValue()}}),enableColumnFilter:!1}),a.accessor("confidence",{header:()=>"Confidence",cell:n=>_(W,{props:{value:n.getValue()}}),enableColumnFilter:!1}),a.display({id:"actions",header:"Actions",cell:({row:n})=>_(O,{props:{actions:[{id:"add",async action(){const h={companyId:r.value,category:"pending",todoText:n.original.name||n.original.description,itemComplete:!1,order:0,readOnly:!1,createdAt:new Date().toISOString()};await i.mutateAsync(h)&&c.success("Successfully added to action plan.")}}]}})})],l=[];return s.value.forEach(({name:n})=>n?l.push(!0):l.push(!1)),l.includes(!1)?f.filter(n=>n.id!=="name"):f});return{instance:q(s,x)}};d.components=Object.assign({AppTanStackTable:E},d.components);var ee=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("AppTanStackTable",{attrs:{table:e.instance}})},te=[];const w={};var oe=g(d,ee,te,!1,ne,null,null,null);function ne(e){for(let t in w)this[t]=w[t]}const re=function(){return oe.exports}(),se={read(e,t){const o=z.find(r=>r.frameworkId===e.value);if(o){const r=o.data,s=V(r.Controls,"AreaName"),c=ce(s),i=ae(t.value);return c[i]}}};function ae(e){return e.split("-").join(" ").toLocaleUpperCase()}function ce(e){const t=new Map;for(const[o,r]of Object.entries(e)){const s=o.toLocaleUpperCase();t.set(s,r)}return Object.fromEntries(t)}const y={};y.setup=(e,t)=>{const o=C("id"),r=C("frameworkId"),s=C("controlId"),c=se.read(r,s),i=v(()=>c?K.exports.sortBy(c,"ItemCode"):[]);function a(x){return x.split("-").join(" ")}return{id:o,frameworkId:r,controlId:s,sorted:i,formatId:a}};y.components=Object.assign({BackButton:D,ComplianceControlsTable:re},y.components);var ie=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("BaseTablePageLayout",{scopedSlots:e._u([{key:"backButton",fn:function(){return[o("BackButton",{attrs:{link:".."}})]},proxy:!0},{key:"overline",fn:function(){return[e._v(" "+e._s(e.frameworkId)+" ")]},proxy:!0},{key:"title",fn:function(){return[o("span",{staticClass:"capitalize"},[e._v(e._s(e.formatId(e.controlId)))])]},proxy:!0},{key:"table",fn:function(){return[o("ComplianceControlsTable",{attrs:{id:e.id,"framework-id":e.frameworkId,"control-id":e.controlId,controls:e.sorted}})]},proxy:!0}])})},le=[];const I={};var ue=g(y,ie,le,!1,pe,null,null,null);function pe(e){for(let t in I)this[t]=I[t]}const Fe=function(){return ue.exports}();export{Fe as default};
