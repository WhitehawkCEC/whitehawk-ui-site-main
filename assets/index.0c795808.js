import{an as $,c8 as P,ce as h,ch as w,c as u,ci as B,cg as I,n as C}from"./index.29a58bc5.js";import{S as D,P as R,a as A}from"./SubscriptionProductsTable.0ba472b2.js";import"./DateRangeDisplay.f066a937.js";import"./IsoDateTimeDisplay.176892ad.js";import"./AppVDateRangePicker.0be99645.js";import"./index.a123443d.js";import"./index.2d84c77b.js";import"./index.d5fa21d1.js";import"./index.f1eb8732.js";import"./index.87e44ac4.js";import"./AppTanStackTable.fc864a1c.js";import"./createOnChangeFn.6eade59b.js";import"./chevron-up.736f4142.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.71e59398.js";import"./createSimpleTable.69daa32a.js";const c={};c.setup=(t,r)=>{const s=P("id"),e=P("subscriptionId"),o=h.read(s,e),d=w.list(s,e),l=u(()=>d.data.value||[]),m=B(),x=u(()=>m.pinnedProductIds),v=u(()=>{var n;return((n=o.data.value)==null?void 0:n.features)||I.SubscriptionFeatures.create()}),g=u(()=>{var f,_;const n=new Map;for(const a of l.value){const i=((_=(f=a.product)==null?void 0:f.id)==null?void 0:_.value)||"",k=[{id:"view",to:`/admin/companies/${s.value}/subscriptions/${e.value}/products/${i}`},{id:"edit",to:`/admin/companies/${s.value}/subscriptions/${e.value}/products/${i}/settings`},{id:"pinProduct",action(){m.setPinned(i)}}].filter(p=>{var b,y;return((y=(b=a.product)==null?void 0:b.id)==null?void 0:y.value)&&x.value.includes(a.product.id.value)||v.value.hasGroups||v.value.hasSuppliers?p.id!=="pinProduct":p});n.set(i,k)}return n});return{id:s,subscriptionId:e,subscriptionRead:o,productsList:d,products:l,actions:g}};c.components=Object.assign({SubscriptionOverviewDisplay:D,PinnedProductsDisplay:R,PlusSvg:$,SubscriptionProductsTable:A},c.components);var L=function(){var t=this,r=t.$createElement,s=t._self._c||r;return s("section",{staticClass:"space-y-6"},[s("BaseVueQuery",{attrs:{query:t.subscriptionRead},scopedSlots:t._u([{key:"success",fn:function(e){var o=e.data.status;return[o?s("SubscriptionOverviewDisplay",{attrs:{status:o}}):t._e()]}}])}),s("PinnedProductsDisplay",{attrs:{"company-id":t.id,"sub-id":t.subscriptionId,products:t.products}}),s("BaseTablePageLayout",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Subscription Products")]},proxy:!0},{key:"button",fn:function(){return[s("BaseButton",{staticClass:"space-x-1",attrs:{to:"./products/new",append:""}},[s("PlusSvg",{staticClass:"w-5"}),s("span",[t._v("Product")])],1)]},proxy:!0},{key:"table",fn:function(){return[s("BaseVueQuery",{attrs:{query:t.productsList},scopedSlots:t._u([{key:"success",fn:function(e){var o=e.data;return[s("SubscriptionProductsTable",{attrs:{value:o,"mapped-actions":t.actions}})]}}])})]},proxy:!0}])})],1)},O=[];const S={};var T=C(c,L,O,!1,j,null,null,null);function j(t){for(let r in S)this[r]=S[r]}const tt=function(){return T.exports}();export{tt as default};
