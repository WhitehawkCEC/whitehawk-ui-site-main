import{ai as T,aP as S,aQ as C,aT as D,aE as E,d as v,aJ as G,aS as r,br as A,n as B,b_ as U}from"./index.527c0ae3.js";import{A as q,T as K}from"./AppTanStackTable.0e2eec87.js";import{G as o}from"./GradeLetterDisplay.085cc584.js";import{c as Q}from"./createOnChangeFn.5c35f50f.js";import{u as j}from"./createSimpleTable.3217fbbf.js";import{u as I}from"./useBlackKiteEntities.045cb1af.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.50560a31.js";import"./chevron-up.736f4142.js";const P={list(e){return T(["companies",e,"black-kite","report-summaries"],()=>S.get(`${C}/companies/${e.value}/black-kite/report-summaries`).then(s=>s.data))}},$={create(e){const s=D();return E(()=>S.post(`${C}/companies/${e.value}/black-kite/sync`).then(a=>a.data),{onSuccess(){s.invalidateQueries(["companies",e,"black-kite","sync"],{exact:!0})}})},read(e){return T(["companies",e,"black-kite","sync"],()=>S.get(`${C}/companies/${e.value}/black-kite/sync`).then(s=>s.data))}},l={};l.props={id:{key:"id",required:!0,type:String},entities:{key:"entities",required:!0,type:Array},summaries:{key:"summaries",required:!0,type:Array}};l.setup=(e,s)=>{const a=e,c=v(()=>a.id),i=v(()=>{const t=[];return a.entities.map(b=>{var y;const{CompanyId:g,DomainName:p,CompanyName:k}=b,d=(y=a.summaries.find(h=>h.data.DomainValue===p))==null?void 0:y.data;d&&t.push({id:g,name:k,domain:p,summary:d})}),t}),u=v(()=>i.value.map(t=>{const{id:b,name:g,domain:p,summary:k}=t,{GradeLetter:d,Reputation:y,Privacy:h,Resiliency:F,Safeguard:R,LastUpdatedAt:V}=k;return{id:b,name:g,domain:p,summary:d,reputation:y.GradeLetter,privacy:h.GradeLetter,resiliency:F.GradeLetter,safeguard:R.GradeLetter,lastUpdated:V}})),m=G(),n=Q(),f=[n.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),n.accessor("domain",{header:()=>"Domain",enableColumnFilter:!1}),n.accessor("summary",{header:()=>"Summary",cell:t=>r(o,{props:{value:t.getValue()}}),enableColumnFilter:!1}),n.accessor("reputation",{header:()=>"Reputation",cell:t=>r(o,{props:{value:t.getValue()}}),enableColumnFilter:!1}),n.accessor("privacy",{header:()=>"Privacy",cell:t=>r(o,{props:{value:t.getValue()}}),enableColumnFilter:!1}),n.accessor("resiliency",{header:()=>"Resiliency",cell:t=>r(o,{props:{value:t.getValue()}}),enableColumnFilter:!1}),n.accessor("safeguard",{header:()=>"Safeguard",cell:t=>r(o,{props:{value:t.getValue()}}),enableColumnFilter:!1}),n.accessor("lastUpdated",{header:()=>"LastUpdated",cell:t=>r(A,{props:{value:t.getValue(),format:"date"}}),enableColumnFilter:!1}),n.display({id:"actions",header:"Actions",cell:({row:t})=>r(K,{props:{actions:[{id:"view",action(){m.push(`/admin/companies/${c.value}/rating-service-2/entities/${t.original.id}`)}}]}})})];return{instance:j(u,f)}};l.components=Object.assign({AppTanStackTable:q},l.components);var w=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("AppTanStackTable",{attrs:{table:e.instance}})},M=[];const L={};var N=B(l,w,M,!1,H,null,null,null);function H(e){for(let s in L)this[s]=L[s]}const O=function(){return N.exports}(),_={};_.setup=(e,s)=>{const a=U("id"),c=$.read(a),i=$.create(a),u=I.list(a),m=P.list(a),n=v(()=>i.isLoading.value||u.isLoading.value||m.isLoading.value);async function f(){await i.mutateAsync()}return{id:a,syncStatus:c,entities:u,summaries:m,isLoading:n,runSync:f}};_.components=Object.assign({DateIsoStringDisplay:A,BlackKiteEntityTable:O},_.components);var z=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("main",{staticClass:"flex flex-col space-y-6"},[a("div",{staticClass:"space-y-1"},[a("BaseButton",{attrs:{shape:"rectangle",type:"button",disabled:e.isLoading},on:{click:e.runSync}},[e._v(" Update ")]),a("BaseVueQuery",{attrs:{query:e.syncStatus},scopedSlots:e._u([{key:"success",fn:function(c){var i=c.data;return[a("BaseTypography",{staticClass:"uppercase text-gray-500",attrs:{variant:"overline"}},[e._v(" Last Updated: "),a("DateIsoStringDisplay",{attrs:{value:i.meta.updatedAt}})],1)]}}])})],1),a("BlackKiteEntityTable",{attrs:{id:e.id,entities:e.entities.data.value||[],summaries:e.summaries.data.value||[]}})],1)},J=[];const x={};var W=B(_,z,J,!1,X,null,null,null);function X(e){for(let s in x)this[s]=x[s]}const le=function(){return W.exports}();export{le as default};
