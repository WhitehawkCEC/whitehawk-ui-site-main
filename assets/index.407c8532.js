import{aT as M,aD as $,ag as Q,aP as b,aQ as x,bs as V,aO as j,n as C,c as F,aK as q,aF as D,aS as g,bV as N,an as E,r as S}from"./index.7d12495e.js";import{B as O}from"./BasicConfirmModal.6141fc76.js";import{A as L,R as z}from"./RowSelectionInput.d25a8107.js";import{A as H,T as U}from"./AppTanStackTable.ece411d4.js";import{c as X}from"./createOnChangeFn.a7d8fbe9.js";import{u as K}from"./useProducts.b9c92f36.js";import{u as G}from"./createSimpleTable.d7c75987.js";import{u as w}from"./useManufacturers.c7d76c3b.js";import"./BasicModal.3d8f7b61.js";import"./magnifying-glass.b7cbe8fe.js";import"./TransitionExpand.0c3e3117.js";import"./chevron-up.736f4142.js";const T={create(){const e=M();return $(s=>b.post(`${x}/featured-manufacturers`,s).then(t=>t.data),{onSuccess(){e.invalidateQueries(["manufacturers"],{exact:!0})}})},delete(){const e=M();return $(s=>b.delete(`${x}/featured-manufacturers/${s}`).then(t=>t.data),{onSuccess(){e.invalidateQueries(["manufacturers"],{exact:!0})}})},list(){return Q(["featured-manufacturers"],()=>b.get(`${x}/featured-manufacturers`).then(e=>e.data))}},l={};l.props={value:{key:"value",required:!1,type:String},remove:{key:"remove",required:!0,type:Function}};l.setup=(e,s)=>({});l.components=Object.assign({DateIsoStringDisplay:V,XSvg:j},l.components);var J=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.value?t("div",{staticClass:"flex items-center space-x-1"},[t("DateIsoStringDisplay",{staticClass:"inline-flex items-center rounded bg-indigo-100 px-2 py-0.5 text-xs font-medium uppercase leading-4 tracking-widest text-indigo-800",attrs:{value:e.value,format:"date"}}),t("BaseIcon",{attrs:{color:"danger",size:"small",action:"secondary"},on:{click:e.remove}},[t("XSvg",{staticClass:"w-3"})],1)],1):e._e()},W=[];const k={};var Y=C(l,J,W,!1,Z,null,null,null);function Z(e){for(let s in k)this[s]=k[s]}const ee=function(){return Y.exports}(),d={};d.props={manufacturers:{key:"manufacturers",required:!0,type:Array}};d.setup=(e,s)=>{const t=e,u=s.emit,o=F(()=>t.manufacturers.map(a=>{const{id:n,name:y,url:R,featured:I}=a;return{id:n,name:y,url:R,featured:I,productCount:c(n)}}));function c(a){const n=[];return i.value.map(y=>{y.manufacturer.id===a&&n.push(y)}),n.length}const f=K.list(),i=F(()=>f.data.value||[]),m=q(),p=D(),_=T.create(),v=T.delete(),r=X(),P=[r.display({id:"select",header:({table:a})=>g(L,{props:{table:a}}),cell:({row:a})=>g(z,{props:{row:a}})}),r.accessor("id",{header:()=>"ID",enableColumnFilter:!1}),r.accessor("name",{header:()=>"Name",enableColumnFilter:!1}),r.accessor("url",{header:()=>"URL",enableColumnFilter:!1}),r.accessor(a=>a.featured,{id:"featured",header:()=>"Featured",cell:a=>g(ee,{props:{value:a.getValue(),async remove(){await v.mutateAsync(a.row.original.id)&&p.success("Featured removed successfully.")}}}),enableColumnFilter:!1}),r.accessor(a=>a.productCount,{id:"productCount",header:()=>"Product Count",enableColumnFilter:!1}),r.display({id:"actions",header:"Actions",cell:({row:a})=>g(U,{props:{actions:[{id:"view",action(){m.push(`/admin/manufacturers/${a.original.id}/products`)}},{id:"edit",action(){m.push(`/admin/manufacturers/${a.original.id}`)}},{id:"delete",action(){u("delete",a.original)}},{id:"setFeatured",async action(){await _.mutateAsync({id:a.original.id,name:a.original.name})&&p.success("Successfully featured manufacturer.")}}].filter(n=>a.original.featured?n.id!=="setFeatured"&&n.id!=="delete":a.original.productCount>1&&!a.original.featured?n.id!=="delete":n)}})})];return{instance:G(o,P)}};d.components=Object.assign({AppTanStackTable:H},d.components);var te=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},ae=[];const A={};var se=C(d,te,ae,!1,ne,null,null,null);function ne(e){for(let s in A)this[s]=A[s]}const re=function(){return se.exports}(),h={};h.setup=(e,s)=>{const t=w.list(),u=D(),o=w.delete(),c=S(""),f=S(""),i=S(!1);function m(v){c.value=v.id,f.value=v.name,i.value=!0}async function p(){c?(await o.mutateAsync(c.value),_(),u.success("Successfully deleted manufacturer.")):u.error("Something went wrong.")}function _(){i.value=!1}return{manufacturers:t,manufacturerName:f,isModalVisible:i,toggleModal:m,deleteManufacturer:p,closeModal:_}};h.components=Object.assign({BaseTablePageLayout:N,PlusSvg:E,ManufacturersTable:re,BasicConfirmModal:O},h.components);var ue=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Manufacturers")]},proxy:!0},{key:"button",fn:function(){return[t("BaseButton",{staticClass:"w-full space-x-2 md:w-auto",attrs:{to:"/admin/manufacturers/new"}},[t("PlusSvg",{staticClass:"h-auto w-4 xl:w-5"}),t("span",[e._v("Manufacturer")])],1)]},proxy:!0},{key:"table",fn:function(){return[t("BaseVueQuery",{attrs:{query:e.manufacturers},scopedSlots:e._u([{key:"success",fn:function(u){var o=u.data;return[t("ManufacturersTable",{attrs:{manufacturers:o},on:{delete:e.toggleModal}})]}}])})]},proxy:!0}])}),t("BasicConfirmModal",{directives:[{name:"show",rawName:"v-show",value:e.isModalVisible,expression:"isModalVisible"}],attrs:{name:e.manufacturerName},on:{delete:e.deleteManufacturer,close:e.closeModal}})],1)},oe=[];const B={};var ce=C(h,ue,oe,!1,ie,null,null,null);function ie(e){for(let s in B)this[s]=B[s]}const Ce=function(){return ce.exports}();export{Ce as default};
