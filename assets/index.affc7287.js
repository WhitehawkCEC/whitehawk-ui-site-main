import{bO as $,n as p,aB as g,ah as C,aS as T,aD as k,aO as d,aP as y,L as O,bX as B,r as D,c as F,aI as M}from"./index.80bd34b1.js";import{T as R}from"./ToolTip.7bdf1a72.js";import{A as P}from"./AppTanStackTable.79c9a17d.js";import{c as W}from"./createOnChangeFn.512878db.js";import{u as q}from"./createSimpleTable.ede4d922.js";import{D as w}from"./DynamicForm.c1121e06.js";import{S as A}from"./StatusInput.098c4bbf.js";import"./exclamation-triangle.54812a62.js";import"./magnifying-glass.b7cbe8fe.js";import"./chevron-left.0808b01b.js";import"./TransitionExpand.d91fad45.js";import"./chevron-up.736f4142.js";const i={};i.props={matches:{key:"matches",required:!0,type:Array}};i.setup=(e,s)=>{const t=e,{matches:a}=$(t),n=W(),o=[n.accessor(r=>r.cyberOne.id,{id:"id",header:()=>"ID",enableColumnFilter:!1}),n.accessor(r=>r.cyberOne.name,{id:"name",header:()=>"Name",enableColumnFilter:!1}),n.accessor(r=>r.cyberOne.domain,{id:"domain",header:()=>"Domain",enableColumnFilter:!1}),n.accessor(r=>r.supplyWisdom.name,{id:"supplyWisdomName",header:()=>"Supply Wisdom",enableColumnFilter:!1})];return{instance:q(a,o)}};i.components=Object.assign({AppTanStackTable:P},i.components);var L=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AppTanStackTable",{attrs:{table:e.instance}})},j=[];const _={};var E=p(i,L,j,!1,I,null,null,null);function I(e){for(let s in _)this[s]=_[s]}const Q=function(){return E.exports}(),u={};u.props={value:{key:"value",required:!1,type:null},matches:{key:"matches",required:!0,type:Array}};u.setup=(e,s)=>{const t=e,a=s.emit;return{proxy:g(t,a),schema:[{name:"status",label:"Status",component:{is:A,attrs:{required:!0}}}]}};u.components=Object.assign({DynamicForm:w},u.components);var U=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("DynamicForm",{attrs:{schema:e.schema},model:{value:e.proxy,callback:function(a){e.proxy=a},expression:"proxy"}})},H=[];const f={};var N=p(u,U,H,!1,V,null,null,null);function V(e){for(let s in f)this[s]=f[s]}const z=function(){return N.exports}(),v={get(e){return C(["companies",e,"cyber-one","matched-pairs","supply-wisdom"],()=>d.get(`${y}/companies/${e.value}/cyber-one/matched-pairs-supply-wisdom`).then(s=>s.data))},update(e){const s=T();return k(t=>d.post(`${y}/companies/${e.value}/cyber-one/matched-pairs-supply-wisdom/sync`,t).then(a=>a.data),{onSuccess(){s.invalidateQueries(["companies",e,"cyber-one","matched-pairs","supply-wisdom"],{exact:!0})}})}},l={};l.setup=(e,s)=>{const t=B("id"),a=v.get(t),n=D(),o=F({get(){if(n.value)return n.value;const c=new Date,S=c.getFullYear(),x=`Q${Math.ceil((c.getMonth()+1)/4)}`;return{id:t.value,matchedPair:a.data.value||[],status:{state:"COMPLETE",year:S,quarter:x}}},set(c){c&&(n.value=c)}}),m=M(),r=v.update(t);async function b(){o.value&&(await r.mutateAsync(o.value)).data&&m.push("../")}return{matches:a,sync:o,syncUpdate:r,upload:b}};l.components=Object.assign({SupplyWisdomMatchedPairsTable:Q,ToolTip:R,SupplyWisdomSyncInput:z,LoadingSpinner:O},l.components);var X=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("main",{staticClass:"space-y-6"},[t("BaseTablePageLayout",{scopedSlots:e._u([{key:"overline",fn:function(){return[e._v("VRM Dashboard")]},proxy:!0},{key:"title",fn:function(){return[e._v("Business Rating Sync")]},proxy:!0},{key:"table",fn:function(){return[t("SupplyWisdomMatchedPairsTable",{attrs:{matches:e.matches.data.value||[]}})]},proxy:!0}])}),t("BaseSimpleCard",{staticClass:"divide-y"},[t("div",{staticClass:"flex items-center space-y-1 space-x-1 p-4"},[t("BaseTypography",{attrs:{variant:"subtitle3",component:"h2"}},[e._v(" Sync Business Rating Assets ")]),t("ToolTip",[e._v(" This will sync the documents for the assets listed above to CyberOne. ")])],1),t("form",{staticClass:"divide-y",on:{submit:function(a){return a.preventDefault(),e.upload.apply(null,arguments)}}},[t("BaseVueQuery",{attrs:{query:e.matches},scopedSlots:e._u([{key:"success",fn:function(a){var n=a.data;return[t("SupplyWisdomSyncInput",{attrs:{matches:n},model:{value:e.sync,callback:function(o){e.sync=o},expression:"sync"}})]}}])}),t("div",{staticClass:"p-4"},[t("BaseButton",{attrs:{disabled:e.syncUpdate.isLoading.value}},[e.syncUpdate.isLoading.value?t("LoadingSpinner"):t("span",[e._v("Sync")])],1)],1)],1)])],1)},Y=[];const h={};var G=p(l,X,Y,!1,J,null,null,null);function J(e){for(let s in h)this[s]=h[s]}const pe=function(){return G.exports}();export{pe as default};
